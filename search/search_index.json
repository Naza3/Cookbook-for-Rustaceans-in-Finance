{"config":{"lang":["zh"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Cookbook for Rustaceans in Finance / Rust\u91cf\u5316\u91d1\u878d\u5f00\u53d1\u6307\u5357","text":"<p>/Arthur Zhang \u5f20\u5ca9</p>"},{"location":"#preface","title":"Preface \u5e8f","text":"<p>\u8363\u5e78\u5411\u793e\u533a\u4ecb\u7ecd\u4e00\u70b9\u5fae\u5c0f\u7684\u5de5\u4f5c\u3002\u8fd9\u672c\u4e66\u662f\u6211\u7ecf\u8fc7\u4e24\u5e74\u7684\u8015\u8018\uff0c\u6574\u7406\u4e86\u5f00\u53d1 Rust \u5168\u6808\u91cf\u5316\u91d1\u878d\u8f6f\u4ef6\u548c\u7b56\u7565\u7684\u5b9e\u8df5\u7ecf\u9a8c\uff0c\u65e8\u5728\u4e3a\u90a3\u4e9b\u5e0c\u671b\u8fdb\u5165\u6216\u5df2\u7ecf\u6d89\u8db3\u91cf\u5316\u91d1\u878d\u9886\u57df\u7684 Rust \u7a0b\u5e8f\u5458\u63d0\u4f9b\u5b9d\u8d35\u7684\u53c2\u8003\u548c\u6d1e\u89c1\u3002</p> <p>\u8fd9\u672c\u4e66\u7684\u521d\u8877\u662f\u4e3a\u4e86\u5411\u8bfb\u8005\u63d0\u4f9b\u6838\u5fc3\u539f\u7406\u548c\u4e3b\u8981\u6b65\u9aa4\u7684\u6307\u5bfc\uff0c\u800c\u4e0d\u662f\u67af\u71e5\u7684\u8be6\u7ec6\u8bf4\u660e\u3002\u5728\u5df2\u7ecf\u516c\u5f00\u7684\u524d 28 \u7ae0\u4e2d\uff0c\u4f60\u5c06\u4f1a\u627e\u5230\u5927\u91cf\u6765\u81ea\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u8fd9\u4e9b\u4ee3\u7801\u5927\u90fd\u662f\u6781\u7b80\u7684MWE(minimal working examples)\uff0c\u771f\u5b9e\u5730\u53cd\u6620\u4e86\u91d1\u878d\u9886\u57df\u4e2d\u7684\u6311\u6218\u548c Rust \u8bed\u8a00\u7684\u5f3a\u5927\u7279\u6027\u3002</p> <p>\u611f\u8c22 Rust \u793e\u533a\u548c\u91cf\u5316\u91d1\u878d\u4e1a\u754c\u7684\u670b\u53cb\u4eec\uff0c\u793e\u533a\u7684\u652f\u6301\u548c\u53cd\u9988\u5bf9\u672c\u4e66\u7684\u6210\u957f\u8d77\u5230\u4e86\u4e0d\u53ef\u6216\u7f3a\u7684\u4f5c\u7528\u3002</p>"},{"location":"#why-rust","title":"Why Rust?","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u4e2d\uff0c\u7f16\u7a0b\u8bed\u8a00\u7684\u9009\u62e9\u6b63\u5728\u9010\u5e74\u53d8\u5f97\u91cd\u8981\uff0c\u800cRust\u5219\u662f\u4e00\u79cd\u9010\u6e10\u53d7\u5230\u9752\u7750\u7684\u7f16\u7a0b\u8bed\u8a00\u3002\u5b83\u72ec\u7279\u7684\u7279\u6027\u4f7f\u5176\u975e\u5e38\u9002\u5408\u4e8e\u5728\u8fd9\u4e00\u9886\u57df\u5f00\u53d1\u53ef\u9760\u4e14\u9ad8\u6548\u7684\u8f6f\u4ef6\u89e3\u51b3\u65b9\u6848\u3002</p> <p>Rust\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u5173\u952e\u7279\u6027\u6709\uff1a</p> <p>\u5b89\u5168\u6027\u4e0e\u53ef\u9760\u6027\uff1aRust\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5728\u4e0d\u727a\u7272\u6027\u80fd\u7684\u60c5\u51b5\u4e0b\u63d0\u4f9b\u5185\u5b58\u5b89\u5168\u6027\u3002\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u51c6\u786e\u6027\u548c\u53ef\u9760\u6027\u81f3\u5173\u91cd\u8981\uff0cRust\u7684\u4e25\u683c\u7f16\u8bd1\u65f6\u68c0\u67e5\u548c\u6240\u6709\u6743\u7cfb\u7edf\u6709\u52a9\u4e8e\u6d88\u9664\u5e38\u89c1\u7684\u7f16\u7a0b\u9519\u8bef\uff0c\u5e76\u786e\u4fdd\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u7684\u7a33\u5065\u6027\u3002</p> <p>\u6027\u80fd\uff1aRust\u5177\u5907\u5bf9\u8d44\u6e90\u7684\u4f4e\u7ea7\u522b\u63a7\u5236\u80fd\u529b\uff0c\u9002\u7528\u4e8e\u590d\u6742\u7684\u91cf\u5316\u91d1\u878d\u7b97\u6cd5\u7684\u9ad8\u6027\u80fd\u8ba1\u7b97\u3002\u5176\u96f6\u6210\u672c\u62bd\u8c61\u548c\u9ad8\u6548\u7684\u5185\u5b58\u5904\u7406\u4f7f\u5176\u975e\u5e38\u9002\u5408\u5904\u7406\u5927\u6570\u636e\u96c6\u5e76\u6267\u884c\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u3002</p> <p>\u5e76\u53d1\u6027\u548c\u5e76\u884c\u6027\uff1a\u5728\u9ad8\u9891\u4ea4\u6613\u548c\u5b9e\u65f6\u5206\u6790\u9886\u57df\uff0c\u4e00\u81f4\u6027\u548c\u5e76\u884c\u6027\u81f3\u5173\u91cd\u8981\u3002Rust\u7684\u6240\u6709\u6743\u6a21\u578b\u548c\u72ec\u7279\u7684\u5e76\u53d1\u539f\u8bed\uff0c\u5982\u901a\u9053(channels)\u548casync/await\uff0c\u7b80\u5316\u4e86\u5e76\u53d1\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\uff0c\u540c\u65f6\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\uff0c\u907f\u514d\u6570\u636e\u7ade\u4e89\u3002</p> <p>\u91cf\u5316\u91d1\u878d\u751f\u6001\u7cfb\u7edf\uff1aRust\u62e5\u6709\u4e0d\u65ad\u58ee\u5927\u7684\u9488\u5bf9\u91cf\u5316\u91d1\u878d\u7684\u5e93\u548c\u6846\u67b6\u751f\u6001\u7cfb\u7edf\uff0c\u4f7f\u6784\u5efa\u590d\u6742\u7684\u91d1\u878d\u6a21\u578b\u3001\u6570\u636e\u5206\u6790\u5de5\u5177\u548c\u4ea4\u6613\u7cfb\u7edf\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u8bf8\u5982ndarray\u3001statrs\u548crust-csv\u7b49\u5e93\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u652f\u6301\uff0c\u7528\u4e8e\u6570\u503c\u8ba1\u7b97\u3001\u7edf\u8ba1\u548c\u6570\u636e\u5904\u7406\u3002</p> <p>\u8de8\u5e73\u53f0\u517c\u5bb9\u6027\uff1aRust\u6ce8\u91cd\u53ef\u79fb\u690d\u6027\uff0c\u4f60\u53ef\u4ee5\u5f00\u53d1\u80fd\u591f\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u548c\u67b6\u6784\u4e0a\u65e0\u7f1d\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u79cd\u7075\u6d3b\u6027\u5728\u91d1\u878d\u884c\u4e1a\u4e2d\u975e\u5e38\u6709\u4ef7\u503c\uff0c\u56e0\u4e3a\u7cfb\u7edf\u9700\u8981\u5728\u5404\u79cd\u5e73\u53f0\u4e0a\u90e8\u7f72\uff0c\u5e76\u4fdd\u6301\u4e00\u81f4\u7684\u884c\u4e3a\u3002</p>"},{"location":"#_1","title":"\u672c\u4e66\u7684\u7ec4\u7ec7\u6784\u6210\u65b9\u5f0f","text":"<p>\u901a\u8fc7\u672c\u7bc7\u5f00\u53d1\u6307\u5357\uff0c\u6211\u5e0c\u671b\u80fd\u591f\u4e3a\u91d1\u878d\u4ece\u4e1a\u8005\u63d0\u4f9b\u4e00\u4e2aRust\u5b66\u4e60\u7684\u5bfc\u822a\u53f0\u3002\u6211\u4eec\u5c06\u6309\u7167\u7531\u6d45\u5165\u6df1\u7684\u5b66\u4e60\u66f2\u7ebf\u6765\u7ec4\u7ec7\u5185\u5bb9\uff0c\u9996\u5148\u4ecb\u7ecdRust\u7684\u57fa\u672c\u6982\u5ff5\u548c\u8bed\u6cd5\uff0c\u7136\u540e\u9010\u6b65\u6df1\u5165\u5230\u9ad8\u7ea7\u7279\u6027\u548c\u5e94\u7528\u3002\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u4e3a\u5e2e\u52a9\u5f00\u53d1\u8005\u77ed\u65f6\u95f4\u5185\u8fdb\u5165\u4e0a\u624b\u5f00\u53d1\u7684\u9636\u6bb5\uff0c\u6211\u8fd8\u5c06\u5206\u4eab\u5927\u91cf\u5b9e\u6218\u7ecf\u9a8c\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u4ee5\u6b64\u5c1d\u8bd5\u5e2e\u52a9\u8bf8\u4f4d\u81ea\u5982\u5730\u5c06Rust\u5e94\u7528\u4e8e\u91cf\u5316\u91d1\u878d\u9886\u57df\u3002</p>"},{"location":"#_2","title":"Cookbook for Rustaceans in Finance / Rust\u91cf\u5316\u91d1\u878d\u5f00\u53d1\u6307\u5357","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/","title":"Chapter 1 -  Rust \u8bed\u8a00\u5165\u95e8101","text":"<p>\u5f00\u59cb\u4e4b\u524d\u6211\u4eec\u4e0d\u59a8\u505a\u4e00\u4e9b\u7b80\u5355\u7684\u51c6\u5907\u5de5\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#11-unixlinuxmacos-rustup","title":"1.1 \u5728\u7c7bUnix\u64cd\u4f5c\u7cfb\u7edf(Linux,MacOS)\u4e0a\u5b89\u88c5 rustup","text":"<p>\u6253\u5f00\u7ec8\u7aef\u5e76\u8f93\u5165\u4e0b\u9762\u547d\u4ee4\uff1a</p> <pre><code>$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh\n</code></pre> <p>\u53ea\u8981\u51fa\u73b0\u4e0b\u9762\u8fd9\u884c\uff1a</p> <pre><code>Rust is installed now. Great! \n</code></pre> <p>\u5c31\u5b8c\u6210 Rust \u5b89\u88c5\u4e86\u3002</p> <p>[\u5efa\u8bae] \u91cf\u5316\u91d1\u878d\u4ece\u4e1a\u4eba\u5458\u4e3a\u4ec0\u4e48\u5e94\u8be5\u5c1d\u8bd5\u63a5\u89e6\u4f7f\u7528Linux\uff1f</p> <ol> <li>\u7a33\u5b9a\u6027\uff1aLinux\u7cfb\u7edf\u88ab\u8ba4\u4e3a\u662f\u975e\u5e38\u7a33\u5b9a\u7684\u3002\u5728\u91d1\u878d\u9886\u57df\uff0c\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u4efb\u4f55\u6280\u672f\u6545\u969c\u90fd\u53ef\u80fd\u5bf9\u4e1a\u52a1\u4ea7\u751f\u91cd\u5927\u5f71\u54cd\u3002\u56e0\u6b64\uff0cLinux\u6210\u4e3a\u4e86\u4e00\u4e2a\u88ab\u5e7f\u6cdb\u63a5\u53d7\u7684\u9009\u62e9\u3002</li> <li>\u7075\u6d3b\u6027\uff1aLinux\u7684\u7075\u6d3b\u6027\u5141\u8bb8\u7528\u6237\u6839\u636e\u9700\u6c42\u5b9a\u5236\u7cfb\u7edf\u3002\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u5404\u79cd\u4e0d\u540c\u7684\u8f6f\u4ef6\u548c\u5de5\u5177\u6765\u5904\u7406\u6570\u636e\u3001\u8fdb\u884c\u6a21\u578b\u5f00\u53d1\u548c\u6d4b\u8bd5\u7b49\u3002Linux\u5141\u8bb8\u7528\u6237\u66f4\u7075\u6d3b\u5730\u4f7f\u7528\u8fd9\u4e9b\u5de5\u5177\uff0c\u5e76\u901a\u8fc7\u4fee\u6539\u6e90\u4ee3\u7801\u6765\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u5b89\u5168\u6027\uff1aLinux\u7684\u5f00\u6e90\u5f00\u53d1\u65b9\u5f0f\u610f\u5473\u7740\u9519\u8bef\u53ef\u4ee5\u66f4\u5feb\u5730\u88ab\u66b4\u9732\u51fa\u6765\uff0c\u8fd9\u8ba9\u6280\u672f\u4eba\u5458\u53ef\u4ee5\u66f4\u65e9\u5730\u53d1\u73b0\u5e76\u89e3\u51b3\u6f5c\u5728\u7684\u5b89\u5168\u9690\u60a3\u3002\u6b64\u5916\uff0cLinux\u5bf9\u53ef\u80fd\u5bf9\u7cfb\u7edf\u4ea7\u751f\u5b89\u5168\u9690\u60a3\u7684\u8fdc\u7a0b\u7a0b\u5e8f\u8c03\u7528\u8fdb\u884c\u4e86\u9650\u5236\uff0c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u3002</li> <li>\u53ef\u7ef4\u62a4\u6027\uff1aLinux\u7cfb\u7edf\u7684\u7ef4\u62a4\u8981\u6c42\u76f8\u5bf9\u8f83\u9ad8\uff0c\u9700\u8981\u4e00\u5b9a\u7684\u6280\u672f\u6c34\u5e73\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u957f\u671f\u8fd0\u884c\u7684\u529f\u80fd\u9700\u6c42\uff0c\u5982\u5907\u4efd\u5386\u53f2\u884c\u60c5\u6570\u636e\u548c\u5b9e\u65f6\u884c\u60c5\u6570\u636e\u7684\u5165\u5e93\u548c\u7ef4\u62a4\uff0cLinux\u7cfb\u7edf\u63d0\u4f9b\u4e86\u9ad8\u6548\u7684\u547d\u4ee4\u884c\u65b9\u5f0f\uff0c\u53ef\u4ee5\u66f4\u5feb\u901f\u5730\u8fdb\u884c\u6062\u590d\u548c\u7ef4\u62a4\u3002</li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#12-c","title":"1.2 \u5b89\u88c5 C \u8bed\u8a00\u7f16\u8bd1\u5668 [ \u53ef\u9009 ]","text":"<p>Rust \u6709\u7684\u65f6\u5019\u4f1a\u4f9d\u8d56 libc \u548c\u94fe\u63a5\u5668 linker\uff0c \u6bd4\u5982PyTorch\u7684C bindings\u7684Rust\u7248\u672ctch.rs \u5c31\u81ea\u7136\u4f9d\u8d56C\u3002\u56e0\u6b64\u5982\u679c\u9047\u5230\u4e86\u63d0\u793a\u94fe\u63a5\u5668\u65e0\u6cd5\u6267\u884c\u7684\u9519\u8bef\uff0c\u4f60\u9700\u8981\u518d\u624b\u52a8\u5b89\u88c5\u4e00\u4e2a C \u8bed\u8a00\u7f16\u8bd1\u5668\uff1a</p> <p>**MacOS **\uff1a</p> <pre><code>$ xcode-select --install\n</code></pre> <p>**Linux **\uff1a \u5982\u679c\u4f60\u4f7f\u7528 Ubuntu\uff0c\u5219\u53ef\u5b89\u88c5 build-essential\u3002 \u5176\u4ed6 Linux \u7528\u6237\u4e00\u822c\u5e94\u6309\u7167\u76f8\u5e94\u53d1\u884c\u7248\u7684\u6587\u6863\u6765\u5b89\u88c5 gcc \u6216 clang\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#13-rust","title":"1.3 \u7ef4\u62a4 Rust \u5de5\u5177\u94fe","text":"<p>\u66f4\u65b0Rust</p> <pre><code>$ rustup update\n</code></pre> <p>\u5378\u8f7dRust</p> <pre><code>$ rustup self uninstall\n</code></pre> <p>\u68c0\u67e5Rust\u5b89\u88c5\u662f\u5426\u6210\u529f</p> <p>\u68c0\u67e5rustc\u7248\u672c</p> <pre><code>$ rustc -V \nrustc 1.72.0 (5680fa18f 2023-08-23)\n</code></pre> <p>\u68c0\u67e5cargo\u7248\u672c</p> <pre><code>$ cargo -V \ncargo 1.72.0 (103a7ff2e 2023-08-15)\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#14-nightly","title":"1.4 Nightly \u7248\u672c","text":"<p>\u4f5c\u4e3a\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\uff0cRust\u975e\u5e38\u6ce8\u91cd\u4ee3\u7801\u7684\u7a33\u5b9a\u6027\u3002\u4e3a\u4e86\u8fbe\u5230\"\u7a33\u5b9a\u800c\u4e0d\u505c\u6ede\",Rust\u7684\u5f00\u53d1\u9075\u5faa\u4e00\u4e2a\u5217\u8f66\u65f6\u523b\u8868\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u7684\u5f00\u53d1\u5de5\u4f5c\u90fd\u5728Rust\u5b58\u50a8\u5e93\u7684\u4e3b\u5206\u652f\u4e0a\u8fdb\u884c\u3002Rust\u6709\u4e09\u4e2a\u53d1\u5e03\u901a\u9053\uff1a</p> <ol> <li>\u591c\u95f4(Nightly)</li> <li>\u6d4b\u8bd5(Beta)</li> <li>\u7a33\u5b9a(Stable)</li> </ol> <p>\u4ee5\u4e0b\u662f\u5f00\u53d1\u548c\u53d1\u5e03\u6d41\u7a0b\u7684\u793a\u4f8b\uff1a\u5047\u8bbeRust\u56e2\u961f\u6b63\u5728\u5f00\u53d1Rust 1.5\u7684\u7248\u672c\u3002\u8be5\u7248\u672c\u57282015\u5e7412\u6708\u53d1\u5e03\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u7528\u8fd9\u4e2a\u7248\u672c\u53f7\u6765\u8bf4\u660e\u3002Rust\u6dfb\u52a0\u4e86\u4e00\u4e2a\u65b0\u529f\u80fd\uff1a\u65b0\u7684\u63d0\u4ea4\u88ab\u5408\u5e76\u5230\u4e3b\u5206\u652f\u3002\u6bcf\u5929\u665a\u4e0a\uff0c\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684Rust\u591c\u95f4\u7248\u672c\u3002</p> <p>\u5bf9\u4e8eRust Nightly\u6765\u8bf4, \u51e0\u4e4e\u6bcf\u5929\u90fd\u662f\u53d1\u5e03\u65e5, \u8fd9\u4e9b\u53d1\u5e03\u662f\u7531Rust\u793e\u533a\u7684\u53d1\u5e03\u57fa\u5efa(release infrastructure)\u81ea\u52a8\u521b\u5efa\u7684\u3002</p> <pre><code>nightly: * - - * - - *\n</code></pre> <p>\u6bcf\u516d\u4e2a\u793c\u62dc\uff0c <code>beta</code> \u5206\u652f\u90fd\u4f1a\u4ece\u88ab\u591c\u95f4\u7248\u672c\u4f7f\u7528\u7684 <code>master</code> \u5206\u652f\u4e2d\u5206\u53c9\u51fa\u6765, \u5355\u72ec\u53d1\u5e03\u4e00\u6b21\u3002</p> <pre><code>nightly: * - - * - - *\n                     |\nbeta:                *\n</code></pre> <p>\u5927\u591a\u6570Rust\u5f00\u53d1\u8005\u4e3b\u8981\u4f7f\u7528 Stable \u901a\u9053\uff0c\u4f46\u90a3\u4e9b\u60f3\u5c1d\u8bd5\u5b9e\u9a8c\u6027\u65b0\u529f\u80fd\u7684\u4eba\u53ef\u4ee5\u4f7f\u7528 Nightly \u6216 Beta\u3002</p> <p>Rust \u7f16\u7a0b\u8bed\u8a00\u7684 Nightly \u7248\u672c\u662f\u4e0d\u65ad\u66f4\u65b0\u7684\u3002\u6709\u7684\u65f6\u5019\u4e3a\u4e86\u7528\u5230 Rust \u7684\u6700\u65b0\u7684\u8bed\u8a00\u7279\u6027\uff0c\u6216\u8005\u5b89\u88c5\u4e00\u4e9b\u4f9d\u8d56 Rust Nightly\u7684\u8f6f\u4ef6\u5305\uff0c\u6211\u4eec\u4f1a\u9700\u8981\u5207\u6362\u5230 Nightly\u3002</p> <p>\u4f46\u662f\u8bf7\u6ce8\u610f\uff0cNightly\u7248\u672c\u5305\u542b\u6700\u65b0\u7684\u529f\u80fd\u548c\u6539\u8fdb\uff0c\u6240\u4ee5\u4e5f\u53ef\u80fd\u4e0d\u591f\u7a33\u5b9a\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u65f6\u8981\u5c0f\u5fc3\u3002</p> <p>\u5b89\u88c5Nightly\u7248\u672c\uff1a</p> <pre><code>$ rustup install nightly\n</code></pre> <p>\u5207\u6362\u5230Nightly\u7248\u672c\uff1a</p> <pre><code>$ rustup default nightly\n</code></pre> <p>\u66f4\u65b0Nightly\u7248\u672c\uff1a</p> <pre><code>$ rustup update nightly\n</code></pre> <p>\u5207\u6362\u56deStable\u7248\u672c\uff1a</p> <pre><code>$ rustup default stable\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#15-cargo","title":"1.5 cargo\u7684\u4f7f\u7528","text":"<p><code>cargo</code> \u662f Rust \u7f16\u7a0b\u8bed\u8a00\u7684\u5b98\u65b9\u6784\u5efa\u5de5\u5177\u548c\u5305\u7ba1\u7406\u5668\u3002\u5b83\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u5e2e\u52a9\u5f00\u53d1\u8005\u521b\u5efa\u3001\u6784\u5efa\u3001\u6d4b\u8bd5\u548c\u53d1\u5e03 Rust \u9879\u76ee\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b <code>cargo</code> \u7684\u4e3b\u8981\u529f\u80fd\uff1a</p> <ol> <li> <p>\u9879\u76ee\u521b\u5efa\uff1a    <code>cargo new</code>  \u53ef\u4ee5\u521b\u5efa\u65b0\u7684 Rust \u9879\u76ee\uff0c\u5305\u62ec\u521b\u5efa\u9879\u76ee\u7684\u57fa\u672c\u7ed3\u6784\u3001\u751f\u6210\u9ed8\u8ba4\u7684\u6e90\u4ee3\u7801\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\u3002</p> </li> <li> <p>\u4f9d\u8d56\u7ba1\u7406\uff1a    <code>cargo</code> \u7ba1\u7406\u9879\u76ee\u7684\u4f9d\u8d56\u9879\u3002\u4f60\u53ef\u4ee5\u5728\u9879\u76ee\u7684 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\uff0c\u7136\u540e\u8fd0\u884c <code>cargo build</code> \u547d\u4ee4\u6765\u4e0b\u8f7d\u548c\u6784\u5efa\u8fd9\u4e9b\u4f9d\u8d56\u9879\u3002\u8fd9\u4f7f\u5f97\u6dfb\u52a0\u3001\u66f4\u65b0\u548c\u5220\u9664\u4f9d\u8d56\u9879\u53d8\u5f97\u975e\u5e38\u5bb9\u6613\u3002</p> </li> <li> <p>\u6784\u5efa\u9879\u76ee\uff1a    \u901a\u8fc7\u8fd0\u884c <code>cargo build</code> \u547d\u4ee4\uff0c\u4f60\u53ef\u4ee5\u6784\u5efa\u4f60\u7684 Rust \u9879\u76ee\u3002<code>cargo</code> \u4f1a\u81ea\u52a8\u5904\u7406\u7f16\u8bd1\u3001\u94fe\u63a5\u548c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u6216\u5e93\u7684\u8fc7\u7a0b\u3002</p> </li> <li> <p>\u6dfb\u52a0\u4f9d\u8d56\uff1a    \u4f7f\u7528 cargo add \u6216\u7f16\u8f91\u9879\u76ee\u7684 Cargo.toml \u6587\u4ef6\u6765\u6dfb\u52a0\u4f9d\u8d56\u9879\u3002cargo add \u547d\u4ee4\u4f1a\u81ea\u52a8\u66f4\u65b0 Cargo.toml \u5e76\u4e0b\u8f7d\u4f9d\u8d56\u9879\u3002    \u4f8b\u5982\uff0c\u8981\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3a \"rand\" \u7684\u4f9d\u8d56\uff0c\u53ef\u4ee5\u8fd0\u884c\uff1acargo add rand</p> </li> <li> <p>\u6267\u884c\u9884\u5148\u7f16\u7e82\u7684\u6d4b\u8bd5\uff1a</p> </li> </ol> <p><code>cargo</code> \u5141\u8bb8\u4f60\u7f16\u5199\u548c\u8fd0\u884c\u6d4b\u8bd5\uff0c\u4ee5\u786e\u4fdd\u4ee3\u7801\u7684\u6b63\u786e\u6027\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>cargo test</code> \u547d\u4ee4\u6765\u8fd0\u884c\u6d4b\u8bd5\u5957\u4ef6\u3002</p> <ol> <li>\u6587\u6863\u751f\u6210\uff1a</li> </ol> <p><code>cargo</code> \u53ef\u4ee5\u81ea\u52a8\u751f\u6210\u9879\u76ee\u6587\u6863\u3002\u901a\u8fc7\u8fd0\u884c <code>cargo doc</code> \u547d\u4ee4\uff0c\u5982\u679c\u6211\u4eec\u7684 \u6587\u6863\u6ce8\u91ca (\u4ee5///\u6216\u8005//\uff01\u8d77\u59cb\u7684\u6ce8\u91ca) \u7b26\u5408Markdown\u89c4\u8303\uff0c\u4f60\u53ef\u4ee5\u751f\u6210\u5305\u62ec\u5e93\u6587\u6863\u548c\u6587\u6863\u6ce8\u91ca\u7684 HTML \u6587\u6863\uff0c\u4ee5\u4fbf\u5176\u4ed6\u5f00\u53d1\u8005\u67e5\u9605\u3002</p> <ol> <li>\u53d1\u5e03\u548c\u5206\u53d1\uff1a</li> </ol> <p>\u6267\u884c<code>cargo login</code> \u767b\u9646 crate.io \u540e\uff0c\u518d\u5728\u9879\u76ee\u6587\u4ef6\u5939\u6267\u884c<code>cargo publish</code> \u53ef\u4ee5\u5e2e\u52a9\u4f60\u5c06\u4f60\u7684 Rust \u5e93\u53d1\u5e03\u5230 crates.io\uff0cRust \u751f\u6001\u7cfb\u7edf\u7684\u5b98\u65b9\u5305\u4ed3\u5e93\u3002\u8fd9\u4f7f\u5f97\u5206\u4eab\u4f60\u7684\u4ee3\u7801\u548c\u5e93\u53d8\u5f97\u975e\u5e38\u5bb9\u6613\u3002</p> <ol> <li>\u5217\u51fa\u4f9d\u8d56\u9879\uff1a</li> </ol> <p>\u4f7f\u7528 cargo tree \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u9879\u76ee\u7684\u4f9d\u8d56\u9879\u6811\uff0c\u4ee5\u4e86\u89e3\u4f60\u7684\u9879\u76ee\u4f7f\u7528\u4e86\u54ea\u4e9b\u5e93\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u4f8b\u5982\uff0c\u8981\u67e5\u770b\u4f9d\u8d56\u9879\u6811\uff0c\u53ea\u9700\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u8fd0\u884c\uff1a<code>cargo tree</code></p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#16-cargo-rustup","title":"1.6 cargo \u548c rustup\u7684\u533a\u522b","text":"<p><code>rustup</code> \u548c<code>cargo</code> \u662f Rust \u751f\u6001\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u4e0d\u540c\u7684\u5de5\u5177\uff0c\u5404\u81ea\u627f\u62c5\u7740\u4e0d\u540c\u7684\u4efb\u52a1\uff1a</p> <p><code>rustup</code> \u548c <code>cargo</code> \u662f Rust \u751f\u6001\u7cfb\u7edf\u4e2d\u4e24\u4e2a\u4e0d\u540c\u7684\u5de5\u5177\uff0c\u5404\u81ea\u627f\u62c5\u7740\u4e0d\u540c\u7684\u4efb\u52a1\uff1a</p> <p><code>rustup</code>\uff1a</p> <ul> <li><code>rustup</code> \u662f Rust \u5de5\u5177\u94fe\u7ba1\u7406\u5668\u3002\u5b83\u7528\u4e8e\u5b89\u88c5\u3001\u5347\u7ea7\u548c\u7ba1\u7406\u4e0d\u540c\u7248\u672c\u7684 Rust \u7f16\u7a0b\u8bed\u8a00\u3002</li> <li>\u901a\u8fc7 <code>rustup</code>\uff0c\u4f60\u53ef\u4ee5\u8f7b\u677e\u5730\u5728\u4f60\u7684\u8ba1\u7b97\u673a\u4e0a\u5b89\u88c5\u591a\u4e2a Rust \u7248\u672c\uff0c\u4ee5\u4fbf\u5728\u9879\u76ee\u4e4b\u95f4\u5207\u6362\u3002</li> <li>\u5b83\u8fd8\u7ba1\u7406 Rust \u5de5\u5177\u94fe\u7684\u7ec4\u4ef6\uff0c\u4f8b\u5982 Rust \u6807\u51c6\u5e93\u3001Rustfmt(\u7528\u4e8e\u683c\u5f0f\u5316\u4ee3\u7801\u7684\u5de5\u5177)\u7b49\u3002</li> <li><code>rustup</code> \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5176\u4ed6\u529f\u80fd\uff0c\u5982\u8bbe\u7f6e\u9ed8\u8ba4\u5de5\u5177\u94fe\u3001\u5378\u8f7d Rust \u7b49\u3002</li> </ul> <p><code>cargo</code>\uff1a</p> <ul> <li><code>cargo</code> \u662f Rust \u7684\u6784\u5efa\u5de5\u5177\u548c\u5305\u7ba1\u7406\u5668\u3002\u5b83\u7528\u4e8e\u521b\u5efa\u3001\u6784\u5efa\u548c\u7ba1\u7406 Rust \u9879\u76ee\u3002</li> <li><code>cargo</code> \u53ef\u4ee5\u521b\u5efa\u65b0\u7684 Rust \u9879\u76ee\uff0c\u6dfb\u52a0\u4f9d\u8d56\u9879\uff0c\u6784\u5efa\u9879\u76ee\uff0c\u8fd0\u884c\u6d4b\u8bd5\uff0c\u751f\u6210\u6587\u6863\uff0c\u53d1\u5e03\u5e93\u7b49\u7b49\u3002</li> <li>\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u4fbf\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u9879\u76ee\u7684\u4f9d\u8d56\u548c\u6784\u5efa\u8fc7\u7a0b\uff0c\u4f7f\u5f97\u521b\u5efa\u548c\u7ef4\u62a4 Rust \u9879\u76ee\u53d8\u5f97\u5bb9\u6613\u3002</li> <li>\u4e0e\u6784\u5efa\u76f8\u5173\u7684\u4efb\u52a1\uff0c\u5982\u7f16\u8bd1\u3001\u8fd0\u884c\u6d4b\u8bd5\u3001\u6253\u5305\u5e94\u7528\u7a0b\u5e8f\u7b49\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7 <code>cargo</code> \u6765\u5b8c\u6210\u3002</li> </ul> <p>\u603b\u4e4b\uff0c<code>rustup</code> \u4e3b\u8981\u7528\u4e8e\u7ba1\u7406 Rust \u7684\u7248\u672c\u548c\u5de5\u5177\u94fe\uff0c\u800c <code>cargo</code> \u7528\u4e8e\u7ba1\u7406\u548c\u6784\u5efa\u5177\u4f53\u7684 Rust \u9879\u76ee\u3002\u8fd9\u4e24\u4e2a\u5de5\u5177\u4e00\u8d77\u4f7f\u5f97\u5728 Rust \u4e2d\u5f00\u53d1\u548c\u7ef4\u62a4\u9879\u76ee\u53d8\u5f97\u975e\u5e38\u65b9\u4fbf\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#17-cargo","title":"1.7 \u7528cargo\u521b\u7acb\u5e76\u642d\u5efa\u7b2c\u4e00\u4e2a\u9879\u76ee","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#1-cargo-new","title":"1. \u7528 <code>cargo new</code>\u65b0\u5efa\u9879\u76ee","text":"<pre><code>$ cargo new_strategy # new_strategy \u662f\u6211\u4eec\u7684\u65b0crate \n$ cd new_strategy\n</code></pre> <p>\u7b2c\u4e00\u884c\u547d\u4ee4\u65b0\u5efa\u4e86\u540d\u4e3a new_strategy \u7684\u6587\u4ef6\u5939\u3002\u6211\u4eec\u5c06\u9879\u76ee\u547d\u540d\u4e3a new_strategy\uff0c\u540c\u65f6 cargo \u5728\u4e00\u4e2a\u540c\u540d\u6587\u4ef6\u5939\u4e2d\u521b\u5efa\u6811\u72b6\u5206\u5e03\u7684\u9879\u76ee\u6587\u4ef6\u3002</p> <p>\u8fdb\u5165 new_strategy \u6587\u4ef6\u5939, \u7136\u540e\u952e\u5165<code>ls</code>\u5217\u51fa\u6587\u4ef6\u3002\u5c06\u4f1a\u770b\u5230 cargo \u751f\u6210\u4e86\u4e24\u4e2a\u6587\u4ef6\u548c\u4e00\u4e2a\u76ee\u5f55\uff1a\u4e00\u4e2a Cargo.toml \u6587\u4ef6\uff0c\u4e00\u4e2a src \u76ee\u5f55\uff0c\u4ee5\u53ca\u4f4d\u4e8e src \u76ee\u5f55\u4e2d\u7684 main.rs \u6587\u4ef6\u3002</p> <p>\u6b64\u65f6cargo\u5728 new_strategy \u6587\u4ef6\u5939\u521d\u59cb\u5316\u4e86\u4e00\u4e2a Git \u4ed3\u5e93\uff0c\u5e76\u5e26\u6709\u4e00\u4e2a .gitignore \u6587\u4ef6\u3002</p> <p>\u6ce8\u610f: cargo\u662f\u9ed8\u8ba4\u4f7f\u7528git\u4f5c\u4e3a\u7248\u672c\u63a7\u5236\u7cfb\u7edf\u7684(version control system\uff0c VCS)\u3002\u53ef\u4ee5\u901a\u8fc7 <code>--vcs</code> \u53c2\u6570\u4f7f <code>cargo new</code> \u5207\u6362\u5230\u5176\u5b83\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u6216\u8005\u4e0d\u4f7f\u7528 VCS\u3002\u8fd0\u884c <code>cargo new --help</code> \u67e5\u770b\u53ef\u7528\u7684\u9009\u9879\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#2-cargotoml","title":"2. \u7f16\u8f91 <code>cargo.toml</code>","text":"<p>\u73b0\u5728\u53ef\u4ee5\u627e\u5230\u9879\u76ee\u6587\u4ef6\u5939\u4e2d\u7684 cargo.toml \u6587\u4ef6\u3002\u8fd9\u5e94\u8be5\u662f\u4e00\u4e2acargo \u6700\u5c0f\u5316\u5de5\u4f5c\u6837\u672c(MWE, Minimal Working Example)\u7684\u6837\u5b50\u4e86\u3002\u5b83\u770b\u8d77\u6765\u5e94\u8be5\u662f\u5982\u4e0b\u8fd9\u6837\uff1a</p> <pre><code>[package]\nname = \"new_strategy\"\nversion = \"0.1.0\" # \u6b64\u8f6f\u4ef6\u5305\u7684\u7248\u672c\nedition = \"2021\" # rust\u7684\u89c4\u8303\u7248\u672c\uff0c\u6210\u4e66\u65f6\u6700\u8fd1\u4e00\u6b21\u66f4\u65b0\u662f2021\u5e74\u3002\n[dependencies]\n</code></pre> <p>\u7b2c\u4e00\u884c <code>[package]</code>\uff0c\u662f\u4e00\u4e2a section \u7684\u6807\u9898\uff0c\u8868\u660e\u4e0b\u9762\u7684\u8bed\u53e5\u7528\u6765\u914d\u7f6e\u4e00\u4e2a\u5305(package)\u3002\u968f\u7740\u6211\u4eec\u5728\u8fd9\u4e2a\u6587\u4ef6\u589e\u52a0\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u8fd8\u5c06\u589e\u52a0\u5176\u4ed6 sections\u3002</p> <p>\u7b2c\u4e8c\u4e2a section \u5373<code>[dependencies]</code> \uff0c\u4e00\u822c\u6211\u4eec\u5728\u8fd9\u91cc\u586b\u9879\u76ee\u6240\u4f9d\u8d56\u7684\u4efb\u4f55\u5305\u3002</p> <p>\u5728 Rust \u4e2d\uff0c\u4ee3\u7801\u5305\u88ab\u79f0\u4e3a crate\u3002\u6211\u4eec\u628acrate\u7684\u4fe1\u606f\u586b\u5199\u5728\u8fd9\u91cc\u4ee5\u540e\uff0c\u518d\u8fd0\u884ccargo build, cargo\u5c31\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u5e76\u6784\u5efa\u8fd9\u4e2a\u9879\u76ee\u3002\u867d\u7136\u8fd9\u4e2a\u9879\u76ee\u76ee\u524d\u5e76\u4e0d\u9700\u8981\u5176\u4ed6\u7684 crate\u3002</p> <p>\u73b0\u5728\u6253\u5f00 new_strategy/src/main.rs* \u770b\u770b\uff1a</p> <pre><code>fn main() {\n    println!(\"Hello, world!\");\n}\n</code></pre> <p>cargo\u5df2\u7ecf\u5728 <code>src</code> \u6587\u4ef6\u5939\u4e3a\u6211\u4eec\u81ea\u52a8\u751f\u6210\u4e86\u4e00\u4e2a Hello, world! \u7a0b\u5e8f\u3002\u867d\u7136\u770b\u4e0a\u53bb\u6709\u70b9\u8d8a\u4fce\u4ee3\u5e96\uff0c\u4f46\u662f\u8fd9\u4e5f\u662f\u4e3a\u4e86\u63d0\u9192\u6211\u4eec\uff0ccargo \u671f\u671b\u6e90\u4ee3\u7801\u6587\u4ef6(\u4ee5rs\u540e\u7f00\u7ed3\u5c3e\u7684Rust\u8bed\u8a00\u6587\u4ef6)\u4f4d\u4e8e <code>src</code> \u76ee\u5f55\u4e2d\u3002\u9879\u76ee\u6839\u76ee\u5f55\u53ea\u5b58\u653e**\u8bf4\u660e\u6587\u4ef6**(README)\u3001\u8bb8\u53ef\u534f\u8bae(license)\u4fe1\u606f\u3001\u914d\u7f6e\u6587\u4ef6 (cargo.toml)\u548c\u5176\u4ed6\u8ddf\u4ee3\u7801\u65e0\u5173\u7684\u6587\u4ef6\u3002\u4f7f\u7528 Cargo \u53ef\u5e2e\u52a9\u4f60\u4fdd\u6301\u9879\u76ee\u5e72\u51c0\u6574\u6d01\u3002\u8fd9\u91cc\u4e3a\u4e00\u5207\u4e8b\u7269\u6240\u51c6\u5907\uff0c\u4e00\u5207\u90fd\u4f4d\u4e8e\u6b63\u786e\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#3-cargo","title":"3. \u6784\u5efa\u5e76\u8fd0\u884c Cargo \u9879\u76ee","text":"<p>\u73b0\u5728\u5728 <code>new_strategy</code> \u76ee\u5f55\u4e0b\uff0c\u8f93\u5165\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u6784\u5efa\u9879\u76ee\uff1a</p> <pre><code>$ cargo build\n   Compiling new_strategy v0.1.0 (file:///projects/new_strategy)\n    Finished dev [unoptimized + debuginfo] target(s) in 2.85 secs\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5728 target/debug/new_strategy \u4e0b\u521b\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6(\u5728 Windows \u4e0a\u662f target\\debug\\new_strategy.exe)\uff0c\u800c\u4e0d\u662f\u653e\u5728\u76ee\u524d\u76ee\u5f55\u4e0b\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8fd0\u884c\u5b83\uff1a</p> <pre><code>$ ./target/debug/new_strategy \nHello, world!\n</code></pre> <p>cargo \u8fd8\u63d0\u4f9b\u4e86\u4e00te x t\u4e2a\u540d\u4e3a <code>cargo check</code> \u7684\u547d\u4ee4\u3002\u8be5\u547d\u4ee4\u5feb\u901f\u68c0\u67e5\u4ee3\u7801\u786e\u4fdd\u5176\u53ef\u4ee5\u7f16\u8bd1\uff1a</p> <pre><code>$ cargo check\n   Checking new_strategy v0.1.0 (file:///projects/new_strategy)\n    Finished dev [unoptimized + debuginfo] target(s) in 0.14 secs\n</code></pre> <p>\u56e0\u4e3a\u7f16\u8bd1\u7684\u8017\u65f6\u6709\u65f6\u53ef\u4ee5\u975e\u5e38\u957f\uff0c\u6240\u4ee5\u6b64\u65f6\u6211\u4eec\u66f4\u6539\u6216\u4fee\u6b63\u4ee3\u7801\u540e\uff0c\u5e76\u4e0d\u4f1a\u9891\u7e41\u6267\u884c<code>cargo build</code>\u6765\u91cd\u6784\u9879\u76ee\uff0c\u800c\u662f\u4f7f\u7528 <code>cargo check</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#4","title":"4. \u53d1\u5e03\u6784\u5efa","text":"<p>\u5f53\u6211\u4eec\u6700\u7ec8\u51c6\u5907\u597d\u4ea4\u4ed8\u4ee3\u7801\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>cargo build --release</code> \u6765\u4f18\u5316\u7f16\u8bd1\u9879\u76ee\u3002</p> <p>\u8fd9\u4f1a\u5728   \u800c\u4e0d\u662f target/debug \u4e0b\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u3002\u8fd9\u4e9b\u4f18\u5316\u53ef\u4ee5\u8ba9 Rust \u4ee3\u7801\u8fd0\u884c\u7684\u66f4\u5feb\uff0c\u4e0d\u8fc7\u542f\u7528\u8fd9\u4e9b\u4f18\u5316\u4e5f\u9700\u8981\u6d88\u8017\u663e\u8457\u66f4\u957f\u7684\u7f16\u8bd1\u65f6\u95f4\u3002</p> <p>\u5982\u679c\u4f60\u8981\u5bf9\u4ee3\u7801\u8fd0\u884c\u65f6\u95f4\u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\uff0c\u8bf7\u786e\u4fdd\u8fd0\u884c <code>cargo build --release</code> \u5e76\u4f7f\u7528 target/release \u4e0b\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8fdb\u884c\u6d4b\u8bd5\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#18-rust","title":"1.8  \u9700\u8981\u4e86\u89e3\u7684\u51e0\u4e2aRust\u6982\u5ff5","text":"<p>\u597d\u7684\uff0c\u8ba9\u6211\u4e3a\u6bcf\u4e2a\u6982\u5ff5\u518d\u63d0\u4f9b\u4e00\u4e2a\u66f4\u8be6\u7ec6\u7684\u6848\u4f8b\uff0c\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#scope","title":"\u4f5c\u7528\u57df (Scope)","text":"<p>\u4f5c\u7528\u57df\u662f\u6307\u5728\u4ee3\u7801\u4e2d\u53d8\u91cf\u6216\u503c\u7684\u53ef\u89c1\u6027\u548c\u6709\u6548\u6027\u8303\u56f4\u3002\u5728\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u53d8\u91cf\u6216\u503c\u53ef\u4ee5\u5728\u8be5\u4f5c\u7528\u57df\u5185\u4f7f\u7528\uff0c\u800c\u5728\u4f5c\u7528\u57df\u5916\u65e0\u6cd5\u8bbf\u95ee\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u4f5c\u7528\u57df\u51b3\u5b9a\u4e86\u4f60\u5728\u54ea\u91cc\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u6216\u503c\u3002</p> <p>\u5728\u5927\u591a\u6570\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u4f5c\u7528\u57df\u901a\u5e38\u7531\u5927\u62ec\u53f7 <code>{}</code> \u6765\u754c\u5b9a\uff0c\u4f8b\u5982\u5728\u51fd\u6570\u3001\u5faa\u73af\u3001\u6761\u4ef6\u8bed\u53e5\u6216\u4ee3\u7801\u5757\u4e2d\u3002\u53d8\u91cf\u6216\u503c\u5728\u8fdb\u5165\u4f5c\u7528\u57df\u65f6\u521b\u5efa\uff0c\u5728\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\u9500\u6bc1\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u4fdd\u7a0b\u5e8f\u7684\u5c40\u90e8\u6027\u548c\u53d8\u91cf\u4e0d\u4f1a\u5e72\u6270\u5176\u4ed6\u90e8\u5206\u7684\u4ee3\u7801\u3002</p> <p>\u4f8b\u5982\uff0c\u5728\u4e0b\u9762\u7684Rust\u4ee3\u7801\u4e2d\uff0c<code>x</code> \u53d8\u91cf\u7684\u4f5c\u7528\u57df\u5728\u51fd\u6570 <code>main</code> \u4e2d\uff0c\u56e0\u6b64\u53ea\u80fd\u5728\u51fd\u6570\u5185\u90e8\u4f7f\u7528\uff1a</p> <pre><code>fn main() {\n    let x = 10; // \u53d8\u91cfx\u7684\u4f5c\u7528\u57df\u4ece\u8fd9\u91cc\u5f00\u59cb\n\n    // \u5728\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cfx\n\n} // \u53d8\u91cfx\u7684\u4f5c\u7528\u57df\u5728\u8fd9\u91cc\u7ed3\u675f\uff0cx\u88ab\u9500\u6bc1\n</code></pre> <p>\u603b\u4e4b\uff0c\u4f5c\u7528\u57df\u662f\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7528\u6765\u63a7\u5236\u53d8\u91cf\u548c\u503c\u53ef\u89c1\u6027\u7684\u6982\u5ff5\uff0c\u5b83\u786e\u4fdd\u4e86\u53d8\u91cf\u53ea\u5728\u9002\u5f53\u7684\u5730\u65b9\u53ef\u7528\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u5b89\u5168\u6027\u3002\u5728\u7b2c6\u7ae0\u6211\u4eec\u8fd8\u4f1a\u8be6\u7ec6\u8bb2\u89e3\u4f5c\u7528\u57df (Scope)\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#ownership","title":"\u6240\u6709\u6743 (Ownership)","text":"<p>\u60f3\u8c61\u4e00\u4e0b\u4f60\u6709\u4e00\u4e2a\u72ec\u7279\u7684\u73a9\u5177\u706b\u8f66\uff0c\u53ea\u6709\u4f60\u80fd\u591f\u73a9\u3002\u8fd9\u4e2a\u706b\u8f66\u662f\u4f60\u7684\u6240\u6709\u7269\u3002\u5f53\u4f60\u4e0d\u518d\u60f3\u73a9\u8fd9\u4e2a\u706b\u8f66\u65f6\uff0c\u4f60\u53ef\u4ee5\u628a\u5b83\u6254\u6389\uff0c\u5b83\u5c31\u4e0d\u518d\u5b58\u5728\u4e86\u3002\u5728 Rust \u4e2d\uff0c\u6bcf\u4e2a\u503c\u5c31\u50cf\u662f\u8fd9\u4e2a\u73a9\u5177\u706b\u8f66\uff0c\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6240\u6709\u8005\u3002\u4e00\u65e6\u6240\u6709\u8005\u4e0d\u518d\u9700\u8981\u8fd9\u4e2a\u503c\uff0c\u5b83\u4f1a\u88ab\u9500\u6bc1\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u5360\u7528\u5185\u5b58\u7a7a\u95f4\u3002</p> <pre><code>fn main() {\n    let toy_train = \"Awesome train\".to_string(); // \u521b\u5efa\u4e00\u4e2a\u73a9\u5177\u706b\u8f66\n    // toy_train \u662f\u5b83\u7684\u6240\u6709\u8005\n\n    let train_name = get_name(&amp;toy_train); // \u4f20\u9012\u706b\u8f66\u7684\u5f15\u7528\n    println!(\"Train's name: {}\", train_name);\n    // \u63a5\u4e0b\u6765 toy_train \u79bb\u5f00\u4e86main\u51fd\u6570\u7684\u4f5c\u7528\u57df\uff0c \u5728main\u51fd\u6570\u5916\u9762\u8c01\u4e5f\u4e0d\u80fd\u518d\u73a9 toy_train\u4e86\u3002\n}\n\nfn get_name(train: &amp;String) -&gt; String {\n    // \u63a5\u53d7 String \u7684\u5f15\u7528\uff0c\u4e0d\u83b7\u53d6\u6240\u6709\u6743\n    train.clone() // \u8fd4\u56de\u706b\u8f66\u7684\u540d\u5b57\u7684\u62f7\u8d1d\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a <code>toy_train</code> \u7684\u503c\uff0c\u7136\u540e\u5c06\u5b83\u7684\u5f15\u7528\u4f20\u9012\u7ed9 <code>get_name</code> \u51fd\u6570\uff0c\u800c\u4e0d\u662f\u79fb\u52a8\u5b83\u7684\u6240\u6709\u6743\u3002\u8fd9\u6837\uff0c\u51fd\u6570\u53ef\u4ee5\u8bfb\u53d6 <code>toy_train</code> \u7684\u6570\u636e\uff0c\u4f46 <code>toy_train</code> \u7684\u6240\u6709\u6743\u4ecd\u7136\u5728 <code>main</code> \u51fd\u6570\u4e2d\u3002\u5f53 <code>toy_train</code> \u79bb\u5f00 <code>main</code> \u51fd\u6570\u7684\u4f5c\u7528\u57df\u65f6\uff0c\u5b83\u7684\u6240\u6709\u6743\u88ab\u79fb\u52a8\u5230\u51fd\u6570\u5185\u90e8\uff0c\u6240\u4ee5\u5728\u51fd\u6570\u5916\u90e8\u4e0d\u80fd\u518d\u4f7f\u7528 <code>toy_train</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#mutability","title":"\u53ef\u53d8\u6027 (mutability)","text":"<p>\u53ef\u53d8\u6027(mutability)\u662f\u6307\u5728\u7f16\u7a0b\u4e2d\u4e00\u4e2a\u53d8\u91cf\u6216\u6570\u636e\u662f\u5426\u53ef\u4ee5\u88ab\u4fee\u6539\u6216\u6539\u53d8\u7684\u7279\u6027\u3002\u5728\u8bb8\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u53d8\u91cf\u901a\u5e38\u6709\u4e8c\u5143\u5bf9\u7acb\u7684\u72b6\u6001\uff1a\u53ef\u53d8(mutable)\u548c\u4e0d\u53ef\u53d8(immutable)\u3002</p> <ul> <li> <p>\u53ef\u53d8 (Mutable)\uff1a\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u662f\u53ef\u53d8\u7684\uff0c\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u521b\u5efa\u540e\u66f4\u6539\u5b83\u7684\u503c\u3002\u4f60\u53ef\u4ee5\u5bf9\u53ef\u53d8\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c\u64cd\u4f5c\uff0c\u4fee\u6539\u5176\u4e2d\u7684\u6570\u636e\u3002\u8fd9\u5728\u7f16\u7a0b\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u6539\u53d8\u6570\u636e\u3002</p> </li> <li> <p>\u4e0d\u53ef\u53d8 (Immutable)\uff1a\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u610f\u5473\u7740\u4e00\u65e6\u8d4b\u503c\u540e\uff0c\u5c31\u65e0\u6cd5\u518d\u66f4\u6539\u5176\u503c\u3002\u4e0d\u53ef\u53d8\u53d8\u91cf\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u548c\u5e76\u53d1\u73af\u5883\u4e2d\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u907f\u514d\u7ade\u4e89\u6761\u4ef6\u548c\u6570\u636e\u4e0d\u4e00\u81f4\u6027\u3002</p> </li> </ul> <p>\u5728\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u53d8\u91cf\u9ed8\u8ba4\u662f\u53ef\u53d8\u7684\uff0c\u4f46\u6709\u4e9b\u8bed\u8a00(\u5982Rust)\u9009\u62e9\u9ed8\u8ba4\u4e3a\u4e0d\u53ef\u53d8\uff0c\u9700\u8981\u663e\u5f0f\u5730\u58f0\u660e\u53d8\u91cf\u4e3a\u53ef\u53d8\u624d\u80fd\u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u5728Rust\u4e2d\uff0c\u53ef\u53d8\u6027\u662f\u4e00\u9879\u5f3a\u5236\u6027\u7684\u7279\u6027\uff0c\u8fd9\u610f\u5473\u7740\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53d8\u91cf\u662f\u4e0d\u53ef\u53d8\u7684\u3002\u5982\u679c\u4f60\u60f3\u8981\u4e00\u4e2a\u53ef\u53d8\u7684\u53d8\u91cf\uff0c\u9700\u8981\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u663e\u5f0f\u58f0\u660e\u5b83\u3002\u4f8b\u5982\uff1a</p> <pre><code>fn main() {\n    let x = 10; // \u4e0d\u53ef\u53d8\u53d8\u91cfx\n    let mut y = 20; // \u53ef\u53d8\u53d8\u91cfy\uff0c\u53ef\u4ee5\u4fee\u6539\u5176\u503c\n    y = 30; // \u53ef\u4ee5\u4fee\u6539y\u7684\u503c\n}\n</code></pre> <p>\u8fd9\u79cd\u9ed8\u8ba4\u7684\u4e0d\u53ef\u53d8\u6027\u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u5b89\u5168\u6027\uff0c\u56e0\u4e3a\u5b83\u9632\u6b62\u4e86\u610f\u5916\u7684\u6570\u636e\u4fee\u6539\u3002\u4f46\u4e5f\u5141\u8bb8\u4f60\u9009\u62e9\u5728\u9700\u8981\u65f6\u663e\u5f0f\u5730\u58f0\u660e\u53d8\u91cf\u4e3a\u53ef\u53d8\uff0c\u4ee5\u4fbf\u8fdb\u884c\u4fee\u6539\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#borrowing","title":"\u501f\u7528(Borrowing)","text":"<p>\u60f3\u8c61\u4e00\u4e0b\u4f60\u6709\u4e00\u672c\u6f2b\u753b\u4e66\uff0c\u4f60\u7684\u670b\u53cb\u53ef\u4ee5\u770b\uff0c\u4f46\u4e0d\u80fd\u628a\u5b83\u5e26\u8d70\u6216\u753b\u5728\u4e0a\u9762\u3002\u4f60\u5141\u8bb8\u4f60\u7684\u670b\u53cb\u501f\u7528\u8fd9\u672c\u4e66\uff0c\u4f46\u4e0d\u80fd\u6539\u53d8\u5b83\u3002\u5728 Rust \u4e2d\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u5171\u4eab\u5f15\u7528\uff0c\u5c31\u50cf\u662f\u8ba9\u670b\u53cb\u770b\u4f60\u7684\u4e66\uff0c\u4f46\u4e0d\u80fd\u4fee\u6539\u5b83\u3002</p> <pre><code>fn main() {\n    let mut comic_book = \"Spider-Man\".to_string(); // \u521b\u5efa\u4e00\u672c\u6f2b\u753b\u4e66\n    // comic_book \u662f\u5b83\u7684\u6240\u6709\u8005\n\n    let book_title = get_title(&amp;comic_book); // \u4f20\u9012\u4e66\u7684\u5f15\u7528\n    println!(\"Book title: {}\", book_title); // \u8fd4\u56de \"Book title: Spider-Man\"\n\n    add_subtitle(&amp;mut comic_book); // \u5c1d\u8bd5\u4fee\u6539\u4e66\uff0c\u9700\u8981\u53ef\u53d8\u5f15\u7528\n\n    // comic_book \u79bb\u5f00\u4e86\u4f5c\u7528\u57df\uff0c\u5b83\u7684\u6240\u6709\u6743\u88ab\u79fb\u52a8\u5230 get_title \u51fd\u6570\n    // \u8fd9\u91cc\u4e0d\u80fd\u518d\u9605\u8bfb\u6216\u4fee\u6539 comic_book\n}\n\nfn get_title(book: &amp;String) -&gt; String {\n    // \u63a5\u53d7 String \u7684\u5f15\u7528\uff0c\u4e0d\u83b7\u53d6\u6240\u6709\u6743\n    book.clone() // \u8fd4\u56de\u4e66\u7684\u6807\u9898\u7684\u62f7\u8d1d\n}\n\nfn add_subtitle(book: &amp;mut String) {\n    // \u63a5\u53d7\u53ef\u53d8 String \u7684\u5f15\u7528\uff0c\u53ef\u4ee5\u4fee\u6539\u4e66\n    book.push_str(\": The Amazing Adventures\");\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u521b\u5efa\u4e86\u4e00\u672c\u6f2b\u753b\u4e66 <code>comic_book</code>\uff0c\u7136\u540e\u5c06\u5b83\u7684\u5f15\u7528\u4f20\u9012\u7ed9 <code>get_title</code> \u51fd\u6570\uff0c\u800c\u4e0d\u662f\u79fb\u52a8\u5b83\u7684\u6240\u6709\u6743\u3002\u8fd9\u6837\uff0c\u51fd\u6570\u53ef\u4ee5\u8bfb\u53d6 <code>comic_book</code> \u7684\u6570\u636e\uff0c\u4f46\u4e0d\u80fd\u4fee\u6539\u5b83\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c1d\u8bd5\u8c03\u7528 <code>add_subtitle</code> \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u9700\u8981\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\uff0c\u56e0\u4e3a\u5b83\u8981\u4fee\u6539\u4e66\u7684\u5185\u5bb9\u3002\u5728rust\u4e2d\uff0c\u5bf9\u53d8\u91cf\u7684\u5199\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u901a\u8fc7\u53ef\u53d8\u5f15\u7528\u6765\u63a7\u5236\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2001-%20Rust%20%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/#lifetime","title":"\u751f\u547d\u5468\u671f(Lifetime)","text":"<p>\u751f\u547d\u5468\u671f\u5c31\u50cf\u662f\u4f60\u548c\u670b\u53cb\u4e00\u8d77\u89c2\u770b\u7535\u5f71\uff0c\u4f46\u4f60\u5fc5\u987b\u786e\u4fdd\u7535\u5f71\u7ed3\u675f\u524d\uff0c\u4f60\u7684\u670b\u53cb\u4ecd\u7136\u5728\u573a\u3002\u5982\u679c\u4f60\u7684\u670b\u53cb\u63d0\u524d\u79bb\u5f00\uff0c\u4f60\u4e0d\u80fd\u518d\u548c\u4ed6\u4e00\u8d77\u770b\u7535\u5f71\u3002\u5728 Rust \u4e2d\uff0c\u751f\u547d\u5468\u671f\u544a\u8bc9\u7f16\u8bd1\u5668\u4f60\u7684\u5f15\u7528\u53ef\u4ee5\u7528\u591a\u4e45\uff0c\u4ee5\u786e\u4fdd\u5f15\u7528\u4e0d\u4f1a\u6307\u5411\u5df2\u7ecf\u6d88\u5931\u7684\u4e1c\u897f\u3002\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u51fa\u73b0\u95ee\u9898\u3002</p> <pre><code>fn main() {\n    let result;\n    {\n        let number = 42;\n        result = get_value(&amp;number);\n    } // number \u79bb\u5f00\u4e86\u4f5c\u7528\u57df\uff0c\u4f46 result \u7684\u5f15\u7528\u4ecd\u7136\u6709\u6548\n\n    println!(\"Result: {}\", result);\n}\n\nfn get_value&lt;'a&gt;(val: &amp;'a i32) -&gt; &amp;'a i32 {\n    // \u63a5\u53d7 i32 \u7684\u5f15\u7528\uff0c\u8fd4\u56de\u76f8\u540c\u751f\u547d\u5468\u671f\u7684\u5f15\u7528\n    val // \u8fd4\u56de val \u7684\u5f15\u7528\uff0c\u5176\u751f\u547d\u5468\u671f\u4e0e val \u76f8\u540c\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u6574\u6570 <code>number</code>\uff0c\u7136\u540e\u5c06\u5b83\u7684\u5f15\u7528\u4f20\u9012\u7ed9 <code>get_value</code> \u51fd\u6570\uff0c\u5e76\u4f7f\u7528\u751f\u547d\u5468\u671f <code>'a</code> \u6765\u6807\u6ce8\u5f15\u7528\u7684\u6709\u6548\u6027\u3002\u51fd\u6570\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u4e0e\u4f20\u5165\u7684\u5f15\u7528 <code>val</code> \u76f8\u540c\uff0c\u56e0\u6b64\u5b83\u4ecd\u7136\u6709\u6548\uff0c\u5373\u4f7f <code>number</code> \u79bb\u5f00\u4e86\u4f5c\u7528\u57df\u3002</p> <p>\u8fd9\u4e9b\u6848\u4f8b\u5e0c\u671b\u5e2e\u52a9\u4f60\u66f4\u5bb9\u6613\u7406\u89e3 Rust \u4e2d\u7684\u6240\u6709\u6743\u3001\u501f\u7528\u548c\u751f\u547d\u5468\u671f\u8fd9\u4e09\u4e2a\u6982\u5ff5\u3002\u8fd9\u4e9b\u6982\u5ff5\u662f Rust \u7684\u6838\u5fc3\uff0c\u6709\u52a9\u4e8e\u786e\u4fdd\u4f60\u7684\u4ee3\u7801\u65e2\u5b89\u5168\u53c8\u9ad8\u6548\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2002%20-%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/","title":"Chapter 2 - \u683c\u5f0f\u5316\u8f93\u51fa","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2002%20-%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/#21-format-macros","title":"2.1 \u8bf8\u79cd\u683c\u5f0f\u5b8f(format macros)","text":"<p>Rust\u7684\u6253\u5370\u64cd\u4f5c\u7531 <code>std::fmt</code> \u91cc\u9762\u6240\u5b9a\u4e49\u7684\u4e00\u7cfb\u5217\u5b8f Macro \u6765\u5904\u7406\uff0c\u5305\u62ec\uff1a</p> <p><code>format!</code>\uff1a\u5c06\u683c\u5f0f\u5316\u6587\u672c\u5199\u5230\u5b57\u7b26\u4e32\u3002</p> <p><code>print!</code>\uff1a\u4e0e format! \u7c7b\u4f3c\uff0c\u4f46\u5c06\u6587\u672c\u8f93\u51fa\u5230\u63a7\u5236\u53f0(io::stdout)\u3002</p> <p><code>println!</code>: \u4e0e print! \u7c7b\u4f3c\uff0c\u4f46\u8f93\u51fa\u7ed3\u679c\u8ffd\u52a0\u4e00\u4e2a\u6362\u884c\u7b26\u3002</p> <p><code>eprint!</code>\uff1a\u4e0e print! \u7c7b\u4f3c\uff0c\u4f46\u5c06\u6587\u672c\u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef(io::stderr)\u3002</p> <p><code>eprintln!</code>\uff1a\u4e0e eprint! \u7c7b\u4f3c\uff0c\u4f46\u8f93\u51fa\u7ed3\u679c\u8ffd\u52a0\u4e00\u4e2a\u6362\u884c\u7b26\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2002%20-%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/#_1","title":"\u6848\u4f8b\uff1a\u6298\u73b0\u8ba1\u7b97\u5668","text":"<p>\u4ee5\u4e0b\u8fd9\u4e2a\u6848\u4f8b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6298\u73b0\u8ba1\u7b97\u5668\uff0c\u7528\u4e8e\u8ba1\u7b97\u672a\u6765\u73b0\u91d1\u6d41\u7684\u73b0\u503c\u3002\u7528\u6237\u9700\u8981\u63d0\u4f9b\u672c\u91d1\u91d1\u989d\u3001\u6298\u73b0\u7387\u548c\u65f6\u95f4\u671f\u9650\uff0c\u7136\u540e\u7a0b\u5e8f\u5c06\u6839\u636e\u8fd9\u4e9b\u8f93\u5165\u8ba1\u7b97\u73b0\u503c\u5e76\u5c06\u7ed3\u679c\u663e\u793a\u7ed9\u7528\u6237\u3002\u8fd9\u4e2a\u793a\u4f8b\u540c\u65f6\u7528\u5230\u4e86\u4e00\u4e9b\u57fa\u672c\u7684 Rust \u7f16\u7a0b\u6982\u5ff5\uff0c\u4ee5\u53ca\u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e9b\u529f\u80fd\u3002</p> <pre><code>use std::io;\nuse std::io::Write; // \u5bfc\u5165 Write trait\uff0c\u4ee5\u4fbf\u4f7f\u7528 flush \u65b9\u6cd5\n\nfn main() {\n    // \u8bfb\u53d6\u7528\u6237\u8f93\u5165\u7684\u672c\u91d1\u3001\u6298\u73b0\u7387\u548c\u65f6\u95f4\u671f\u9650\n    let mut input = String::new();\n\n    println!(\"\u6298\u73b0\u8ba1\u7b97\u5668\");\n\n    // \u63d0\u793a\u7528\u6237\u8f93\u5165\u672c\u91d1\u91d1\u989d\n    print!(\"\u8bf7\u8f93\u5165\u672c\u91d1\u91d1\u989d\uff1a\");\n    io::stdout().flush().expect(\"\u5237\u65b0\u5931\u8d25\"); // \u5237\u65b0\u6807\u51c6\u8f93\u51fa\u6d41\uff0c\u786e\u4fdd\u7acb\u5373\u663e\u793a\n    io::stdin().read_line(&amp;mut input).expect(\"\u8bfb\u53d6\u5931\u8d25\");\n    let principal: f64 = input.trim().parse().expect(\"\u65e0\u6548\u8f93\u5165\");\n\n    input.clear(); // \u6e05\u7a7a\u8f93\u5165\u7f13\u51b2\u533a\uff0c\u4ee5\u4fbf\u4e0b\u4e00\u6b21\u4f7f\u7528\n\n    // \u63d0\u793a\u7528\u6237\u8f93\u5165\u6298\u73b0\u7387\n    println!(\"\u8bf7\u8f93\u5165\u6298\u73b0\u7387(\u4ee5\u5c0f\u6570\u5f62\u5f0f)\uff1a\");\n    io::stdin().read_line(&amp;mut input).expect(\"\u8bfb\u53d6\u5931\u8d25\");\n    let discount_rate: f64 = input.trim().parse().expect(\"\u65e0\u6548\u8f93\u5165\");\n\n    input.clear(); // \u6e05\u7a7a\u8f93\u5165\u7f13\u51b2\u533a\uff0c\u4ee5\u4fbf\u4e0b\u4e00\u6b21\u4f7f\u7528\n\n    // \u63d0\u793a\u7528\u6237\u8f93\u5165\u65f6\u95f4\u671f\u9650\n    print!(\"\u8bf7\u8f93\u5165\u65f6\u95f4\u671f\u9650(\u4ee5\u5e74\u4e3a\u5355\u4f4d)\uff1a\");\n    io::stdout().flush().expect(\"\u5237\u65b0\u5931\u8d25\"); // \u5237\u65b0\u6807\u51c6\u8f93\u51fa\u6d41\uff0c\u786e\u4fdd\u7acb\u5373\u663e\u793a\n    io::stdin().read_line(&amp;mut input).expect(\"\u8bfb\u53d6\u5931\u8d25\");\n    let time_period: u32 = input.trim().parse().expect(\"\u65e0\u6548\u8f93\u5165\");\n\n    // \u8ba1\u7b97\u5e76\u663e\u793a\u7ed3\u679c\n    let result = calculate_present_value(principal, discount_rate, time_period);\n    println!(\"\u73b0\u503c\u4e3a\uff1a{:.2}\", result);\n}\n\nfn calculate_present_value(principal: f64, discount_rate: f64, time_period: u32) -&gt; f64 {\n    if discount_rate &lt; 0.0 {\n        eprint!(\"\\n\u9519\u8bef\uff1a\u6298\u73b0\u7387\u4e0d\u80fd\u4e3a\u8d1f\u6570\uff01 \");    // '\\n'\u4e3a\u6362\u884c\u8f6c\u4e49\u7b26\u53f7\n        eprintln!(\"\\n\u8bf7\u63d0\u4f9b\u6709\u6548\u7684\u6298\u73b0\u7387\u3002\");\n        std::process::exit(1);\n    }\n\n    if time_period == 0 {\n        eprint!(\"\\n\u9519\u8bef\uff1a\u65f6\u95f4\u671f\u9650\u4e0d\u80fd\u4e3a\u96f6\uff01 \");\n        eprintln!(\"\\n\u8bf7\u63d0\u4f9b\u6709\u6548\u7684\u65f6\u95f4\u671f\u9650\u3002\");\n        std::process::exit(1);\n    }\n\n    principal / (1.0 + discount_rate).powi(time_period as i32)\n}\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u6765\u4f7f\u7528\u4e00\u4e0b\u8fd9\u4e2a\u6298\u73b0\u8ba1\u7b97\u5668</p> <pre><code>\u6298\u73b0\u8ba1\u7b97\u5668\n\u8bf7\u8f93\u5165\u672c\u91d1\u91d1\u989d\uff1a2000\n\u8bf7\u8f93\u5165\u6298\u73b0\u7387(\u4ee5\u5c0f\u6570\u5f62\u5f0f)\uff1a0.2\n\u8bf7\u8f93\u5165\u65f6\u95f4\u671f\u9650(\u4ee5\u5e74\u4e3a\u5355\u4f4d)\uff1a2\n\n\u73b0\u503c\u4e3a\uff1a1388.89\n</code></pre> <p>\u5f53\u6211\u4eec\u8f93\u5165\u4e00\u4e2a\u8d1f\u7684\u6298\u73b0\u7387\u540e, \u6211\u4eec\u7528eprint!\u548ceprintln!\u9884\u5148\u7f16\u8f91\u597d\u7684\u9519\u8bef\u4fe1\u606f\u5c31\u51fa\u73b0\u4e86:</p> <pre><code>\u6298\u73b0\u8ba1\u7b97\u5668\n\u8bf7\u8f93\u5165\u672c\u91d1\u91d1\u989d\uff1a3000\n\u8bf7\u8f93\u5165\u6298\u73b0\u7387(\u4ee5\u5c0f\u6570\u5f62\u5f0f)\uff1a-0.2\n\u8bf7\u8f93\u5165\u65f6\u95f4\u671f\u9650(\u4ee5\u5e74\u4e3a\u5355\u4f4d)\uff1a5\n\n\u9519\u8bef\uff1a\u6298\u73b0\u7387\u4e0d\u80fd\u4e3a\u8d1f\u6570\uff01 \u8bf7\u63d0\u4f9b\u6709\u6548\u7684\u6298\u73b0\u7387\u3002\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2002%20-%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/#22-debug-display","title":"2.2 Debug \u548c Display \u7279\u6027","text":"<p><code>fmt::Debug</code>\uff1a\u4f7f\u7528 {:?} \u6807\u8bb0\u3002\u683c\u5f0f\u5316\u6587\u672c\u4ee5\u4f9b**\u8c03\u8bd5\u4f7f\u7528**\u3002 <code>fmt::Display</code>\uff1a\u4f7f\u7528 {} \u6807\u8bb0\u3002\u4ee5**\u66f4\u4f18\u96c5\u548c\u53cb\u597d\u7684\u98ce\u683c**\u6765\u683c\u5f0f\u5316\u6587\u672c\u3002</p> <p>\u5728 Rust \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4e3a\u81ea\u5b9a\u4e49\u7c7b\u578b(\u5305\u62ec\u7ed3\u6784\u4f53 <code>struct</code>)\u5b9e\u73b0 <code>Display</code> \u548c <code>Debug</code> \u7279\u6027\u6765\u63a7\u5236\u5982\u4f55\u4ee5\u53ef\u8bfb\u548c\u8c03\u8bd5\u53cb\u597d\u7684\u65b9\u5f0f\u6253\u5370(\u683c\u5f0f\u5316)\u8be5\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002\u8fd9\u4e24\u4e2a\u7279\u6027\u662f Rust \u6807\u51c6\u5e93\u4e2d\u7684 trait\uff0c\u5b83\u4eec\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u6253\u5370\u8f93\u51fa\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u7528\u9014\u3002</p> <p>Display \u7279\u6027\uff1a</p> <ul> <li> <p><code>Display</code> \u7279\u6027\u7528\u4e8e\u5b9a\u4e49\u7c7b\u578b\u7684\u4eba\u7c7b\u53ef\u8bfb\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\uff0c\u901a\u5e38\u7528\u4e8e\u7528\u6237\u53cb\u597d\u7684\u8f93\u51fa\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u5b9e\u73b0 <code>Display</code> \u7279\u6027\u6765\u6253\u5370\u7ed3\u6784\u4f53\u7684\u4fe1\u606f\uff0c\u4ee5\u4fbf\u7528\u6237\u80fd\u591f\u8f7b\u677e\u7406\u89e3\u5b83\u3002</p> </li> <li> <p>\u8981\u5b9e\u73b0 <code>Display</code> \u7279\u6027\uff0c\u5fc5\u987b\u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a <code>fmt</code> \u7684\u65b9\u6cd5\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u683c\u5f0f\u5316\u5668\u5bf9\u8c61(<code>fmt::Formatter</code>)\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c06\u8981\u6253\u5370\u7684\u4fe1\u606f\u5199\u5165\u8be5\u5bf9\u8c61\u3002</p> </li> <li> <p>\u4f7f\u7528 <code>{}</code> \u5360\u4f4d\u7b26\u53ef\u4ee5\u5728 <code>println!</code> \u5b8f\u6216 <code>format!</code> \u5b8f\u4e2d\u4f7f\u7528 <code>Display</code> \u7279\u6027\u3002</p> </li> <li> <p>\u901a\u5e38\uff0c\u5b9e\u73b0 <code>Display</code> \u7279\u6027\u9700\u8981\u624b\u52a8\u7f16\u5199\u4ee3\u7801\u6765\u6307\u5b9a\u6253\u5370\u7684\u683c\u5f0f\uff0c\u4ee5\u786e\u4fdd\u8f93\u51fa\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\u3002</p> </li> </ul> <p>Debug \u7279\u6027\uff1a</p> <ul> <li> <p><code>Debug</code> \u7279\u6027\u7528\u4e8e\u5b9a\u4e49\u7c7b\u578b\u7684\u8c03\u8bd5\u8f93\u51fa\u5f62\u5f0f\uff0c\u901a\u5e38\u7528\u4e8e\u5f00\u53d1\u548c\u8c03\u8bd5\u8fc7\u7a0b\u4e2d\uff0c\u4ee5\u4fbf\u67e5\u770b\u5185\u90e8\u6570\u636e\u7ed3\u6784\u548c\u72b6\u6001\u3002</p> </li> <li> <p>\u4e0e <code>Display</code> \u4e0d\u540c\uff0c<code>Debug</code> \u7279\u6027\u4e0d\u9700\u8981\u624b\u52a8\u6307\u5b9a\u683c\u5f0f\uff0c\u800c\u662f\u4f7f\u7528\u9ed8\u8ba4\u7684\u683c\u5f0f\u5316\u65b9\u5f0f\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728 <code>println!</code> \u5b8f\u6216 <code>format!</code> \u5b8f\u4e2d\u4f7f\u7528 <code>{:?}</code> \u5360\u4f4d\u7b26\u6765\u6253\u5370\u5b9e\u73b0\u4e86 <code>Debug</code> \u7279\u6027\u7684\u7c7b\u578b\u3002</p> </li> <li> <p>\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u4e00\u4e2a <code>#[derive(Debug)]</code> \u6ce8\u89e3\uff0c\u4f60\u53ef\u4ee5\u5c06\u5176\u6dfb\u52a0\u5230\u7ed3\u6784\u4f53\u5b9a\u4e49\u4e4b\u524d\uff0c\u4ee5\u81ea\u52a8\u751f\u6210 <code>Debug</code> \u5b9e\u73b0\u3002\u8fd9\u4f7f\u5f97\u8c03\u8bd5\u66f4\u52a0\u65b9\u4fbf\uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u624b\u52a8\u7f16\u5199\u8c03\u8bd5\u8f93\u51fa\u7684\u4ee3\u7801\u3002</p> </li> </ul>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2002%20-%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/#_2","title":"\u6848\u4f8b\uff1a \u6253\u5370\u80a1\u7968\u4ef7\u683c\u4fe1\u606f\u548c\u91d1\u878d\u62a5\u544a","text":"<p>\u80a1\u7968\u4ef7\u683c\u4fe1\u606f\uff1a(\u7531**Display Trait**\u63a8\u5bfc)</p> <pre><code>// \u5bfc\u5165 fmt \u6a21\u5757\u4e2d\u7684 fmt trait\uff0c\u7528\u4e8e\u5b9e\u73b0\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\nuse std::fmt;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53 StockPrice\uff0c\u8868\u793a\u80a1\u7968\u4ef7\u683c\nstruct StockPrice {\n    symbol: String, // \u80a1\u7968\u7b26\u53f7\n    price: f64,     // \u4ef7\u683c\n}\n\n// \u5b9e\u73b0 fmt::Display trait\uff0c\u5141\u8bb8\u6211\u4eec\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u8f93\u51fa\nimpl fmt::Display for StockPrice {\n    fn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result {\n        // \u4f7f\u7528 write! \u5b8f\u5c06\u683c\u5f0f\u5316\u540e\u7684\u5b57\u7b26\u4e32\u5199\u5165 f \u53c2\u6570\n        write!(f, \"\u80a1\u7968: {} - \u4ef7\u683c: {:.2}\", self.symbol, self.price)\n    }\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a StockPrice \u7ed3\u6784\u4f53\u5b9e\u4f8b\n    let price = StockPrice {\n        symbol: \"AAPL\".to_string(), // \u4f7f\u7528 to_string() \u65b9\u6cd5\u5c06\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u8f6c\u6362\u4e3a String \u7c7b\u578b\n        price: 150.25,\n    };\n\n    // \u4f7f\u7528 println! \u5b8f\u6253\u5370\u683c\u5f0f\u5316\u540e\u7684\u5b57\u7b26\u4e32\uff0c\u8fd9\u91cc\u4f1a\u81ea\u52a8\u8c03\u7528 Display \u5b9e\u73b0\u7684 fmt \u65b9\u6cd5\n    println!(\"[INFO]: {}\", price);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c: </p> <pre><code>[INFO]: Stock: AAPL - Price: 150.25\n</code></pre> <p>\u91d1\u878d\u62a5\u544a\uff1a(\u7531**Debug Trait**\u63a8\u5bfc)</p> <pre><code>// \u5bfc\u5165 fmt \u6a21\u5757\u4e2d\u7684 fmt trait\uff0c\u7528\u4e8e\u5b9e\u73b0\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\nuse std::fmt;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53 FinancialReport\uff0c\u8868\u793a\u8d22\u52a1\u62a5\u544a\n// \u4f7f\u7528 #[derive(Debug)] \u5c5e\u6027\u6765\u81ea\u52a8\u5b9e\u73b0 Debug trait\uff0c\u4ee5\u4fbf\u80fd\u591f\u4f7f\u7528 {:?} \u6253\u5370\u8c03\u8bd5\u4fe1\u606f\nstruct FinancialReport {\n    income: f64,    // \u6536\u5165\n    expenses: f64,  // \u652f\u51fa\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a FinancialReport \u7ed3\u6784\u4f53\u5b9e\u4f8b\n    let report = FinancialReport {\n        income: 10000.0,  // \u8bbe\u7f6e\u6536\u5165\n        expenses: 7500.0, // \u8bbe\u7f6e\u652f\u51fa\n    };\n\n    // \u4f7f\u7528 income \u548c expenses \u5b57\u6bb5\u7684\u503c\uff0c\u6253\u5370\u8d22\u52a1\u62a5\u544a\u7684\u6536\u5165\u548c\u652f\u51fa\n    println!(\"\u91d1\u878d\u62a5\u544a:\\nIncome: {:.2}\\nExpenses: {:.2}\", report.income, report.expenses);\n\n    // \u6253\u5370\u6574\u4e2a\u8d22\u52a1\u62a5\u544a\u7684\u8c03\u8bd5\u4fe1\u606f\uff0c\u5229\u7528 #[derive(Debug)] \u81ea\u52a8\u751f\u6210\u7684 Debug trait\n    println!(\"{:?}\", report);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c: </p> <pre><code>\u91d1\u878d\u62a5\u544a:\nIncome: 10000.00 //\u624b\u52a8\u683c\u5f0f\u5316\u7684\u8bed\u53e5\nExpenses: 7500.00 //\u624b\u52a8\u683c\u5f0f\u5316\u7684\u8bed\u53e5\nFinancialReport { income: 10000.0, expenses: 7500.0 } //Debug Trait\u5e2e\u6211\u4eec\u63a8\u5bfc\u7684\u539f\u59cb\u8bed\u53e5\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2002%20-%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/#23-write-print-format","title":"2.3  write! , print! \u548c format!\u7684\u533a\u522b","text":"<p><code>write!</code>\u3001<code>print!</code> \u548c <code>format!</code> \u90fd\u662f Rust \u4e2d\u7684\u5b8f\uff0c\u7528\u4e8e\u751f\u6210\u6587\u672c\u8f93\u51fa\uff0c\u4f46\u5b83\u4eec\u5728\u4f7f\u7528\u548c\u8f93\u51fa\u65b9\u9762\u7565\u6709\u4e0d\u540c\uff1a</p> <ol> <li> <p><code>write!</code>\uff1a</p> </li> <li> <p><code>write!</code> \u5b8f\u7528\u4e8e\u5c06\u683c\u5f0f\u5316\u7684\u6587\u672c\u5199\u5165\u5230\u4e00\u4e2a\u5b9e\u73b0\u4e86 <code>std::io::Write</code> trait \u7684\u5bf9\u8c61\u4e2d\uff0c\u901a\u5e38\u662f\u6587\u4ef6\u3001\u6807\u51c6\u8f93\u51fa(<code>std::io::stdout()</code>)\u6216\u6807\u51c6\u9519\u8bef(<code>std::io::stderr()</code>)\u3002</p> </li> <li> <p>\u4f7f\u7528 <code>write!</code> \u65f6\uff0c\u4f60\u9700\u8981\u6307\u5b9a\u76ee\u6807\u8f93\u51fa\u6d41\uff0c\u5c06\u751f\u6210\u7684\u6587\u672c\u5199\u5165\u8be5\u6d41\u4e2d\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5728\u63a7\u5236\u53f0\u6253\u5370\u3002</p> </li> <li> <p><code>write!</code> \u751f\u6210\u7684\u6587\u672c\u4e0d\u4f1a\u7acb\u5373\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\uff0c\u800c\u662f\u9700\u8981\u8fdb\u4e00\u6b65\u5c06\u5176\u5237\u65b0(flush)\u5230\u8f93\u51fa\u6d41\u4e2d\u3002</p> </li> <li> <p>\u793a\u4f8b\u7528\u6cd5\uff1a</p> <pre><code>use std::io::{self, Write};\n\nfn main() -&gt; io::Result&lt;()&gt; {\n    let mut output = io::stdout();\n    write!(output, \"Hello, {}!\", \"world\")?;\n    output.flush()?;\n    Ok(())\n}\n</code></pre> </li> <li> <p><code>print!</code>\uff1a</p> </li> <li> <p><code>print!</code> \u5b8f\u7528\u4e8e\u76f4\u63a5\u5c06\u683c\u5f0f\u5316\u7684\u6587\u672c\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa(\u63a7\u5236\u53f0)\uff0c\u800c\u4e0d\u9700\u8981\u6307\u5b9a\u8f93\u51fa\u6d41\u3002</p> </li> <li> <p><code>print!</code> \u751f\u6210\u7684\u6587\u672c\u4f1a\u7acb\u5373\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u3002</p> </li> <li> <p>\u793a\u4f8b\u7528\u6cd5\uff1a</p> <pre><code>fn main() {\n    print!(\"Hello, {}!\", \"world\");\n}\n</code></pre> </li> <li> <p><code>format!</code>\uff1a</p> </li> <li> <p><code>format!</code> \u5b8f\u7528\u4e8e\u751f\u6210\u4e00\u4e2a\u683c\u5f0f\u5316\u7684\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5c06\u5176\u5199\u5165\u8f93\u51fa\u6d41\u6216\u6253\u5370\u5230\u63a7\u5236\u53f0\u3002</p> </li> <li> <p>\u5b83\u8fd4\u56de\u4e00\u4e2a <code>String</code> \u7c7b\u578b\u7684\u5b57\u7b26\u4e32\uff0c\u4f60\u53ef\u4ee5\u968f\u540e\u4f7f\u7528\u5b83\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\u3001\u6253\u5370\u6216\u5199\u5165\u5230\u6587\u4ef6\u4e2d\u3002</p> </li> <li> <p>\u793a\u4f8b\u7528\u6cd5\uff1a</p> <pre><code>fn main() {\n    let formatted_str = format!(\"Hello, {}!\", \"world\");\n    println!(\"{}\", formatted_str);\n}\n</code></pre> </li> </ol> <p>\u603b\u7ed3\uff1a</p> <ul> <li>\u5982\u679c\u4f60\u60f3\u5c06\u683c\u5f0f\u5316\u7684\u6587\u672c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u901a\u5e38\u4f7f\u7528 <code>print!</code>\u3002</li> <li>\u5982\u679c\u4f60\u60f3\u5c06\u683c\u5f0f\u5316\u7684\u6587\u672c\u8f93\u51fa\u5230\u6587\u4ef6\u6216\u5176\u4ed6\u5b9e\u73b0\u4e86 <code>Write</code> trait \u7684\u5bf9\u8c61\uff0c\u4f7f\u7528 <code>write!</code>\u3002</li> <li>\u5982\u679c\u4f60\u53ea\u60f3\u751f\u6210\u4e00\u4e2a\u683c\u5f0f\u5316\u7684\u5b57\u7b26\u4e32\u800c\u4e0d\u9700\u8981\u7acb\u5373\u8f93\u51fa\uff0c\u4f7f\u7528 <code>format!</code>\u3002</li> </ul>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/","title":"Chapter 3 - \u539f\u751f\u7c7b\u578b","text":"<p>\"\u539f\u751f\u7c7b\u578b\"(Primitive Types)\u662f\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u7684\u4e00\u4e2a\u901a\u7528\u672f\u8bed\uff0c\u901a\u5e38\u7528\u4e8e\u63cf\u8ff0\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b\u3002Rust\u4e2d\u7684\u539f\u751f\u7c7b\u578b\u88ab\u79f0\u4e3a\u539f\u751f\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u8bed\u8a00\u7684\u57fa\u7840\u6784\u5efa\u5757\uff0c\u901a\u5e38\u7531\u7f16\u8bd1\u5668\u548c\u5e95\u5c42\u786c\u4ef6\u76f4\u63a5\u652f\u6301\u3002\u4ee5\u4e0b\u662f\u4e3a\u4ec0\u4e48\u8fd9\u4e9b\u7c7b\u578b\u88ab\u79f0\u4e3a\u539f\u751f\u7c7b\u578b\u7684\u51e0\u4e2a\u539f\u56e0\uff1a</p> <ol> <li>\u786c\u4ef6\u652f\u6301\uff1a\u539f\u751f\u7c7b\u578b\u901a\u5e38\u80fd\u591f\u76f4\u63a5\u6620\u5c04\u5230\u5e95\u5c42\u786c\u4ef6\u7684\u6570\u636e\u8868\u793a\u65b9\u5f0f\u3002\u4f8b\u5982\uff0c<code>i32</code> \u548c <code>f64</code> \u7c7b\u578b\u901a\u5e38\u76f4\u63a5\u5bf9\u5e94\u4e8eCPU\u4e2d\u6574\u6570\u548c\u6d6e\u70b9\u6570\u5bc4\u5b58\u5668\u7684\u5b58\u50a8\u683c\u5f0f\uff0c\u56e0\u6b64\u5728\u8fd0\u884c\u65f6\u6548\u7387\u8f83\u9ad8\u3002</li> <li>\u7f16\u8bd1\u5668\u4f18\u5316\uff1a\u7531\u4e8e\u539f\u751f\u7c7b\u578b\u7684\u8868\u793a\u65b9\u5f0f\u662f\u76f4\u63a5\u7684\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u8fdb\u884c\u6709\u6548\u7684\u4f18\u5316\uff0c\u4ee5\u5728\u4ee3\u7801\u6267\u884c\u65f6\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002\u8fd9\u610f\u5473\u7740\u539f\u751f\u7c7b\u578b\u7684\u64cd\u4f5c\u901a\u5e38\u6bd4\u81ea\u5b9a\u4e49\u7c7b\u578b\u66f4\u5feb\u901f\u3002</li> <li>\u6807\u51c6\u5316\uff1a\u539f\u751f\u7c7b\u578b\u662f\u8bed\u8a00\u6807\u51c6\u7684\u4e00\u90e8\u5206\uff0c\u56e0\u6b64\u5728\u4e0d\u540c\u7684Rust\u7f16\u8bd1\u5668\u548c\u73af\u5883\u4e2d\u5177\u6709\u76f8\u540c\u7684\u8bed\u4e49\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u8de8\u5e73\u53f0\u4f7f\u7528\u8fd9\u4e9b\u7c7b\u578b\uff0c\u800c\u65e0\u9700\u62c5\u5fc3\u4e0d\u540c\u7cfb\u7edf\u4e0a\u7684\u884c\u4e3a\u4e0d\u4e00\u81f4\u3002</li> <li>\u5185\u5b58\u5e03\u5c40\u53ef\u63a7\uff1a\u539f\u751f\u7c7b\u578b\u7684\u5185\u5b58\u5e03\u5c40\u662f\u660e\u786e\u7684\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u7cbe\u786e\u5730\u63a7\u5236\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\u65b9\u5f0f\u3002\u8fd9\u5bf9\u4e8e\u4e0e\u5916\u90e8\u7cfb\u7edf\u8fdb\u884c\u4ea4\u4e92\u3001\u7f16\u5199\u7cfb\u7edf\u7ea7\u4ee3\u7801\u6216\u8fdb\u884c\u5e95\u5c42\u5185\u5b58\u64cd\u4f5c\u975e\u5e38\u91cd\u8981\u3002</li> </ol> <p>Rust \u4e2d\u6709\u4e00\u4e9b\u539f\u751f\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u57fa\u672c\u7684\u6570\u636e\u503c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u539f\u751f\u6570\u636e\u7c7b\u578b\uff1a</p> <ol> <li> <p>\u6574\u6570\u7c7b\u578b\uff1a</p> </li> <li> <p><code>i8</code>\uff1a\u6709\u7b26\u53f78\u4f4d\u6574\u6570</p> </li> <li><code>i16</code>\uff1a\u6709\u7b26\u53f716\u4f4d\u6574\u6570</li> <li><code>i32</code>\uff1a\u6709\u7b26\u53f732\u4f4d\u6574\u6570</li> <li><code>i64</code>\uff1a\u6709\u7b26\u53f764\u4f4d\u6574\u6570</li> <li><code>i128</code>\uff1a\u6709\u7b26\u53f7128\u4f4d\u6574\u6570</li> <li><code>u8</code>\uff1a\u65e0\u7b26\u53f78\u4f4d\u6574\u6570</li> <li><code>u16</code>\uff1a\u65e0\u7b26\u53f716\u4f4d\u6574\u6570</li> <li><code>u32</code>\uff1a\u65e0\u7b26\u53f732\u4f4d\u6574\u6570</li> <li><code>u64</code>\uff1a\u65e0\u7b26\u53f764\u4f4d\u6574\u6570</li> <li><code>u128</code>\uff1a\u65e0\u7b26\u53f7128\u4f4d\u6574\u6570</li> <li><code>isize</code>\uff1a\u6709\u7b26\u53f7\u673a\u5668\u5b57\u5927\u5c0f\u7684\u6574\u6570</li> <li><code>usize</code>\uff1a\u65e0\u7b26\u53f7\u673a\u5668\u5b57\u5927\u5c0f\u7684\u6574\u6570</li> </ol> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528\u5404\u79cd\u6574\u6570\u7c7b\u578b\u7684 \u6848\u4f8b\uff0c\u6f14\u793a\u4e86\u4e0d\u540c\u6574\u6570\u7c7b\u578b\u7684\u7528\u6cd5\uff1a</p> <pre><code>fn main() {\n    // \u6709\u7b26\u53f7\u6574\u6570\u7c7b\u578b\n    let i8_num: i8 = -42;   // 8\u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a-128 \u5230 127\n    let i16_num: i16 = -1000; // 16\u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a-32,768 \u5230 32,767\n    let i32_num: i32 = 200000; // 32\u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a-2,147,483,648 \u5230 2,147,483,647\n    let i64_num: i64 = -9000000000; // 64\u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a-9,223,372,036,854,775,808 \u5230 9,223,372,036,854,775,807\n    let i128_num: i128 = 10000000000000000000000000000000; // 128\u4f4d\u6709\u7b26\u53f7\u6574\u6570\n\n    // \u65e0\u7b26\u53f7\u6574\u6570\u7c7b\u578b\n    let u8_num: u8 = 255; // 8\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a0 \u5230 255\n    let u16_num: u16 = 60000; // 16\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a0 \u5230 65,535\n    let u32_num: u32 = 4000000000; // 32\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a0 \u5230 4,294,967,295\n    let u64_num: u64 = 18000000000000000000; // 64\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u8303\u56f4\uff1a0 \u5230 18,446,744,073,709,551,615\n    let u128_num: u128 = 340282366920938463463374607431768211455; // 128\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\n\n    // \u6253\u5370\u5404\u4e2a\u6574\u6570\u7c7b\u578b\u7684\u503c\n    println!(\"i8: {}\", i8_num);\n    println!(\"i16: {}\", i16_num);\n    println!(\"i32: {}\", i32_num);\n    println!(\"i64: {}\", i64_num);\n    println!(\"i128: {}\", i128_num);\n    println!(\"u8: {}\", u8_num);\n    println!(\"u16: {}\", u16_num);\n    println!(\"u32: {}\", u32_num);\n    println!(\"u64: {}\", u64_num);\n    println!(\"u128: {}\", u128_num);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>i8: -42\ni16: -1000\ni32: 200000\ni64: -9000000000\ni128: 10000000000000000000000000000000\nu8: 255\nu16: 60000\nu32: 4000000000\nu64: 18000000000000000000\nu128: 340282366920938463463374607431768211455\n</code></pre> <ol> <li> <p>\u6d6e\u70b9\u6570\u7c7b\u578b\uff1a</p> </li> <li> <p><code>f32</code>\uff1a32\u4f4d\u6d6e\u70b9\u6570</p> </li> <li><code>f64</code>\uff1a64\u4f4d\u6d6e\u70b9\u6570(\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570)</li> </ol> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a \u6f14\u793a\u5404\u79cd\u6d6e\u70b9\u6570\u7c7b\u578b\u53ca\u5176\u8303\u56f4\u7684\u6848\u4f8b\uff1a</p> <pre><code>fn main() {\n    let f32_num: f32 = 3.14; // 32\u4f4d\u6d6e\u70b9\u6570\uff0c\u8303\u56f4\uff1a\u7ea6 -3.4e38 \u5230 3.4e38\uff0c\u7cbe\u5ea6\u7ea6\u4e3a7\u4f4d\u5c0f\u6570\n    let f64_num: f64 = 3.141592653589793238; // 64\u4f4d\u6d6e\u70b9\u6570\uff0c\u8303\u56f4\uff1a\u7ea6 -1.7e308 \u5230 1.7e308\uff0c\u7cbe\u5ea6\u7ea6\u4e3a15\u4f4d\u5c0f\u6570\n\n    // \u6253\u5370\u5404\u4e2a\u6d6e\u70b9\u6570\u7c7b\u578b\u7684\u503c\n    println!(\"f32: {}\", f32_num);\n    println!(\"f64: {}\", f64_num);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>f32: 3.14\nf64: 3.141592653589793\n</code></pre> <ol> <li>\u5e03\u5c14\u7c7b\u578b\uff1a</li> </ol> <p><code>bool</code>\uff1a\u8868\u793a\u5e03\u5c14\u503c\uff0c\u53ef\u4ee5\u662f <code>true</code> \u6216 <code>false</code>\u3002</p> <p>\u5728rust\u4e2d, \u5e03\u5c14\u503c bool \u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u5f53if\u8bed\u53e5\u7684\u5224\u65ad\u6761\u4ef6\u3002</p> <pre><code>fn main() {\n    // \u6a21\u62df\u80a1\u7968\u4ef7\u683c\u6570\u636e\n    let stock_price = 150.0;\n\n    // \u5b9a\u4e49\u4ea4\u6613\u7b56\u7565\u6761\u4ef6\n    let buy_condition = stock_price &lt; 160.0; // \u5982\u679c\u80a1\u4ef7\u4f4e\u4e8e160\uff0c\u6ee1\u8db3\u8d2d\u4e70\u6761\u4ef6\n    let sell_condition = stock_price &gt; 170.0; // \u5982\u679c\u80a1\u4ef7\u9ad8\u4e8e170\uff0c\u6ee1\u8db3\u5356\u51fa\u6761\u4ef6\n\n    // \u6267\u884c\u4ea4\u6613\u7b56\u7565\n    if buy_condition {  //buy_condition\u6b64\u65f6\u5df2\u7ecf\u662f\u4e00\u4e2a\u5e03\u5c14\u503c, \u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u5f53if\u8bed\u53e5\u7684\u5224\u65ad\u6761\u4ef6\n        println!(\"\u8d2d\u4e70\u80a1\u7968\uff1a\u80a1\u4ef7\u4e3a {}\uff0c\u6ee1\u8db3\u8d2d\u4e70\u6761\u4ef6\u3002\", stock_price);\n    } else if sell_condition { //sell_condition \u540c\u7406\u4e5f\u5df2\u662f\u4e00\u4e2a\u5e03\u5c14\u503c, \u53ef\u4ee5\u5f53if\u8bed\u53e5\u7684\u5224\u65ad\u6761\u4ef6\n        println!(\"\u5356\u51fa\u80a1\u7968\uff1a\u80a1\u4ef7\u4e3a {}\uff0c\u6ee1\u8db3\u5356\u51fa\u6761\u4ef6\u3002\", stock_price);\n    } else {\n        println!(\"\u4e0d\u6267\u884c\u4ea4\u6613\uff1a\u80a1\u4ef7\u4e3a {}\uff0c\u6ca1\u6709\u6ee1\u8db3\u7684\u4ea4\u6613\u6761\u4ef6\u3002\", stock_price);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u8d2d\u4e70\u80a1\u7968\uff1a\u80a1\u4ef7\u4e3a 150\uff0c\u6ee1\u8db3\u8d2d\u4e70\u6761\u4ef6\u3002\n</code></pre> <ol> <li>\u5b57\u7b26\u7c7b\u578b\uff1a</li> </ol> <p><code>char</code>\uff1a\u8868\u793a**\u5355\u4e2a** Unicode \u5b57\u7b26\u3002</p> <p>Rust\u7684\u5b57\u7b26\u7c7b\u578bchar\u5177\u6709\u4ee5\u4e0b\u7279\u5f81:</p> <ol> <li>Unicode \u652f\u6301\uff1a\u51e0\u4e4e\u6240\u6709\u73b0\u4ee3\u7f16\u7a0b\u8bed\u8a00\u90fd\u63d0\u4f9b\u4e86\u5bf9Unicode\u5b57\u7b26\u7684\u652f\u6301\uff0c\u56e0\u4e3aUnicode\u5df2\u6210\u4e3a\u5168\u7403\u6807\u51c6\u5b57\u7b26\u96c6\u3002Rust \u7684 <code>char</code> \u7c7b\u578b\u5f53\u7136\u4e5f\u662f Unicode \u517c\u5bb9\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u8868\u793a\u4efb\u4f55\u6709\u6548\u7684 Unicode \u5b57\u7b26\uff0c\u5305\u62ec ASCII \u5b57\u7b26\u548c\u5176\u4ed6\u8bed\u8a00\u4e2d\u7684\u7279\u6b8a\u5b57\u7b26\u3002</li> <li>32 \u4f4d\u5bbd\u5ea6\uff1a<code>char</code>\u7c7b\u578b\u4f7f\u7528UTF-32\u7f16\u7801\u6765\u8868\u793aUnicode\u5b57\u7b26\uff0c\u4e00\u4e2a<code>char</code>\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u957f\u5ea6\u4e3a 1 \u7684 UCS-4 / UTF-32 \u5b57\u7b26\u4e32\u3002\u3002\u8fd9\u786e\u4fdd\u4e86<code>char</code>\u7c7b\u578b\u53ef\u4ee5\u5bb9\u7eb3\u4efb\u4f55Unicode\u5b57\u7b26\uff0c\u56e0\u4e3aUTF-32\u7f16\u7801\u7684\u7801\u70b9\u8303\u56f4\u8986\u76d6\u4e86Unicode\u5b57\u7b26\u96c6\u7684\u6240\u6709\u5b57\u7b26\u3002<code>char</code> \u7c7b\u578b\u7684\u503c\u662f Unicode \u6807\u91cf\u503c(\u5373\u4e0d\u662f\u4ee3\u7406\u9879\u7684\u4ee3\u7801\u70b9)\uff0c\u8868\u793a\u4e3a 0x0000 \u5230 0xD7FF \u6216 0xE000 \u5230 0x10FFFF \u8303\u56f4\u5185\u7684 32 \u4f4d\u65e0\u7b26\u53f7\u5b57\u3002\u521b\u5efa\u4e00\u4e2a\u8d85\u51fa\u6b64\u8303\u56f4\u7684 <code>char</code> \u4f1a\u7acb\u5373\u88ab\u7f16\u8bd1\u5668\u8ba4\u4e3a\u662f\u672a\u5b9a\u4e49\u884c\u4e3a\u3002 </li> <li>\u5b57\u7b26\u5b57\u9762\u91cf\uff1a<code>char</code> \u7c7b\u578b\u7684\u5b57\u7b26\u5b57\u9762\u91cf\u4f7f\u7528\u5355\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u4f8b\u5982 <code>'A'</code> \u6216 <code>'\u2764'</code>\u3002\u8fd9\u4e9b\u5b57\u7b26\u5b57\u9762\u91cf\u53ef\u4ee5\u76f4\u63a5\u8d4b\u503c\u7ed9 <code>char</code> \u53d8\u91cf\u3002</li> <li>\u5b57\u7b26\u8f6c\u4e49\u5e8f\u5217\uff1a\u4e0e\u5b57\u7b26\u4e32\u4e00\u6837\uff0c<code>char</code> \u5b57\u9762\u91cf\u4e5f\u652f\u6301\u8f6c\u4e49\u5e8f\u5217\uff0c\u4f8b\u5982 <code>'\\n'</code> \u8868\u793a\u6362\u884c\u5b57\u7b26\u3002</li> <li>UTF-8 \u5b57\u7b26\u4e32\uff1aRust \u4e2d\u7684\u5b57\u7b26\u4e32\u7c7b\u578b <code>String</code> \u662f UTF-8 \u7f16\u7801\u7684\uff0c\u8fd9\u4e0e <code>char</code> \u7c7b\u578b\u517c\u5bb9\uff0c\u56e0\u4e3a UTF-8 \u662f\u4e00\u79cd\u53ef\u53d8\u957f\u5ea6\u7f16\u7801\uff0c\u53ef\u4ee5\u8868\u793a\u5404\u79cd\u5b57\u7b26\u3002</li> <li> <p>\u5b57\u7b26\u8fed\u4ee3\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u5668\u6765\u5904\u7406\u5b57\u7b26\u4e32\u4e2d\u7684\u6bcf\u4e2a\u5b57\u7b26\uff0c\u4f8b\u5982\u4f7f\u7528 <code>chars()</code> \u65b9\u6cd5\u3002\u8fd9\u4f7f\u5f97\u904d\u5386\u548c\u64cd\u4f5c\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u975e\u5e38\u65b9\u4fbf\u3002</p> <p><code>char</code> \u7c7b\u578b\u7684\u7279\u6027\u53ef\u4ee5\u7528\u4e8e\u5904\u7406\u548c\u8868\u793a\u4e0e\u91d1\u878d\u6570\u636e\u548c\u5206\u6790\u76f8\u5173\u7684\u5404\u79cd\u5b57\u7b26\u548c\u7b26\u53f7\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5c55\u793a\u5982\u4f55\u5728\u91cf\u5316\u91d1\u878d\u73af\u5883\u4e2d\u5229\u7528 <code>char</code> \u7279\u6027\u7684\u793a\u4f8b\uff1a</p> </li> <li> <p>\u8868\u793a\u8d27\u5e01\u7b26\u53f7\uff1a<code>char</code> \u53ef\u4ee5\u7528\u4e8e\u8868\u793a\u8d27\u5e01\u7b26\u53f7\uff0c\u4f8b\u5982\u7f8e\u5143\u7b26\u53f7 <code>$</code> \u6216\u6b27\u5143\u7b26\u53f7 <code>\u20ac</code>\u3002\u8fd9\u5bf9\u4e8e\u5728\u91d1\u878d\u6570\u636e\u4e2d\u6807\u8bc6\u8d27\u5e01\u7c7b\u578b\u975e\u5e38\u6709\u7528\u3002</p> <pre><code>fn main() {\n    let usd_symbol = '$';\n    let eur_symbol = '\u20ac';\n\n    println!(\"\u7f8e\u5143\u7b26\u53f7: {}\", usd_symbol);\n    println!(\"\u6b27\u5143\u7b26\u53f7: {}\", eur_symbol);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u7f8e\u5143\u7b26\u53f7: $\n\u6b27\u5143\u7b26\u53f7: \u20ac\n</code></pre> </li> <li> <p>\u8868\u793a\u671f\u6743\u5408\u7ea6\u79cd\u7c7b\uff1a\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>char</code> \u7c7b\u578b\u6765\u8868\u793a\u671f\u6743\u5408\u7ea6\u7c7b\u578b\uff0c'P' \u4ee3\u8868put\u671f\u6743\u5408\u7ea6\uff0c'C' \u4ee3\u8868call\u671f\u6743\u5408\u7ea6\u3002\u6839\u636e\u4e0d\u540c\u7684\u5408\u7ea6\u7c7b\u578b\uff0c\u6211\u4eec\u6267\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u7528\u4e8e\u5728\u91d1\u878d\u4ea4\u6613\u4e2d\u786e\u5b9a\u671f\u6743\u5408\u7ea6\u7684\u7c7b\u578b\uff0c\u4ece\u800c\u6267\u884c\u76f8\u5e94\u7684\u4ea4\u6613\u7b56\u7565\u3002</p> <pre><code>fn main() {\n    let contract_type = 'P'; // \u4ee3\u8868put\u671f\u6743\u5408\u7ea6\n\n    match contract_type {\n        'P' =&gt; println!(\"\u6267\u884cput\u671f\u6743\u5408\u7ea6\u3002\"),\n        'C' =&gt; println!(\"\u6267\u884ccall\u671f\u6743\u5408\u7ea6\u3002\"),\n        _ =&gt; println!(\"\u672a\u77e5\u7684\u671f\u6743\u5408\u7ea6\u7c7b\u578b\u3002\"),\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u6267\u884cput\u671f\u6743\u5408\u7ea6\u3002\n</code></pre> </li> <li> <p>\u5904\u7406\u7279\u6b8a\u5b57\u7b26\uff1a\u91d1\u878d\u6570\u636e\u4e2d\u53ef\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u767e\u5206\u6bd4\u7b26\u53f7 <code>%</code> \u6216\u4e58\u53f7 <code>*</code>\u3002<code>char</code> \u7c7b\u578b\u5141\u8bb8\u4f60\u5728\u5904\u7406\u8fd9\u4e9b\u5b57\u7b26\u65f6\u66f4\u5bb9\u6613\u5730\u6267\u884c\u5404\u79cd\u64cd\u4f5c\u3002</p> <pre><code>fn main() {\n    let percentage = 5.0; // \u767e\u5206\u6bd4 5%\n    let multi_sign = '*';\n\n    // \u5728\u8ba1\u7b97\u4e2d\u4f7f\u7528\u767e\u5206\u6bd4\n    let value = 10.0;\n    let result = value * (percentage / 100.0); // \u5c06\u767e\u5206\u6bd4\u8f6c\u6362\u4e3a\u5c0f\u6570\u8fdb\u884c\u8ba1\u7b97\n\n    println!(\"{}% {} {} = {}\", percentage, multi_sign, value, result);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>5% * 10 = 0.5\n</code></pre> </li> </ol> <p><code>char</code> \u7c7b\u578b\u7684\u7279\u6027\u4f7f\u5f97\u4f60\u80fd\u591f\u66f4\u65b9\u4fbf\u5730\u5904\u7406\u548c\u8bc6\u522b\u4e0e\u91d1\u878d\u6570\u636e\u548c\u7b26\u53f7\u76f8\u5173\u7684\u5b57\u7b26\uff0c\u4ece\u800c\u66f4\u597d\u5730\u652f\u6301\u91d1\u878d\u6570\u636e\u5206\u6790\u548c\u5c55\u793a\u3002    </p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#31","title":"3.1 \u5b57\u9762\u91cf, \u8fd0\u7b97\u7b26 \u548c\u5b57\u7b26\u4e32","text":"<p>Rust\u8bed\u8a00\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7c7b\u578b\u7684\u5b57\u9762\u91cf\u6765\u8868\u793a\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5b57\u7b26\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u4ee5\u53ca\u5355\u5143\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u5173\u4e8eRust\u5b57\u9762\u91cf\u548c\u8fd0\u7b97\u7b26\u7684\u7b80\u8981\u603b\u7ed3\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#311-literals","title":"3.1.1 \u5b57\u9762\u91cf(Literals)\uff1a","text":"<p>\u5f53\u4f60\u7f16\u5199 Rust \u4ee3\u7801\u65f6\uff0c\u4f60\u4f1a\u9047\u5230\u5404\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u5b57\u9762\u91cf\uff0c\u5b83\u4eec\u7528\u4e8e\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u5b57\u9762\u91cf\u7c7b\u578b\u548c\u793a\u4f8b\uff1a</p> <ol> <li>\u6574\u6570\u5b57\u9762\u91cf(Integer Literals)\uff1a\u7528\u4e8e\u8868\u793a\u6574\u6570\u503c\uff0c\u4f8b\u5982\uff1a</li> <li>\u5341\u8fdb\u5236\u6574\u6570\uff1a<code>10</code></li> <li>\u5341\u516d\u8fdb\u5236\u6574\u6570\uff1a<code>0x1F</code></li> <li>\u516b\u8fdb\u5236\u6574\u6570\uff1a<code>0o77</code></li> <li> <p>\u4e8c\u8fdb\u5236\u6574\u6570\uff1a<code>0b1010</code></p> </li> <li> <p>\u6d6e\u70b9\u6570\u5b57\u9762\u91cf(Floating-Point Literals)\uff1a\u7528\u4e8e\u8868\u793a\u5e26\u5c0f\u6570\u70b9\u7684\u6570\u503c\uff0c\u4f8b\u5982\uff1a</p> </li> <li>\u6d6e\u70b9\u6570\uff1a<code>3.14</code></li> <li> <p>\u79d1\u5b66\u8ba1\u6570\u6cd5\uff1a<code>2.0e5</code></p> </li> <li> <p>\u5b57\u7b26\u5b57\u9762\u91cf(Character Literals)\uff1a\u7528\u4e8e\u8868\u793a\u5355\u4e2a\u5b57\u7b26\uff0c\u4f7f\u7528\u5355\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u4f8b\u5982\uff1a</p> </li> <li>\u5b57\u7b26 \uff1a<code>'A'</code></li> <li> <p>\u8f6c\u4e49\u5b57\u7b26 \uff1a<code>'\\n'</code></p> </li> <li> <p>\u5b57\u7b26\u4e32\u5b57\u9762\u91cf(String Literals)\uff1a\u7528\u4e8e\u8868\u793a\u6587\u672c\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u4f8b\u5982\uff1a</p> </li> <li> <p>\u5b57\u7b26\u4e32 \uff1a<code>\"Hello, World!\"</code></p> </li> <li> <p>\u5e03\u5c14\u5b57\u9762\u91cf(Boolean Literals)\uff1a\u7528\u4e8e\u8868\u793a\u771f(<code>true</code>)\u6216\u5047(<code>false</code>)\u7684\u503c\uff0c\u4f8b\u5982\uff1a</p> </li> <li>\u5e03\u5c14\u503c \uff1a<code>true</code></li> <li> <p>\u5e03\u5c14\u503c\uff1a<code>false</code></p> </li> <li> <p>\u5355\u5143\u7c7b\u578b(Unit Type)\uff1a\u8868\u793a\u6ca1\u6709\u6709\u610f\u4e49\u7684\u8fd4\u56de\u503c\u7684\u60c5\u51b5\uff0c\u901a\u5e38\u8868\u793a\u4e3a <code>()</code>\uff0c\u4f8b\u5982\uff1a</p> </li> <li>\u51fd\u6570\u8fd4\u56de\u503c\uff1a<code>fn do_something() -&gt; () { }</code></li> </ol> <p>\u4f60\u8fd8\u53ef\u4ee5\u5728\u6570\u5b57\u5b57\u9762\u91cf\u4e2d\u63d2\u5165\u4e0b\u5212\u7ebf <code>_</code> \u4ee5\u63d0\u9ad8\u53ef\u8bfb\u6027\uff0c\u4f8b\u5982 <code>1_000</code> \u548c <code>0.000_001</code>\uff0c\u5b83\u4eec\u5206\u522b\u7b49\u540c\u4e8e1000\u548c0.000001\u3002\u8fd9\u4e9b\u5b57\u9762\u91cf\u7c7b\u578b\u7528\u4e8e\u521d\u59cb\u5316\u53d8\u91cf\u3001\u4f20\u9012\u53c2\u6570\u548c\u8868\u793a\u6570\u636e\u7684\u5404\u79cd\u503c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#312-operators","title":"3.1.2 \u8fd0\u7b97\u7b26(Operators)\uff1a","text":"<p>\u5728 Rust \u4e2d\uff0c\u5e38\u89c1\u7684\u8fd0\u7b97\u7b26\u5305\u62ec\uff1a</p> <ol> <li>\u7b97\u672f\u8fd0\u7b97\u7b26(Arithmetic Operators)\uff1a</li> <li><code>+</code>(\u52a0\u6cd5)\uff1a\u5c06\u4e24\u4e2a\u6570\u76f8\u52a0\uff0c\u4f8b\u5982 <code>a + b</code>\u3002</li> <li><code>-</code>(\u51cf\u6cd5)\uff1a\u5c06\u53f3\u8fb9\u7684\u6570\u4ece\u5de6\u8fb9\u7684\u6570\u4e2d\u51cf\u53bb\uff0c\u4f8b\u5982 <code>a - b</code>\u3002</li> <li><code>*</code>(\u4e58\u6cd5)\uff1a\u5c06\u4e24\u4e2a\u6570\u76f8\u4e58\uff0c\u4f8b\u5982 <code>a * b</code>\u3002</li> <li><code>/</code>(\u9664\u6cd5)\uff1a\u5c06\u5de6\u8fb9\u7684\u6570\u9664\u4ee5\u53f3\u8fb9\u7684\u6570\uff0c\u4f8b\u5982 <code>a / b</code>\u3002</li> <li><code>%</code>(\u53d6\u4f59)\uff1a\u8fd4\u56de\u5de6\u8fb9\u7684\u6570\u9664\u4ee5\u53f3\u8fb9\u7684\u6570\u7684\u4f59\u6570\uff0c\u4f8b\u5982 <code>a % b</code>\u3002</li> <li>\u6bd4\u8f83\u8fd0\u7b97\u7b26(Comparison Operators)\uff1a</li> <li><code>==</code>(\u7b49\u4e8e)\uff1a\u68c0\u67e5\u5de6\u53f3\u4e24\u8fb9\u7684\u503c\u662f\u5426\u76f8\u7b49\uff0c\u4f8b\u5982 <code>a == b</code>\u3002</li> <li><code>!=</code>(\u4e0d\u7b49\u4e8e)\uff1a\u68c0\u67e5\u5de6\u53f3\u4e24\u8fb9\u7684\u503c\u662f\u5426\u4e0d\u76f8\u7b49\uff0c\u4f8b\u5982 <code>a != b</code>\u3002</li> <li><code>&lt;</code>(\u5c0f\u4e8e)\uff1a\u68c0\u67e5\u5de6\u8fb9\u7684\u503c\u662f\u5426\u5c0f\u4e8e\u53f3\u8fb9\u7684\u503c\uff0c\u4f8b\u5982 <code>a &lt; b</code>\u3002</li> <li><code>&gt;</code>(\u5927\u4e8e)\uff1a\u68c0\u67e5\u5de6\u8fb9\u7684\u503c\u662f\u5426\u5927\u4e8e\u53f3\u8fb9\u7684\u503c\uff0c\u4f8b\u5982 <code>a &gt; b</code>\u3002</li> <li><code>&lt;=</code>(\u5c0f\u4e8e\u7b49\u4e8e)\uff1a\u68c0\u67e5\u5de6\u8fb9\u7684\u503c\u662f\u5426\u5c0f\u4e8e\u6216\u7b49\u4e8e\u53f3\u8fb9\u7684\u503c\uff0c\u4f8b\u5982 <code>a &lt;= b</code>\u3002</li> <li><code>&gt;=</code>(\u5927\u4e8e\u7b49\u4e8e)\uff1a\u68c0\u67e5\u5de6\u8fb9\u7684\u503c\u662f\u5426\u5927\u4e8e\u6216\u7b49\u4e8e\u53f3\u8fb9\u7684\u503c\uff0c\u4f8b\u5982 <code>a &gt;= b</code>\u3002</li> <li>\u903b\u8f91\u8fd0\u7b97\u7b26(Logical Operators)\uff1a</li> <li><code>&amp;&amp;</code>(\u903b\u8f91\u4e0e)\uff1a\u7528\u4e8e\u7ec4\u5408\u4e24\u4e2a\u6761\u4ef6\uff0c\u53ea\u6709\u5f53\u4e24\u4e2a\u6761\u4ef6\u90fd\u4e3a\u771f\u65f6\u624d\u4e3a\u771f\uff0c\u4f8b\u5982 <code>condition1 &amp;&amp; condition2</code>\u3002</li> <li><code>||</code>(\u903b\u8f91\u6216)\uff1a\u7528\u4e8e\u7ec4\u5408\u4e24\u4e2a\u6761\u4ef6\uff0c\u53ea\u8981\u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u4e3a\u771f\u5c31\u4e3a\u771f\uff0c\u4f8b\u5982 <code>condition1 || condition2</code>\u3002</li> <li><code>!</code>(\u903b\u8f91\u975e)\uff1a\u7528\u4e8e\u53d6\u53cd\u4e00\u4e2a\u6761\u4ef6\uff0c\u5c06\u771f\u53d8\u4e3a\u5047\uff0c\u5047\u53d8\u4e3a\u771f\uff0c\u4f8b\u5982 <code>!condition</code>\u3002</li> <li>\u8d4b\u503c\u8fd0\u7b97\u7b26(Assignment Operators)\uff1a</li> <li><code>=</code>(\u8d4b\u503c)\uff1a\u5c06\u53f3\u8fb9\u7684\u503c\u8d4b\u7ed9\u5de6\u8fb9\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>a = b</code>\u3002</li> <li><code>+=</code>(\u52a0\u6cd5\u8d4b\u503c)\uff1a\u5c06\u5de6\u8fb9\u7684\u53d8\u91cf\u4e0e\u53f3\u8fb9\u7684\u503c\u76f8\u52a0\uff0c\u5e76\u5c06\u7ed3\u679c\u8d4b\u7ed9\u5de6\u8fb9\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>a += b</code> \u76f8\u5f53\u4e8e <code>a = a + b</code>\u3002</li> <li><code>-=</code>(\u51cf\u6cd5\u8d4b\u503c)\uff1a\u5c06\u5de6\u8fb9\u7684\u53d8\u91cf\u4e0e\u53f3\u8fb9\u7684\u503c\u76f8\u51cf\uff0c\u5e76\u5c06\u7ed3\u679c\u8d4b\u7ed9\u5de6\u8fb9\u7684\u53d8\u91cf\uff0c\u4f8b\u5982 <code>a -= b</code> \u76f8\u5f53\u4e8e <code>a = a - b</code>\u3002</li> <li>\u4f4d\u8fd0\u7b97\u7b26(Bitwise Operators)\uff1a</li> <li><code>&amp;</code>(\u6309\u4f4d\u4e0e)\uff1a\u5bf9\u4e24\u4e2a\u6570\u7684\u6bcf\u4e00\u4f4d\u6267\u884c\u4e0e\u64cd\u4f5c\uff0c\u4f8b\u5982 <code>a &amp; b</code>\u3002</li> <li><code>|</code>(\u6309\u4f4d\u6216)\uff1a\u5bf9\u4e24\u4e2a\u6570\u7684\u6bcf\u4e00\u4f4d\u6267\u884c\u6216\u64cd\u4f5c\uff0c\u4f8b\u5982 <code>a | b</code>\u3002</li> <li><code>^</code>(\u6309\u4f4d\u5f02\u6216)\uff1a\u5bf9\u4e24\u4e2a\u6570\u7684\u6bcf\u4e00\u4f4d\u6267\u884c\u5f02\u6216\u64cd\u4f5c\uff0c\u4f8b\u5982 <code>a ^ b</code>\u3002</li> </ol> <p>\u8fd9\u4e9b\u8fd0\u7b97\u7b26\u5728 Rust \u4e2d\u7528\u4e8e\u6267\u884c\u5404\u79cd\u6570\u5b66\u3001\u903b\u8f91\u548c\u4f4d\u64cd\u4f5c\uff0c\u4f7f\u4f60\u80fd\u591f\u7f16\u5199\u7075\u6d3b\u548c\u9ad8\u6548\u7684\u4ee3\u7801\u3002</p> <p>\u73b0\u5728\u628a\u8fd9\u4e9b\u8fd0\u7b97\u7b26\u5e26\u5230\u5b9e\u9645\u573a\u666f\u6765\u770b\u4e00\u4e0b\uff1a</p> <pre><code>fn main() {\n    // \u52a0\u6cd5\u8fd0\u7b97\uff1a\u6574\u6570\u76f8\u52a0\n    println!(\"3 + 7 = {}\", 3u32 + 7);\n    // \u51cf\u6cd5\u8fd0\u7b97\uff1a\u6574\u6570\u76f8\u51cf\n    println!(\"10 \u51cf\u53bb 4 = {}\", 10i32 - 4);\n\n    // \u903b\u8f91\u8fd0\u7b97\uff1a\u5e03\u5c14\u503c\u7684\u7ec4\u5408\n    println!(\"true \u4e0e false \u7684\u4e0e\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a{}\", true &amp;&amp; false);\n    println!(\"true \u6216 false \u7684\u6216\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a{}\", true || false);\n    println!(\"true \u7684\u975e\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a{}\", !true);\n\n    // \u8d4b\u503c\u8fd0\u7b97\uff1a\u53d8\u91cf\u503c\u7684\u66f4\u65b0\n    let mut x = 8;\n    x += 5; // \u7b49\u540c\u4e8e x = x + 5\n    println!(\"x \u73b0\u5728\u7684\u503c\u662f\uff1a{}\", x);\n\n    // \u4f4d\u8fd0\u7b97\uff1a\u4e8c\u8fdb\u5236\u4f4d\u7684\u64cd\u4f5c\n    println!(\"0101 \u548c 0010 \u7684\u4e0e\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a{:04b}\", 0b0101u32 &amp; 0b0010);\n    println!(\"0101 \u548c 0010 \u7684\u6216\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a{:04b}\", 0b0101u32 | 0b0010);\n    println!(\"0101 \u548c 0010 \u7684\u5f02\u6216\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a{:04b}\", 0b0101u32 ^ 0b0010);\n    println!(\"2 \u5de6\u79fb 3 \u4f4d\u7684\u7ed3\u679c\u662f\uff1a{}\", 2u32 &lt;&lt; 3);\n    println!(\"0xC0 \u53f3\u79fb 4 \u4f4d\u7684\u7ed3\u679c\u662f\uff1a0x{:x}\", 0xC0u32 &gt;&gt; 4);\n\n    // \u4f7f\u7528\u4e0b\u5212\u7ebf\u589e\u52a0\u6570\u5b57\u7684\u53ef\u8bfb\u6027\n    println!(\"\u4e00\u5343\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a{}\", 1_000u32);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>3 + 7 = 10\n10 \u51cf\u53bb 4 = 6\ntrue \u4e0e false \u7684\u4e0e\u8fd0\u7b97\u7ed3\u679c\u662f\uff1afalse\ntrue \u6216 false \u7684\u6216\u8fd0\u7b97\u7ed3\u679c\u662f\uff1atrue\ntrue \u7684\u975e\u8fd0\u7b97\u7ed3\u679c\u662f\uff1afalse\nx \u73b0\u5728\u7684\u503c\u662f\uff1a13\n0101 \u548c 0010 \u7684\u4e0e\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a0000\n0101 \u548c 0010 \u7684\u6216\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a0111\n0101 \u548c 0010 \u7684\u5f02\u6216\u8fd0\u7b97\u7ed3\u679c\u662f\uff1a0111\n2 \u5de6\u79fb 3 \u4f4d\u7684\u7ed3\u679c\u662f\uff1a16\n0xC0 \u53f3\u79fb 4 \u4f4d\u7684\u7ed3\u679c\u662f\uff1a0xc\n\u4e00\u5343\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a1000\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#_1","title":"\u8865\u5145\u5b66\u4e60: \u903b\u8f91\u8fd0\u7b97\u7b26","text":"<p>\u903b\u8f91\u8fd0\u7b97\u4e2d\u6709\u4e09\u79cd\u57fa\u672c\u64cd\u4f5c\uff1a\u4e0e(AND)\u3001\u6216(OR)\u3001\u5f02\u6216(XOR)\uff0c\u7528\u6765\u64cd\u4f5c\u4e8c\u8fdb\u5236\u4f4d\u3002</p> <ol> <li>0011 \u4e0e 0101 \u4e3a 0001(AND\u8fd0\u7b97)\uff1a    \u8fd9\u4e2a\u8fd0\u7b97\u7b26\u8868\u793a\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u5bf9\u5e94\u4f4d\u90fd\u4e3a1\u65f6\uff0c\u7ed3\u679c\u4f4d\u4e3a1\uff0c\u5426\u5219\u4e3a0\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e00\u5bf9\u4f4d\u8fdb\u884cAND\u8fd0\u7b97\uff1a</li> <li>\u7b2c\u4e00\u4e2a\u4f4d\uff1a0 AND 0 = 0</li> <li>\u7b2c\u4e8c\u4e2a\u4f4d\uff1a0 AND 1 = 0</li> <li>\u7b2c\u4e09\u4e2a\u4f4d\uff1a1 AND 0 = 0</li> <li> <p>\u7b2c\u56db\u4e2a\u4f4d\uff1a1 AND 1 = 1      \u56e0\u6b64\uff0c\u7ed3\u679c\u4e3a 0001\u3002</p> </li> <li> <p>0011 \u6216 0101 \u4e3a 0111(OR\u8fd0\u7b97)\uff1a    \u8fd9\u4e2a\u8fd0\u7b97\u7b26\u8868\u793a\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u5bf9\u5e94\u4f4d\u4e2d\u53ea\u8981\u6709\u4e00\u4e2a\u4e3a1\uff0c\u7ed3\u679c\u4f4d\u5c31\u4e3a1\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e00\u5bf9\u4f4d\u8fdb\u884cOR\u8fd0\u7b97\uff1a</p> </li> <li>\u7b2c\u4e00\u4e2a\u4f4d\uff1a0 OR 0 = 0</li> <li>\u7b2c\u4e8c\u4e2a\u4f4d\uff1a0 OR 1 = 1</li> <li>\u7b2c\u4e09\u4e2a\u4f4d\uff1a1 OR 0 = 1</li> <li> <p>\u7b2c\u56db\u4e2a\u4f4d\uff1a1 OR 1 = 1      \u56e0\u6b64\uff0c\u7ed3\u679c\u4e3a 0111\u3002</p> </li> <li> <p>0011 \u5f02\u6216 0101 \u4e3a 0110(XOR\u8fd0\u7b97)\uff1a    \u8fd9\u4e2a\u8fd0\u7b97\u7b26\u8868\u793a\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u5bf9\u5e94\u4f4d\u76f8\u540c\u5219\u7ed3\u679c\u4f4d\u4e3a0\uff0c\u4e0d\u540c\u5219\u7ed3\u679c\u4f4d\u4e3a1\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e00\u5bf9\u4f4d\u8fdb\u884cXOR\u8fd0\u7b97\uff1a</p> </li> <li>\u7b2c\u4e00\u4e2a\u4f4d\uff1a0 XOR 0 = 0</li> <li>\u7b2c\u4e8c\u4e2a\u4f4d\uff1a0 XOR 1 = 1</li> <li>\u7b2c\u4e09\u4e2a\u4f4d\uff1a1 XOR 0 = 1</li> <li>\u7b2c\u56db\u4e2a\u4f4d\uff1a1 XOR 1 = 0      \u56e0\u6b64\uff0c\u7ed3\u679c\u4e3a 0110\u3002</li> </ol> <p>\u8fd9\u4e9b\u903b\u8f91\u8fd0\u7b97\u5728\u8ba1\u7b97\u673a\u4e2d\u5e7f\u6cdb\u5e94\u7528\u4e8e\u4f4d\u64cd\u4f5c\u548c\u5e03\u5c14\u4ee3\u6570\u4e2d\uff0c\u5b83\u4eec\u7528\u4e8e\u521b\u5efa\u590d\u6742\u7684\u903b\u8f91\u7535\u8def\u3001\u63a7\u5236\u7a0b\u5e8f\u548c\u6570\u636e\u5904\u7406\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#_2","title":"\u8865\u5145\u5b66\u4e60: \u79fb\u52a8\u8fd0\u7b97\u7b26","text":"<p>\u8fd9\u6d89\u53ca\u5230\u4f4d\u8fd0\u7b97\u7b26\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u7279\u522b\u662f\u5de6\u79fb\u8fd0\u7b97\u7b26(<code>&lt;&lt;</code>)\u548c\u53f3\u79fb\u8fd0\u7b97\u7b26(<code>&gt;&gt;</code>)\u3002\u8ba9\u6211\u4e3a\u4f60\u89e3\u91ca\u4e00\u4e0b\uff1a</p> <ol> <li><code>\u4e3a\u4ec0\u4e481 \u5de6\u79fb 5 \u4f4d\u4e3a 32</code>\uff1a</li> <li><code>1</code> \u8868\u793a\u4e8c\u8fdb\u5236\u6570\u5b57 <code>0001</code>\u3002</li> <li>\u5de6\u79fb\u8fd0\u7b97\u7b26 <code>&lt;&lt;</code> \u5c06\u4e8c\u8fdb\u5236\u6570\u5b57\u5411\u5de6\u79fb\u52a8\u6307\u5b9a\u7684\u4f4d\u6570\u3002</li> <li>\u5728\u8fd9\u91cc\uff0c<code>1u32 &lt;&lt; 5</code> \u8868\u793a\u5c06\u4e8c\u8fdb\u5236\u6570\u5b57 <code>0001</code> \u5411\u5de6\u79fb\u52a85\u4f4d\u3002</li> <li>\u79fb\u52a85\u4f4d\u540e\uff0c\u53d8\u6210\u4e86 <code>100000</code>\uff0c\u8fd9\u662f\u4e8c\u8fdb\u5236\u4e2d\u768432\u3002</li> <li> <p>\u56e0\u6b64\uff0c<code>1 \u5de6\u79fb 5 \u4f4d</code> \u7b49\u4e8e <code>32</code>\u3002</p> </li> <li> <p>\u4e3a\u4ec0\u4e48<code>0x80 \u53f3\u79fb 2 \u4f4d\u4e3a 0x20</code>\uff1a</p> </li> <li><code>0x80</code> \u8868\u793a\u5341\u516d\u8fdb\u5236\u6570\u5b57\uff0c\u5176\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a <code>10000000</code>\u3002</li> <li>\u53f3\u79fb\u8fd0\u7b97\u7b26 <code>&gt;&gt;</code> \u5c06\u4e8c\u8fdb\u5236\u6570\u5b57\u5411\u53f3\u79fb\u52a8\u6307\u5b9a\u7684\u4f4d\u6570\u3002</li> <li>\u5728\u8fd9\u91cc\uff0c<code>0x80u32 &gt;&gt; 2</code> \u8868\u793a\u5c06\u4e8c\u8fdb\u5236\u6570\u5b57 <code>10000000</code> \u5411\u53f3\u79fb\u52a82\u4f4d\u3002</li> <li>\u79fb\u52a82\u4f4d\u540e\uff0c\u53d8\u6210\u4e86 <code>00100000</code>\uff0c\u8fd9\u662f\u4e8c\u8fdb\u5236\u4e2d\u768432\u3002</li> <li>\u4ee5\u5341\u516d\u8fdb\u5236\u8868\u793a\uff0c<code>0x20</code> \u8868\u793a32\u3002</li> <li>\u56e0\u6b64\uff0c<code>0x80 \u53f3\u79fb 2 \u4f4d</code> \u7b49\u4e8e <code>0x20</code>\u3002</li> </ol> <p>\u8fd9\u4e9b\u8fd0\u7b97\u662f\u57fa\u4e8e\u4e8c\u8fdb\u5236\u548c\u5341\u516d\u8fdb\u5236\u7684\u79fb\u52a8\uff0c\u56e0\u6b64\u7ed3\u679c\u4e0d\u540c\u4e8e\u6211\u4eec\u5e73\u5e38\u7684\u5341\u8fdb\u5236\u8868\u793a\u65b9\u5f0f\u3002\u5de6\u79fb\u64cd\u4f5c\u4f1a\u4f7f\u6570\u503c\u53d8\u5927\uff0c\u800c\u53f3\u79fb\u64cd\u4f5c\u4f1a\u4f7f\u6570\u503c\u53d8\u5c0f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#313-str","title":"3.1.3 \u5b57\u7b26\u4e32\u5207\u7247 (&amp;str)","text":"<p><code>&amp;str</code> \u662f Rust \u4e2d\u7684\u5b57\u7b26\u4e32\u5207\u7247\u7c7b\u578b\uff0c\u8868\u793a\u5bf9\u4e00\u4e2a\u5df2\u6709\u5b57\u7b26\u4e32\u7684\u5f15\u7528\u6216\u89c6\u56fe\u3002\u5b83\u662f\u4e00\u4e2a\u975e\u62e5\u6709\u6240\u6709\u6743\u7684\u3001\u4e0d\u53ef\u53d8\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5177\u6709\u4ee5\u4e0b\u7279\u6027\u548c\u7528\u9014\uff1a</p> <ol> <li> <p>\u4e0d\u62e5\u6709\u6240\u6709\u6743\uff1a<code>&amp;str</code> \u4e0d\u62e5\u6709\u5e95\u5c42\u5b57\u7b26\u4e32\u7684\u5185\u5b58\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u5bf9\u5b57\u7b26\u4e32\u7684\u5f15\u7528\u3002\u8fd9\u610f\u5473\u7740\u5f53 <code>&amp;str</code> \u8d85\u51fa\u5176\u4f5c\u7528\u57df\u65f6\uff0c\u4e0d\u4f1a\u91ca\u653e\u5e95\u5c42\u5b57\u7b26\u4e32\u7684\u5185\u5b58\uff0c\u56e0\u4e3a\u5b83\u4e0d\u62e5\u6709\u8be5\u5185\u5b58\u3002\u8fd9\u6709\u52a9\u4e8e\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u3002</p> </li> <li> <p>\u4e0d\u53ef\u53d8\u6027\uff1a<code>&amp;str</code> \u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u4e00\u65e6\u521b\u5efa\uff0c\u5c31\u4e0d\u80fd\u66f4\u6539\u5176\u5185\u5bb9\u3002\u8fd9\u610f\u5473\u7740\u4f60\u4e0d\u80fd\u50cf <code>String</code> \u90a3\u6837\u5728 <code>&amp;str</code> \u4e0a\u8fdb\u884c\u4fee\u6539\u64cd\u4f5c\uff0c\u4f8b\u5982\u6dfb\u52a0\u5b57\u7b26\u3002</p> </li> <li> <p>UTF-8 \u5b57\u7b26\u4e32\uff1aRust \u786e\u4fdd <code>&amp;str</code> \u6307\u5411\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u5e8f\u5217\uff0c\u56e0\u6b64\u5b83\u662f\u4e00\u79cd\u5b89\u5168\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u4e0d\u4f1a\u5305\u542b\u65e0\u6548\u7684\u5b57\u7b26\u3002</p> </li> <li> <p>\u5207\u7247\u64cd\u4f5c\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528\u5207\u7247\u64cd\u4f5c\u6765\u521b\u5efa <code>&amp;str</code>\uff0c\u4ece\u73b0\u6709\u5b57\u7b26\u4e32\u4e2d\u83b7\u53d6\u5b50\u5b57\u7b26\u4e32\u3002</p> </li> </ol> <pre><code>let my_string = \"Hello, world!\";\nlet my_slice: &amp;str = &amp;my_string[0..5]; // \u521b\u5efa\u4e00\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\n</code></pre> <ol> <li>\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\uff1a<code>&amp;str</code> \u5e38\u7528\u4e8e\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u4f60\u4f20\u9012\u5b57\u7b26\u4e32\u7684\u5f15\u7528\u800c\u4e0d\u662f\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c\u4ece\u800c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6240\u6709\u6743\u8f6c\u79fb\u3002</li> </ol> <p>\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\n    let greeting = \"Hello, world!\";\n    let slice: &amp;str = &amp;greeting[0..5]; // \u521b\u5efa\u5b57\u7b26\u4e32\u5207\u7247\n    println!(\"{}\", slice); // \u8f93\u51fa \"Hello\"\n}\n</code></pre> <p>\u603b\u4e4b\uff0c<code>&amp;str</code> \u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u3001\u5b89\u5168\u4e14\u7075\u6d3b\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5e38\u7528\u4e8e\u8bfb\u53d6\u5b57\u7b26\u4e32\u5185\u5bb9\u3001\u51fd\u6570\u53c2\u6570\u3001\u4ee5\u53ca\u5b57\u7b26\u4e32\u5207\u7247\u64cd\u4f5c\u3002\u901a\u8fc7\u4f7f\u7528 <code>&amp;str</code>\uff0cRust \u63d0\u4f9b\u4e86\u4e00\u79cd\u6709\u6548\u7ba1\u7406\u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\uff0c\u540c\u65f6\u4fdd\u6301\u5185\u5b58\u5b89\u5168\u6027\u3002</p> <p>\u5728Rust\u4e2d\uff0c\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u5b58\u50a8\u6587\u672c\u548c\u5b57\u7b26\u6570\u636e\u3002\u5b57\u7b26\u4e32\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u4ee5\u53ca\u5176\u4ed6\u7f16\u7a0b\u9886\u57df\u4e2d\u5e7f\u6cdb\u4f7f\u7528\uff0c\u7528\u4e8e\u8868\u793a\u548c\u5904\u7406\u91d1\u878d\u6570\u636e\u3001\u4ea4\u6613\u8bb0\u5f55\u3001\u62a5\u544a\u751f\u6210\u7b49\u4efb\u52a1\u3002</p> <p>\u6b64\u5904\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728Rust\u4e2d\uff0c\u6709**\u4e24\u79cd\u4e3b\u8981\u7684\u5b57\u7b26\u4e32\u7c7b\u578b**\uff1a</p> <ul> <li><code>String</code>\uff1a\u52a8\u6001\u5b57\u7b26\u4e32\uff0c\u53ef\u53d8\u4e14\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\u3002<code>String</code> \u7c7b\u578b\u901a\u5e38\u7528\u4e8e\u9700\u8981\u4fee\u6539\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u62fc\u63a5\u3001\u66ff\u6362\u7b49\u64cd\u4f5c\u3002\u5728\u7b2c\u4e94\u7ae0\u6211\u4eec\u8fd8\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e2a\u7c7b\u578b\u3002</li> <li><code>&amp;str</code>:\u5b57\u7b26\u4e32\u5207\u7247, \u4e0d\u53ef\u53d8\u7684\u5b57\u7b26\u4e32\u5f15\u7528\uff0c\u901a\u5e38\u5728\u6808\u4e0a\u5206\u914d\u3002<code>&amp;str</code> \u901a\u5e38\u7528\u4e8e\u53ea\u9700\u8bbf\u95ee\u5b57\u7b26\u4e32\u800c\u4e0d\u9700\u8981\u4fee\u6539\u5b83\u7684\u60c5\u51b5\uff0c\u4e5f\u662f\u51fd\u6570\u53c2\u6570\u4e2d\u5e38\u89c1\u7684\u7c7b\u578b\u3002</li> </ul> <p>\u5728Rust\u4e2d\uff0c<code>String</code> \u548c <code>&amp;str</code> \u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u533a\u522b\u53ef\u4ee5\u7528\u91d1\u878d\u5b9e\u4f8b\u6765\u89e3\u91ca\u3002\u5047\u8bbe\u6211\u4eec\u6b63\u5728\u7f16\u5199\u4e00\u4e2a\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\uff0c\u9700\u8981\u5904\u7406\u80a1\u7968\u6570\u636e\u3002</p> <ol> <li>\u4f7f\u7528 <code>String</code>\uff1a</li> </ol> <p>\u5982\u679c\u6211\u4eec\u9700\u8981\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u52a8\u6001\u6784\u5efa\u3001\u4fee\u6539\u548c\u5904\u7406\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982\u62fc\u63a5\u591a\u4e2a\u80a1\u7968\u4ee3\u7801\u6216\u6784\u5efa\u590d\u6742\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9009\u62e9\u4f7f\u7528 <code>String</code> \u7c7b\u578b\u3002\u8fd9\u662f\u56e0\u4e3a <code>String</code> \u662f\u53ef\u53d8\u7684\uff0c\u5141\u8bb8\u6211\u4eec\u5728\u8fd0\u884c\u65f6\u4fee\u6539\u5176\u5185\u5bb9\u3002</p> <pre><code>fn main() {\n    let mut stock_symbol = String::from(\"AAPL\");\n\n    // \u5728\u8fd0\u884c\u65f6\u8ffd\u52a0\u5b57\u7b26\u4e32\n    stock_symbol.push_str(\"(NASDAQ)\");\n\n    println!(\"Stock Symbol: {}\", stock_symbol);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>Stock Symbol: AAPL(NASDAQ)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u53ef\u53d8\u7684 <code>String</code> \u53d8\u91cf <code>stock_symbol</code>\uff0c\u7136\u540e\u5728\u8fd0\u884c\u65f6\u8ffd\u52a0\u4e86\"(NASDAQ)\"\u5b57\u7b26\u4e32\u3002\u8fd9\u79cd\u7075\u6d3b\u6027\u5bf9\u4e8e\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u52a8\u6001\u5b57\u7b26\u4e32\u64cd\u4f5c\u975e\u5e38\u6709\u7528\u3002</p> <ol> <li>\u4f7f\u7528 <code>&amp;str</code>\uff1a</li> </ol> <p>\u5982\u679c\u6211\u4eec\u53ea\u9700\u8981\u5f15\u7528\u6216\u8bfb\u53d6\u5b57\u7b26\u4e32\u800c\u4e0d\u9700\u8981\u4fee\u6539\u5b83\uff0c\u5e76\u4e14\u5e0c\u671b\u907f\u514d\u989d\u5916\u7684\u5185\u5b58\u5206\u914d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>&amp;str</code>\u3002\u5728\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c<code>&amp;str</code> \u53ef\u4ee5\u7528\u4e8e\u4f20\u9012\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u8bbf\u95ee\u80a1\u7968\u4ee3\u7801\u7b49\u3002</p> <pre><code>fn main() {\n    let stock_symbol = \"AAPL\"; // \u5b57\u7b26\u4e32\u5207\u7247\uff0c\u4e0d\u53ef\u53d8\n    let stock_name = get_stock_name(stock_symbol);\n\n    println!(\"Stock Name: {}\", stock_name);\n}\n\nfn get_stock_name(symbol: &amp;str) -&gt; &amp;str {\n    match symbol {\n        \"AAPL\" =&gt; \"Apple Inc.\",\n        \"GOOGL\" =&gt; \"Alphabet Inc.\",\n        _ =&gt; \"Unknown\",\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570 <code>get_stock_name</code>\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a <code>&amp;str</code> \u53c2\u6570\u6765\u67e5\u627e\u80a1\u7968\u540d\u79f0\u3002\u8fd9\u5141\u8bb8\u6211\u4eec\u5728\u4e0d\u8fdb\u884c\u989d\u5916\u5185\u5b58\u5206\u914d\u7684\u60c5\u51b5\u4e0b\u8bbf\u95ee\u5b57\u7b26\u4e32\u3002</p> <ol> <li>\u5c0f\u7ed3</li> </ol> <p><code>String</code> \u548c <code>&amp;str</code> \u5728\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u4f7f\u7528\u53d6\u51b3\u4e8e\u6211\u4eec\u7684\u9700\u6c42\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\u5b57\u7b26\u4e32\u5185\u5bb9\u6216\u8005\u5728\u8fd0\u884c\u65f6\u6784\u5efa\u5b57\u7b26\u4e32\uff0c<code>String</code> \u662f\u4e00\u4e2a\u66f4\u597d\u7684\u9009\u62e9\u3002\u5982\u679c\u53ea\u9700\u8981\u8bbf\u95ee\u5b57\u7b26\u4e32\u800c\u4e0d\u9700\u8981\u4fee\u6539\u5b83\uff0c\u6216\u8005\u5e0c\u671b\u907f\u514d\u989d\u5916\u7684\u5185\u5b58\u5206\u914d\uff0c<code>&amp;str</code> \u662f\u66f4\u5408\u9002\u7684\u9009\u62e9\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#32-tuple","title":"3.2 \u5143\u7ec4 (Tuple)","text":"<p>\u5143\u7ec4(Tuple)\u662fRust\u4e2d\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u53ef\u4ee5\u5b58\u50a8\u591a\u4e2a\u4e0d\u540c\u6216\u76f8\u540c\u7c7b\u578b\u7684\u503c\uff0c\u5e76\u4e14\u4e00\u65e6\u521b\u5efa\uff0c\u5b83\u4eec\u7684\u957f\u5ea6\u5c31\u662f\u4e0d\u53ef\u53d8\u7684\u3002\u5143\u7ec4\u901a\u5e38\u7528\u4e8e\u5c06\u591a\u4e2a\u503c\u7ec4\u5408\u5728\u4e00\u8d77\u4ee5\u8fdb\u884c\u4f20\u9012\u6216\u8fd4\u56de\uff0c\u5b83\u4eec\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u4e5f\u6709\u5404\u79cd\u5e94\u7528\u573a\u666f\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5143\u7ec4\u7684\u4f7f\u7528\u6848\u4f8b:</p> <pre><code>fn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5143\u7ec4\uff0c\u8868\u793a\u80a1\u7968\u7684\u4ef7\u683c\u548c\u6570\u91cf\n    let stock = (\"AAPL\", 150.50, 1000);\n\n    // \u8bbf\u95ee\u5143\u7ec4\u4e2d\u7684\u5143\u7d20, \u8d4b\u503c\u7ed9\u4e00\u5e76\u653e\u5728\u5de6\u8fb9\u7684\u53d8\u91cf\u4eec,\n    // \u8fd9\u79cd\u8d4b\u503c\u65b9\u5f0f\u79f0\u4e3a\u5143\u7ec4\u89e3\u6784(Tuple Destructuring)\n    let (symbol, price, quantity) = stock;\n\n    // \u6253\u5370\u53d8\u91cf\u7684\u503c\n    println!(\"\u80a1\u7968\u4ee3\u7801: {}\", symbol);\n    println!(\"\u80a1\u7968\u4ef7\u683c: ${:.2}\", price);\n    println!(\"\u80a1\u7968\u6570\u91cf: {}\", quantity);\n\n    // \u8ba1\u7b97\u603b\u4ef7\u503c\n    let total_value = price * (quantity as f64); // \u6ce8\u610f\u5c06\u6570\u91cf\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u4ee5\u8fdb\u884c\u8ba1\u7b97\n\n    println!(\"\u603b\u4ef7\u503c: ${:.2}\", total_value);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u80a1\u7968\u4ee3\u7801: AAPL\n\u80a1\u7968\u4ef7\u683c: $150.50\n\u80a1\u7968\u6570\u91cf: 1000\n\u603b\u4ef7\u503c: $150500.00\n</code></pre> <p>\u5728\u4e0a\u8ff0Rust\u4ee3\u7801\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u5143\u7ec4\u6765\u8868\u793a\u548c\u5b58\u50a8\u80a1\u7968\u7684\u76f8\u5173\u4fe1\u606f\u3002\u8ba9\u6211\u4eec\u8be6\u7ec6\u89e3\u91ca\u4ee3\u7801\u4e2d\u7684\u5404\u4e2a\u90e8\u5206\uff1a</p> <ol> <li>\u521b\u5efa\u5143\u7ec4\uff1a</li> </ol> <pre><code>let stock = (\"AAPL\", 150.50, 1000);\n</code></pre> <p>\u8fd9\u4e00\u884c\u4ee3\u7801\u521b\u5efa\u4e86\u4e00\u4e2a\u5143\u7ec4 <code>stock</code>\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u4e09\u4e2a\u5143\u7d20\uff1a\u80a1\u7968\u4ee3\u7801(\u5b57\u7b26\u4e32)\u3001\u80a1\u7968\u4ef7\u683c(\u6d6e\u70b9\u6570)\u548c\u80a1\u7968\u6570\u91cf(\u6574\u6570)\u3002\u6ce8\u610f\uff0c\u5143\u7ec4\u7684\u957f\u5ea6\u5728\u521b\u5efa\u540e\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u6dfb\u52a0\u6216\u5220\u9664\u5143\u7d20\u3002</p> <ol> <li>\u5143\u7ec4\u89e3\u6784(Tuple Destructuring)\uff1a</li> </ol> <pre><code>let (symbol, price, quantity) = stock;\n</code></pre> <p>\u5728\u8fd9\u4e00\u884c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u7684\u65b9\u5f0f\u4ece\u5143\u7ec4\u4e2d\u89e3\u6784\u51fa\u5404\u4e2a\u5143\u7d20\uff0c\u5e76\u5c06\u5b83\u4eec\u5206\u522b\u8d4b\u503c\u7ed9 <code>symbol</code>\u3001<code>price</code> \u548c <code>quantity</code> \u53d8\u91cf\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u65b9\u4fbf\u5730\u8bbf\u95ee\u5143\u7ec4\u7684\u5404\u4e2a\u90e8\u5206\u3002</p> <ol> <li>\u6253\u5370\u53d8\u91cf\u7684\u503c\uff1a</li> </ol> <pre><code>println!(\"\u80a1\u7968\u4ee3\u7801: {}\", symbol);\nprintln!(\"\u80a1\u7968\u4ef7\u683c: ${:.2}\", price);\nprintln!(\"\u80a1\u7968\u6570\u91cf: {}\", quantity);\n</code></pre> <p>\u8fd9\u4e9b\u4ee3\u7801\u884c\u4f7f\u7528 <code>println!</code> \u5b8f\u6253\u5370\u4e86\u5143\u7ec4\u4e2d\u7684\u4e0d\u540c\u53d8\u91cf\u7684\u503c\u3002\u5728\u7b2c\u4e8c\u4e2a <code>println!</code> \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>:.2</code> \u6765\u63a7\u5236\u6d6e\u70b9\u6570\u8f93\u51fa\u7684\u5c0f\u6570\u70b9\u4f4d\u6570\u3002</p> <ol> <li>\u8ba1\u7b97\u603b\u4ef7\u503c\uff1a</li> </ol> <pre><code>let total_value = price * (quantity as f64);\n</code></pre> <p>\u8fd9\u4e00\u884c\u4ee3\u7801\u8ba1\u7b97\u4e86\u80a1\u7968\u7684\u603b\u4ef7\u503c\u3002\u7531\u4e8e <code>quantity</code> \u662f\u6574\u6570\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5176\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570 (<code>f64</code>) \u6765\u8fdb\u884c\u8ba1\u7b97\uff0c\u4ee5\u907f\u514d\u6574\u6570\u9664\u6cd5\u7684\u95ee\u9898\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u6253\u5370\u51fa\u4e86\u8ba1\u7b97\u5f97\u5230\u7684\u603b\u4ef7\u503c\uff0c\u5f97\u5230\u4e86\u5b8c\u6574\u7684\u80a1\u7968\u4fe1\u606f\u3002</p> <p>\u603b\u4e4b\uff0c\u5143\u7ec4\u662f\u4e00\u79cd\u65b9\u4fbf\u7684\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u7528\u4e8e\u7ec4\u5408\u4e0d\u540c\u7c7b\u578b\u7684\u503c\uff0c\u5e76\u4e14\u80fd\u591f\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u4ee5\u8f7b\u677e\u8bbf\u95ee\u5176\u4e2d\u7684\u5143\u7d20\u3002\u5728\u91cf\u5316\u91d1\u878d\u6216\u5176\u4ed6\u9886\u57df\u4e2d\uff0c\u5143\u7ec4\u53ef\u7528\u4e8e\u7ec4\u7ec7\u548c\u4f20\u9012\u591a\u4e2a\u76f8\u5173\u7684\u6570\u636e\u9879\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#33","title":"3.3 \u6570\u7ec4","text":"<p>\u5728Rust\u4e2d\uff0c\u6570\u7ec4\u662f\u4e00\u79cd\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5b58\u50a8\u76f8\u540c\u7c7b\u578b\u7684\u5143\u7d20\uff0c\u5e76\u4e14\u4e00\u65e6\u58f0\u660e\u4e86\u5927\u5c0f\uff0c\u5c31\u4e0d\u80fd\u518d\u6539\u53d8\u3002Rust\u4e2d\u7684\u6570\u7ec4\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ol> <li>\u56fa\u5b9a\u5927\u5c0f\uff1a\uff1a\u6570\u7ec4\u548c\u5143\u7ec4\u90fd\u662f\u9759\u6001\u5927\u5c0f\u7684\u6570\u636e\u7ed3\u6784\u3002\u6570\u7ec4\u7684\u5927\u5c0f\u5728\u58f0\u660e\u65f6\u5fc5\u987b\u660e\u786e\u6307\u5b9a\uff0c\u800c\u4e14\u4e0d\u80fd\u5728\u8fd0\u884c\u65f6\u6539\u53d8\u3002\u8fd9\u610f\u5473\u7740\u4e00\u65e6\u6570\u7ec4\u521b\u5efa\uff0c\u5b83\u7684\u957f\u5ea6\u5c31\u662f\u4e0d\u53ef\u53d8\u7684\u3002</li> <li>\u76f8\u540c\u7c7b\u578b\uff1a\u548c\u5143\u7ec4\u4e0d\u540c\uff0c\u6570\u7ec4\u4e2d\u7684\u6240\u6709\u5143\u7d20\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u610f\u5473\u7740\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u7c7b\u578b\u5fc5\u987b\u662f\u4e00\u81f4\u7684\uff0c\u4f8b\u5982\uff0c\u6240\u6709\u7684\u6574\u6570\u6216\u6240\u6709\u7684\u6d6e\u70b9\u6570\u3002</li> <li>\u6808\u4e0a\u5206\u914d\uff1aRust\u7684\u6570\u7ec4\u662f\u5728\u6808\u4e0a\u5206\u914d\u5185\u5b58\u7684\uff0c\u8fd9\u4f7f\u5f97\u5b83\u4eec\u5728\u8bbf\u95ee\u548c\u8fed\u4ee3\u65f6\u975e\u5e38\u9ad8\u6548\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u5b83\u4eec\u662f\u6808\u4e0a\u7684\uff0c\u6240\u4ee5\u5927\u5c0f\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u58f0\u660e\u3001\u521d\u59cb\u5316\u548c\u8bbf\u95eeRust\u6570\u7ec4\uff1a</p> <pre><code>fn main() {\n    // \u58f0\u660e\u4e00\u4e2a\u5305\u542b5\u4e2a\u6574\u6570\u7684\u6570\u7ec4\uff0c\u4f7f\u7528[\u7c7b\u578b; \u5927\u5c0f]\u8bed\u6cd5\n    let numbers: [i32; 5] = [1, 2, 3, 4, 5];\n\n    // \u8bbf\u95ee\u6570\u7ec4\u5143\u7d20\uff0c\u7d22\u5f15\u4ece0\u5f00\u59cb\n    println!(\"\u7b2c\u4e00\u4e2a\u5143\u7d20: {}\", numbers[0]); // \u8f93\u51fa \"\u7b2c\u4e00\u4e2a\u5143\u7d20: 1\"\n    println!(\"\u7b2c\u4e09\u4e2a\u5143\u7d20: {}\", numbers[2]); // \u8f93\u51fa \"\u7b2c\u4e09\u4e2a\u5143\u7d20: 3\"\n\n    // \u6570\u7ec4\u957f\u5ea6\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u786e\u5b9a\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528.len()\u65b9\u6cd5\u83b7\u53d6\u957f\u5ea6\n    let length = numbers.len();\n    println!(\"\u6570\u7ec4\u957f\u5ea6: {}\", length); // \u8f93\u51fa \"\u6570\u7ec4\u957f\u5ea6: 5\"\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u7b2c\u4e00\u4e2a\u5143\u7d20: 1\n\u7b2c\u4e09\u4e2a\u5143\u7d20: 3\n\u6570\u7ec4\u957f\u5ea6: 5\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#1-sma-calculator","title":"\u6848\u4f8b1\uff1a\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\u8ba1\u7b97\u5668 (SMA Calculator)","text":"<p>\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(Simple Moving Average\uff0cSMA)\u662f\u4e00\u79cd\u5e38\u7528\u7684\u6280\u672f\u5206\u6790\u6307\u6807\uff0c\u7528\u4e8e\u5e73\u6ed1\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u4ee5\u8bc6\u522b\u8d8b\u52bf\u3002SMA\u7684\u8ba1\u7b97\u516c\u5f0f\u975e\u5e38\u7b80\u5355\uff0c\u5b83\u662f\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u6570\u636e\u70b9\u7684\u5e73\u5747\u503c\u3002\u4ee5\u4e0b\u662fSMA\u7684\u8ba1\u7b97\u516c\u5f0f\uff1a</p> \\[ SMA = (X1 + X2 + X3 + ... + Xn) / n \\] <p>\u5f53\u5728Rust\u4e2d\u8fdb\u884c\u91cf\u5316\u91d1\u878d\u5efa\u6a21\u65f6\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u7ec4(Array)\u548c\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u6765\u7ba1\u7406\u548c\u5904\u7406\u91d1\u878d\u6570\u636e\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684Rust\u91cf\u5316\u91d1\u878d\u6848\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u6570\u7ec4\u6765\u8ba1\u7b97\u80a1\u7968\u7684\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(Simple Moving Average\uff0cSMA)\u3002</p> <pre><code>fn main() {\n    // \u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u6570\u7ec4\n    let stock_prices = [50.0, 52.0, 55.0, 60.0, 58.0, 62.0, 65.0, 70.0, 75.0, 80.0];\n\n    // \u8ba1\u7b97\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(SMA)\n    let window_size = 5; // \u79fb\u52a8\u5e73\u5747\u7a97\u53e3\u5927\u5c0f\n    let mut sma_values: Vec&lt;f64&gt; = Vec::new();\n\n    for i in 0..stock_prices.len() - window_size + 1 {\n        let window = &amp;stock_prices[i..i + window_size];\n        let sum: f64 = window.iter().sum();\n        let sma = sum / window_size as f64;\n        sma_values.push(sma);\n    }\n\n    // \u6253\u5370SMA\u503c\n    println!(\"\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(SMA):\");\n    for (i, sma) in sma_values.iter().enumerate() {\n        println!(\"Day {}: {:.2}\", i + window_size, sma);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(SMA):\nDay 5: 55.00\nDay 6: 57.40\nDay 7: 60.00\nDay 8: 63.00\nDay 9: 66.00\nDay 10: 70.40\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8ba1\u7b97\u7684\u662f\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(SMA)\uff0c\u7a97\u53e3\u5927\u5c0f\u4e3a5\u5929\u3002\u56e0\u6b64\uff0cSMA\u503c\u662f\u4ece\u7b2c5\u5929\u5f00\u59cb\u7684\uff0c\u76f4\u5230\u6700\u540e\u4e00\u5929\u3002\u5728\u8f93\u51fa\u4e2d\uff0c\"Day 5\" \u5bf9\u5e94\u7740\u7b2c5\u5929\u7684SMA\u503c\uff0c\"Day 6\" \u5bf9\u5e94\u7b2c6\u5929\u7684SMA\u503c\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd9\u662f\u56e0\u4e3aSMA\u9700\u8981\u4e00\u5b9a\u6570\u91cf\u7684\u5386\u53f2\u6570\u636e\u624d\u80fd\u8ba1\u7b97\u51fa\u7b2c\u4e00\u4e2a\u79fb\u52a8\u5e73\u5747\u503c\uff0c\u6240\u4ee5\u524d\u51e0\u5929\u7684\u7ed3\u679c\u4f1a\u662f\u7a7a\u7684\u6216\u4e0d\u53ef\u7528\u7684\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#_3","title":"\u8865\u5145\u5b66\u4e60: \u8303\u56f4\u8bbe\u7f6e","text":"<p><code>for i in 0..stock_prices.len() - window_size + 1</code> \u8fd9\u6837\u5199\u662f\u4e3a\u4e86\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u8be5\u8fed\u4ee3\u5668\u5c06\u5728\u80a1\u7968\u4ef7\u683c\u6570\u7ec4\u4e0a\u6ed1\u52a8\u4e00\u4e2a\u5927\u5c0f\u4e3a <code>window_size</code> \u7684\u7a97\u53e3\uff0c\u4ee5\u4fbf\u8ba1\u7b97\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf(SMA)\u3002</p> <p>\u8ba9\u6211\u4eec\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u7684\u5404\u4e2a\u90e8\u5206\uff1a</p> <ul> <li><code>0..stock_prices.len()</code>\uff1a\u8fd9\u90e8\u5206\u521b\u5efa\u4e86\u4e00\u4e2a\u8303\u56f4(range)\uff0c\u4ece0\u5230 <code>stock_prices</code> \u6570\u7ec4\u7684\u957f\u5ea6\u3002\u8303\u56f4\u7684\u53f3\u8fb9\u754c\u662f\u4e0d\u5305\u542b\u7684\uff0c\u6240\u4ee5\u5b83\u5305\u542b\u4e86\u4ece0\u5230 <code>stock_prices.len() - 1</code> \u7684\u6240\u6709\u7d22\u5f15\u3002</li> <li><code>- window_size + 1</code>\uff1a\u8fd9\u90e8\u5206\u5c06\u8303\u56f4\u7684\u53f3\u8fb9\u754c\u51cf\u53bb <code>window_size</code>\uff0c\u7136\u540e\u518d\u52a01\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u7a97\u53e3\u5728\u6570\u7ec4\u4e0a\u6ed1\u52a8\uff0c\u4ee5\u4fbf\u8ba1\u7b97SMA\u3002\u8003\u8651\u5230\u7a97\u53e3\u7684\u5927\u5c0f\uff0c\u6211\u4eec\u9700\u8981\u786e\u4fdd\u5b83\u5728\u6570\u7ec4\u5185\u5b8c\u5168\u6ed1\u52a8\uff0c\u56e0\u6b64\u53f3\u8fb9\u754c\u9700\u8981\u5411\u5de6\u79fb\u52a8 <code>window_size - 1</code> \u4e2a\u4f4d\u7f6e\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u6574\u4e2a\u8868\u8fbe\u5f0f <code>0..stock_prices.len() - window_size + 1</code> \u521b\u5efa\u4e86\u4e00\u4e2a\u8303\u56f4\uff0c\u8be5\u8303\u56f4\u4ece0\u5230 <code>stock_prices.len() - window_size</code>\uff0c\u8986\u76d6\u4e86\u6570\u7ec4\u4e2d\u6240\u6709\u53ef\u80fd\u7684\u7a97\u53e3\u7684\u8d77\u59cb\u7d22\u5f15\u3002\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\uff0c\u8fd9\u4e2a\u8303\u56f4\u5c06\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u7d22\u5f15\uff0c\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a97\u53e3\uff0c\u4ee5\u8ba1\u7b97SMA\u3002\u8fd9\u662f\u4e00\u79cd\u6709\u6548\u7684\u65b9\u6cd5\u6765\u904d\u5386\u6570\u7ec4\u5e76\u6267\u884c\u6ed1\u52a8\u7a97\u53e3\u64cd\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#2-ema-calculator","title":"\u6848\u4f8b2\uff1a \u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf\u8ba1\u7b97\u5668 (EMA Calculator)","text":"<p>\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf(Exponential Moving Average\uff0cEMA)\u662f\u53e6\u4e00\u79cd\u5e38\u7528\u7684\u6280\u672f\u5206\u6790\u6307\u6807\uff0c\u4e0eSMA\u4e0d\u540c\uff0cEMA\u8d4b\u4e88\u4e86\u66f4\u591a\u7684\u6743\u91cd\u6700\u8fd1\u7684\u4ef7\u683c\u6570\u636e\uff0c\u56e0\u6b64\u5b83\u66f4\u52a0\u654f\u611f\u4e8e\u4ef7\u683c\u7684\u8fd1\u671f\u53d8\u5316\u3002EMA\u7684\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a $$ EMA(t) = (P(t) * \u03b1) + (EMA(y) * (1 - \u03b1)) $$ \u5176\u4e2d\uff1a</p> <ul> <li><code>EMA(t)</code>\uff1a\u5f53\u524d\u65f6\u523b\u7684EMA\u503c\u3002</li> <li><code>P(t)</code>\uff1a\u5f53\u524d\u65f6\u523b\u7684\u4ef7\u683c\u3002</li> <li><code>EMA(y)</code>\uff1a\u524d\u4e00\u65f6\u523b\u7684EMA\u503c\u3002</li> <li><code>\u03b1</code>\uff1a\u5e73\u6ed1\u56e0\u5b50\uff0c\u901a\u5e38\u901a\u8fc7\u6307\u5b9a\u4e00\u4e2a\u65f6\u95f4\u7a97\u53e3\u957f\u5ea6\u6765\u8ba1\u7b97\uff0c<code>\u03b1 = 2 / (n + 1)</code>\uff0c\u5176\u4e2d <code>n</code> \u662f\u65f6\u95f4\u7a97\u53e3\u957f\u5ea6\u3002</li> </ul> <p>\u5728\u6280\u672f\u5206\u6790\u4e2d\uff0cEMA(\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf)\u548cSMA(\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf)\u7684\u8ba1\u7b97\u6709\u4e0d\u540c\u7684\u8d77\u59cb\u70b9\u3002</p> <ul> <li>EMA\u7684\u8ba1\u7b97\u901a\u5e38\u53ef\u4ee5\u4ece\u7b2c\u4e00\u4e2a\u6570\u636e\u70b9(Day 1)\u5f00\u59cb\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528\u4e86\u6307\u6570\u52a0\u6743\u5e73\u5747\u7684\u65b9\u6cd5\uff0c\u4f7f\u5f97\u524d\u9762\u7684\u6570\u636e\u70b9\u7684\u6743\u91cd\u8f83\u5c0f\uff0c\u4ece\u800c\u8003\u8651\u4e86\u6240\u6709\u7684\u5386\u53f2\u6570\u636e\u3002</li> <li>\u800cSMA\u7684\u8ba1\u7b97\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u56fa\u5b9a\u5927\u5c0f\u7684\u7a97\u53e3\uff0c\u56e0\u6b64\u5fc5\u987b\u4ece\u7a97\u53e3\u5927\u5c0f\u4e4b\u540e\u7684\u6570\u636e\u70b9(\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d\u662f\u4ece\u7b2c\u4e94\u5929\u5f00\u59cb)\u624d\u80fd\u5f97\u5230\u7b2c\u4e00\u4e2aSMA\u503c\u3002\u8fd9\u662f\u56e0\u4e3aSMA\u662f\u5bf9\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u6570\u636e\u8fdb\u884c\u7b80\u5355\u5e73\u5747\uff0c\u9700\u8981\u8db3\u591f\u7684\u6570\u636e\u70b9\u6765\u8ba1\u7b97\u5e73\u5747\u503c\u3002</li> </ul> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u5728Rust\u4e2d\u7f16\u5199\u4e00\u4e2aEMA\u8ba1\u7b97\u5668\uff0c\u7c7b\u4f3c\u4e8e\u4e4b\u524d\u7684SMA\u8ba1\u7b97\u5668\uff1a</p> <pre><code>fn main() {\n    // \u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u6570\u7ec4\n    let stock_prices = [50.0, 52.0, 55.0, 60.0, 58.0, 62.0, 65.0, 70.0, 75.0, 80.0];\n\n    // \u8ba1\u7b97\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf(EMA)\n    let window_size = 5; // \u65f6\u95f4\u7a97\u53e3\u5927\u5c0f\n    let mut ema_values: Vec&lt;f64&gt; = Vec::new();\n\n    let alpha = 2.0 / (window_size as f64 + 1.0);\n    let mut ema = stock_prices[0]; // \u521d\u59cbEMA\u503c\u7b49\u4e8e\u7b2c\u4e00\u4e2a\u4ef7\u683c\n\n    for price in &amp;stock_prices {\n        ema = (price - ema) * alpha + ema;\n        ema_values.push(ema);\n    }\n\n    // \u6253\u5370EMA\u503c\n    println!(\"\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf(EMA):\");\n    for (i, ema) in ema_values.iter().enumerate() {\n        println!(\"Day {}: {:.2}\", i + 1, ema);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf(EMA):\nDay 1: 50.00\nDay 2: 51.00\nDay 3: 52.75\nDay 4: 55.88\nDay 5: 56.59\nDay 6: 58.39\nDay 7: 59.92\nDay 8: 62.02\nDay 9: 63.95\nDay 10: 66.30\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#alpha","title":"\u8865\u5145\u5b66\u4e60: \u5e73\u6ed1\u56e0\u5b50alpha","text":"<p>\u5f53\u8ba1\u7b97\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf(EMA)\u65f6\uff0c\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u5e73\u6ed1\u56e0\u5b50 <code>alpha</code>\uff0c\u8fd9\u4e2a\u56e0\u5b50\u51b3\u5b9a\u4e86\u6700\u8fd1\u4ef7\u683c\u6570\u636e\u548c\u524d\u4e00EMA\u503c\u7684\u6743\u91cd\u5206\u914d\uff0c\u5b83\u7684\u8ba1\u7b97\u65b9\u6cd5\u662f <code>alpha = 2.0 / (window_size as f64 + 1.0)</code>\u3002\u8ba9\u6211\u8be6\u7ec6\u89e3\u91ca\u8fd9\u53e5\u4ee3\u7801\u7684\u542b\u4e49\uff1a</p> <ol> <li> <p><code>window_size</code> \u8868\u793a\u65f6\u95f4\u7a97\u53e3\u5927\u5c0f\uff0c\u901a\u5e38\u7528\u6765\u786e\u5b9a\u8ba1\u7b97EMA\u65f6\u8981\u8003\u8651\u591a\u5c11\u4e2a\u6570\u636e\u70b9\u3002\u8f83\u5927\u7684 <code>window_size</code> \u4f1a\u5bfc\u81f4EMA\u66f4\u52a0\u5e73\u6ed1\uff0c\u5bf9\u4ef7\u683c\u6ce2\u52a8\u7684\u53cd\u5e94\u66f4\u6162\uff0c\u800c\u8f83\u5c0f\u7684 <code>window_size</code> \u5219\u4f7fEMA\u66f4\u52a0\u654f\u611f\uff0c\u66f4\u5feb\u5730\u53cd\u5e94\u4ef7\u683c\u53d8\u5316\u3002</p> </li> <li> <p><code>window_size as f64</code> \u5c06 <code>window_size</code> \u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u7c7b\u578b (<code>f64</code>)\uff0c\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u5728\u8ba1\u7b97\u4e2d\u4f7f\u7528\u6d6e\u70b9\u6570\u6765\u786e\u4fdd\u7cbe\u5ea6\u3002</p> </li> <li> <p><code>window_size as f64 + 1.0</code> \u5c06\u7a97\u53e3\u5927\u5c0f\u52a01\uff0c\u8fd9\u662fEMA\u8ba1\u7b97\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u8c03\u6574\u5e73\u6ed1\u56e0\u5b50\u3002\u6dfb\u52a01\u662f\u56e0\u4e3a\u901a\u5e38\u6211\u4eec\u4ece\u7b2c\u4e00\u4e2a\u6570\u636e\u70b9\u5f00\u59cb\u8ba1\u7b97EMA\uff0c\u6240\u4ee5\u9700\u8981\u8003\u8651\u4e00\u4e2a\u989d\u5916\u7684\u6570\u636e\u70b9\u3002</p> </li> <li> <p>\u6700\u7ec8\uff0c<code>2.0 / (window_size as f64 + 1.0)</code> \u8ba1\u7b97\u51fa\u5e73\u6ed1\u56e0\u5b50 <code>alpha</code>\u3002\u8fd9\u4e2a\u5e73\u6ed1\u56e0\u5b50\u51b3\u5b9a\u4e86EMA\u5bf9\u6700\u65b0\u6570\u636e\u7684\u6743\u91cd\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c<code>alpha</code> \u7684\u503c\u4f1a\u63a5\u8fd1\u4e8e1\uff0c\u4ee5\u4fbf\u66f4\u591a\u5730\u8003\u8651\u6700\u65b0\u7684\u4ef7\u683c\u6570\u636e\u3002\u8f83\u5c0f\u7684 <code>alpha</code> \u503c\u4f1a\u4f7fEMA\u5bf9\u5386\u53f2\u6570\u636e\u66f4\u52a0\u5e73\u6ed1\uff0c\u800c\u8f83\u5927\u7684 <code>alpha</code> \u503c\u4f1a\u66f4\u5f3a\u8c03\u6700\u65b0\u7684\u4ef7\u683c\u53d8\u52a8\u3002</p> </li> </ol> <p>\u603b\u4e4b\uff0c\u8fd9\u4e00\u884c\u4ee3\u7801\u8ba1\u7b97\u4e86\u7528\u4e8e\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf\u8ba1\u7b97\u7684\u5e73\u6ed1\u56e0\u5b50 <code>alpha</code>\uff0c\u8be5\u56e0\u5b50\u5728EMA\u8ba1\u7b97\u4e2d\u51b3\u5b9a\u4e86\u6700\u65b0\u6570\u636e\u548c\u5386\u53f2\u6570\u636e\u7684\u6743\u91cd\u5206\u914d\uff0c\u4ee5\u4fbf\u5728\u5206\u6790\u4e2d\u66f4\u597d\u5730\u53cd\u6620\u4ef7\u683c\u8d8b\u52bf\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#3-relative-strength-indexrsi","title":"\u6848\u4f8b3 \u76f8\u5bf9\u5f3a\u5ea6\u6307\u6570(Relative Strength Index\uff0cRSI)","text":"<p>RSI\u662f\u4e00\u79cd\u7528\u4e8e\u8861\u91cf\u4ef7\u683c\u8d8b\u52bf\u7684\u6280\u672f\u6307\u6807\uff0c\u901a\u5e38\u7528\u4e8e\u80a1\u7968\u548c\u5176\u4ed6\u91d1\u878d\u5e02\u573a\u7684\u6280\u672f\u5206\u6790\u3002\u76f8\u5bf9\u5f3a\u5f31\u6307\u6570(RSI)\u7684\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a</p> <p>RSI = 100 - [100 / (1 + RS)]</p> <p>\u5176\u4e2d\uff0cRS\u8868\u793a14\u5929\u5185\u6536\u5e02\u4ef7\u4e0a\u6da8\u6570\u4e4b\u548c\u7684\u5e73\u5747\u503c\u9664\u4ee514\u5929\u5185\u6536\u5e02\u4ef7\u4e0b\u8dcc\u6570\u4e4b\u548c\u7684\u5e73\u5747\u503c\u3002</p> <p>\u8ba9\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u793a\u4f8b\u6765\u8bf4\u660e\uff1a</p> <p>\u5047\u8bbe\u6700\u8fd114\u5929\u7684\u6da8\u8dcc\u60c5\u51b5\u5982\u4e0b\uff1a</p> <ul> <li>\u7b2c\u4e00\u5929\u4e0a\u6da82\u5143</li> <li>\u7b2c\u4e8c\u5929\u4e0b\u8dcc2\u5143</li> <li>\u7b2c\u4e09\u81f3\u7b2c\u4e94\u5929\u6bcf\u5929\u4e0a\u6da83\u5143</li> <li>\u7b2c\u516d\u5929\u4e0b\u8dcc4\u5143</li> <li>\u7b2c\u4e03\u5929\u4e0a\u6da82\u5143</li> <li>\u7b2c\u516b\u5929\u4e0b\u8dcc5\u5143</li> <li>\u7b2c\u4e5d\u5929\u4e0b\u8dcc6\u5143</li> <li>\u7b2c\u5341\u81f3\u5341\u4e8c\u5929\u6bcf\u5929\u4e0a\u6da81\u5143</li> <li>\u7b2c\u5341\u4e09\u81f3\u5341\u56db\u5929\u6bcf\u5929\u4e0b\u8dcc3\u5143</li> </ul> <p>\u73b0\u5728\uff0c\u6211\u4eec\u6765\u8ba1\u7b97RSI\u7684\u6b65\u9aa4\uff1a</p> <ol> <li>\u9996\u5148\uff0c\u5c0614\u5929\u5185\u4e0a\u6da8\u7684\u603b\u989d\u76f8\u52a0\uff0c\u7136\u540e\u9664\u4ee514\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u603b\u5171\u4e0a\u6da816\u5143\uff0c\u6240\u4ee5\u8ba1\u7b97\u7ed3\u679c\u662f16 / 14 = 1.14285714286</li> <li>\u63a5\u4e0b\u6765\uff0c\u5c0614\u5929\u5185\u4e0b\u8dcc\u7684\u603b\u989d\u76f8\u52a0\uff0c\u7136\u540e\u9664\u4ee514\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u603b\u5171\u4e0b\u8dcc23\u5143\uff0c\u6240\u4ee5\u8ba1\u7b97\u7ed3\u679c\u662f23 / 14 = 1.64285714286</li> <li>\u7136\u540e\uff0c\u8ba1\u7b97\u76f8\u5bf9\u5f3a\u5ea6RS\uff0c\u5373RS = 1.14285714286 / 1.64285714286 = 0.69565217391</li> <li>\u63a5\u7740\uff0c\u8ba1\u7b971 + RS\uff0c\u53731 + 0.69565217391 = 1.69565217391\u3002</li> <li>\u6700\u540e\uff0c\u5c06100\u9664\u4ee51 + RS\uff0c\u5373100 / 1.69565217391 = 58.9743589745</li> <li>\u6700\u7ec8\u7684RSI\u503c\u4e3a100 - 58.9743589745 = 41.0256410255  \u2248 41.026</li> </ol> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u76f8\u5bf9\u5f3a\u5f31\u6307\u6570(RSI)\u7684\u503c\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u5206\u6790\u5e02\u573a\u7684\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u8ba1\u7b97RSI\u7684\u793a\u4f8b\u4ee3\u7801\uff1a</p> <pre><code>fn calculate_rsi(up_days: Vec&lt;f64&gt;, down_days: Vec&lt;f64&gt;) -&gt; f64 {  \n    let up_sum = up_days.iter().sum::&lt;f64&gt;();  \n    let down_sum = down_days.iter().sum::&lt;f64&gt;();  \n    let rs = up_sum / down_sum;  \n    let rsi = 100.0 - (100.0 / (1.0 + rs));  \n    rsi  \n}  \n\nfn main() {  \n    let up_days = vec![2.0, 3.0, 3.0, 3.0, 2.0, 1.0, 1.0];  \n    let down_days = vec![2.0, 4.0, 5.0, 6.0, 4.0, 3.0, 3.0];  \n    let rsi = calculate_rsi(up_days, down_days);  \n    println!(\"RSI: {}\", rsi);  \n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>RSI: 41.026\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#34","title":"3.4 \u5207\u7247","text":"<p>\u5728Rust\u4e2d\uff0c\u5207\u7247(Slice)\u662f\u4e00\u79cd\u5f15\u7528\u6570\u7ec4\u6216\u5411\u91cf\u4e2d\u4e00\u90e8\u5206\u8fde\u7eed\u5143\u7d20\u7684\u65b9\u6cd5\uff0c\u800c\u4e0d\u9700\u8981\u590d\u5236\u6570\u636e\u3002\u5207\u7247\u6709\u65f6\u975e\u5e38\u6709\u7528\uff0c\u7279\u522b\u662f\u5728\u91cf\u5316\u91d1\u878d\u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u5904\u7406\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u6216\u5176\u4ed6\u5927\u578b\u6570\u636e\u96c6\u3002</p> <p>\u4e0b\u9762\u6211\u5c06\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684\u6848\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u5728Rust\u4e2d\u4f7f\u7528\u5207\u7247\u8fdb\u884c\u91cf\u5316\u91d1\u878d\u5206\u6790\u3002</p> <p>\u5047\u8bbe\u6709\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u6570\u7ec4\uff0c\u6211\u4eec\u60f3\u8ba1\u7b97\u67d0\u6bb5\u65f6\u95f4\u5185\u7684\u6700\u9ad8\u548c\u6700\u4f4e\u4ef7\u683c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\n    // \u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u6570\u7ec4\n    let stock_prices = [50.0, 52.0, 55.0, 60.0, 58.0, 62.0, 65.0, 70.0, 75.0, 80.0];\n\n    // \u5b9a\u4e49\u65f6\u95f4\u7a97\u53e3\u8303\u56f4\n    let start_index = 2; // \u5f00\u59cb\u65e5\u671f\u7684\u7d22\u5f15(\u4ece0\u5f00\u59cb)\n    let end_index = 6;   // \u7ed3\u675f\u65e5\u671f\u7684\u7d22\u5f15(\u5305\u542b)\n\n    // \u4f7f\u7528\u5207\u7247\u83b7\u53d6\u65f6\u95f4\u7a97\u53e3\u5185\u7684\u4ef7\u683c\u6570\u636e\n    let price_window = &amp;stock_prices[start_index..=end_index]; // \u6ce8\u610f\u4f7f\u7528..=\u6765\u5305\u542b\u7ed3\u675f\u7d22\u5f15\n\n    // \u8ba1\u7b97\u6700\u9ad8\u548c\u6700\u4f4e\u4ef7\u683c\n    let max_price = price_window.iter().cloned().fold(f64::NEG_INFINITY, f64::max);\n    let min_price = price_window.iter().cloned().fold(f64::INFINITY, f64::min);\n\n    // \u6253\u5370\u7ed3\u679c\n    println!(\"\u65f6\u95f4\u7a97\u53e3\u5185\u7684\u6700\u9ad8\u4ef7\u683c: {:.2}\", max_price);\n    println!(\"\u65f6\u95f4\u7a97\u53e3\u5185\u7684\u6700\u4f4e\u4ef7\u683c: {:.2}\", min_price);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u65f6\u95f4\u7a97\u53e3\u5185\u7684\u6700\u9ad8\u4ef7\u683c: 65.00\n\u65f6\u95f4\u7a97\u53e3\u5185\u7684\u6700\u4f4e\u4ef7\u683c: 55.00\n</code></pre> <p>\u4e0b\u9762\u6211\u4f1a\u8be6\u7ec6\u89e3\u91ca\u4ee5\u4e0b\u4e24\u884c\u4ee3\u7801\uff1a</p> <pre><code>let max_price = price_window.iter().cloned().fold(f64::NEG_INFINITY, f64::max);\nlet min_price = price_window.iter().cloned().fold(f64::INFINITY, f64::min);\n</code></pre> <p>\u8fd9\u4e24\u884c\u4ee3\u7801\u7684\u76ee\u6807\u662f\u8ba1\u7b97\u65f6\u95f4\u7a97\u53e3\u5185\u7684\u6700\u9ad8\u4ef7\u683c(<code>max_price</code>)\u548c\u6700\u4f4e\u4ef7\u683c(<code>min_price</code>)\u3002\u8ba9\u6211\u4eec\u4e00\u4e00\u89e3\u91ca\u5b83\u4eec\u7684\u6bcf\u4e00\u90e8\u5206\uff1a</p> <ol> <li><code>price_window.iter()</code>\uff1a<code>price_window</code> \u662f\u4e00\u4e2a\u5207\u7247\uff0c\u4f7f\u7528 <code>.iter()</code> \u65b9\u6cd5\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u7528\u4e8e\u904d\u5386\u5207\u7247\u4e2d\u7684\u5143\u7d20\u3002</li> <li><code>.cloned()</code>\uff1a<code>cloned()</code> \u65b9\u6cd5\u7528\u4e8e\u5c06\u5207\u7247\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u514b\u9686\uff0c\u56e0\u4e3a <code>fold</code> \u51fd\u6570\u9700\u8981\u5143\u7d20\u7684\u62f7\u8d1d(<code>Clone</code> trait)\u3002\u8fd9\u662f\u56e0\u4e3a <code>f64</code> \u7c7b\u578b\u662f\u4e0d\u53ef\u53d8\u7c7b\u578b\uff0c\u65e0\u6cd5\u901a\u8fc7\u5f15\u7528\u8fdb\u884c\u76f4\u63a5\u6bd4\u8f83\u3002\u6240\u4ee5\u6211\u4eec\u5c06\u5143\u7d20\u514b\u9686\uff0c\u4ee5\u4fbf\u5728 <code>fold</code> \u51fd\u6570\u4e2d\u8fdb\u884c\u6bd4\u8f83\u3002</li> <li><code>.fold(f64::NEG_INFINITY, f64::max)</code>\uff1a<code>fold</code> \u51fd\u6570\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u9002\u914d\u5668\uff0c\u5b83\u5c06\u8fed\u4ee3\u5668\u4e2d\u7684\u5143\u7d20\u6309\u7167\u7ed9\u5b9a\u7684\u64cd\u4f5c\u8fdb\u884c\u6298\u53e0(\u5f52\u7ea6)\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528 <code>fold</code> \u6765\u627e\u5230\u6700\u9ad8\u4ef7\u683c\u3002</li> <li><code>f64::NEG_INFINITY</code> \u662f\u4e00\u4e2a\u8d1f\u65e0\u7a77\u5927\u7684\u521d\u59cb\u503c\uff0c\u7528\u4e8e\u786e\u4fdd\u4efb\u4f55\u5b9e\u9645\u7684\u4ef7\u683c\u90fd\u4f1a\u5927\u4e8e\u5b83\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u5728\u8ba1\u7b97\u6700\u9ad8\u4ef7\u683c\u65f6\uff0c\u5982\u679c\u65f6\u95f4\u7a97\u53e3\u4e3a\u7a7a\uff0c\u7ed3\u679c\u5c06\u662f\u8d1f\u65e0\u7a77\u5927\u3002</li> <li><code>f64::max</code> \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u8ba1\u7b97\u4e24\u4e2a <code>f64</code> \u7c7b\u578b\u7684\u6570\u503c\u4e2d\u7684\u8f83\u5927\u503c\u3002\u5728 <code>fold</code> \u8fc7\u7a0b\u4e2d\uff0c\u5b83\u4f1a\u6bd4\u8f83\u5f53\u524d\u6700\u9ad8\u4ef7\u683c\u548c\u8fed\u4ee3\u5668\u4e2d\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u8fd4\u56de\u8f83\u5927\u7684\u90a3\u4e2a\u3002</li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2003%20-%20%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%9E%8B/#fold","title":"\u8865\u5145\u5b66\u4e60: fold\u51fd\u6570","text":"<p><code>fold</code> \u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u6982\u5ff5\uff0c\u7528\u4e8e\u5728\u96c6\u5408(\u5982\u6570\u7ec4\u3001\u8fed\u4ee3\u5668\u7b49)\u7684\u5143\u7d20\u4e0a\u8fdb\u884c\u6298\u53e0(\u6216\u5f52\u7ea6)\u64cd\u4f5c\u3002\u5b83\u5141\u8bb8\u4f60\u5728\u96c6\u5408\u4e0a\u8fdb\u884c\u8fed\u4ee3\uff0c\u5e76\u4e14\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5c06\u4e00\u4e2a\u7d2f\u79ef\u503c\u4e0e\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u67d0\u79cd\u64cd\u4f5c\uff0c\u6700\u7ec8\u5f97\u5230\u4e00\u4e2a\u6700\u7ec8\u7684\u7d2f\u79ef\u7ed3\u679c\u3002</p> <p>\u5728 Rust \u4e2d\uff0c<code>fold</code> \u51fd\u6570\u7684\u7b7e\u540d\u5982\u4e0b\uff1a</p> <pre><code>fn fold&lt;B, F&gt;(self, init: B, f: F) -&gt; B\n</code></pre> <p>\u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li><code>init</code>\uff1a\u521d\u59cb\u503c\uff0c\u8868\u793a\u6298\u53e0\u64cd\u4f5c\u7684\u8d77\u59cb\u503c\u3002</li> <li><code>f</code>\uff1a\u4e00\u4e2a\u95ed\u5305(\u51fd\u6570)\uff0c\u5b83\u5b9a\u4e49\u4e86\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5982\u4f55\u5c06\u5f53\u524d\u7684\u7d2f\u79ef\u503c\u4e0e\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u64cd\u4f5c\u3002</li> <li>\u8fd4\u56de\u503c\uff1a\u6700\u7ec8\u7684\u7d2f\u79ef\u7ed3\u679c\u3002</li> </ul> <p><code>fold</code> \u7684\u5de5\u4f5c\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ol> <li>\u5b83\u4ece\u521d\u59cb\u503c <code>init</code> \u5f00\u59cb\u3002</li> <li>\u5bf9\u4e8e\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5b83\u8c03\u7528\u95ed\u5305 <code>f</code>\uff0c\u5c06\u5f53\u524d\u7d2f\u79ef\u503c\u548c\u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u95ed\u5305\u3002</li> <li>\u95ed\u5305 <code>f</code> \u6267\u884c\u67d0\u79cd\u64cd\u4f5c\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u7d2f\u79ef\u503c\u3002</li> <li>\u65b0\u7684\u7d2f\u79ef\u503c\u6210\u4e3a\u4e0b\u4e00\u6b21\u8fed\u4ee3\u7684\u8f93\u5165\u3002</li> <li>\u6b64\u8fc7\u7a0b\u91cd\u590d\uff0c\u76f4\u5230\u904d\u5386\u5b8c\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5143\u7d20\u3002</li> <li>\u6700\u7ec8\u7684\u7d2f\u79ef\u503c\u6210\u4e3a <code>fold</code> \u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002</li> </ol> <p>\u8fd9\u4e2a\u6982\u5ff5\u7684\u597d\u5904\u5728\u4e8e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>fold</code> \u51fd\u6570\u6765\u8fdb\u884c\u5404\u79cd\u96c6\u5408\u7684\u7d2f\u79ef\u64cd\u4f5c\uff0c\u4f8b\u5982\u6c42\u548c\u3001\u6c42\u79ef\u3001\u67e5\u627e\u6700\u5927\u503c\u3001\u67e5\u627e\u6700\u5c0f\u503c\u7b49\u3002\u5728\u4e4b\u524d\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 <code>fold</code> \u51fd\u6570\u6765\u8ba1\u7b97\u6700\u9ad8\u4ef7\u683c\u548c\u6700\u4f4e\u4ef7\u683c\uff0c\u5c06\u5f53\u524d\u7684\u6700\u9ad8/\u6700\u4f4e\u4ef7\u683c\u4e0e\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u6bd4\u8f83\uff0c\u5e76\u66f4\u65b0\u7d2f\u79ef\u503c\uff0c\u6700\u7ec8\u5f97\u5230\u4e86\u6700\u9ad8\u548c\u6700\u4f4e\u4ef7\u683c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2004%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/","title":"Chapter 4 - \u81ea\u5b9a\u4e49\u7c7b\u578b Struct &amp; Enum","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2004%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/#41-struct","title":"4.1 \u7ed3\u6784\u4f53(<code>struct</code>)","text":"<p>\u7ed3\u6784\u4f53(Struct)\u662f Rust \u4e2d\u4e00\u79cd\u81ea\u5b9a\u4e49\u7684\u590d\u5408\u6570\u636e\u7c7b\u578b\uff0c\u5b83\u5141\u8bb8\u4f60\u7ec4\u5408\u591a\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u5e76\u4e3a\u5b83\u4eec\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u7ed3\u6784\u3002\u7ed3\u6784\u4f53\u7528\u4e8e\u8868\u793a\u548c\u7ec4\u7ec7\u5177\u6709\u76f8\u5173\u5c5e\u6027\u7684\u6570\u636e\u3002</p> <p>\u4ee5\u4e0b\u662f\u7ed3\u6784\u4f53\u7684\u4e00\u4e9b\u57fa\u672c\u7279\u70b9\u548c\u6982\u5ff5\uff1a</p> <ol> <li> <p>\u81ea\u5b9a\u4e49\u7c7b\u578b\uff1a\u7ed3\u6784\u4f53\u5141\u8bb8\u4f60\u521b\u5efa\u81ea\u5df1\u7684\u7528\u6237\u5b9a\u4e49\u7c7b\u578b\uff0c\u4ee5\u9002\u5e94\u7279\u5b9a\u95ee\u9898\u9886\u57df\u7684\u9700\u6c42\u3002</p> </li> <li> <p>\u5c5e\u6027\uff1a\u7ed3\u6784\u4f53\u5305\u542b\u5c5e\u6027(fields)\uff0c\u6bcf\u4e2a\u5c5e\u6027\u90fd\u6709\u81ea\u5df1\u7684\u6570\u636e\u7c7b\u578b\uff0c\u8fd9\u4e9b\u5c5e\u6027\u7528\u4e8e\u5b58\u50a8\u76f8\u5173\u7684\u6570\u636e\u3002</p> </li> <li> <p>\u547d\u540d\uff1a\u6bcf\u4e2a\u5c5e\u6027\u90fd\u6709\u4e00\u4e2a\u540d\u79f0\uff0c\u7528\u4e8e\u6807\u8bc6\u548c\u8bbf\u95ee\u5b83\u4eec\u3002\u8fd9\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u53ef\u8bfb\u548c\u53ef\u7ef4\u62a4\u3002</p> </li> <li> <p>\u5b9e\u4f8b\u5316\uff1a\u53ef\u4ee5\u521b\u5efa\u7ed3\u6784\u4f53\u7684\u5b9e\u4f8b\uff0c\u7528\u4e8e\u5b58\u50a8\u5177\u4f53\u7684\u6570\u636e\u3002\u5b9e\u4f8b\u5316\u4e00\u4e2a\u7ed3\u6784\u4f53\u65f6\uff0c\u9700\u8981\u63d0\u4f9b\u6bcf\u4e2a\u5c5e\u6027\u7684\u503c\u3002</p> </li> <li> <p>\u65b9\u6cd5\uff1a\u7ed3\u6784\u4f53\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u65b9\u6cd5\uff0c\u5141\u8bb8\u4f60\u5728\u7ed3\u6784\u4f53\u4e0a\u6267\u884c\u64cd\u4f5c\u3002</p> </li> <li> <p>\u53ef\u53d8\u6027\uff1a\u4f60\u53ef\u4ee5\u58f0\u660e\u7ed3\u6784\u4f53\u5b9e\u4f8b\u4e3a\u53ef\u53d8(mutable)\uff0c\u5141\u8bb8\u5728\u5b9e\u4f8b\u4e0a\u4fee\u6539\u5c5e\u6027\u7684\u503c\u3002</p> </li> <li> <p>\u751f\u547d\u5468\u671f\uff1a\u7ed3\u6784\u4f53\u53ef\u4ee5\u5305\u542b\u5f15\u7528\uff0c\u4ece\u800c\u5f15\u5165\u4e86\u751f\u547d\u5468\u671f\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u786e\u4fdd\u5f15\u7528\u7684\u6709\u6548\u6027\u3002</p> </li> </ol> <p>\u7ed3\u6784\u4f53\u662f Rust \u4e2d\u7ec4\u7ec7\u548c\u62bd\u8c61\u6570\u636e\u7684\u91cd\u8981\u5de5\u5177\uff0c\u5b83\u4eec\u5e38\u5e38\u7528\u4e8e\u5efa\u6a21\u771f\u5b9e\u4e16\u754c\u7684\u5b9e\u4f53\u3001\u914d\u7f6e\u9009\u9879\u3001\u72b6\u6001\u7b49\u3002\u7ed3\u6784\u4f53\u7684\u5b9a\u4e49\u901a\u5e38\u5305\u62ec\u4e86\u5c5e\u6027\u7684\u540d\u79f0\u548c\u6570\u636e\u7c7b\u578b\uff0c\u4ee5\u53ca\u53ef\u9009\u7684\u65b9\u6cd5\uff0c\u4ee5\u4fbf\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5bf9\u7ed3\u6784\u4f53\u6267\u884c\u64cd\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2004%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/#_1","title":"\u6848\u4f8b\uff1a \u521b\u5efa\u4e00\u4e2a\u4ee3\u8868\u7b80\u5355\u91d1\u878d\u5de5\u5177\u7684\u7ed3\u6784\u4f53","text":"<p>\u5728 Rust \u4e2d\u8fdb\u884c\u91cf\u5316\u91d1\u878d\u5efa\u6a21\u65f6\uff0c\u901a\u5e38\u9700\u8981\u81ea\u5b9a\u4e49\u7c7b\u578b\u6765\u8868\u793a\u91d1\u878d\u5de5\u5177\u3001\u4ea4\u6613\u7b56\u7565\u6216\u5176\u4ed6\u76f8\u5173\u6982\u5ff5\u3002\u81ea\u5b9a\u4e49\u7c7b\u578b\u53ef\u4ee5\u662f\u7ed3\u6784\u4f53(<code>struct</code>)\u6216\u679a\u4e3e(<code>enum</code>)\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6211\u4eec\u7684\u9700\u6c42\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u5728 Rust \u4e2d\u521b\u5efa\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\u6765\u8868\u793a\u4e00\u4e2a\u7b80\u5355\u7684\u91d1\u878d\u5de5\u5177(\u4f8b\u5982\u80a1\u7968)\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u80a1\u7968\u7684\u7ed3\u6784\u4f53\nstruct Stock {\n    symbol: String,  // \u80a1\u7968\u4ee3\u7801\n    price: f64,      // \u5f53\u524d\u4ef7\u683c\n    quantity: u32,   // \u6301\u6709\u6570\u91cf\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u80a1\u7968\u5b9e\u4f8b\n    let apple_stock = Stock {\n        symbol: String::from(\"AAPL\"),\n        price: 150.50,\n        quantity: 1000,\n    };\n\n    // \u6253\u5370\u80a1\u7968\u4fe1\u606f\n    println!(\"\u80a1\u7968\u4ee3\u7801: {}\", apple_stock.symbol);\n    println!(\"\u80a1\u7968\u4ef7\u683c: ${:.2}\", apple_stock.price);\n    println!(\"\u80a1\u7968\u6570\u91cf: {}\", apple_stock.quantity);\n\n    // \u8ba1\u7b97\u603b\u4ef7\u503c\n    let total_value = apple_stock.price * apple_stock.quantity as f64;\n    println!(\"\u603b\u4ef7\u503c: ${:.2}\", total_value);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u80a1\u7968\u4ee3\u7801: AAPL\n\u80a1\u7968\u4ef7\u683c: $150.50\n\u80a1\u7968\u6570\u91cf: 1000\n\u603b\u4ef7\u503c: $150500.00\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2004%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/#42-enum","title":"4.2 \u679a\u4e3e(<code>enum</code>)","text":"<p>\u5728 Rust \u4e2d\uff0c<code>enum</code> \u662f\u4e00\u79cd\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u5177\u6709\u4e00\u7ec4\u79bb\u6563\u53ef\u80fd\u503c\u7684\u7c7b\u578b\u3002\u5b83\u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u7ec4\u76f8\u5173\u7684\u503c\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u503c\u6307\u5b9a\u4e00\u4e2a\u540d\u79f0\u3002<code>enum</code> \u901a\u5e38\u7528\u4e8e\u8868\u793a\u679a\u4e3e\u7c7b\u578b\uff0c\u5b83\u53ef\u4ee5\u5305\u542b\u4e0d\u540c\u7684\u53d8\u4f53(\u4e5f\u79f0\u4e3a\u6210\u5458\u6216\u679a\u4e3e\u9879)\uff0c\u6bcf\u4e2a\u53d8\u4f53\u53ef\u4ee5\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5b9a\u4e49\u548c\u4f7f\u7528 <code>enum</code>\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a Color \u7684\u679a\u4e3e\nenum Color {\n    Red,\n    Green,\n    Blue,\n}\n\nfn main() {\n    // \u521b\u5efa\u679a\u4e3e\u53d8\u91cf\n    let favorite_color = Color::Blue;\n\n    // \u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u5339\u914d\u679a\u4e3e\u503c\n    match favorite_color {\n        Color::Red =&gt; println!(\"\u7ea2\u8272\u662f\u6211\u7684\u6700\u7231\uff01\"),\n        Color::Green =&gt; println!(\"\u7eff\u8272\u4e5f\u4e0d\u9519\u3002\"),\n        Color::Blue =&gt; println!(\"\u84dd\u8272\u662f\u6211\u7684\u6700\u7231\uff01\"),\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Color</code> \u7684\u679a\u4e3e\uff0c\u5b83\u6709\u4e09\u4e2a\u53d8\u4f53\uff1a<code>Red</code>\u3001<code>Green</code> \u548c <code>Blue</code>\u3002\u6bcf\u4e2a\u53d8\u4f53\u4ee3\u8868\u4e86\u4e00\u79cd\u989c\u8272\u3002\u7136\u540e\uff0c\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a <code>favorite_color</code> \u53d8\u91cf\uff0c\u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a <code>Color::Blue</code>\uff0c\u7136\u540e\u4f7f\u7528 <code>match</code> \u8868\u8fbe\u5f0f\u5bf9\u679a\u4e3e\u503c\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff0c\u6839\u636e\u989c\u8272\u8f93\u51fa\u4e0d\u540c\u7684\u6d88\u606f\u3002</p> <p>\u679a\u4e3e\u7684\u4e3b\u8981\u4f18\u70b9\u5305\u62ec\uff1a</p> <ol> <li> <p>\u7c7b\u578b\u5b89\u5168\uff1a\u679a\u4e3e\u786e\u4fdd\u53d8\u4f53\u7684\u503c\u662f\u7c7b\u578b\u5b89\u5168\u7684\uff0c\u4e0d\u4f1a\u51fa\u73b0\u65e0\u6548\u7684\u503c\u3002</p> </li> <li> <p>\u53ef\u8bfb\u6027\uff1a\u679a\u4e3e\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u503c\u63d0\u4f9b\u63cf\u8ff0\u6027\u7684\u540d\u79f0\uff0c\u4f7f\u4ee3\u7801\u66f4\u5177\u53ef\u8bfb\u6027\u3002</p> </li> <li> <p>\u6a21\u5f0f\u5339\u914d\uff1a\u679a\u4e3e\u4e0e\u6a21\u5f0f\u5339\u914d\u7ed3\u5408\u4f7f\u7528\uff0c\u53ef\u7528\u4e8e\u5904\u7406\u4e0d\u540c\u7684\u60c5\u51b5\uff0c\u4f7f\u4ee3\u7801\u66f4\u5177\u8868\u8fbe\u529b\u3002</p> </li> <li> <p>\u53ef\u6269\u5c55\u6027\uff1a\u4f60\u53ef\u4ee5\u968f\u65f6\u6dfb\u52a0\u65b0\u7684\u53d8\u4f53\u6765\u6269\u5c55\u679a\u4e3e\u7c7b\u578b\uff0c\u800c\u4e0d\u4f1a\u7834\u574f\u73b0\u6709\u4ee3\u7801\u3002</p> </li> </ol> <p>\u679a\u4e3e\u5728 Rust \u4e2d\u88ab\u5e7f\u6cdb\u7528\u4e8e\u8868\u793a\u5404\u79cd\u4e0d\u540c\u7684\u60c5\u51b5\u548c\u72b6\u6001\uff0c\u5305\u62ec\u9519\u8bef\u5904\u7406\u3001\u9009\u9879\u7c7b\u578b\u7b49\u7b49\u3002\u5b83\u662f Rust \u5f3a\u5927\u7684\u5de5\u5177\u4e4b\u4e00\uff0c\u6709\u52a9\u4e8e\u7f16\u5199\u7c7b\u578b\u5b89\u5168\u4e14\u6e05\u6670\u7684\u4ee3\u7801\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2004%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/#1","title":"\u6848\u4f8b1\uff1a \u6295\u8d44\u7ec4\u5408\u7ba1\u7406\u7cfb\u7edf","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528\u679a\u4e3e\u548c\u7ed3\u6784\u4f53\u6765\u5904\u7406\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u590d\u6742\u6848\u4f8b\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u7b80\u5316\u7684\u6295\u8d44\u7ec4\u5408\u7ba1\u7406\u7cfb\u7edf\uff0c\u7528\u4e8e\u8ddf\u8e2a\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7(\u80a1\u7968\u3001\u503a\u5238\u7b49)\u548c\u5b83\u4eec\u7684\u4ef7\u683c\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u679a\u4e3e\u6765\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\uff0c\u5e76\u4f7f\u7528\u7ed3\u6784\u4f53\u6765\u8868\u793a\u8d44\u4ea7\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e\uff0c\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\nenum AssetType {\n    Stock,\n    Bond,\n    RealEstate,\n}\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u8d44\u4ea7\nstruct Asset {\n    name: String,\n    asset_type: AssetType,\n    price: f64,\n}\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6295\u8d44\u7ec4\u5408\u7ed3\u6784\u4f53\uff0c\u5305\u542b\u591a\u4e2a\u8d44\u4ea7\nstruct Portfolio {\n    assets: Vec&lt;Asset&gt;,\n}\n\nimpl Portfolio {\n    // \u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u603b\u4ef7\u503c\n    fn calculate_total_value(&amp;self) -&gt; f64 {\n        let mut total_value = 0.0;\n        for asset in &amp;self.assets {\n            total_value += asset.price;\n        }\n        total_value\n    }\n}\n\nfn main() {\n    // \u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\n    let stock1 = Asset {\n        name: String::from(\"AAPL\"),\n        asset_type: AssetType::Stock,\n        price: 150.0,\n    };\n\n    let bond1 = Asset {\n        name: String::from(\"Government Bond\"),\n        asset_type: AssetType::Bond,\n        price: 1000.0,\n    };\n\n    let real_estate1 = Asset {\n        name: String::from(\"Commercial Property\"),\n        asset_type: AssetType::RealEstate,\n        price: 500000.0,\n    };\n\n    // \u521b\u5efa\u6295\u8d44\u7ec4\u5408\u5e76\u6dfb\u52a0\u8d44\u4ea7\n    let mut portfolio = Portfolio {\n        assets: Vec::new(),\n    };\n\n    portfolio.assets.push(stock1);\n    portfolio.assets.push(bond1);\n    portfolio.assets.push(real_estate1);\n\n    // \u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u603b\u4ef7\u503c\n    let total_value = portfolio.calculate_total_value();\n\n    // \u6253\u5370\u7ed3\u679c\n    println!(\"\u6295\u8d44\u7ec4\u5408\u603b\u4ef7\u503c: ${}\", total_value);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>\u6295\u8d44\u7ec4\u5408\u603b\u4ef7\u503c: $501150\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>AssetType</code> \u7684\u679a\u4e3e\uff0c\u5b83\u4ee3\u8868\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7(\u80a1\u7968\u3001\u503a\u5238\u3001\u623f\u5730\u4ea7)\u3002\u7136\u540e\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Asset</code> \u7684\u7ed3\u6784\u4f53\uff0c\u7528\u4e8e\u8868\u793a\u5355\u4e2a\u8d44\u4ea7\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u540d\u79f0\u3001\u8d44\u4ea7\u7c7b\u578b\u548c\u4ef7\u683c\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Portfolio</code> \u7684\u7ed3\u6784\u4f53\uff0c\u5b83\u5305\u542b\u4e00\u4e2a <code>Vec&lt;Asset&gt;</code>\uff0c\u8868\u793a\u6295\u8d44\u7ec4\u5408\u4e2d\u7684\u591a\u4e2a\u8d44\u4ea7\u3002</p> <p>\u5728 <code>Portfolio</code> \u7ed3\u6784\u4f53\u4e0a\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u65b9\u6cd5 <code>calculate_total_value</code>\uff0c\u7528\u4e8e\u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u603b\u4ef7\u503c\u3002\u8be5\u65b9\u6cd5\u904d\u5386\u6295\u8d44\u7ec4\u5408\u4e2d\u7684\u6240\u6709\u8d44\u4ea7\uff0c\u5e76\u5c06\u5b83\u4eec\u7684\u4ef7\u683c\u76f8\u52a0\uff0c\u5f97\u5230\u603b\u4ef7\u503c\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\uff0c\u7136\u540e\u521b\u5efa\u4e86\u4e00\u4e2a\u6295\u8d44\u7ec4\u5408\u5e76\u5411\u5176\u4e2d\u6dfb\u52a0\u8d44\u4ea7\u3002\u6700\u540e\uff0c\u6211\u4eec\u8c03\u7528 <code>calculate_total_value</code> \u65b9\u6cd5\u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u603b\u4ef7\u503c\uff0c\u5e76\u5c06\u7ed3\u679c\u6253\u5370\u51fa\u6765\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u679a\u4e3e\u548c\u7ed3\u6784\u4f53\u6765\u5efa\u6a21\u590d\u6742\u7684\u91cf\u5316\u91d1\u878d\u95ee\u9898\uff0c\u4ee5\u53ca\u5982\u4f55\u5728 Rust \u4e2d\u5b9e\u73b0\u76f8\u5e94\u7684\u529f\u80fd\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6269\u5c55\u8fd9\u4e2a\u793a\u4f8b\uff0c\u5305\u62ec\u66f4\u591a\u7684\u8d44\u4ea7\u7c7b\u578b\u3001\u4ea4\u6613\u89c4\u5219\u7b49\u7b49\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2004%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B/#2","title":"\u6848\u4f8b2\uff1a \u8ba2\u5355\u6267\u884c\u6a21\u62df","text":"<p>\u5f53\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u4f7f\u7528 Rust \u65f6\uff0c\u679a\u4e3e(<code>enum</code>)\u5e38\u5e38\u7528\u4e8e\u8868\u793a\u4e0d\u540c\u7684\u91d1\u878d\u5de5\u5177\u6216\u8ba2\u5355\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528\u679a\u4e3e\u6765\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\u548c\u8ba2\u5355\uff0c\u5e76\u6a21\u62df\u6267\u884c\u8fd9\u4e9b\u8ba2\u5355\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e\uff0c\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\nenum FinancialInstrument {\n    Stock,\n    Bond,\n    Option,\n    Future,\n}\n\n// \u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e\uff0c\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u8ba2\u5355\nenum OrderType {\n    Market,\n    Limit(f64), // \u9650\u4ef7\u8ba2\u5355\uff0c\u5305\u62ec\u4ef7\u683c\u9650\u5236\n    Stop(f64),  // \u6b62\u635f\u8ba2\u5355\uff0c\u5305\u62ec\u89e6\u53d1\u4ef7\u683c\n}\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u8ba2\u5355\nstruct Order {\n    instrument: FinancialInstrument,\n    order_type: OrderType,\n    quantity: i32,\n}\n\nimpl Order {\n    // \u6a21\u62df\u6267\u884c\u8ba2\u5355\n    fn execute(&amp;self) {\n        match &amp;self.order_type {\n            OrderType::Market =&gt; println!(\"\u6267\u884c\u5e02\u4ef7\u8ba2\u5355: {:?} x {}\", self.instrument, self.quantity),\n            OrderType::Limit(price) =&gt; {\n                println!(\"\u6267\u884c\u9650\u4ef7\u8ba2\u5355: {:?} x {} (\u4ef7\u683c\u9650\u5236: ${})\", self.instrument, self.quantity, price)\n            }\n            OrderType::Stop(trigger_price) =&gt; {\n                println!(\"\u6267\u884c\u6b62\u635f\u8ba2\u5355: {:?} x {} (\u89e6\u53d1\u4ef7\u683c: ${})\", self.instrument, self.quantity, trigger_price)\n            }\n        }\n    }\n}\n\nfn main() {\n    // \u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u8ba2\u5355\n    let market_order = Order {\n        instrument: FinancialInstrument::Stock,\n        order_type: OrderType::Market,\n        quantity: 100,\n    };\n\n    let limit_order = Order {\n        instrument: FinancialInstrument::Option,\n        order_type: OrderType::Limit(50.0),\n        quantity: 50,\n    };\n\n    let stop_order = Order {\n        instrument: FinancialInstrument::Future,\n        order_type: OrderType::Stop(4900.0),\n        quantity: 10,\n    };\n\n    // \u6267\u884c\u8ba2\u5355\n    market_order.execute();\n    limit_order.execute();\n    stop_order.execute();\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e24\u4e2a\u679a\u4e3e\uff1a<code>FinancialInstrument</code> \u7528\u4e8e\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177(\u80a1\u7968\u3001\u503a\u5238\u3001\u671f\u6743\u3001\u671f\u8d27\u7b49)\uff0c<code>OrderType</code> \u7528\u4e8e\u8868\u793a\u4e0d\u540c\u7c7b\u578b\u7684\u8ba2\u5355(\u5e02\u4ef7\u8ba2\u5355\u3001\u9650\u4ef7\u8ba2\u5355\u3001\u6b62\u635f\u8ba2\u5355)\u3002<code>OrderType::Limit</code> \u548c <code>OrderType::Stop</code> \u53d8\u4f53\u5305\u62ec\u4e86\u4ef7\u683c\u9650\u5236\u548c\u89e6\u53d1\u4ef7\u683c\u7684\u4fe1\u606f\u3002</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>Order</code> \u7ed3\u6784\u4f53\uff0c\u5b83\u5305\u542b\u4e86\u91d1\u878d\u5de5\u5177\u7c7b\u578b\u3001\u8ba2\u5355\u7c7b\u578b\u548c\u8ba2\u5355\u6570\u91cf\u3002\u5728 <code>Order</code> \u7ed3\u6784\u4f53\u4e0a\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u65b9\u6cd5 <code>execute</code>\uff0c\u7528\u4e8e\u6a21\u62df\u6267\u884c\u8ba2\u5355\uff0c\u5e76\u6839\u636e\u8ba2\u5355\u7c7b\u578b\u6253\u5370\u76f8\u5e94\u7684\u4fe1\u606f\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e0d\u540c\u7c7b\u578b\u7684\u8ba2\u5355\uff0c\u5e76\u4f7f\u7528 <code>execute</code> \u65b9\u6cd5\u6a21\u62df\u6267\u884c\u5b83\u4eec\u3002\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u679a\u4e3e\u548c\u7ed3\u6784\u4f53\u6765\u8868\u793a\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u4e0d\u540c\u6982\u5ff5\uff0c\u5e76\u6a21\u62df\u6267\u884c\u76f8\u5173\u64cd\u4f5c\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u6269\u5c55\u8fd9\u4e2a\u793a\u4f8b\uff0c\u5305\u62ec\u66f4\u591a\u7684\u91d1\u878d\u5de5\u5177\u7c7b\u578b\u548c\u8ba2\u5355\u7c7b\u578b\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/","title":"Chapter 5 - \u6807\u51c6\u5e93\u7c7b\u578b","text":"<p>\u5f53\u63d0\u5230 Rust \u7684\u6807\u51c6\u5e93\u65f6\uff0c\u786e\u5b9e\u5305\u542b\u4e86\u8bb8\u591a\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u5b83\u4eec\u5728\u539f\u751f\u6570\u636e\u7c7b\u578b\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u6269\u5c55\u548c\u589e\u5f3a\uff0c\u4e3a Rust \u7a0b\u5e8f\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u529f\u80fd\u548c\u7075\u6d3b\u6027\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\u548c\u7c7b\u578b\u5305\u88c5\u5668\uff1a</p> <ol> <li> <p>\u53ef\u589e\u957f\u7684\u5b57\u7b26\u4e32(<code>String</code>)\uff1a</p> </li> <li> <p><code>String</code> \u662f\u4e00\u4e2a\u53ef\u53d8\u7684\u3001\u5806\u5206\u914d\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u4e0e\u539f\u751f\u7684\u5b57\u7b26\u4e32\u5207\u7247(<code>str</code>)\u4e0d\u540c\u3002\u5b83\u5141\u8bb8**\u52a8\u6001\u5730**\u589e\u52a0\u548c\u4fee\u6539\u5b57\u7b26\u4e32\u5185\u5bb9\u3002</p> </li> </ol> <pre><code>let greeting = String::from(\"Hello, \");\nlet name = \"Alice\";\nlet message = greeting + name;\n</code></pre> <ol> <li> <p>\u53ef\u589e\u957f\u7684\u5411\u91cf(<code>Vec</code>)\uff1a</p> </li> <li> <p><code>Vec</code> \u662f\u4e00\u4e2a\u53ef\u53d8\u7684\u3001\u5806\u5206\u914d\u7684**\u52a8\u6001\u6570\u7ec4**\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u52a8\u6001\u589e\u52a0\u6216\u5220\u9664\u5143\u7d20\u3002</p> </li> </ol> <pre><code>let mut numbers = Vec::new();\nnumbers.push(1);\nnumbers.push(2);\n</code></pre> <ol> <li> <p>\u9009\u9879\u7c7b\u578b(<code>Option</code>)\uff1a</p> </li> <li> <p><code>Option</code> \u8868\u793a\u4e00\u4e2a\u53ef\u80fd\u5b58\u5728\u4e5f\u53ef\u80fd**\u4e0d\u5b58\u5728\u7684\u503c**\uff0c\u5b83\u7528\u4e8e\u5904\u7406\u7f3a\u5931\u503c\u7684\u60c5\u51b5\u3002\u5b83\u6709\u4e24\u4e2a\u53d8\u4f53\uff1a<code>Some(value)</code> \u8868\u793a\u5b58\u5728\u4e00\u4e2a\u503c\uff0c<code>None</code> \u8868\u793a\u7f3a\u5931\u503c\u3002</p> </li> </ol> <pre><code>fn divide(x: f64, y: f64) -&gt; Option&lt;f64&gt; {\n    if y == 0.0 {\n        None\n    } else {\n        Some(x / y)\n    }\n}\n</code></pre> <ol> <li> <p>\u9519\u8bef\u5904\u7406\u7c7b\u578b(<code>Result</code>)\uff1a</p> </li> <li> <p><code>Result</code> \u7528\u4e8e\u8868\u793a\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u53ef\u80fd\u6210\u529f**\u4e5f\u53ef\u80fd\u5931\u8d25**\u3002\u5b83\u6709\u4e24\u4e2a\u53d8\u4f53\uff1a<code>Ok(value)</code> \u8868\u793a\u64cd\u4f5c\u6210\u529f\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c<code>Err(error)</code> \u8868\u793a\u64cd\u4f5c\u5931\u8d25\u5e76\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\u3002</p> </li> </ol> <pre><code>fn parse_input(input: &amp;str) -&gt; Result&lt;i32, &amp;str&gt; {\n    if let Ok(value) = input.parse::&lt;i32&gt;() {\n        Ok(value)\n    } else {\n        Err(\"Invalid input\")\n    }\n}\n</code></pre> <ol> <li> <p>\u5806\u5206\u914d\u7684\u6307\u9488(<code>Box</code>)\uff1a</p> </li> <li> <p><code>Box</code> \u662f Rust \u7684\u7c7b\u578b\u5305\u88c5\u5668\uff0c\u5b83\u5141\u8bb8\u5c06\u6570\u636e\u5728\u5806\u4e0a\u5206\u914d\uff0c\u5e76\u63d0\u4f9b\u4e86\u5806\u6570\u636e\u7684\u6240\u6709\u6743\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u7ba1\u7406\u5185\u5b58\u548c\u89e3\u51b3\u6240\u6709\u6743\u95ee\u9898\u3002</p> </li> </ol> <pre><code>fn create_boxed_integer() -&gt; Box&lt;i32&gt; {\n    Box::new(42)\n}\n</code></pre> <p>\u8fd9\u4e9b\u6807\u51c6\u7c7b\u578b\u548c\u7c7b\u578b\u5305\u88c5\u5668\u6269\u5c55\u4e86 Rust \u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff0c\u4f7f\u5176\u66f4\u9002\u7528\u4e8e\u5404\u79cd\u7f16\u7a0b\u4efb\u52a1\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#51-string","title":"5.1 \u5b57\u7b26\u4e32 (String)","text":"<p><code>String</code> \u662f Rust \u4e2d\u7684\u4e00\u79cd\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5b83\u662f\u4e00\u4e2a\u53ef\u53d8\u7684\u3001\u5806\u5206\u914d\u7684\u5b57\u7b26\u4e32\u3002\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u548c\u4ecb\u7ecd <code>String</code>\uff0c\u5305\u62ec\u5176\u5185\u5b58\u7279\u5f81\uff1a</p> <ol> <li>\u53ef\u53d8\u6027\uff1a</li> <li><code>String</code> \u662f\u53ef\u53d8\u7684\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u52a8\u6001\u5730\u5411\u5176\u6dfb\u52a0\u3001\u4fee\u6539\u6216\u5220\u9664\u5b57\u7b26\uff0c\u800c\u4e0d\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\u3002</li> <li>\u5806\u5206\u914d\uff1a</li> <li><code>String</code> \u7684\u5185\u5b58\u662f\u5728\u5806\u4e0a\u5206\u914d\u7684\u3002\u8fd9\u610f\u5473\u7740\u5b83\u7684\u5927\u5c0f\u662f\u52a8\u6001\u7684\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u52a8\u6001\u589e\u957f\u6216\u51cf\u5c0f\uff0c\u800c\u4e0d\u53d7\u6808\u5185\u5b58\u7684\u9650\u5236\u3002</li> <li>\u5806\u5206\u914d\u7684\u5185\u5b58\u7531 Rust \u7684\u6240\u6709\u6743\u7cfb\u7edf\u7ba1\u7406\uff0c\u5f53\u4e0d\u518d\u9700\u8981 <code>String</code> \u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u91ca\u653e\u5176\u5185\u5b58\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u3002</li> <li>UTF-8 \u7f16\u7801\uff1a</li> <li><code>String</code> \u5185\u90e8\u5b58\u50a8\u7684\u6570\u636e\u662f\u4e00\u4e2a\u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u5e8f\u5217\u3002UTF-8 \u662f\u4e00\u79cd\u53ef\u53d8\u957f\u5ea6\u7684\u5b57\u7b26\u7f16\u7801\uff0c\u5141\u8bb8\u8868\u793a\u5404\u79cd\u8bed\u8a00\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u5728\u5168\u7403\u8303\u56f4\u5185\u5e7f\u6cdb\u4f7f\u7528\u3002</li> <li>\u7531\u4e8e <code>String</code> \u5185\u90e8\u662f\u6709\u6548\u7684 UTF-8 \u7f16\u7801\uff0c\u56e0\u6b64\u5b83\u662f\u4e00\u4e2a\u5408\u6cd5\u7684 Unicode \u5b57\u7b26\u4e32\u3002</li> <li>\u5b57\u8282\u5411\u91cf(<code>Vec&lt;u8&gt;</code>)\uff1a</li> <li><code>String</code> \u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u662f\u4e00\u4e2a\u7531\u5b57\u8282(<code>u8</code>)\u7ec4\u6210\u7684\u5411\u91cf\uff0c\u5373 <code>Vec&lt;u8&gt;</code>\u3002</li> <li>\u8fd9\u4e2a\u5b57\u8282\u5411\u91cf\u5b58\u50a8\u4e86\u5b57\u7b26\u4e32\u7684\u6bcf\u4e2a\u5b57\u7b26\u7684 UTF-8 \u7f16\u7801\u5b57\u8282\u5e8f\u5217\u3002</li> <li>\u62e5\u6709\u6240\u6709\u6743\uff1a</li> <li><code>String</code> \u62e5\u6709\u5176\u5185\u90e8\u6570\u636e\u7684\u6240\u6709\u6743\u3002\u8fd9\u610f\u5473\u7740\u5f53\u4f60\u5c06\u4e00\u4e2a <code>String</code> \u5206\u914d\u7ed9\u53e6\u4e00\u4e2a <code>String</code> \u6216\u5728\u51fd\u6570\u4e4b\u95f4\u4f20\u9012\u65f6\uff0c\u6240\u6709\u6743\u4f1a\u8f6c\u79fb\uff0c\u800c\u4e0d\u662f\u590d\u5236\u6570\u636e\u3002\u8fd9\u6709\u52a9\u4e8e\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u590d\u5236\u3002</li> <li>\u514b\u9686\u548c\u590d\u5236\uff1a</li> <li><code>String</code> \u7c7b\u578b\u5b9e\u73b0\u4e86 <code>Clone</code> trait\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>.clone()</code> \u65b9\u6cd5\u514b\u9686\u4e00\u4e2a <code>String</code>\uff0c\u8fd9\u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 <code>String</code>\uff0c\u62e5\u6709\u76f8\u540c\u7684\u5185\u5bb9\u3002</li> <li>\u4e0e <code>&amp;str</code> \u4e0d\u540c\uff0c<code>String</code> \u662f\u53ef\u4ee5\u590d\u5236\u7684(<code>Copy</code> trait)\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u81ea\u52a8\u590d\u5236\uff0c\u800c\u4e0d\u4f1a\u79fb\u52a8\u6240\u6709\u6743\u3002</li> </ol> <p>\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u5b57\u7b26\u4e32\n    let mut my_string = String::new();\n\n    // \u5411\u5b57\u7b26\u4e32\u6dfb\u52a0\u5185\u5bb9\n    my_string.push_str(\"Hello, \");\n    my_string.push_str(\"world!\");\n\n    println!(\"{}\", my_string); // \u8f93\u51fa \"Hello, world!\"\n}\n</code></pre> <p>\u603b\u7ed3\uff1a</p> <p><code>String</code> \u662f Rust \u4e2d\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5177\u6709\u53ef\u53d8\u6027\u3001\u5806\u5206\u914d\u7684\u7279\u6027\uff0c\u5185\u90e8\u5b58\u50a8\u6709\u6548\u7684 UTF-8 \u7f16\u7801\u6570\u636e\uff0c\u5e76\u62e5\u6709\u6240\u6709\u6743\u3002\u5b83\u662f\u4e00\u79cd\u975e\u5e38\u6709\u7528\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u9002\u5408\u5904\u7406\u9700\u8981\u52a8\u6001\u589e\u957f\u548c\u4fee\u6539\u5185\u5bb9\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u3002\u540c\u65f6\uff0cRust \u7684\u6240\u6709\u6743\u7cfb\u7edf\u786e\u4fdd\u4e86\u5185\u5b58\u5b89\u5168\u6027\u548c\u6709\u6548\u7684\u5185\u5b58\u7ba1\u7406\u3002</p> <p>\u4e4b\u524d\u6211\u4eec\u5728\u7b2c\u4e09\u7ae0\u8be6\u7ec6\u8bb2\u8fc7&amp;str , \u4ee5\u4e0b\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u5bf9\u6bd4\u4e86 <code>String</code> \u548c <code>&amp;str</code> \u8fd9\u4e24\u79cd Rust \u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u4e3b\u8981\u7279\u6027\uff1a</p> \u7279\u6027 <code>String</code> <code>&amp;str</code> \u53ef\u53d8\u6027 \u53ef\u53d8 \u4e0d\u53ef\u53d8 \u5185\u5b58\u5206\u914d \u5806\u5206\u914d \u4e0d\u62e5\u6709\u5185\u5b58\uff0c\u901a\u5e38\u662f\u6808\u4e0a\u7684\u89c6\u56fe UTF-8 \u7f16\u7801 \u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u5e8f\u5217 \u6709\u6548\u7684 UTF-8 \u5b57\u7b26\u5e8f\u5217 \u5e95\u5c42\u6570\u636e\u7ed3\u6784 <code>Vec&lt;u8&gt;</code>(\u5b57\u8282\u5411\u91cf) \u65e0(\u53ea\u662f\u5207\u7247\u7684\u5f15\u7528) \u6240\u6709\u6743 \u62e5\u6709\u5185\u90e8\u6570\u636e\u7684\u6240\u6709\u6743 \u4e0d\u62e5\u6709\u5185\u90e8\u6570\u636e\u7684\u6240\u6709\u6743 \u53ef\u514b\u9686(Clone) \u53ef\u514b\u9686(\u5b9e\u73b0\u4e86 <code>Clone</code> trait) \u4e0d\u53ef\u514b\u9686 \u79fb\u52a8\u548c\u590d\u5236 \u79fb\u52a8\u6216\u590d\u5236\u6570\u636e\uff0c\u5177\u4f53\u60c5\u51b5\u800c\u5b9a \u590d\u5236\u5207\u7247\u7684\u5f15\u7528\uff0c\u65e0\u5185\u5b58\u79fb\u52a8 \u589e\u52a0\u3001\u4fee\u6539\u548c\u5220\u9664 \u53ef\u4ee5\u52a8\u6001\u8fdb\u884c\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u5206\u914d \u4e0d\u53ef\u53d8\uff0c\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539 \u9002\u7528\u573a\u666f \u52a8\u6001\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u589e\u52a0\u548c\u4fee\u6539\u5185\u5bb9 \u8bfb\u53d6\u3001\u4f20\u9012\u73b0\u6709\u5b57\u7b26\u4e32\u7684\u5f15\u7528 \u5185\u5b58\u7ba1\u7406 Rust \u7684\u6240\u6709\u6743\u7cfb\u7edf\u7ba1\u7406 Rust \u7684\u501f\u7528\u548c\u751f\u547d\u5468\u671f\u7cfb\u7edf\u7ba1\u7406 <p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6839\u636e\u4f60\u7684\u5177\u4f53\u9700\u6c42\u6765\u9009\u62e9\u4f7f\u7528\u54ea\u79cd\u7c7b\u578b\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c<code>String</code> \u9002\u7528\u4e8e\u52a8\u6001\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u6784\u5efa\u548c\u4fee\u6539\uff0c\u800c <code>&amp;str</code> \u9002\u7528\u4e8e\u53ea\u9700\u8981\u8bfb\u53d6\u5b57\u7b26\u4e32\u5185\u5bb9\u7684\u60c5\u51b5\uff0c\u6216\u8005\u4f5c\u4e3a\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#52-vector","title":"5.2 \u5411\u91cf (vector)","text":"<p>\u5411\u91cf(Vector)\u662f Rust \u4e2d\u7684\u4e00\u79cd\u52a8\u6001\u6570\u7ec4\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5141\u8bb8\u4f60\u5b58\u50a8\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u7684\u5143\u7d20\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u589e\u957f\u6216\u7f29\u5c0f\u3002\u5411\u91cf\u662f Rust \u6807\u51c6\u5e93(<code>std::vec::Vec</code>)\u63d0\u4f9b\u7684\u4e00\u79cd\u975e\u5e38\u6709\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u4e0b\u662f\u5173\u4e8e\u5411\u91cf\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>\u7279\u6027\u548c\u7528\u9014\uff1a</p> <ol> <li> <p>\u52a8\u6001\u5927\u5c0f\uff1a\u5411\u91cf\u7684\u5927\u5c0f\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6**\u52a8\u6001\u589e\u957f\u6216\u7f29\u5c0f**\uff0c\u800c\u4e0d\u9700\u8981\u4e8b\u5148\u6307\u5b9a\u5927\u5c0f\u3002\u8fd9\u4f7f\u5f97\u5411\u91cf\u9002\u7528\u4e8e\u9700\u8981\u52a8\u6001\u7ba1\u7406\u5143\u7d20\u7684\u60c5\u51b5\uff0c\u907f\u514d\u4e86\u56fa\u5b9a\u6570\u7ec4\u5927\u5c0f\u7684\u9650\u5236\u3002</p> </li> <li> <p>\u5806\u5206\u914d\uff1a\u5411\u91cf\u7684\u5143\u7d20\u662f\u5728\u5806\u4e0a\u5206\u914d\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4e0d\u53d7\u6808\u5185\u5b58\u7684\u9650\u5236\uff0c\u53ef\u4ee5\u5bb9\u7eb3\u5927\u91cf\u5143\u7d20\u3002\u5411\u91cf\u7684\u5185\u5b58\u7531 Rust \u7684\u6240\u6709\u6743\u7cfb\u7edf\u7ba1\u7406\uff0c\u786e\u4fdd\u5728\u4e0d\u518d\u9700\u8981\u65f6\u91ca\u653e\u5185\u5b58\u3002</p> </li> <li> <p>\u7c7b\u578b\u5b89\u5168\uff1a\u5411\u91cf\u53ea\u80fd**\u5b58\u50a8\u76f8\u540c\u7c7b\u578b\u7684\u5143\u7d20**\uff0c\u8fd9\u63d0\u4f9b\u4e86\u7c7b\u578b\u5b89\u5168\u6027\u548c\u7f16\u8bd1\u65f6\u68c0\u67e5\u3002\u5982\u679c\u5c1d\u8bd5\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\u63d2\u5165\u5230\u5411\u91cf\u4e2d\uff0cRust \u7f16\u8bd1\u5668\u4f1a\u62a5\u9519\u3002</p> </li> <li> <p>\u7d22\u5f15\u8bbf\u95ee\uff1a\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u6765\u8bbf\u95ee\u5411\u91cf\u4e2d\u7684\u5143\u7d20\u3002Rust \u7684\u7d22\u5f15\u4ece 0 \u5f00\u59cb\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u7d22\u5f15\u4e3a 0\u3002</p> </li> </ol> <pre><code>let my_vec = vec![1, 2, 3];\nlet first_element = my_vec[0]; // \u8bbf\u95ee\u7b2c\u4e00\u4e2a\u5143\u7d20\n</code></pre> <ol> <li>\u8fed\u4ee3\uff1a\u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u5668\u6765\u904d\u5386\u5411\u91cf\u4e2d\u7684\u5143\u7d20\u3002Rust \u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u6cd5\u6765\u8fed\u4ee3\u5411\u91cf\uff0c\u5305\u62ec <code>for</code> \u5faa\u73af\u3001<code>iter()</code> \u65b9\u6cd5\u7b49\u3002</li> </ol> <pre><code>let my_vec = vec![1, 2, 3];\nfor item in &amp;my_vec {\n    println!(\"Element: {}\", item);\n}\n</code></pre> <ol> <li>\u589e\u52a0\u548c\u5220\u9664\u5143\u7d20\uff1a\u5411\u91cf\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u6cd5\u6765\u589e\u52a0\u548c\u5220\u9664\u5143\u7d20\uff0c\u5982 <code>push()</code>\u3001<code>pop()</code>\u3001<code>insert()</code>\u3001<code>remove()</code> \u7b49\u3002</li> </ol> <p>\u4ee5\u4e0b\u662f\u5173\u4e8e <code>push()</code>\u3001<code>pop()</code>\u3001<code>insert()</code> \u548c <code>remove()</code> \u65b9\u6cd5\u7684\u8be6\u7ec6\u89e3\u91ca\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u5f02\u540c\u70b9\uff1a</p> \u65b9\u6cd5 \u529f\u80fd \u5f02\u540c\u70b9 <code>push(item)</code> \u5411\u5411\u91cf\u7684\u672b\u5c3e\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u3002 - <code>push()</code> \u65b9\u6cd5\u662f\u5411\u5411\u91cf\u7684\u672b\u5c3e\u6dfb\u52a0\u5143\u7d20\u3002- \u53ef\u4ee5\u4f20\u9012\u5355\u4e2a\u5143\u7d20\uff0c\u4e5f\u53ef\u4ee5\u4f20\u9012\u591a\u4e2a\u5143\u7d20\u3002 <code>pop()</code> \u79fb\u9664\u5e76\u8fd4\u56de\u5411\u91cf\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002 - <code>pop()</code> \u65b9\u6cd5\u4f1a\u79fb\u9664\u5e76\u8fd4\u56de\u5411\u91cf\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002- \u5982\u679c\u5411\u91cf\u4e3a\u7a7a\uff0c\u5b83\u4f1a\u8fd4\u56de <code>None</code>(<code>Option</code> \u7c7b\u578b)\u3002 <code>insert(index, item)</code> \u5728\u6307\u5b9a\u7d22\u5f15\u4f4d\u7f6e\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u3002 - <code>insert()</code> \u65b9\u6cd5\u53ef\u4ee5\u5728\u5411\u91cf\u7684\u4efb\u610f\u4f4d\u7f6e\u63d2\u5165\u5143\u7d20\u3002- \u9700\u8981\u4f20\u9012\u8981\u63d2\u5165\u7684\u7d22\u5f15\u548c\u5143\u7d20\u3002- \u63d2\u5165\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u5143\u7d20\u7684\u79fb\u52a8\uff0c\u56e0\u6b64\u5177\u6709 O(n) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002 <code>remove(index)</code> \u79fb\u9664\u5e76\u8fd4\u56de\u6307\u5b9a\u7d22\u5f15\u4f4d\u7f6e\u7684\u5143\u7d20\u3002 - <code>remove()</code> \u65b9\u6cd5\u53ef\u4ee5\u79fb\u9664\u5411\u91cf\u4e2d\u6307\u5b9a\u7d22\u5f15\u4f4d\u7f6e\u7684\u5143\u7d20\u3002- \u79fb\u9664\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u5143\u7d20\u7684\u79fb\u52a8\uff0c\u56e0\u6b64\u5177\u6709 O(n) \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002 <p>\u8fd9\u4e9b\u65b9\u6cd5\u5141\u8bb8\u4f60\u5728\u5411\u91cf\u4e2d\u6dfb\u52a0\u3001\u5220\u9664\u548c\u4fee\u6539\u5143\u7d20\uff0c\u4ee5\u53ca\u6309\u7167\u9700\u8981\u8fdb\u884c\u52a8\u6001\u8c03\u6574\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>push()</code> \u548c <code>pop()</code> \u901a\u5e38\u7528\u4e8e\u5411\u5411\u91cf\u7684\u672b\u5c3e\u6dfb\u52a0\u548c\u79fb\u9664\u5143\u7d20\uff0c\u800c <code>insert()</code> \u548c <code>remove()</code> \u5141\u8bb8\u4f60\u5728\u4efb\u610f\u4f4d\u7f6e\u63d2\u5165\u548c\u79fb\u9664\u5143\u7d20\u3002\u7531\u4e8e\u63d2\u5165\u548c\u79fb\u9664\u64cd\u4f5c\u53ef\u80fd\u6d89\u53ca\u5143\u7d20\u7684\u79fb\u52a8\uff0c\u56e0\u6b64\u5b83\u4eec\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(n)\uff0c\u5176\u4e2d n \u662f\u5411\u91cf\u4e2d\u7684\u5143\u7d20\u6570\u91cf\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\n    let mut my_vec = vec![1, 2, 3];\n\n    my_vec.push(4); // \u5411\u672b\u5c3e\u6dfb\u52a0\u5143\u7d20\uff0cmy_vec \u73b0\u5728\u4e3a [1, 2, 3, 4]\n\n    let popped = my_vec.pop(); // \u79fb\u9664\u5e76\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0cpopped \u662f Some(4)\uff0cmy_vec \u73b0\u5728\u4e3a [1, 2, 3]\n\n    my_vec.insert(1, 5); // \u5728\u7d22\u5f15 1 \u5904\u63d2\u5165\u5143\u7d20 5\uff0cmy_vec \u73b0\u5728\u4e3a [1, 5, 2, 3]\n\n    let removed = my_vec.remove(2); // \u79fb\u9664\u5e76\u8fd4\u56de\u7d22\u5f15 2 \u7684\u5143\u7d20\uff0cremoved \u662f 2\uff0cmy_vec \u73b0\u5728\u4e3a [1, 5, 3]\n\n    println!(\"my_vec after operations: {:?}\", my_vec);\n    println!(\"Popped value: {:?}\", popped);\n    println!(\"Removed value: {:?}\", removed);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>my_vec after operations: [1, 5, 3]\nPopped value: Some(4) #\u6ce8\u610f\uff0cpop()\u662f\u6709\u53ef\u80fd\u53ef\u4ee5\u65e0\u6cd5\u8fd4\u56de\u6570\u503c\u7684\u65b9\u6cd5\uff0c\u6240\u4ee54\u4f1a\u88absome\u5305\u88f9\u3002 \u5177\u4f53\u6211\u4eec\u4f1a\u5728\u672c\u7ae0\u7b2c4\u8282\u8be6\u53d9\u3002\nRemoved value: 2\n</code></pre> <p>**\u603b\u7ed3\uff1a**\u8fd9\u4e9b\u65b9\u6cd5\u662f\u7528\u4e8e\u5411\u5411\u91cf\u4e2d\u6dfb\u52a0\u3001\u79fb\u9664\u548c\u4fee\u6539\u5143\u7d20\u7684\u5e38\u89c1\u64cd\u4f5c\uff0c\u6839\u636e\u5177\u4f53\u9700\u6c42\u9009\u62e9\u4f7f\u7528\u5408\u9002\u7684\u65b9\u6cd5\u3002 <code>push()</code> \u548c <code>pop()</code> \u9002\u7528\u4e8e\u672b\u5c3e\u64cd\u4f5c\uff0c\u800c <code>insert()</code> \u548c <code>remove()</code> \u53ef\u4ee5\u5728\u4efb\u4f55\u4f4d\u7f6e\u6267\u884c\u64cd\u4f5c\u3002\u4f46\u8981\u6ce8\u610f\uff0c\u6709\u65f6\u5019\u63d2\u5165\u548c\u79fb\u9664\u64cd\u4f5c\u53ef\u80fd\u5bfc\u81f4\u5143\u7d20\u7684\u79fb\u52a8\uff0c\u56e0\u6b64\u5728\u6027\u80fd\u654f\u611f\u7684\u60c5\u51b5\u4e0b\u9700\u8981\u8c28\u614e\u4f7f\u7528\u3002</p> <ol> <li>\u5207\u7247\u64cd\u4f5c\uff1a\u53ef\u4ee5\u4f7f\u7528\u5207\u7247\u64cd\u4f5c\u6765\u83b7\u53d6\u5411\u91cf\u7684\u4e00\u90e8\u5206\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5207\u7247\u7c7b\u578b <code>&amp;[T]</code>\u3002</li> </ol> <pre><code>let my_vec = vec![1, 2, 3, 4, 5];\nlet slice = &amp;my_vec[1..4]; // \u83b7\u53d6\u7d22\u5f15 1 \u5230 3 \u7684\u5143\u7d20\u7684\u5207\u7247\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#_1","title":"\u6848\u4f8b\uff1a\u5904\u7406\u671f\u8d27\u5408\u7ea6\u5217\u8868","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>push()</code>\u3001<code>pop()</code>\u3001<code>insert()</code> \u548c <code>remove()</code> \u65b9\u6cd5\u5bf9\u5b58\u50a8\u4e2d\u56fd\u671f\u8d27\u5408\u7ea6\u5217\u8868\u7684\u5411\u91cf\u8fdb\u884c\u64cd\u4f5c</p> <pre><code>fn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5411\u91cf\u6765\u5b58\u50a8\u4e2d\u56fd\u671f\u8d27\u5408\u7ea6\u5217\u8868\n    let mut futures_contracts: Vec&lt;String&gt; = vec![\n        \"AU2012\".to_string(),\n        \"IF2110\".to_string(),\n        \"C2109\".to_string(),\n    ];\n\n    // \u4f7f\u7528 push() \u65b9\u6cd5\u6dfb\u52a0\u65b0\u7684\u671f\u8d27\u5408\u7ea6\n    futures_contracts.push(\"IH2110\".to_string());\n\n    // \u6253\u5370\u5f53\u524d\u671f\u8d27\u5408\u7ea6\u5217\u8868\n    println!(\"\u5f53\u524d\u671f\u8d27\u5408\u7ea6\u5217\u8868: {:?}\", futures_contracts);\n\n    // \u4f7f\u7528 pop() \u65b9\u6cd5\u79fb\u9664\u6700\u540e\u4e00\u4e2a\u671f\u8d27\u5408\u7ea6\n    let popped_contract = futures_contracts.pop();\n    println!(\"\u79fb\u9664\u7684\u6700\u540e\u4e00\u4e2a\u671f\u8d27\u5408\u7ea6: {:?}\", popped_contract);\n\n    // \u4f7f\u7528 insert() \u65b9\u6cd5\u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u65b0\u7684\u671f\u8d27\u5408\u7ea6\n    futures_contracts.insert(1, \"IC2110\".to_string());\n    println!(\"\u63d2\u5165\u65b0\u671f\u8d27\u5408\u7ea6\u540e\u7684\u5217\u8868: {:?}\", futures_contracts);\n\n    // \u4f7f\u7528 remove() \u65b9\u6cd5\u79fb\u9664\u6307\u5b9a\u4f4d\u7f6e\u7684\u671f\u8d27\u5408\u7ea6\n    let removed_contract = futures_contracts.remove(2);\n    println!(\"\u79fb\u9664\u7684\u7b2c\u4e09\u4e2a\u671f\u8d27\u5408\u7ea6: {:?}\", removed_contract);\n\n    // \u6253\u5370\u6700\u7ec8\u7684\u671f\u8d27\u5408\u7ea6\u5217\u8868\n    println!(\"\u6700\u7ec8\u671f\u8d27\u5408\u7ea6\u5217\u8868: {:?}\", futures_contracts);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u5f53\u524d\u671f\u8d27\u5408\u7ea6\u5217\u8868: [\"AU2012\", \"IF2110\", \"C2109\", \"IH2110\"]\n\u79fb\u9664\u7684\u6700\u540e\u4e00\u4e2a\u671f\u8d27\u5408\u7ea6: Some(\"IH2110\")\n\u63d2\u5165\u65b0\u671f\u8d27\u5408\u7ea6\u540e\u7684\u5217\u8868: [\"AU2012\", \"IC2110\", \"IF2110\", \"C2109\"]\n\u79fb\u9664\u7684\u7b2c\u4e09\u4e2a\u671f\u8d27\u5408\u7ea6: Some(\"IF2110\")\n\u6700\u7ec8\u671f\u8d27\u5408\u7ea6\u5217\u8868: [\"AU2012\", \"IC2110\", \"C2109\"]\n</code></pre> <p>\u8fd9\u4e9b\u8f93\u51fa\u663e\u793a\u4e86\u4e0d\u540c\u65b9\u6cd5\u5bf9\u4e2d\u56fd\u671f\u8d27\u5408\u7ea6\u5217\u8868\u7684\u64cd\u4f5c\u7ed3\u679c\u3002\u6211\u4eec\u4f7f\u7528 <code>push()</code> \u6dfb\u52a0\u4e86\u4e00\u4e2a\u671f\u8d27\u5408\u7ea6\uff0c<code>pop()</code> \u79fb\u9664\u4e86\u6700\u540e\u4e00\u4e2a\u671f\u8d27\u5408\u7ea6\uff0c<code>insert()</code> \u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\u4e86\u4e00\u4e2a\u671f\u8d27\u5408\u7ea6\uff0c\u800c <code>remove()</code> \u79fb\u9664\u4e86\u6307\u5b9a\u4f4d\u7f6e\u7684\u671f\u8d27\u5408\u7ea6\u3002\u6700\u540e\uff0c\u6211\u4eec\u6253\u5370\u4e86\u6700\u7ec8\u7684\u671f\u8d27\u5408\u7ea6\u5217\u8868\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#53-hashmap","title":"5.3 \u54c8\u5e0c\u6620\u5c04(Hashmap)","text":"<p><code>HashMap</code> \u662f Rust \u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5b58\u50a8\u952e\u503c\u5bf9(key-value pairs)\u3002\u5b83\u662f\u4e00\u79cd\u54c8\u5e0c\u8868(hash table)\u7684\u5b9e\u73b0\uff0c\u5141\u8bb8\u4f60\u901a\u8fc7\u952e\u6765\u5feb\u901f\u68c0\u7d22\u503c\u3002</p> <p><code>HashMap</code> \u5728 Rust \u4e2d\u7684\u529f\u80fd\u7c7b\u4f3c\u4e8e Python \u4e2d\u7684\u5b57\u5178(<code>dict</code>)\u3002\u5b83\u4eec\u90fd\u662f\u7528\u4e8e\u5b58\u50a8\u952e\u503c\u5bf9\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5141\u8bb8\u4f60\u901a\u8fc7\u952e\u6765\u67e5\u627e\u5bf9\u5e94\u7684\u503c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u7c7b\u6bd4\uff1a</p> <ul> <li>Rust \u7684 <code>HashMap</code> &lt;=&gt; Python \u7684 <code>dict</code></li> <li>Rust \u7684 \u952e(key) &lt;=&gt; Python \u7684 \u952e(key)</li> <li>Rust \u7684 \u503c(value) &lt;=&gt; Python \u7684 \u503c(value)</li> </ul> <p>\u4e0e Python \u5b57\u5178\u7c7b\u4f3c\uff0cRust \u7684 <code>HashMap</code> \u5177\u6709\u5feb\u901f\u7684\u67e5\u627e\u6027\u80fd\uff0c\u5141\u8bb8\u4f60\u901a\u8fc7\u952e\u5feb\u901f\u68c0\u7d22\u5bf9\u5e94\u7684\u503c\u3002\u6b64\u5916\uff0c\u5b83\u4eec\u90fd\u662f\u52a8\u6001\u5927\u5c0f\u7684\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u6dfb\u52a0\u6216\u5220\u9664\u952e\u503c\u5bf9\u3002\u7136\u800c\uff0cRust \u548c Python \u5728\u8bed\u6cd5\u548c\u8bed\u4e49\u4e0a\u6709\u4e00\u4e9b\u4e0d\u540c\u4e4b\u5904\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5177\u6709\u4e0d\u540c\u7684\u7279\u6027\u548c\u7ea6\u675f\u3002</p> <p>\u603b\u4e4b\uff0c\u5982\u679c\u4f60\u719f\u6089 Python \u4e2d\u7684\u5b57\u5178\u64cd\u4f5c\uff0c\u90a3\u4e48\u5728 Rust \u4e2d\u4f7f\u7528 <code>HashMap</code> \u5e94\u8be5\u4f1a\u611f\u5230\u975e\u5e38\u81ea\u7136\uff0c\u56e0\u4e3a\u5b83\u4eec\u63d0\u4f9b\u4e86\u7c7b\u4f3c\u7684\u952e\u503c\u5bf9\u5b58\u50a8\u548c\u68c0\u7d22\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u5173\u4e8e <code>HashMap</code> \u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li> <p>\u952e\u503c\u5bf9\u5b58\u50a8\uff1a<code>HashMap</code> \u5b58\u50a8\u7684\u6570\u636e\u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u6bcf\u4e2a\u952e\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u503c\u3002\u952e\u662f\u552f\u4e00\u7684\uff0c\u800c\u503c\u53ef\u4ee5\u91cd\u590d\u3002</p> </li> <li> <p>\u52a8\u6001\u5927\u5c0f\uff1a\u4e0e\u6570\u7ec4\u4e0d\u540c\uff0c<code>HashMap</code> \u662f\u52a8\u6001\u5927\u5c0f\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u6839\u636e\u9700\u8981\u589e\u957f\u6216\u7f29\u5c0f\u4ee5\u5bb9\u7eb3\u952e\u503c\u5bf9\u3002</p> </li> <li> <p>\u5feb\u901f\u68c0\u7d22\uff1a<code>HashMap</code> \u7684\u5b9e\u73b0\u57fa\u4e8e\u54c8\u5e0c\u8868\uff0c\u8fd9\u4f7f\u5f97\u5728\u5176\u4e2d\u67e5\u627e\u503c\u7684\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u901a\u5e38\u662f\u5e38\u6570\u65f6\u95f4\u590d\u6742\u5ea6(O(1))\u3002</p> </li> <li> <p>\u65e0\u5e8f\u96c6\u5408\uff1a<code>HashMap</code> \u4e0d\u7ef4\u62a4\u5143\u7d20\u7684\u987a\u5e8f\uff0c\u56e0\u6b64\u5b83\u4e0d\u4f1a\u4fdd\u7559\u63d2\u5165\u5143\u7d20\u7684\u987a\u5e8f\u3002\u5982\u679c\u9700\u8981\u6709\u5e8f\u96c6\u5408\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 <code>BTreeMap</code>\u3002</p> </li> <li> <p>\u6cdb\u578b\u652f\u6301\uff1a<code>HashMap</code> \u662f\u6cdb\u578b\u7684\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u5176\u4e2d\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u952e\u548c\u503c\uff0c\u53ea\u8981\u5b83\u4eec\u6ee1\u8db3 <code>Eq</code> \u548c <code>Hash</code> trait \u7684\u8981\u6c42\u3002</p> </li> <li> <p>\u81ea\u52a8\u6269\u5bb9\uff1a\u5f53 <code>HashMap</code> \u7684\u8d1f\u8f7d\u56e0\u5b50(load factor)\u8d85\u8fc7\u4e00\u5b9a\u9608\u503c\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u6269\u5bb9\uff0c\u4ee5\u4fdd\u6301\u68c0\u7d22\u6027\u80fd\u3002</p> </li> <li> <p>\u5b89\u5168\u6027\uff1aRust \u7684 <code>HashMap</code> \u63d0\u4f9b\u4e86\u5b89\u5168\u6027\u4fdd\u8bc1\uff0c\u9632\u6b62\u60ac\u5782\u5f15\u7528\u548c\u6570\u636e\u7ade\u4e89\u3002\u5b83\u4f7f\u7528\u6240\u6709\u6743\u7cfb\u7edf\u6765\u7ba1\u7406\u5185\u5b58\u3002</p> </li> <li> <p>\u793a\u4f8b\u7528\u9014\uff1a<code>HashMap</code> \u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\u90fd\u975e\u5e38\u6709\u7528\uff0c\u4f8b\u5982\u7528\u4e8e\u7f13\u5b58\u3001\u914d\u7f6e\u7ba1\u7406\u3001\u6570\u636e\u7d22\u5f15\u7b49\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u9ad8\u6548\u7684\u65b9\u5f0f\u6765\u5b58\u50a8\u548c\u68c0\u7d22\u952e\u503c\u5bf9\u3002</p> </li> </ol> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u521b\u5efa\u3001\u63d2\u5165\u3001\u68c0\u7d22\u548c\u5220\u9664 <code>HashMap</code> \u4e2d\u7684\u952e\u503c\u5bf9\uff1a</p> <pre><code>use std::collections::HashMap;\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 HashMap\uff0c\u952e\u662f\u5b57\u7b26\u4e32\uff0c\u503c\u662f\u6574\u6570\n    let mut scores = HashMap::new();\n\n    // \u63d2\u5165\u952e\u503c\u5bf9\n    scores.insert(String::from(\"Alice\"), 100);\n    scores.insert(String::from(\"Bob\"), 90);\n\n    // \u68c0\u7d22\u952e\u5bf9\u5e94\u7684\u503c\n    let _alice_score = scores.get(\"Alice\"); // \u8fd4\u56de Some(100)\n\n    // \u5220\u9664\u952e\u503c\u5bf9\n    scores.remove(\"Bob\");\n\n    // \u904d\u5386 HashMap \u4e2d\u7684\u952e\u503c\u5bf9\n    for (name, score) in &amp;scores {\n        println!(\"{} \u7684\u5206\u6570\u662f {}\", name, score);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Alice \u7684\u5206\u6570\u662f 100\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684 <code>HashMap</code> \u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>HashMap</code> \u8fdb\u884c\u57fa\u672c\u64cd\u4f5c\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u63d2\u5165\u3001\u5220\u9664\u3001\u68c0\u7d22\u952e\u503c\u5bf9\uff0c\u4ee5\u53ca\u904d\u5386 <code>HashMap</code> \u4e2d\u7684\u5143\u7d20\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#1","title":"\u6848\u4f8b1\uff1a\u7ba1\u7406\u80a1\u7968\u4ef7\u683c\u6570\u636e","text":"<p>HashMap \u5f53\u7136\u4e5f\u9002\u5408\u7528\u4e8e\u7ba1\u7406\u91d1\u878d\u6570\u636e\u548c\u6267\u884c\u5404\u79cd\u91d1\u878d\u8ba1\u7b97\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684 Rust \u91cf\u5316\u91d1\u878d\u6848\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 HashMap \u6765\u7ba1\u7406\u80a1\u7968\u4ef7\u683c\u6570\u636e\uff1a</p> <pre><code>use std::collections::HashMap;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u80a1\u7968\u4ef7\u683c\u6570\u636e\u7ed3\u6784\n#[derive(Debug)]\nstruct StockPrice {\n    symbol: String,\n    price: f64,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 HashMap \u6765\u5b58\u50a8\u80a1\u7968\u4ef7\u683c\u6570\u636e\n    let mut stock_prices: HashMap&lt;String, StockPrice&gt; = HashMap::new();\n\n    // \u6dfb\u52a0\u80a1\u7968\u4ef7\u683c\u6570\u636e\n    let stock1 = StockPrice {\n        symbol: String::from(\"AAPL\"),\n        price: 150.0,\n    };\n    stock_prices.insert(String::from(\"AAPL\"), stock1);\n\n    let stock2 = StockPrice {\n        symbol: String::from(\"GOOGL\"),\n        price: 2800.0,\n    };\n    stock_prices.insert(String::from(\"GOOGL\"), stock2);\n\n    let stock3 = StockPrice {\n        symbol: String::from(\"MSFT\"),\n        price: 300.0,\n    };\n    stock_prices.insert(String::from(\"MSFT\"), stock3);\n\n    // \u67e5\u8be2\u80a1\u7968\u4ef7\u683c\n    if let Some(price) = stock_prices.get(\"AAPL\") {\n        println!(\"The price of AAPL is ${}\", price.price);\n    } else {\n        println!(\"AAPL not found in the stock prices.\");\n    }\n\n    // \u904d\u5386\u5e76\u6253\u5370\u6240\u6709\u80a1\u7968\u4ef7\u683c\n    for (symbol, price) in &amp;stock_prices {\n        println!(\"{}: ${}\", symbol, price.price);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>The price of AAPL is $150\nGOOGL: $2800\nMSFT: $300\nAAPL: $150\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#rust-hashmap-python-c-map","title":"\u601d\u8003:Rust \u7684 hashmap \u662f\u4e0d\u662f\u548c python \u7684\u5b57\u5178\u6216\u8005 C++ \u7684map\u6709\u76f8\u4f3c\u6027?","text":"<p>\u662f\u7684\uff0cRust \u4e2d\u7684 HashMap \u4e0e Python \u4e2d\u7684\u5b57\u5178(Dictionary)\u548c C++ \u4e2d\u7684 std::unordered_map(\u65e0\u5e8f\u6620\u5c04)\u6709\u76f8\u4f3c\u6027\u3002\u5b83\u4eec\u90fd\u662f\u7528\u4e8e\u5b58\u50a8\u952e\u503c\u5bf9\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5141\u8bb8\u4f60\u901a\u8fc7\u952e\u5feb\u901f\u67e5\u627e\u503c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5171\u540c\u70b9\uff1a</p> <ol> <li> <p>\u952e\u503c\u5bf9\u5b58\u50a8\uff1aHashMap\u3001\u5b57\u5178\u548c\u65e0\u5e8f\u6620\u5c04\u90fd\u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u5b58\u50a8\u6570\u636e\uff0c\u6bcf\u4e2a\u952e\u90fd\u6620\u5c04\u5230\u4e00\u4e2a\u503c\u3002</p> </li> <li> <p>\u5feb\u901f\u67e5\u627e\uff1a\u5b83\u4eec\u90fd\u63d0\u4f9b\u4e86\u5feb\u901f\u7684\u67e5\u627e\u64cd\u4f5c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u952e\u6765\u83b7\u53d6\u76f8\u5e94\u7684\u503c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u901a\u5e38\u4e3a O(1)\u3002</p> </li> <li> <p>\u63d2\u5165\u548c\u5220\u9664\uff1a\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u4e2d\u63d2\u5165\u65b0\u7684\u952e\u503c\u5bf9\uff0c\u4e5f\u53ef\u4ee5\u5220\u9664\u5df2\u6709\u7684\u952e\u503c\u5bf9\u3002</p> </li> <li> <p>\u53ef\u53d8\u6027\uff1a\u5b83\u4eec\u90fd\u652f\u6301\u5728\u5df2\u521b\u5efa\u7684\u6570\u636e\u7ed3\u6784\u4e2d\u4fee\u6539\u503c\u3002</p> </li> <li> <p>\u904d\u5386\uff1a\u4f60\u53ef\u4ee5\u904d\u5386\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u6240\u6709\u952e\u503c\u5bf9\u3002</p> </li> </ol> <p>\u5c3d\u7ba1\u5b83\u4eec\u5728\u6982\u5ff5\u4e0a\u76f8\u4f3c\uff0c\u4f46\u5728\u4e0d\u540c\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u5b9e\u73b0\u548c\u7528\u6cd5\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b\u5dee\u5f02\u3002\u4f8b\u5982\uff0cRust \u7684 HashMap \u662f\u7c7b\u578b\u5b89\u5168\u7684\uff0c\u8981\u6c42\u952e\u548c\u503c\u90fd\u5177\u6709\u76f8\u540c\u7684\u7c7b\u578b\uff0c\u800c Python \u7684\u5b57\u5178\u53ef\u4ee5\u5bb9\u7eb3\u4e0d\u540c\u7c7b\u578b\u7684\u952e\u548c\u503c\u3002\u6b64\u5916\uff0c\u6027\u80fd\u548c\u5185\u5b58\u7ba1\u7406\u65b9\u9762\u4e5f\u4f1a\u6709\u5dee\u5f02\u3002</p> <p>\u603b\u4e4b\uff0c\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u5728\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u4e2d\u90fd\u7528\u4e8e\u76f8\u4f3c\u7684\u7528\u9014\uff0c\u4f46\u5177\u4f53\u7684\u5b9e\u73b0\u548c\u7528\u6cd5\u53ef\u80fd\u56e0\u8bed\u8a00\u800c\u5f02\u3002\u5728\u9009\u62e9\u4f7f\u7528\u65f6\uff0c\u5e94\u8003\u8651\u8bed\u8a00\u7684\u8981\u6c42\u548c\u6027\u80fd\u7279\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#2-hashmap","title":"\u6848\u4f8b2\uff1a \u6570\u636e\u7c7b\u578b\u5f02\u8d28\u4f46\u662f\u4ecd\u7136\u5b89\u5168\u7684Hashmap","text":"<p>\u5728 Rust \u4e2d\uff0c\u6807\u51c6\u5e93\u63d0\u4f9b\u7684 <code>HashMap</code> \u662f\u7c7b\u578b\u5b89\u5168\u7684\uff0c\u8fd9\u610f\u5473\u7740\u5728\u7f16\u8bd1\u65f6\uff0c\u7f16\u8bd1\u5668\u4f1a\u5f3a\u5236\u8981\u6c42\u952e\u548c\u503c\u90fd\u5177\u6709\u76f8\u540c\u7684\u7c7b\u578b\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u4ee3\u7801\u7684\u7c7b\u578b\u5b89\u5168\u6027\uff0c\u9632\u6b62\u5728\u8fd0\u884c\u65f6\u53d1\u751f\u7c7b\u578b\u4e0d\u5339\u914d\u7684\u9519\u8bef\u3002</p> <p>\u5982\u679c\u4f60\u9700\u8981\u5728 Rust \u4e2d\u521b\u5efa\u4e00\u4e2a HashMap\uff0c\u5176\u4e2d\u952e\u548c\u503c\u5177\u6709\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Rust \u7684\u679a\u4e3e(Enum)\u6765\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u679a\u4e3e\uff0c\u679a\u4e3e\u7684\u53d8\u4f53\u4ee3\u8868\u4e0d\u540c\u7684\u7c7b\u578b\uff0c\u7136\u540e\u5c06\u679a\u4e3e\u7528\u4f5c HashMap \u7684\u503c\u3002\u8fd9\u6837\uff0c\u4f60\u53ef\u4ee5\u5728 HashMap \u4e2d\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u800c\u4ecd\u7136\u4fdd\u6301\u7c7b\u578b\u5b89\u5168\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u5728 Rust \u4e2d\u521b\u5efa\u4e00\u4e2a HashMap\uff0c\u5176\u4e2d\u952e\u7684\u7c7b\u578b\u662f\u5b57\u7b26\u4e32\uff0c\u800c\u503c\u7684\u7c7b\u578b\u662f\u679a\u4e3e\uff0c\u679a\u4e3e\u7684\u53d8\u4f53\u53ef\u4ee5\u8868\u793a\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff1a</p> <pre><code>use std::collections::HashMap;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e\uff0c\u8868\u793a\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\nenum Value {\n    Integer(i32),\n    Float(f64),\n    String(String),\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a HashMap\uff0c\u952e\u662f\u5b57\u7b26\u4e32\uff0c\u503c\u662f\u679a\u4e3e\n    let mut data: HashMap&lt;String, Value&gt; = HashMap::new();\n\n    // \u5411 HashMap \u4e2d\u6dfb\u52a0\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\n    data.insert(String::from(\"age\"), Value::Integer(30));\n    data.insert(String::from(\"height\"), Value::Float(175.5));\n    data.insert(String::from(\"name\"), Value::String(String::from(\"John\")));\n\n    // \u8bbf\u95ee\u548c\u6253\u5370\u6570\u636e\n    if let Some(value) = data.get(\"age\") {\n        match value {\n            Value::Integer(age) =&gt; println!(\"Age: {}\", age),\n            _ =&gt; println!(\"Invalid data type for age.\"),\n        }\n    }\n\n    if let Some(value) = data.get(\"height\") {\n        match value {\n            Value::Float(height) =&gt; println!(\"Height: {}\", height),\n            _ =&gt; println!(\"Invalid data type for height.\"),\n        }\n    }\n\n    if let Some(value) = data.get(\"name\") {\n        match value {\n            Value::String(name) =&gt; println!(\"Name: {}\", name),\n            _ =&gt; println!(\"Invalid data type for name.\"),\n        }\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>Age: 30\nHeight: 175.5\nName: John\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Value</code> \u7684\u679a\u4e3e\uff0c\u5b83\u6709\u4e09\u4e2a\u53d8\u4f53\uff0c\u5206\u522b\u4ee3\u8868\u6574\u6570\u3001\u6d6e\u70b9\u6570\u548c\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u636e\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a HashMap\uff0c\u5176\u4e2d\u952e\u662f\u5b57\u7b26\u4e32\uff0c\u503c\u662f <code>Value</code> \u679a\u4e3e\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5728 HashMap \u4e2d\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u800c\u4ecd\u7136\u4fdd\u6301\u7c7b\u578b\u5b89\u5168\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#54-optional-types","title":"5.4 \u9009\u9879\u7c7b\u578b(optional types)","text":"<p>\u9009\u9879\u7c7b\u578b(Option types)\u662f Rust \u4e2d\u4e00\u79cd\u975e\u5e38\u91cd\u8981\u7684\u679a\u4e3e\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u503c\u8981\u4e48\u5b58\u5728\uff0c\u8981\u4e48\u4e0d\u5b58\u5728\u7684\u60c5\u51b5\u3002\u8fd9\u79cd\u6982\u5ff5\u5728\u5b9e\u73b0\u4e86\u56fe\u7075\u5b8c\u5907\u7684\u7f16\u7a0b\u8bed\u8a00\u4e2d\u975e\u5e38\u5e38\u89c1\uff0c\u5c24\u5176\u662f\u5728\u5904\u7406\u53ef\u80fd\u51fa\u73b0\u9519\u8bef\u6216\u7f3a\u5931\u6570\u636e\u7684\u60c5\u51b5\u4e0b\u975e\u5e38\u6709\u7528\u3002\u4e0b\u9762\u8be6\u7ec6\u8bba\u8ff0 Rust \u4e2d\u7684\u9009\u9879\u7c7b\u578b\uff1a</p> <ol> <li>\u679a\u4e3e\u5b9a\u4e49\uff1a</li> </ol> <p>\u5728 Rust \u4e2d\uff0c\u9009\u9879\u7c7b\u578b\u7531\u6807\u51c6\u5e93\u7684 <code>Option</code> \u679a\u4e3e\u6765\u8868\u793a\u3002\u5b83\u6709\u4e24\u4e2a\u53d8\u4f53\uff1a</p> <ul> <li><code>Some(T)</code>: \u8868\u793a\u4e00\u4e2a\u503c\u5b58\u5728\uff0c\u5e76\u5c06\u8fd9\u4e2a\u503c\u5c01\u88c5\u5728 <code>Some</code> \u5185\u3002</li> <li><code>None</code>: \u8868\u793a\u503c\u4e0d\u5b58\u5728\uff0c\u901a\u5e38\u7528\u4e8e\u8868\u793a\u7f3a\u5931\u6570\u636e\u6216\u9519\u8bef\u3002</li> </ul> <p><code>Option</code> \u7684\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>enum Option&lt;T&gt; {\n    Some(T),\n    None,\n}\n</code></pre> <ol> <li> <p>\u7528\u9014\uff1a</p> </li> <li> <p>\u5904\u7406\u53ef\u80fd\u7684\u7a7a\u503c\uff1a\u9009\u9879\u7c7b\u578b\u5e38\u7528\u4e8e\u5904\u7406\u53ef\u80fd\u4e3a\u7a7a(<code>null</code> \u6216 <code>nil</code>)\u7684\u60c5\u51b5\u3002\u5b83\u5141\u8bb8\u4f60\u660e\u786e\u5730\u5904\u7406\u503c\u7684\u5b58\u5728\u548c\u7f3a\u5931\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u7a7a\u6307\u9488\u5f02\u5e38\u3002</p> </li> <li> <p>\u9519\u8bef\u5904\u7406\uff1a\u9009\u9879\u7c7b\u578b\u4e5f\u7528\u4e8e\u51fd\u6570\u8fd4\u56de\u503c\uff0c\u7279\u522b\u662f\u90a3\u4e9b\u53ef\u80fd\u4f1a\u51fa\u73b0\u9519\u8bef\u7684\u60c5\u51b5\u3002\u4f8b\u5982\uff0c<code>Result</code> \u7c7b\u578b\u5c31\u662f\u57fa\u4e8e <code>Option</code> \u6784\u5efa\u7684\uff0c\u5176\u4e2d <code>Ok(T)</code> \u8868\u793a\u6210\u529f\u5e76\u5305\u542b\u4e00\u4e2a\u503c\uff0c\u800c <code>Err(E)</code> \u8868\u793a\u9519\u8bef\u5e76\u5305\u542b\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a</p> </li> </ol> <p>\u4f7f\u7528\u9009\u9879\u7c7b\u578b\u6765\u5904\u7406\u53ef\u80fd\u4e3a\u7a7a\u7684\u60c5\u51b5\u975e\u5e38\u5e38\u89c1\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u9009\u9879\u7c7b\u578b\u6765\u67e5\u627e\u5411\u91cf\u4e2d\u7684\u6700\u5927\u503c\uff1a</p> <pre><code>fn find_max(numbers: Vec&lt;i32&gt;) -&gt; Option&lt;i32&gt; {\n    if numbers.is_empty() {\n        return None; // \u7a7a\u5411\u91cf\uff0c\u8fd4\u56de None \u8868\u793a\u503c\u4e0d\u5b58\u5728\n    }\n\n    let mut max = numbers[0];\n    for &amp;num in &amp;numbers {\n        if num &gt; max {\n            max = num;\n        }\n    }\n\n    Some(max) // \u8fd4\u56de\u6700\u5927\u503c\u5c01\u88c5\u5728 Some \u5185\n}\n\nfn main() {\n    let numbers = vec![10, 5, 20, 8, 15];\n    match find_max(numbers) {\n        Some(max) =&gt; println!(\"\u6700\u5927\u503c\u662f: {}\", max),\n        None =&gt; println!(\"\u5411\u91cf\u4e3a\u7a7a\u6216\u6ca1\u6709\u6700\u5927\u503c\u3002\"),\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>find_max</code> \u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u5411\u91cf\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a <code>Option&lt;i32&gt;</code> \u7c7b\u578b\u7684\u7ed3\u679c\u3002\u5982\u679c\u5411\u91cf\u4e3a\u7a7a\uff0c\u5b83\u8fd4\u56de <code>None</code>\uff1b\u5426\u5219\uff0c\u8fd4\u56de\u6700\u5927\u503c\u5c01\u88c5\u5728 <code>Some</code> \u4e2d\u3002\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>match</code> \u8868\u8fbe\u5f0f\u6765\u5904\u7406 <code>find_max</code> \u7684\u7ed3\u679c\uff0c\u5206\u522b\u5904\u7406\u5b58\u5728\u503c\u548c\u4e0d\u5b58\u5728\u503c\u7684\u60c5\u51b5\u3002</p> <ol> <li>unwrap \u548c expect \u65b9\u6cd5\uff1a</li> </ol> <p>\u4e3a\u4e86\u4ece <code>Option</code> \u4e2d\u83b7\u53d6\u5c01\u88c5\u7684\u503c\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>unwrap()</code> \u65b9\u6cd5\u3002\u4f46\u8981\u5c0f\u5fc3\uff0c\u5982\u679c <code>Option</code> \u662f <code>None</code>\uff0c\u8c03\u7528 <code>unwrap()</code> \u5c06\u5bfc\u81f4\u7a0b\u5e8f panic\u3002</p> <pre><code>let result: Option&lt;i32&gt; = Some(42);\nlet value = result.unwrap(); // \u5982\u679c\u662f Some\uff0c\u83b7\u53d6\u5c01\u88c5\u7684\u503c\uff0c\u5426\u5219 panic\n</code></pre> <p>\u4e3a\u4e86\u66f4\u52a0\u5b89\u5168\u5730\u5904\u7406 <code>None</code>\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>expect()</code> \u65b9\u6cd5\uff0c\u5b83\u5141\u8bb8\u4f60\u63d0\u4f9b\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u6d88\u606f\u3002</p> <pre><code>let result: Option&lt;i32&gt; = None;\nlet value = result.expect(\"\u503c\u4e0d\u5b58\u5728\"); // \u63d0\u4f9b\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u6d88\u606f\n</code></pre> <ol> <li>if let \u8868\u8fbe\u5f0f\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>if let</code> \u8868\u8fbe\u5f0f\u6765\u7b80\u5316\u5339\u914d <code>Option</code> \u7684\u8fc7\u7a0b\uff0c\u7279\u522b\u662f\u5728\u53ea\u5173\u5fc3\u5176\u4e2d\u4e00\u79cd\u60c5\u51b5\u7684\u60c5\u51b5\u4e0b\u3002</p> <pre><code>let result: Option&lt;i32&gt; = Some(42);\n\nif let Some(value) = result {\n    println!(\"\u5b58\u5728\u503c: {}\", value);\n} else {\n    println!(\"\u503c\u4e0d\u5b58\u5728\");\n}\n</code></pre> <p>\u8fd9\u53ef\u4ee5\u51cf\u5c11\u4ee3\u7801\u7684\u5d4c\u5957\uff0c\u5e76\u4f7f\u4ee3\u7801\u66f4\u52a0\u6e05\u6670\u3002</p> <p>\u603b\u4e4b\uff0c\u9009\u9879\u7c7b\u578b(Option types)\u662f Rust \u4e2d\u7528\u4e8e\u8868\u793a\u503c\u7684\u5b58\u5728\u548c\u7f3a\u5931\u7684\u5f3a\u5927\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u5904\u7406\u53ef\u80fd\u4e3a\u7a7a\u7684\u60c5\u51b5\u4ee5\u53ca\u9519\u8bef\u5904\u7406\u3002\u5b83\u662f Rust \u8bed\u8a00\u7684\u6838\u5fc3\u7279\u6027\u4e4b\u4e00\uff0c\u6709\u52a9\u4e8e\u7f16\u5199\u66f4\u5b89\u5168\u548c\u53ef\u9760\u7684\u4ee3\u7801\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#_2","title":"\u6848\u4f8b:  \u5904\u7406\u94f6\u884c\u8d26\u6237\u4f59\u989d\u67e5\u8be2","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u91d1\u878d\u9886\u57df\u6848\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528\u9009\u9879\u7c7b\u578b\u6765\u5904\u7406\u94f6\u884c\u8d26\u6237\u4f59\u989d\u67e5\u8be2\u7684\u60c5\u51b5\uff1a</p> <pre><code>struct BankAccount {\n    account_holder: String,\n    balance: Option&lt;f64&gt;, // \u4f7f\u7528\u9009\u9879\u7c7b\u578b\u8868\u793a\u4f59\u989d\uff0c\u53ef\u80fd\u4e3a\u7a7a\n}\n\nimpl BankAccount {\n    fn new(account_holder: &amp;str) -&gt; BankAccount {\n        BankAccount {\n            account_holder: account_holder.to_string(),\n            balance: None, // \u521d\u59cb\u65f6\u6ca1\u6709\u4f59\u989d\n        }\n    }\n\n    fn deposit(&amp;mut self, amount: f64) {\n        // \u5b58\u6b3e\u64cd\u4f5c\uff0c\u66f4\u65b0\u4f59\u989d\n        if let Some(existing_balance) = self.balance {\n            self.balance = Some(existing_balance + amount);\n        } else {\n            self.balance = Some(amount);\n        }\n    }\n\n    fn withdraw(&amp;mut self, amount: f64) -&gt; Option&lt;f64&gt; {\n        // \u53d6\u6b3e\u64cd\u4f5c\uff0c\u66f4\u65b0\u4f59\u989d\u5e76\u8fd4\u56de\u53d6\u6b3e\u91d1\u989d\n        if let Some(existing_balance) = self.balance {\n            if existing_balance &gt;= amount {\n                self.balance = Some(existing_balance - amount);\n                Some(amount)\n            } else {\n                None // \u4f59\u989d\u4e0d\u8db3\uff0c\u8fd4\u56de None \u8868\u793a\u53d6\u6b3e\u5931\u8d25\n            }\n        } else {\n            None // \u6ca1\u6709\u4f59\u989d\u53ef\u53d6\uff0c\u8fd4\u56de None\n        }\n    }\n\n    fn check_balance(&amp;self) -&gt; Option&lt;f64&gt; {\n        // \u67e5\u8be2\u4f59\u989d\u64cd\u4f5c\n        self.balance\n    }\n}\n\nfn main() {\n    let mut account = BankAccount::new(\"Alice\"); // \u5efa\u7acb\u65b0\u8d26\u6237\uff0c\u91cc\u9762\u6ca1\u6709\u4f59\u989d\u3002\n\n    account.deposit(1000.0); // \u5b58\u51651000\n    println!(\"\u5b58\u6b3e\u540e\u7684\u4f59\u989d: {:?}\", account.check_balance());\n\n    if let Some(withdrawn_amount) = account.withdraw(500.0) {  // \u5728Some\u65b9\u6cd5\u7684\u5305\u88f9\u4e0b\u5b89\u5168\u53d6\u8d70500\n        println!(\"\u6210\u529f\u53d6\u6b3e: {:?}\", withdrawn_amount);\n    } else {\n        println!(\"\u53d6\u6b3e\u5931\u8d25\uff0c\u4f59\u989d\u4e0d\u8db3\u6216\u6ca1\u6709\u4f59\u989d\u3002\");\n    }\n\n    println!(\"\u6700\u7ec8\u4f59\u989d: {:?}\", account.check_balance());\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u5b58\u6b3e\u540e\u7684\u4f59\u989d: Some(1000.0)\n\u6210\u529f\u53d6\u6b3e: 500.0\n\u6700\u7ec8\u4f59\u989d: Some(500.0)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>BankAccount</code> \u7ed3\u6784\u4f53\uff0c\u5176\u4e2d <code>balance</code> \u4f7f\u7528\u4e86\u9009\u9879\u7c7b\u578b <code>Option&lt;f64&gt;</code> \u8868\u793a\u4f59\u989d\u3002\u6211\u4eec\u5b9e\u73b0\u4e86\u5b58\u6b3e (<code>deposit</code>)\u3001\u53d6\u6b3e (<code>withdraw</code>) \u548c\u67e5\u8be2\u4f59\u989d (<code>check_balance</code>) \u7684\u65b9\u6cd5\u6765\u64cd\u4f5c\u8d26\u6237\u4f59\u989d\u3002\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u4f7f\u7528\u4e86\u9009\u9879\u7c7b\u578b\u6765\u5904\u7406\u53ef\u80fd\u7684\u7a7a\u503c\u60c5\u51b5\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u94f6\u884c\u8d26\u6237\uff0c\u8fdb\u884c\u4e86\u5b58\u6b3e\u548c\u53d6\u6b3e\u64cd\u4f5c\uff0c\u5e76\u67e5\u8be2\u4e86\u6700\u7ec8\u7684\u4f59\u989d\u3002\u4f7f\u7528\u9009\u9879\u7c7b\u578b\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u597d\u5730\u5904\u7406\u53ef\u80fd\u7684\u9519\u8bef\u6216\u7a7a\u503c\u60c5\u51b5\uff0c\u4ee5\u786e\u4fdd\u94f6\u884c\u8d26\u6237\u64cd\u4f5c\u7684\u5b89\u5168\u6027\u548c\u53ef\u9760\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#55-error-handling-types","title":"5.5 \u9519\u8bef\u5904\u7406\u7c7b\u578b(error handling types)","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#551-result","title":"5.5.1 Result\u679a\u4e3e\u7c7b\u578b","text":"<p><code>Result</code> \u662f Rust \u4e2d\u7528\u4e8e\u5904\u7406\u53ef\u80fd\u4ea7\u751f\u9519\u8bef\u7684\u503c\u7684\u679a\u4e3e\u7c7b\u578b\u3002\u5b83\u88ab\u5e7f\u6cdb\u7528\u4e8e Rust \u7a0b\u5e8f\u4e2d\uff0c\u7528\u4e8e\u8fd4\u56de\u51fd\u6570\u6267\u884c\u7684\u7ed3\u679c\uff0c\u5e76\u5141\u8bb8\u660e\u786e\u5730\u5904\u7406\u6f5c\u5728\u7684\u9519\u8bef\u60c5\u51b5\u3002<code>Result</code> \u679a\u4e3e\u6709\u4e24\u4e2a\u53d8\u4f53\uff1a</p> <ol> <li> <p><code>Ok(T)</code>\uff1a\u8868\u793a\u64cd\u4f5c\u6210\u529f\uff0c\u5305\u542b\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>T</code> \u7684\u503c\uff0c\u5176\u4e2d <code>T</code> \u662f\u6210\u529f\u7ed3\u679c\u7684\u7c7b\u578b\u3002</p> </li> <li> <p><code>Err(E)</code>\uff1a\u8868\u793a\u64cd\u4f5c\u5931\u8d25\uff0c\u5305\u542b\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>E</code> \u7684\u9519\u8bef\u503c\uff0c\u5176\u4e2d <code>E</code> \u662f\u9519\u8bef\u7684\u7c7b\u578b\u3002\u9519\u8bef\u503c\u901a\u5e38\u7528\u4e8e\u643a\u5e26\u6709\u5173\u5931\u8d25\u539f\u56e0\u7684\u4fe1\u606f\u3002</p> </li> </ol> <p><code>Result</code> \u7684\u4e3b\u8981\u76ee\u6807\u662f\u63d0\u4f9b\u4e00\u79cd\u5b89\u5168\u3001\u53ef\u9760\u7684\u65b9\u5f0f\u6765\u5904\u7406\u9519\u8bef\uff0c\u800c\u4e0d\u9700\u8981\u5728\u51fd\u6570\u4e2d\u4f7f\u7528\u5f02\u5e38\u3002\u5b83\u5f3a\u5236\u7a0b\u5e8f\u5458\u663e\u5f0f\u5730\u5904\u7406\u9519\u8bef\uff0c\u4ee5\u786e\u4fdd\u9519\u8bef\u60c5\u51b5\u4e0d\u4f1a\u88ab\u5ffd\u7565\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528 <code>Result</code> \u7684\u4e00\u4e9b\u793a\u4f8b\uff1a</p> <pre><code>use std::fs::File;           // \u5bfc\u5165\u6587\u4ef6\u64cd\u4f5c\u76f8\u5173\u7684\u6a21\u5757\nuse std::io::Read;           // \u5bfc\u5165\u8f93\u5165\u8f93\u51fa\u76f8\u5173\u7684\u6a21\u5757\n\n// \u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9\nfn read_file_contents(file_path: &amp;str) -&gt; Result&lt;String, std::io::Error&gt; {\n    // \u6253\u5f00\u6307\u5b9a\u8def\u5f84\u7684\u6587\u4ef6\u5e76\u8fd4\u56de\u7ed3\u679c(Result\u7c7b\u578b)\n    let mut file = File::open(file_path)?;  // ? \u7528\u4e8e\u5c06\u53ef\u80fd\u7684\u9519\u8bef\u4f20\u64ad\u5230\u8c03\u7528\u8005\n\n    // \u521b\u5efa\u4e00\u4e2a\u53ef\u53d8\u5b57\u7b26\u4e32\u6765\u5b58\u50a8\u6587\u4ef6\u7684\u5185\u5bb9\n    let mut contents = String::new();\n\n    // \u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9\u5230\u5b57\u7b26\u4e32\u4e2d\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728 contents \u53d8\u91cf\u4e2d\n    file.read_to_string(&amp;mut contents)?;\n\n    // \u5982\u679c\u6210\u529f\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff0c\u8fd4\u56de\u5305\u542b\u5185\u5bb9\u7684 Result::Ok(contents)\n    Ok(contents)\n}\n\n// \u4e3b\u51fd\u6570\nfn main() {\n    // \u8c03\u7528 read_file_contents \u51fd\u6570\u6765\u5c1d\u8bd5\u8bfb\u53d6\u6587\u4ef6\n    match read_file_contents(\"example.txt\") {  // \u4f7f\u7528 match \u6765\u5904\u7406\u51fd\u6570\u7684\u8fd4\u56de\u503c\n        // \u5982\u679c\u64cd\u4f5c\u6210\u529f\uff0c\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\u5757\n        Ok(contents) =&gt; {\n            // \u6253\u5370\u6587\u4ef6\u7684\u5185\u5bb9\n            println!(\"File contents: {}\", contents);\n        }\n        // \u5982\u679c\u64cd\u4f5c\u5931\u8d25\uff0c\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\u5757\n        Err(error) =&gt; {\n            // \u6253\u5370\u9519\u8bef\u4fe1\u606f\n            eprintln!(\"Error reading file: {}\", error);\n        }\n    }\n}\n</code></pre> <p>\u53ef\u80fd\u7684\u7ed3\u679c\uff1a</p> <p>\u5047\u8bbe \"example.txt\" \u6587\u4ef6\u5b58\u5728\u4e14\u5305\u542b\u6587\u672c \"Hello, Rust!\"\uff0c\u90a3\u4e48\u7a0b\u5e8f\u7684\u8f93\u51fa\u5c06\u662f\uff1a</p> <pre><code>File contents: Hello, Rust!\n</code></pre> <p>\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u51fa\u73b0\u5176\u4ed6IO\u9519\u8bef\uff0c\u7a0b\u5e8f\u5c06\u6253\u5370\u7c7b\u4f3c\u4ee5\u4e0b\u5185\u5bb9\u7684\u9519\u8bef\u4fe1\u606f\uff1a</p> <pre><code>Error reading file: No such file or directory (os error 2)\n</code></pre> <p>\u8fd9\u4e2a\u9519\u8bef\u6d88\u606f\u7684\u5177\u4f53\u5185\u5bb9\u53d6\u51b3\u4e8e\u53d1\u751f\u7684\u9519\u8bef\u7c7b\u578b\u548c\u4e0a\u4e0b\u6587\u3002</p> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c<code>read_file_contents</code> \u51fd\u6570\u5c1d\u8bd5\u6253\u5f00\u6307\u5b9a\u6587\u4ef6\u5e76\u8bfb\u53d6\u5176\u5185\u5bb9\uff0c\u5982\u679c\u64cd\u4f5c\u6210\u529f\uff0c\u5b83\u4f1a\u8fd4\u56de\u5305\u542b\u6587\u4ef6\u5185\u5bb9\u7684 <code>Result::Ok(contents)</code>\uff0c\u5426\u5219\u8fd4\u56de\u4e00\u4e2a <code>Result::Err(error)</code>\uff0c\u5176\u4e2d <code>error</code> \u5305\u542b\u4e86\u51fa\u73b0\u7684\u9519\u8bef\u3002\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>match</code> \u6765\u68c0\u67e5\u5e76\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u603b\u4e4b\uff0c<code>Result</code> \u662f Rust \u4e2d\u7528\u4e8e\u5904\u7406\u9519\u8bef\u7684\u91cd\u8981\u5de5\u5177\uff0c\u5b83\u4f7f\u7a0b\u5e8f\u5458\u80fd\u591f\u4ee5\u4e00\u79cd\u660e\u786e\u548c\u5b89\u5168\u7684\u65b9\u5f0f\u5904\u7406\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u60c5\u51b5\uff0c\u5e76\u907f\u514d\u4e86\u5f02\u5e38\u5904\u7406\u7684\u590d\u6742\u6027\u3002\u8fd9\u6709\u52a9\u4e8e\u7f16\u5199\u53ef\u9760\u548c\u5065\u58ee\u7684 Rust \u4ee3\u7801\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u548c\u4e0a\u4e00\u8282\u7684option\u505a\u4e2a\u5bf9\u6bd4\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u5217\u51fa\u4e86<code>Result</code>\u548c<code>Option</code>\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\uff1a</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u5217\u51fa\u4e86<code>Result</code>\u548c<code>Option</code>\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\uff1a</p> \u7279\u5f81 Result Option \u7528\u9014 \u7528\u4e8e\u8868\u793a\u53ef\u80fd\u53d1\u751f\u9519\u8bef\u7684\u7ed3\u679c \u7528\u4e8e\u8868\u793a\u53ef\u80fd\u5b58\u5728\u6216\u4e0d\u5b58\u5728\u7684\u503c \u679a\u4e3e\u53d8\u4f53 <code>Result&lt;T, E&gt;</code> \u548c <code>Result&lt;(), E&gt;</code> <code>Some(T)</code> \u548c <code>None</code> \u6210\u529f\u60c5\u51b5(\u5b58\u5728\u503c) <code>Ok(T)</code> \u5305\u542b\u6210\u529f\u7684\u7ed3\u679c\u503c <code>T</code> <code>Some(T)</code> \u5305\u542b\u503c <code>T</code> \u5931\u8d25\u60c5\u51b5(\u9519\u8bef\u4fe1\u606f) <code>Err(E)</code> \u5305\u542b\u9519\u8bef\u7684\u4fe1\u606f <code>E</code> N/A(<code>Option</code> \u4e0d\u63d0\u4f9b\u9519\u8bef\u4fe1\u606f) \u9519\u8bef\u5904\u7406 \u901a\u5e38\u4f7f\u7528 <code>match</code> \u6216 <code>?</code> \u8fd0\u7b97\u7b26 \u901a\u5e38\u4f7f\u7528 <code>if let</code> \u6216 <code>match</code> \u4e3b\u8981\u7528\u9014 \u7528\u4e8e\u5904\u7406\u53ef\u6062\u590d\u7684\u9519\u8bef \u7528\u4e8e\u5904\u7406\u53ef\u9009\u503c\uff0c\u5982\u53ef\u80fd\u4e3a<code>None</code>\u7684\u60c5\u51b5 \u5f15\u53d1\u7a0b\u5e8f\u7ec8\u6b62(panic)\u7684\u60c5\u51b5 \u4e0d\u4f1a\u5f15\u53d1\u7a0b\u5e8f\u7ec8\u6b62 \u4e0d\u4f1a\u5f15\u53d1\u7a0b\u5e8f\u7ec8\u6b62 \u9002\u7528\u4e8e\u4f55\u79cd\u60c5\u51b5 I/O\u64cd\u4f5c\u3001\u6587\u4ef6\u64cd\u4f5c\u3001\u7f51\u7edc\u8bf7\u6c42\u7b49\u53ef\u80fd\u5931\u8d25\u7684\u64cd\u4f5c \u4ece\u96c6\u5408\u4e2d\u67e5\u627e\u5143\u7d20\u3001\u914d\u7f6e\u9009\u9879\u7b49\u53ef\u80fd\u4e3a<code>None</code>\u7684\u60c5\u51b5 <p>\u8fd9\u4e2a\u8868\u683c\u603b\u7ed3\u4e86<code>Result</code>\u548c<code>Option</code>\u7684\u4e3b\u8981\u533a\u522b\uff0c\u5b83\u4eec\u5728Rust\u4e2d\u5206\u522b\u7528\u4e8e\u5904\u7406\u9519\u8bef\u548c\u5904\u7406\u53ef\u9009\u503c\u3002<code>Result</code>\u7528\u4e8e\u8868\u793a\u53ef\u80fd\u53d1\u751f\u9519\u8bef\u7684\u64cd\u4f5c\u7ed3\u679c\uff0c\u800c<code>Option</code>\u7528\u4e8e\u8868\u793a\u53ef\u80fd\u5b58\u5728\u6216\u4e0d\u5b58\u5728\u7684\u503c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#552-panic","title":"5.5.2 panic! \u5b8f","text":"<p><code>panic!</code> \u662fRust\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u5b8f(macro)\uff0c\u7528\u4e8e\u5f15\u53d1\u6050\u614c(panic)\u3002\u5f53\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u9047\u5230\u65e0\u6cd5\u5904\u7406\u7684\u9519\u8bef\u6216\u4e0d\u4e00\u81f4\u6027\u65f6\uff0c<code>panic!</code> \u5b8f\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u7acb\u5373\u7ec8\u6b62\uff0c\u5e76\u5728\u7ec8\u6b62\u524d\u6253\u5370\u9519\u8bef\u4fe1\u606f\u3002\u8fd9\u79cd\u884c\u4e3a\u662fRust\u4e2d\u7684\u4e00\u79cd\u4e0d\u53ef\u6062\u590d\u9519\u8bef\u5904\u7406\u673a\u5236\u3002</p> <p>\u4e0b\u9762\u662f\u6709\u5173 <code>panic!</code> \u5b8f\u7684\u8be6\u7ec6\u8bf4\u660e\uff1a</p> <ol> <li>\u5f15\u53d1\u6050\u614c\uff1a</li> <li><code>panic!</code> \u5b8f\u7684\u4e3b\u8981\u76ee\u7684\u662f\u7acb\u5373\u7ec8\u6b62\u7a0b\u5e8f\u7684\u6267\u884c\u3002\u5b83\u4f1a\u5728\u7ec8\u6b62\u4e4b\u524d\u6253\u5370\u4e00\u6761\u9519\u8bef\u6d88\u606f\uff0c\u5e76\u53ef\u9009\u5730\u9644\u5e26\u9519\u8bef\u4fe1\u606f\u3002</li> <li> <p>\u6050\u614c\u901a\u5e38\u7528\u4e8e\u8868\u793a\u4e0d\u5e94\u8be5\u53d1\u751f\u7684\u9519\u8bef\u60c5\u51b5\uff0c\u4f8b\u5982\u9664\u4ee5\u96f6\u6216\u6570\u7ec4\u8d8a\u754c\u3002\u8fd9\u4e9b\u9519\u8bef\u901a\u5e38\u8868\u660e\u7a0b\u5e8f\u7684\u72b6\u6001\u5df2\u7ecf\u4e0d\u4e00\u81f4\uff0c\u65e0\u6cd5\u5b89\u5168\u5730\u7ee7\u7eed\u6267\u884c\u3002</p> </li> <li> <p>\u7528\u6cd5\uff1a</p> </li> <li><code>panic!</code> \u5b8f\u7684\u8bed\u6cd5\u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u50cf\u51fd\u6570\u8c03\u7528\u4e00\u6837\u4f7f\u7528\u3002\u4f8b\u5982\uff1a<code>panic!(\"Something went wrong\");</code>\u3002</li> <li> <p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>panic!</code> \u5b8f\u7684\u5e26\u683c\u5f0f\u7684\u7248\u672c\uff0c\u7c7b\u4f3c\u4e8e <code>println!</code> \u5b8f\uff1a<code>panic!(\"Error: {}\", error_message);</code>\u3002</p> </li> <li> <p>\u9519\u8bef\u4fe1\u606f\uff1a</p> </li> <li>\u4f60\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a <code>panic!</code> \u5b8f\u7684\u53c2\u6570\uff0c\u7528\u4e8e\u63cf\u8ff0\u53d1\u751f\u7684\u9519\u8bef\u3002\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4f1a\u88ab\u6253\u5370\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa(stderr)\u3002</li> <li> <p>\u9519\u8bef\u4fe1\u606f\u901a\u5e38\u5e94\u8be5\u6e05\u6670\u5730\u63cf\u8ff0\u95ee\u9898\uff0c\u4ee5\u4fbf\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u7406\u89e3\u9519\u8bef\u7684\u539f\u56e0\u3002</p> </li> <li> <p>\u6062\u590d\u6050\u614c\uff1a</p> </li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u7a0b\u5e8f\u9047\u5230\u6050\u614c\u65f6\uff0c\u5b83\u4f1a\u7ec8\u6b62\u6267\u884c\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u4e0d\u4e00\u81f4\u72b6\u6001\u4e0d\u4f1a\u4f20\u64ad\u5230\u7a0b\u5e8f\u7684\u5176\u4ed6\u90e8\u5206\u3002</li> <li>\u4f46\u662f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>std::panic::catch_unwind</code> \u51fd\u6570\u6765\u6355\u83b7\u6050\u614c\u5e76\u5c1d\u8bd5\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u6062\u590d\u7a0b\u5e8f\u7684\u6267\u884c\u3002\u8fd9\u901a\u5e38\u9700\u8981\u4f7f\u7528 <code>std::panic::UnwindSafe</code> trait \u6765\u6807\u8bb0\u53ef\u5b89\u5168\u6062\u590d\u7684\u4ee3\u7801\u3002</li> </ol> <pre><code>use std::panic;\n\nfn main() {\n    let result = panic::catch_unwind(|| {\n        // \u53ef\u80fd\u5f15\u53d1\u6050\u614c\u7684\u4ee3\u7801\u5757\n        panic!(\"Something went wrong\");\n    });\n\n    match result {\n        Ok(_) =&gt; println!(\"Panic handled successfully\"),\n        Err(_) =&gt; println!(\"Panic occurred and was caught\"),\n    }\n}\n</code></pre> <p>\u603b\u7ed3\uff1a <code>panic!</code> \u5b8f\u662fRust\u4e2d\u4e00\u79cd\u4e0d\u53ef\u6062\u590d\u9519\u8bef\u5904\u7406\u673a\u5236\uff0c\u7528\u4e8e\u5904\u7406\u4e0d\u5e94\u8be5\u53d1\u751f\u7684\u9519\u8bef\u60c5\u51b5\u3002\u5728\u6b63\u5e38\u7684\u7a0b\u5e8f\u6267\u884c\u4e2d\uff0c\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 <code>panic!</code>\uff0c\u800c\u662f\u4f7f\u7528 <code>Result</code> \u6216 <code>Option</code> \u6765\u5904\u7406\u9519\u8bef\u548c\u53ef\u9009\u503c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#553","title":"5.5.3 \u5e38\u89c1\u9519\u8bef\u5904\u7406\u65b9\u5f0f\u7684\u6bd4\u8f83","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u5728\u9519\u8bef\u5904\u7406\u7684\u77e9\u9635\u4e2d\u52a0\u5165panic\uff01\u5b8f\uff0c\u518d\u6765\u6bd4\u8f83\u4e00\u4e0b\uff1a</p> \u7279\u5f81 panic! Result Option \u7528\u9014 \u7528\u4e8e\u8868\u793a\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\uff0c\u901a\u5e38\u662f\u4e0d\u5e94\u8be5\u53d1\u751f\u7684\u60c5\u51b5 \u7528\u4e8e\u8868\u793a\u53ef\u6062\u590d\u7684\u9519\u8bef\u6216\u5931\u8d25\u60c5\u51b5\uff0c\u5982\u6587\u4ef6\u64cd\u4f5c\u3001\u7f51\u7edc\u8bf7\u6c42\u7b49 \u7528\u4e8e\u8868\u793a\u53ef\u80fd\u5b58\u5728\u6216\u4e0d\u5b58\u5728\u7684\u503c\uff0c\u5982\u4ece\u96c6\u5408\u4e2d\u67e5\u627e\u5143\u7d20\u7b49 \u679a\u4e3e\u53d8\u4f53 N/A(\u4e0d\u662f\u679a\u4e3e) <code>Result&lt;T, E&gt;</code> \u548c <code>Result&lt;(), E&gt;</code>(\u6216\u5176\u4ed6\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b) <code>Some(T)</code> \u548c <code>None</code> \u7a0b\u5e8f\u7ec8\u6b62(Termination) \u5f15\u53d1\u6050\u614c\uff0c\u7acb\u5373\u7ec8\u6b62\u7a0b\u5e8f \u4e0d\u5f15\u53d1\u7a0b\u5e8f\u7ec8\u6b62\uff0c\u5141\u8bb8\u7ee7\u7eed\u6267\u884c \u4e0d\u5f15\u53d1\u7a0b\u5e8f\u7ec8\u6b62\uff0c\u5141\u8bb8\u7ee7\u7eed\u6267\u884c \u9519\u8bef\u5904\u7406\u65b9\u5f0f \u4e0d\u63d0\u4f9b\u6e05\u6670\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u901a\u5e38\u53ea\u6253\u5370\u9519\u8bef\u6d88\u606f \u63d0\u4f9b\u660e\u786e\u7684\u9519\u8bef\u7c7b\u578b(\u5982IO\u9519\u8bef\u3001\u81ea\u5b9a\u4e49\u9519\u8bef)\u548c\u9519\u8bef\u4fe1\u606f N/A(\u4e0d\u63d0\u4f9b\u9519\u8bef\u4fe1\u606f) \u5f15\u53d1\u7a0b\u5e8f\u7ec8\u6b62(panic)\u7684\u60c5\u51b5 \u9047\u5230\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\u6216\u4e0d\u4e00\u81f4\u60c5\u51b5 \u901a\u5e38\u7528\u4e8e\u53ef\u9884\u89c1\u7684\u3001\u53ef\u6062\u590d\u7684\u9519\u8bef\u60c5\u51b5 N/A(\u4e0d\u7528\u4e8e\u9519\u8bef\u5904\u7406) \u6062\u590d\u673a\u5236 \u53ef\u4ee5\u4f7f\u7528 <code>std::panic::catch_unwind</code> \u6765\u6355\u83b7\u6050\u614c\u5e76\u5c1d\u8bd5\u6062\u590d \u901a\u5e38\u901a\u8fc7 <code>match</code>\u3001<code>if let</code>\u3001<code>?</code> \u8fd0\u7b97\u7b26\u7b49\u6765\u5904\u7406\u9519\u8bef\uff0c\u4e0d\u9700\u8981\u6062\u590d\u673a\u5236 N/A(\u4e0d\u7528\u4e8e\u9519\u8bef\u5904\u7406) \u9002\u7528\u6027 \u9002\u7528\u4e8e\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\u60c5\u51b5 \u9002\u7528\u4e8e\u53ef\u6062\u590d\u7684\u9519\u8bef\u60c5\u51b5 \u9002\u7528\u4e8e\u53ef\u9009\u503c\u7684\u60c5\u51b5\uff0c\u5982\u53ef\u80fd\u4e3a<code>None</code>\u7684\u60c5\u51b5 \u4e3b\u8981\u793a\u4f8b <code>panic!(\"Division by zero\");</code> <code>File::open(\"file.txt\")?;</code> \u6216\u5176\u4ed6 <code>Result</code> \u4f7f\u7528\u65b9\u5f0f <code>Some(42)</code> \u6216 <code>None</code> <p>\u8fd9\u4e2a\u8868\u683c\u603b\u7ed3\u4e86<code>panic!</code>\u3001<code>Result</code> \u548c <code>Option</code> \u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\u3002<code>panic!</code> \u7528\u4e8e\u5904\u7406\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\u60c5\u51b5\uff0c<code>Result</code> \u7528\u4e8e\u5904\u7406\u53ef\u6062\u590d\u7684\u9519\u8bef\u6216\u5931\u8d25\u60c5\u51b5\uff0c\u5e76\u63d0\u4f9b\u660e\u786e\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u800c <code>Option</code> \u7528\u4e8e\u8868\u793a\u53ef\u80fd\u5b58\u5728\u6216\u4e0d\u5b58\u5728\u7684\u503c\uff0c\u4f8b\u5982\u5728\u4ece\u96c6\u5408\u4e2d\u67e5\u627e\u5143\u7d20\u65f6\u4f7f\u7528\u3002\u5728\u5b9e\u9645\u7f16\u7a0b\u4e2d\uff0c\u901a\u5e38\u5e94\u8be5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u9009\u62e9\u9002\u5f53\u7684\u9519\u8bef\u5904\u7406\u65b9\u5f0f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#56-stackheapbox","title":"5.6 \u6808(Stack)\u3001\u5806(Heap)\u548c\u7bb1\u5b50(Box)","text":"<p>\u5185\u5b58\u4e2d\u7684\u6808(stack)\u548c\u5806(heap)\u662f\u8ba1\u7b97\u673a\u5185\u5b58\u7ba1\u7406\u7684\u4e24\u4e2a\u5173\u952e\u65b9\u9762\u3002\u5728Rust\u4e2d\uff0c\u4e0e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e00\u6837\uff0c\u6808\u548c\u5806\u8d77\u7740\u4e0d\u540c\u7684\u89d2\u8272\uff0c\u7528\u4e8e\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u8fd9\u4e24\u8005\uff0c\u5305\u62ec\u793a\u4f8b\u548c\u56fe\u8868\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#561-stack","title":"5.6.1 \u5185\u5b58\u6808(Stack)","text":"<ul> <li>\u5185\u5b58\u6808\u662f\u4e00\u79cd\u7ebf\u6027\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u5b58\u50a8\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u51fd\u6570\u8c03\u7528\u3001\u5c40\u90e8\u53d8\u91cf\u548c\u51fd\u6570\u53c2\u6570\u3002</li> <li>\u6808\u662f\u4e00\u79cd\u9ad8\u6548\u7684\u6570\u636e\u7ed3\u6784\uff0c\u56e0\u4e3a\u5b83\u652f\u6301\u5e38\u91cf\u65f6\u95f4\u7684\u5165\u6808(push)\u548c\u51fa\u6808(pop)\u64cd\u4f5c\u3002</li> <li>\u6808\u4e0a\u7684\u6570\u636e\u7684\u751f\u547d\u5468\u671f\u662f\u786e\u5b9a\u7684\uff0c\u5f53\u53d8\u91cf\u8d85\u51fa\u4f5c\u7528\u57df\u65f6\uff0c\u76f8\u5173\u7684\u6570\u636e\u4f1a\u81ea\u52a8\u9500\u6bc1\u3002</li> <li>\u5728Rust\u4e2d\uff0c\u57fa\u672c\u6570\u636e\u7c7b\u578b(\u5982\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c)\u548c\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u636e\u7ed3\u6784(\u5982\u5143\u7ec4)\u901a\u5e38\u5b58\u50a8\u5728\u6808\u4e0a\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u8bf4\u660e\u4e86\u5185\u5b58\u6808\u7684\u5de5\u4f5c\u539f\u7406\uff1a</p> <pre><code>fn main() {\n    let x = 42;  // \u6574\u6570x\u88ab\u5b58\u50a8\u5728\u6808\u4e0a\n    let y = 17;  // \u6574\u6570y\u88ab\u5b58\u50a8\u5728\u6808\u4e0a\n    let sum = x + y; // \u6808\u4e0a\u7684x\u548cy\u7684\u503c\u88ab\u76f8\u52a0\uff0c\u7ed3\u679c\u5b58\u50a8\u5728\u6808\u4e0a\u7684sum\u4e2d\n}  // \u6240\u6709\u53d8\u91cf\u8d85\u51fa\u4f5c\u7528\u57df\uff0c\u6808\u4e0a\u7684\u6570\u636e\u73b0\u5728\u5168\u90e8\u81ea\u52a8\u9500\u6bc1\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#562-heap","title":"5.6.2 \u5185\u5b58\u5806(Heap)","text":"<ul> <li>\u5185\u5b58\u5806\u662f\u4e00\u5757\u8f83\u5927\u7684\u3001\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\u533a\u57df\uff0c\u7528\u4e8e\u5b58\u50a8\u4e0d\u786e\u5b9a\u5927\u5c0f\u6216\u53ef\u53d8\u5927\u5c0f\u7684\u6570\u636e\uff0c\u4f8b\u5982\u5b57\u7b26\u4e32\u3001\u5411\u91cf\u3001\u7ed3\u6784\u4f53\u7b49\u3002</li> <li>\u5806\u4e0a\u7684\u6570\u636e\u7684\u751f\u547d\u5468\u671f\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u9700\u8981\u624b\u52a8\u7ba1\u7406\u5185\u5b58\u7684\u5206\u914d\u548c\u91ca\u653e\u3002</li> <li>\u5728Rust\u4e2d\uff0c\u5806\u4e0a\u7684\u6570\u636e\u901a\u5e38\u7531\u667a\u80fd\u6307\u9488(\u4f8b\u5982<code>Box</code>\u3001<code>Rc</code>\u3001<code>Arc</code>)\u7ba1\u7406\uff0c\u8fd9\u4e9b\u667a\u80fd\u6307\u9488\u63d0\u4f9b\u4e86\u5b89\u5168\u7684\u5806\u5185\u5b58\u8bbf\u95ee\u65b9\u5f0f\uff0c\u907f\u514d\u4e86\u5185\u5b58\u6cc4\u6f0f\u548c\u4f7f\u7528-after-free\u7b49\u95ee\u9898\u3002</li> </ul> <p>\u793a\u4f8b\uff1a</p> <p>\u5982\u4f55\u5728\u5806\u4e0a\u5206\u914d\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1a</p> <pre><code>fn main() {\n    let s = String::from(\"Hello, Rust!\"); // \u5b57\u7b26\u4e32s\u5728\u5806\u4e0a\u5206\u914d\n    // ...\n} // \u5f53s\u8d85\u51fa\u4f5c\u7528\u57df\u65f6\uff0c\u5806\u4e0a\u7684\u5b57\u7b26\u4e32\u4f1a\u88ab\u81ea\u52a8\u91ca\u653e\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u56fe\u8868\uff0c\u5c55\u793a\u4e86\u5185\u5b58\u6808\u548c\u5185\u5b58\u5806\u7684\u533a\u522b\uff1a</p> <p></p> <p>\u6808\u4e0a\u7684\u6570\u636e\u5177\u6709\u56fa\u5b9a\u7684\u751f\u547d\u5468\u671f\uff0c\u662f\u76f4\u63a5\u7ba1\u7406\u7684\u3002\u5806\u4e0a\u7684\u6570\u636e\u53ef\u4ee5\u662f\u52a8\u6001\u5206\u914d\u7684\uff0c\u9700\u8981**\u667a\u80fd\u6307\u9488**\u6765\u7ba1\u7406\u5176\u751f\u547d\u5468\u671f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#563-box","title":"5.6.3 \u7bb1\u5b50(Box)","text":"<p>\u5728 Rust \u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u503c\u90fd\u662f\u6808\u4e0a\u5206\u914d\u7684\u3002\u4f46\u662f\uff0c\u901a\u8fc7\u521b\u5efa <code>Box&lt;T&gt;</code>\uff0c\u53ef\u4ee5\u5c06\u503c\u8fdb\u884c**\u88c5\u7bb1**(boxed)\uff0c\u4f7f\u5176**\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58**\u3002\u4e00\u4e2a\u7bb1\u5b50(box\uff0c\u5373 <code>Box&lt;T&gt;</code> \u7c7b\u578b\u7684\u5b9e\u4f8b)\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u667a\u80fd\u6307\u9488\uff0c\u6307\u5411\u5806\u4e0a\u5206\u914d\u7684 <code>T</code> \u7c7b\u578b\u7684\u503c\u3002\u5f53\u7bb1\u5b50\u8d85\u51fa\u5176\u4f5c\u7528\u57df\u65f6\uff0c\u5185\u90e8\u7684\u5bf9\u8c61\u5c31\u4f1a\u88ab\u9500\u6bc1\uff0c\u5e76\u4e14\u5806\u4e0a\u5206\u914d\u7684\u5185\u5b58\u4e5f\u4f1a\u88ab\u91ca\u653e\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5176\u4e2d\u6f14\u793a\u4e86\u5728Rust\u4e2d\u4f7f\u7528Box\u7684\u91cd\u8981\u6027\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8bd5\u56fe\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u975e\u5e38\u5927\u6570\u636e\u7684\u7ed3\u6784\uff0c\u4f46\u7531\u4e8e\u6ca1\u6709\u4f7f\u7528Box\uff0c\u7f16\u8bd1\u5668\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6570\u636e\u65e0\u6cd5\u5728\u6808\u4e0a\u5b58\u50a8\uff1a</p> <pre><code>struct LargeData {\n    // \u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6570\u636e\u7ed3\u6784\n    data: [u8; 1024 * 1024 * 1024], // 1 GB\u7684\u6570\u636e\n}\n\nfn main() {\n    let large_data = LargeData {\n        data: [0; 1024 * 1024 * 1024], // \u521d\u59cb\u5316\u6570\u636e\n    };\n\n    println!(\"Large data created.\");\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>thread 'main' has overflowed its stack\nfatal runtime error: stack overflow\nfish: Job 1, 'cargo run $argv' terminated by signal SIGABRT (Abort)\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c1d\u8bd5\u521b\u5efa\u4e00\u4e2a<code>LargeData</code>\u7ed3\u6784\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a1GB\u5927\u5c0f\u7684\u6570\u636e\u6570\u7ec4\u3002\u7531\u4e8eRust\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u6570\u636e\u5b58\u50a8\u5728\u6808\u4e0a\uff0c\u8fd9\u5c06\u5bfc\u81f4\u7f16\u8bd1\u9519\u8bef\uff0c\u56e0\u4e3a\u6808\u4e0a\u65e0\u6cd5\u5bb9\u7eb3\u5982\u6b64\u5927\u7684\u6570\u636e\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528Box\u6765\u5c06\u6570\u636e\u5b58\u50a8\u5728\u5806\u4e0a\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>struct LargeData {\n    data: Box&lt;[u8]&gt;,\n}\n\nfn main() {\n    let large_data = LargeData {\n        data: vec![0; 1024 * 1024 * 1024].into_boxed_slice(),\n    };\n\n    // \u4f7f\u7528 large_data \u53d8\u91cf\n    println!(\"Large data created.\");\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86<code>Box::new</code>\u6765\u521b\u5efa\u4e00\u4e2a\u5305\u542b1GB\u6570\u636e\u7684\u5806\u5206\u914d\u7684\u6570\u7ec4\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u51fa\u73b0\u7f16\u8bd1\u9519\u8bef\u4e86\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#into_boxed_slice","title":"\u8865\u5145\u5b66\u4e60\uff1ainto_boxed_slice","text":"<p><code>into_boxed_slice</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u5c06\u5411\u91cf(<code>Vec</code>)\u8f6c\u6362\u4e3a <code>Box&lt;[T]&gt;</code> \u7684\u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u5411\u91cf\u6709\u591a\u4f59\u7684\u5bb9\u91cf(excess capacity)\uff0c\u5b83\u7684\u5143\u7d20\u5c06\u4f1a\u88ab\u79fb\u52a8\u5230\u4e00\u4e2a\u65b0\u5206\u914d\u7684\u7f13\u51b2\u533a\uff0c\u8be5\u7f13\u51b2\u533a\u5177\u6709\u521a\u597d\u6b63\u786e\u7684\u5bb9\u91cf\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>let v = vec![1, 2, 3];\n\nlet slice = v.into_boxed_slice();\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u5411\u91cf <code>v</code> \u88ab\u8f6c\u6362\u6210\u4e86\u4e00\u4e2a <code>Box&lt;[T]&gt;</code> \u7c7b\u578b\u7684\u5207\u7247 <code>slice</code>\u3002\u4efb\u4f55\u591a\u4f59\u7684\u5bb9\u91cf\u90fd\u4f1a\u88ab\u79fb\u9664\u3002</p> <p>\u53e6\u4e00\u4e2a\u793a\u4f8b\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a\u5177\u6709\u9884\u5206\u914d\u5bb9\u91cf\u7684\u5411\u91cf\uff1a</p> <pre><code>let mut vec = Vec::with_capacity(10);\nvec.extend([1, 2, 3]);\n\nassert!(vec.capacity() &gt;= 10);\nlet slice = vec.into_boxed_slice();\nassert_eq!(slice.into_vec().capacity(), 3);\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a\u5bb9\u91cf\u4e3a10\u7684\u5411\u91cf\uff0c\u7136\u540e\u901a\u8fc7 <code>extend</code> \u65b9\u6cd5\u5c06\u5143\u7d20\u6dfb\u52a0\u5230\u5411\u91cf\u4e2d\u3002\u4e4b\u540e\uff0c\u901a\u8fc7 <code>into_boxed_slice</code> \u5c06\u5411\u91cf\u8f6c\u6362\u4e3a <code>Box&lt;[T]&gt;</code> \u7c7b\u578b\u7684\u5207\u7247 <code>slice</code>\u3002\u7531\u4e8e\u591a\u4f59\u7684\u5bb9\u91cf\u4e0d\u518d\u9700\u8981\uff0c\u6240\u4ee5\u5b83\u4eec\u4f1a\u88ab\u79fb\u9664\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>into_vec</code> \u65b9\u6cd5\u5c06 <code>slice</code> \u8f6c\u6362\u56de\u5411\u91cf\uff0c\u5e76\u68c0\u67e5\u5b83\u7684\u5bb9\u91cf\u662f\u5426\u7b49\u4e8e3\u3002\u8fd9\u662f\u56e0\u4e3a\u79fb\u9664\u4e86\u591a\u4f59\u7684\u5bb9\u91cf\uff0c\u6240\u4ee5\u5bb9\u91cf\u53d8\u4e3a\u4e863\u3002</p> <p>\u603b\u7ed3\uff1a</p> <p>\u5728Rust\u4e2d\uff0c<code>Box</code> \u7c7b\u578b\u867d\u7136\u4e0d\u662f\u91d1\u878d\u9886\u57df\u7279\u5b9a\u7684\u5de5\u5177\uff0c\u4f46\u5728\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5177\u6709\u4ee5\u4e0b\u4e00\u822c\u5e94\u7528\uff1a</p> <ol> <li>\u6570\u636e\u7ba1\u7406\uff1a\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u9700\u8981\u5904\u7406\u5927\u91cf\u6570\u636e\uff0c\u5982\u5e02\u573a\u62a5\u4ef7\u3001\u4ea4\u6613\u8ba2\u5355\u3001\u6295\u8d44\u7ec4\u5408\u7b49\u3002<code>Box</code> \u53ef\u4ee5\u7528\u4e8e\u5c06\u6570\u636e\u5206\u914d\u5728\u5806\u4e0a\uff0c\u4ee5\u907f\u514d\u6808\u6ea2\u51fa\uff0c\u540c\u65f6\u786e\u4fdd\u6570\u636e\u7684\u6240\u6709\u6743\u5728\u4e0d\u540c\u90e8\u5206\u4e4b\u95f4\u4f20\u9012\u3002</li> <li>\u6784\u5efa\u590d\u6742\u6570\u636e\u7ed3\u6784\uff1a\u91d1\u878d\u9886\u57df\u9700\u8981\u4f7f\u7528\u5404\u79cd\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5982\u6811\u3001\u56fe\u3001\u94fe\u8868\u7b49\uff0c\u6765\u8868\u793a\u91d1\u878d\u5de5\u5177\u548c\u6295\u8d44\u7ec4\u5408\u3002<code>Box</code> \u6709\u52a9\u4e8e\u6784\u5efa\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u5e76\u7ba1\u7406\u6570\u636e\u7684\u751f\u547d\u5468\u671f\u3002</li> <li>\u5f02\u5e38\u5904\u7406\uff1a\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u5904\u7406\u5404\u79cd\u5f02\u5e38\u60c5\u51b5\uff0c\u5982\u9519\u8bef\u4ea4\u6613\u3001\u6570\u636e\u4e22\u5931\u7b49\u3002<code>Box</code> \u53ef\u4ee5\u7528\u4e8e\u5b58\u50a8\u548c\u4f20\u9012\u5f02\u5e38\u60c5\u51b5\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4ee5\u8fdb\u884c\u9002\u5f53\u7684\u5904\u7406\u548c\u62a5\u544a\u3002</li> <li>\u591a\u7ebf\u7a0b\u548c\u5e76\u53d1\uff1a\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u9700\u8981\u5904\u7406\u591a\u7ebf\u7a0b\u548c\u5e76\u53d1\uff0c\u4ee5\u786e\u4fdd\u9ad8\u6027\u80fd\u548c\u53ef\u4f38\u7f29\u6027\u3002<code>Box</code> \u53ef\u4ee5\u7528\u4e8e\u5728\u7ebf\u7a0b\u4e4b\u95f4\u5b89\u5168\u4f20\u9012\u6570\u636e\uff0c\u907f\u514d\u7ade\u4e89\u6761\u4ef6\u548c\u6570\u636e\u4e0d\u4e00\u81f4\u6027\u3002</li> <li>\u5f02\u6b65\u7f16\u7a0b\uff1a\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u5904\u7406\u5f02\u6b65\u4e8b\u4ef6\uff0c\u5982\u5e02\u573a\u6570\u636e\u66f4\u65b0\u3001\u4ea4\u6613\u6267\u884c\u7b49\u3002<code>Box</code> \u53ef\u4ee5\u5728\u5f02\u6b65\u4e0a\u4e0b\u6587\u4e2d\u5b89\u5168\u5730\u5b58\u50a8\u548c\u4f20\u9012\u6570\u636e\u3002</li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#1_1","title":"\u6848\u4f8b1\uff1a \u5411\u5927\u578b\u91d1\u878d\u6570\u636e\u96c6\u6dfb\u52a0\u8d26\u6237","text":"<p>\u5f53\u9700\u8981\u5904\u7406\u5927\u578b\u590d\u6742\u6570\u636e\u96c6\u65f6\uff0c\u4f7f\u7528<code>Box</code>\u53ef\u4ee5\u5e2e\u52a9\u7ba1\u7406\u5185\u5b58\u5e76\u63d0\u9ad8\u7a0b\u5e8f\u6027\u80fd\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528Rust\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u91d1\u878d\u6570\u636e\u96c6(\u5728\u5b9e\u9645\u751f\u4ea7\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u662f\u6781\u5927\u7684\u3002)\uff0c\u5176\u4e2d\u5305\u542b\u591a\u4e2a\u4ea4\u6613\u8d26\u6237\u548c\u6bcf\u4e2a\u8d26\u6237\u7684\u4ea4\u6613\u5386\u53f2\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528<code>Box</code>\u6765\u7ba1\u7406\u8d26\u6237\u548c\u4ea4\u6613\u5386\u53f2\u7684\u5185\u5b58\uff0c\u4ee5\u907f\u514d\u5728\u6808\u4e0a\u5206\u914d\u8fc7\u591a\u5185\u5b58\u3002</p> <pre><code>#[allow(dead_code)] \n#[derive(Debug)]\nstruct Transaction {\n    amount: f64,\n    date: String,\n}\n\n#[allow(dead_code)] \n#[derive(Debug)]\nstruct Account {\n    name: String,\n    transactions: Vec&lt;Transaction&gt;,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u8d26\u6237\u7684\u91d1\u878d\u6570\u636e\u96c6\n    let mut financial_data: Vec&lt;Box&lt;Account&gt;&gt; = Vec::new();\n\n    // \u6dfb\u52a0\u4e00\u4e9b\u793a\u4f8b\u8d26\u6237\u548c\u4ea4\u6613\u5386\u53f2\n    let account1 = Account {\n        name: \"Account 1\".to_string(),\n        transactions: vec![\n            Transaction {\n                amount: 1000.0,\n                date: \"2023-09-14\".to_string(),\n            },\n            Transaction {\n                amount: -500.0,\n                date: \"2023-09-15\".to_string(),\n            },\n        ],\n    };\n\n    let account2 = Account {\n        name: \"Account 2\".to_string(),\n        transactions: vec![\n            Transaction {\n                amount: 2000.0,\n                date: \"2023-09-14\".to_string(),\n            },\n            Transaction {\n                amount: -1000.0,\n                date: \"2023-09-15\".to_string(),\n            },\n        ],\n    };\n\n    // \u4f7f\u7528Box\u5c06\u8d26\u6237\u6dfb\u52a0\u5230\u91d1\u878d\u6570\u636e\u96c6\n    financial_data.push(Box::new(account1));\n    financial_data.push(Box::new(account2));\n\n    // \u6253\u5370\u91d1\u878d\u6570\u636e\u96c6\n    for account in financial_data.iter() {\n        println!(\"{:?}\", account);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>Account { name: \"Account 1\", transactions: [Transaction { amount: 1000.0, date: \"2023-09-14\" }, Transaction { amount: -500.0, date: \"2023-09-15\" }] }\nAccount { name: \"Account 2\", transactions: [Transaction { amount: 2000.0, date: \"2023-09-14\" }, Transaction { amount: -1000.0, date: \"2023-09-15\" }] }\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7ed3\u6784\u4f53<code>Transaction</code>\u548c<code>Account</code>\uff0c\u5206\u522b\u7528\u4e8e\u8868\u793a\u4ea4\u6613\u548c\u8d26\u6237\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u8d26\u6237\u7684<code>financial_data</code>\u5411\u91cf\uff0c\u4f7f\u7528<code>Box</code>\u5c06\u8d26\u6237\u653e\u5165\u5176\u4e2d\u3002\u8fd9\u5141\u8bb8\u6211\u4eec\u6709\u6548\u5730\u7ba1\u7406\u5185\u5b58\uff0c\u5e76\u4e14\u53ef\u4ee5\u8f7b\u677e\u5730\u6269\u5c55\u91d1\u878d\u6570\u636e\u96c6\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5b9e\u9645\u7684\u91d1\u878d\u6570\u636e\u96c6\u53ef\u80fd\u4f1a\u66f4\u52a0\u590d\u6742\uff0c\u5305\u62ec\u66f4\u591a\u7684\u5b57\u6bb5\u548c\u903b\u8f91\u3002\u4f7f\u7528<code>Box</code>\u6765\u7ba1\u7406\u5185\u5b58\u53ef\u4ee5\u5728\u5904\u7406\u5927\u578b\u6570\u636e\u96c6\u65f6\u63d0\u4f9b\u66f4\u597d\u7684\u6027\u80fd\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#2","title":"\u6848\u4f8b2\uff1a\u5904\u7406\u591a\u79cd\u53ef\u80fd\u7684\u9519\u8bef\u60c5\u51b5","text":"<p>\u5f53\u4f60\u5904\u7406\u591a\u79cd\u9519\u8bef\u7684\u91d1\u878d\u811a\u672c\u65f6\uff0c\u7ecf\u5e38\u9700\u8981\u4f7f\u7528<code>Box</code>\u6765\u5305\u88c5\u9519\u8bef\u7c7b\u578b\uff0c\u56e0\u4e3a**\u4e0d\u540c\u7684\u9519\u8bef\u53ef\u80fd\u5177\u6709\u4e0d\u540c\u7684\u5927\u5c0f**\u3002\u8fd9\u91cc\u6211\u5c06\u4e3a\u4f60\u5c55\u793a\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u4eec\u8981\u7f16\u5199\u4e00\u4e2a\u91d1\u878d\u811a\u672c\uff0c\u5b83\u4ece\u7528\u6237\u8f93\u5165\u4e2d\u89e3\u6790\u6570\u5b57\uff0c\u5e76\u8fdb\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u91d1\u878d\u8ba1\u7b97\uff0c\u540c\u65f6\u5904\u7406\u53ef\u80fd\u7684\u9519\u8bef\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u5728<code>main.rs</code>\u4e2d\u521b\u5efa\u4e00\u4e2aRust\u9879\u76ee\uff1a</p> <pre><code>use std::error::Error;\nuse std::fmt;\n\n// \u5b9a\u4e49\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\n#[derive(Debug)]\nenum FinancialError {\n    InvalidInput,\n    DivisionByZero,\n}\n\nimpl fmt::Display for FinancialError {\n    fn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result {\n        match self {\n            FinancialError::InvalidInput =&gt; write!(f, \"Invalid input\"),\n            FinancialError::DivisionByZero =&gt; write!(f, \"Division by zero\"),\n        }\n    }\n}\n\nimpl Error for FinancialError {}\n\nfn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {\n    // \u6a21\u62df\u7528\u6237\u8f93\u5165\n    let input = \"10\";\n\n    // \u89e3\u6790\u7528\u6237\u8f93\u5165\u4e3a\u6570\u5b57\n    let num: i32 = input\n        .parse()\n        .map_err(|_| Box::new(FinancialError::InvalidInput))?; // \u4f7f\u7528Box\u5305\u88c5\u9519\u8bef\n\n    // \u68c0\u67e5\u9664\u4ee50\u7684\u60c5\u51b5\n    if num == 0 {\n        return Err(Box::new(FinancialError::DivisionByZero));\n    }\n\n    // \u8fdb\u884c\u4e00\u4e9b\u91d1\u878d\u8ba1\u7b97\n    let result = 100 / num;\n\n    println!(\"Result: {}\", result);\n\n    Ok(())\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b<code>FinancialError</code>\uff0c\u5b83\u5305\u62ec\u4e24\u79cd\u53ef\u80fd\u7684\u9519\u8bef\uff1a<code>InvalidInput</code>\u548c<code>DivisionByZero</code>\u3002\u6211\u4eec\u8fd8\u5b9e\u73b0\u4e86<code>Error</code>\u548c<code>Display</code> trait\uff0c\u4ee5\u4fbf\u80fd\u591f\u683c\u5f0f\u5316\u9519\u8bef\u6d88\u606f\u3002</p> <p>\u5f53\u4f60\u8fd0\u884c\u4e0a\u8ff0Rust\u4ee3\u7801\u65f6\uff0c\u53ef\u80fd\u7684\u6267\u884c\u540e\u8fd4\u56de\u7684\u9519\u8bef\u60c5\u51b5\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u6210\u529f\u60c5\u51b5\uff1a\u5982\u679c\u7528\u6237\u8f93\u5165\u80fd\u591f\u6210\u529f\u89e3\u6790\u4e3a\u6570\u5b57\u4e14\u4e0d\u7b49\u4e8e\u96f6\uff0c\u7a0b\u5e8f\u5c06\u6267\u884c\u91d1\u878d\u8ba1\u7b97\uff0c\u5e76\u6253\u5370\u7ed3\u679c\uff0c\u7136\u540e\u8fd4\u56de\u6210\u529f\u7684<code>Ok(())</code>\u3002</p> </li> <li> <p>\u65e0\u6548\u8f93\u5165\u9519\u8bef\uff1a\u5982\u679c\u7528\u6237\u8f93\u5165\u65e0\u6cd5\u89e3\u6790\u4e3a\u6570\u5b57\uff0c\u4f8b\u5982\u8f93\u5165\u4e86\u975e\u6570\u5b57\u5b57\u7b26\uff0c\u7a0b\u5e8f\u5c06\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\"Invalid input\"\u9519\u8bef\u6d88\u606f\u7684<code>Box&lt;FinancialError&gt;</code>\u3002</p> </li> <li> <p>\u9664\u96f6\u9519\u8bef\uff1a\u5982\u679c\u7528\u6237\u8f93\u5165\u89e3\u6790\u4e3a\u6570\u5b57\u4e14\u4e3a\u96f6\uff0c\u7a0b\u5e8f\u5c06\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\"Division by zero\"\u9519\u8bef\u6d88\u606f\u7684<code>Box&lt;FinancialError&gt;</code>\u3002</p> </li> </ol> <p>\u4e0b\u9762\u662f\u5728\u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u793a\u4f8b\u8f93\u51fa\uff1a</p> <p>\u6210\u529f\u60c5\u51b5\uff1a</p> <pre><code>Result: 10\n</code></pre> <p>\u65e0\u6548\u8f93\u5165\u9519\u8bef\u60c5\u51b5\uff1a</p> <pre><code>Error: Invalid input\n</code></pre> <p>\u9664\u96f6\u9519\u8bef\u60c5\u51b5\uff1a</p> <pre><code>Error: Division by zero\n</code></pre> <p>\u8fd9\u4e9b\u662f\u53ef\u80fd\u7684\u6267\u884c\u540e\u8fd4\u56de\u7684\u9519\u8bef\u793a\u4f8b\uff0c\u53d6\u51b3\u4e8e\u7528\u6237\u7684\u8f93\u5165\u548c\u811a\u672c\u4e2d\u7684\u903b\u8f91\u3002\u7a0b\u5e8f\u80fd\u591f\u901a\u8fc7\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\u548c<code>Result</code>\u7c7b\u578b\u6765\u660e\u786e\u6307\u793a\u53d1\u751f\u7684\u9519\u8bef\uff0c\u5e76\u63d0\u4f9b\u76f8\u5e94\u7684\u9519\u8bef\u6d88\u606f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#3","title":"\u6848\u4f8b3\uff1a\u591a\u7ebf\u7a0b\u5171\u4eab\u6570\u636e","text":"<p>\u53e6\u4e00\u4e2a\u5e38\u89c1\u7684\u60c5\u51b5\u662f\u5f53\u6211\u4eec\u60f3\u8981\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u65f6\u3002\u5982\u679c\u6570\u636e\u5b58\u50a8\u5728\u6808\u4e0a\uff0c\u5176\u4ed6\u7ebf\u7a0b\u65e0\u6cd5\u8bbf\u95ee\u5b83\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5728\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u6570\u636e\uff0c\u5c31\u9700\u8981\u5c06\u6570\u636e\u5b58\u50a8\u5728\u5806\u4e0a\u3002\u4f7f\u7528Box\u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u4fbf\u65b9\u5f0f\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u6211\u4eec\u8f7b\u677e\u5730\u5728\u5806\u4e0a\u5206\u914d\u6570\u636e\uff0c\u5e76\u5728\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u5b83\u3002</p> <p>\u5f53\u9700\u8981\u5728\u591a\u7ebf\u7a0b\u548c\u5e76\u53d1\u7684\u91d1\u878d\u811a\u672c\u4e2d\u5171\u4eab\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528<code>Box</code>\u6765\u7ba1\u7406\u6570\u636e\u5e76\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u6027\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528<code>Box</code>\u6765\u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u7684\u6570\u636e\u6c60\uff0c\u4ee5\u4fbf\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u8bfb\u5199\u5b83\uff1a</p> <pre><code>use std::sync::{Arc, Mutex};\nuse std::thread;\n\n// \u5b9a\u4e49\u5171\u4eab\u7684\u6570\u636e\u7ed3\u6784\n#[allow(dead_code)] \n#[derive(Debug)]\nstruct FinancialData {\n    // \u8fd9\u91cc\u53ef\u4ee5\u653e\u5165\u91d1\u878d\u6570\u636e\u7684\u5b57\u6bb5\n    value: f64,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u7684\u6570\u636e\u6c60\uff0c\u5b58\u50a8FinancialData\u7684Box\n    let shared_data_pool: Arc&lt;Mutex&lt;Vec&lt;Box&lt;FinancialData&gt;&gt;&gt;&gt; = Arc::new(Mutex::new(Vec::new()));\n\n    // \u521b\u5efa\u591a\u4e2a\u5199\u7ebf\u7a0b\u6765\u6dfb\u52a0\u6570\u636e\u5230\u6570\u636e\u6c60\n    let num_writers = 4;\n    let mut writer_handles = vec![];\n\n    for i in 0..num_writers {\n        let shared_data_pool = Arc::clone(&amp;shared_data_pool);\n\n        let handle = thread::spawn(move || {\n            // \u5728\u4e0d\u540c\u7ebf\u7a0b\u4e2d\u521b\u5efa\u65b0\u7684FinancialData\u5e76\u6dfb\u52a0\u5230\u6570\u636e\u6c60\n            let new_data = FinancialData {\n                value: i as f64 * 100.0, // \u4e3e\u4f8b\uff1a\u5047\u8bbe\u6bcf\u4e2a\u7ebf\u7a0b\u6dfb\u52a0\u7684\u6570\u636e\u4e0d\u540c\n            };\n\n            let mut data_pool = shared_data_pool.lock().unwrap();\n            data_pool.push(Box::new(new_data));\n        });\n\n        writer_handles.push(handle);\n    }\n\n    // \u521b\u5efa\u591a\u4e2a\u8bfb\u7ebf\u7a0b\u6765\u8bfb\u53d6\u6570\u636e\u6c60\n    let num_readers = 2;\n    let mut reader_handles = vec![];\n\n    for _ in 0..num_readers {\n        let shared_data_pool = Arc::clone(&amp;shared_data_pool);\n\n        let handle = thread::spawn(move || {\n            // \u5728\u4e0d\u540c\u7ebf\u7a0b\u4e2d\u8bfb\u53d6\u6570\u636e\u6c60\u7684\u5185\u5bb9\n            let data_pool = shared_data_pool.lock().unwrap();\n            for data in &amp;*data_pool {\n                println!(\"Reader thread - Data: {:?}\", data);\n            }\n        });\n\n        reader_handles.push(handle);\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u5199\u7ebf\u7a0b\u5b8c\u6210\n    for handle in writer_handles {\n        handle.join().unwrap();\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u8bfb\u7ebf\u7a0b\u5b8c\u6210\n    for handle in reader_handles {\n        handle.join().unwrap();\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>Reader thread - Data: FinancialData { value: 300.0 }\nReader thread - Data: FinancialData { value: 0.0 }\nReader thread - Data: FinancialData { value: 100.0 }\nReader thread - Data: FinancialData { value: 300.0 }\nReader thread - Data: FinancialData { value: 0.0 }\nReader thread - Data: FinancialData { value: 100.0 }\nReader thread - Data: FinancialData { value: 200.0 }\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5171\u4eab\u7684\u6570\u636e\u6c60\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86<code>Box&lt;FinancialData&gt;</code>\u3002\u591a\u4e2a**\u5199\u7ebf\u7a0b**\u7528\u4e8e\u521b\u5efa\u65b0\u7684<code>FinancialData</code>\u5e76\u5c06\u5176\u6dfb\u52a0\u5230\u6570\u636e\u6c60\uff0c\u800c\u591a\u4e2a**\u8bfb\u7ebf\u7a0b**\u7528\u4e8e\u8bfb\u53d6\u6570\u636e\u6c60\u7684\u5185\u5bb9\u3002<code>Arc</code>\u548c<code>Mutex</code>\u7528\u4e8e\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u6027\uff0c\u4ee5\u5141\u8bb8\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u6570\u636e\u6c60\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528<code>Box</code>\u548c\u7ebf\u7a0b\u6765\u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u7684\u6570\u636e\u6c60\uff0c\u4ee5\u6ee1\u8db3\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u591a\u7ebf\u7a0b\u548c\u5e76\u53d1\u9700\u6c42\u3002\u6ce8\u610f\uff0c<code>FinancialData</code>\u7ed3\u6784\u4f53\u53ea\u662f\u793a\u4f8b\u4e2d\u7684\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u5b9a\u4e49\u81ea\u5df1\u7684\u91d1\u878d\u6570\u636e\u7ed3\u6784\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#57-multithreading","title":"5.7 \u591a\u7ebf\u7a0b\u5904\u7406(Multithreading)","text":"<p>\u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u591a\u7ebf\u7a0b\u6765\u5e76\u884c\u5904\u7406\u4efb\u52a1\u3002Rust\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5185\u7f6e\u7684\u5de5\u5177\u548c\u6807\u51c6\u5e93\u652f\u6301\u6765\u5b9e\u73b0\u591a\u7ebf\u7a0b\u7f16\u7a0b\u3002\u4ee5\u4e0b\u662f\u4f7f\u7528Rust\u8fdb\u884c\u591a\u7ebf\u7a0b\u5904\u7406\u7684\u57fa\u672c\u6b65\u9aa4\uff1a</p> <ol> <li>\u521b\u5efa\u7ebf\u7a0b\uff1a    \u4f60\u53ef\u4ee5\u4f7f\u7528<code>std::thread</code>\u6a21\u5757\u6765\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u521b\u5efa\u5355\u4e2a\u7ebf\u7a0b\u7684\u793a\u4f8b\uff1a</li> </ol> <pre><code>use std::thread;\n\nfn main() {\n    let thread_handle = thread::spawn(|| {\n        // \u5728\u8fd9\u91cc\u7f16\u5199\u7ebf\u7a0b\u8981\u6267\u884c\u7684\u4ee3\u7801\n        println!(\"Hello from the thread!\");\n    });\n\n    // \u7b49\u5f85\u7ebf\u7a0b\u6267\u884c\u5b8c\u6210\n    thread_handle.join().unwrap(); //\u8f93\u51fa \"Hello from the thread!\"\n}\n</code></pre> <ol> <li>\u901a\u8fc7\u6d88\u606f\u4f20\u9012\u8fdb\u884c\u7ebf\u7a0b\u95f4\u901a\u4fe1\uff1a</li> </ol> <p>\u5f53\u591a\u4e2a\u7ebf\u7a0b\u9700\u8981\u5728Rust\u4e2d\u8fdb\u884c\u901a\u4fe1\uff0c\u5c31\u50cf\u670b\u53cb\u4e4b\u95f4\u901a\u8fc7\u7eb8\u6761\u4f20\u9012\u6d88\u606f\u4e00\u6837\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u5c31\u50cf\u4e00\u4e2a\u670b\u53cb\uff0c\u5b83\u4eec\u53ef\u4ee5\u72ec\u7acb\u5730\u5de5\u4f5c\uff0c\u4f46\u6709\u65f6\u9700\u8981\u4e92\u76f8\u4ea4\u6d41\u4fe1\u606f\u3002</p> <p>Rust\u63d0\u4f9b\u4e86\u4e00\u79cd\u53eb\u505a\u901a\u9053(channel)\u7684\u673a\u5236\uff0c\u5c31\u50cf\u662f\u670b\u53cb\u4eec\u4e4b\u95f4\u4f20\u9012\u7eb8\u6761\u7684\u65b9\u5f0f\u3002\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u628a\u6d88\u606f\u5199\u5728\u7eb8\u6761\u4e0a\uff0c\u7136\u540e\u628a\u7eb8\u6761\u653e\u5728\u901a\u9053\u91cc\u3002\u800c\u5176\u4ed6\u7ebf\u7a0b\u53ef\u4ee5\u4ece\u901a\u9053\u91cc\u62ff\u5230\u8fd9\u4e9b\u6d88\u606f\u7eb8\u6761\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u5728Rust\u4e2d\u4f7f\u7528\u901a\u9053\u8fdb\u884c\u7ebf\u7a0b\u95f4\u901a\u4fe1\uff1a</p> <pre><code>use std::sync::mpsc; // mpsc \u662f Rust \u4e2d\u7684\u4e00\u79cd\u6d88\u606f\u4f20\u9012\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5e2e\u52a9\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u4e92\u76f8\u53d1\u9001\u6d88\u606f\uff0c\u4f46\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u63a5\u6536\u8fd9\u4e9b\u6d88\u606f\u3002\nuse std::thread;\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u901a\u9053\uff0c\u5c31\u50cf\u51c6\u5907\u4e00\u6839\u4f20\u9012\u7eb8\u6761\u7684\u7ba1\u9053\n    let (sender, receiver) = mpsc::channel();\n\n    // \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8d1f\u8d23\u53d1\u9001\u6d88\u606f\n    let sender_thread = thread::spawn(move || {\n        let message = \"Hello from the sender!\";\n        sender.send(message).unwrap(); // \u53d1\u9001\u6d88\u606f\n    });\n\n    // \u521b\u5efa\u53e6\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u8d1f\u8d23\u63a5\u6536\u6d88\u606f\n    let receiver_thread = thread::spawn(move || {\n        let received_message = receiver.recv().unwrap(); // \u63a5\u6536\u6d88\u606f\n        println!(\"Received: {}\", received_message);\n    });\n\n    // \u7b49\u5f85\u7ebf\u7a0b\u5b8c\u6210\n    sender_thread.join().unwrap();\n    receiver_thread.join().unwrap(); // \u8f93\u51fa\"Received: Hello from the sender!\"\n}\n</code></pre> <ol> <li>\u7ebf\u7a0b\u5b89\u5168\u6027\u548c\u5171\u4eab\u6570\u636e\uff1a    \u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u8981\u6ce8\u610f\u786e\u4fdd\u5bf9\u5171\u4eab\u6570\u636e\u7684\u8bbf\u95ee\u662f\u5b89\u5168\u7684\u3002Rust\u901a\u8fc7Ownership\u548cBorrowing\u7cfb\u7edf\u6765\u5f3a\u5236\u6267\u884c\u7ebf\u7a0b\u5b89\u5168\u6027\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528<code>std::sync</code>\u6a21\u5757\u4e2d\u7684<code>Mutex</code>\u3001<code>Arc</code>\u7b49\u7c7b\u578b\u6765\u7ba1\u7406\u5171\u4eab\u6570\u636e\u7684\u8bbf\u95ee\u3002</li> </ol> <pre><code>use std::sync::{Arc, Mutex};\nuse std::thread;\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u6570\u636e\u7ed3\u6784\uff0c\u4f7f\u7528Arc\u5305\u88c5Mutex\u4ee5\u5b9e\u73b0\u591a\u7ebf\u7a0b\u5b89\u5168\n    let shared_data = Arc::new(Mutex::new(0));\n\n    // \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u56db\u4e2a\u7ebf\u7a0b\u7684\u5411\u91cf\n    let threads: Vec&lt;_&gt; = (0..4)\n        .map(|_| {\n            // \u514b\u9686\u5171\u4eab\u6570\u636e\u4ee5\u4fbf\u5728\u7ebf\u7a0b\u95f4\u5171\u4eab\n            let data = Arc::clone(&amp;shared_data);\n\n            // \u5728\u7ebf\u7a0b\u4e2d\u6267\u884c\u7684\u4ee3\u7801\u5757\uff0c\u9501\u5b9a\u6570\u636e\u5e76\u9012\u589e\u5b83\n            thread::spawn(move || {\n                let mut data = data.lock().unwrap();\n                *data += 1;\n            })\n        })\n        .collect();\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\n    for thread in threads {\n        thread.join().unwrap();\n    }\n\n    // \u9501\u5b9a\u5171\u4eab\u6570\u636e\u5e76\u83b7\u53d6\u7ed3\u679c\n    let result = *shared_data.lock().unwrap();\n\n    // \u8f93\u51fa\u7ed3\u679c\n    println!(\"\u5171\u4eab\u6570\u636e: {}\", result);  //\u8f93\u51fa\"\u5171\u4eab\u6570\u636e: 4\"\n}\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5728Rust\u4e2d\u4f7f\u7528\u591a\u7ebf\u7a0b\u5904\u7406\u4efb\u52a1\u3002\u591a\u7ebf\u7a0b\u7f16\u7a0b\u9700\u8981\u5c0f\u5fc3\u5904\u7406\u5e76\u53d1\u95ee\u9898\uff0c\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u6027\u3002\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u66f4\u590d\u6742\u7684\u540c\u6b65\u548c\u901a\u4fe1\u673a\u5236\u6765\u5904\u7406\u4e0d\u540c\u7684\u5e76\u53d1\u573a\u666f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#58","title":"5.8 \u4e92\u65a5\u9501","text":"<p>\u4e92\u65a5\u9501(Mutex)\u662f\u4e00\u79cd\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\u975e\u5e38\u6709\u7528\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u53ef\u80fd\u5f15\u53d1\u7684\u95ee\u9898\u3002\u60f3\u8c61\u4e00\u4e0b\u4f60\u548c\u4f60\u7684\u670b\u53cb\u4eec\u5728\u4e00\u8d77\u73a9\u4e00\u4e2a\u6e38\u620f\uff0c\u4f60\u4eec\u9700\u8981\u5171\u4eab\u4e00\u4e2a\u7269\u54c1\uff0c\u6bd4\u5982\u4e00\u53f0\u6e38\u620f\u673a\u3002</p> <p>\u73b0\u5728\uff0c\u5982\u679c\u6ca1\u6709\u4e92\u65a5\u9501\uff0c\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u8bd5\u56fe\u540c\u65f6\u64cd\u4f5c\u8fd9\u53f0\u6e38\u620f\u673a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6df7\u4e71\uff0c\u6e38\u620f\u673a\u5d29\u6e83\uff0c\u6216\u8005\u73a9\u6e38\u620f\u65f6\u51fa\u73b0\u5947\u602a\u7684\u95ee\u9898\u3002\u4e92\u65a5\u9501\u5c31\u50cf\u4e00\u4e2a\u865a\u62df\u7684\u628a\u624b\uff0c\u53ea\u6709\u4e00\u4e2a\u4eba\u80fd\u591f\u63e1\u4f4f\u5b83\uff0c\u5176\u4ed6\u4eba\u5fc5\u987b\u7b49\u5f85\u3002\u5f53\u4e00\u4e2a\u4eba\u4f7f\u7528\u6e38\u620f\u673a\u5b8c\u6210\u540e\uff0c\u4ed6\u4eec\u4f1a\u653e\u4e0b\u8fd9\u4e2a\u628a\u624b\uff0c\u7136\u540e\u5176\u4ed6\u4eba\u53ef\u4ee5\u7ee7\u7eed\u73a9\u3002</p> <p>\u8fd9\u6837\uff0c\u4e92\u65a5\u9501\u786e\u4fdd\u5728\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u4eba\u80fd\u591f\u4f7f\u7528\u6e38\u620f\u673a\uff0c\u9632\u6b62\u4e86\u7ade\u4e89\u548c\u6df7\u4e71\u3002\u5728\u7f16\u7a0b\u4e2d\uff0c\u5b83\u786e\u4fdd\u4e86\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u540c\u65f6\u4fee\u6539\u540c\u4e00\u4e2a\u6570\u636e\uff0c\u4ece\u800c\u907f\u514d\u4e86\u6570\u636e\u9519\u4e71\u548c\u7a0b\u5e8f\u5d29\u6e83\u3002</p> <p>\u5728Rust\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u786e\u4fdd\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u80fd\u591f\u5b89\u5168\u5730\u8bbf\u95ee\u5171\u4eab\u6570\u636e\uff0c\u907f\u514d\u7ade\u6001\u6761\u4ef6(Race Conditions)\u548c\u6570\u636e\u7ade\u4e89(Data Races)\u3002</p> <p>\u4ee5\u4e0b\u662f<code>Mutex</code>\u7684\u8be6\u7ec6\u7279\u5f81\uff1a</p> <ol> <li> <p>\u4e92\u65a5\u6027(Mutual Exclusion)\uff1a<code>Mutex</code>\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5b9e\u73b0**\u4e92\u65a5\u6027**\uff0c\u5373**\u4e00\u6b21\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u8bbf\u95ee\u7531\u9501\u4fdd\u62a4\u7684\u5171\u4eab\u8d44\u6e90**\u3002\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0b\u5df2\u7ecf\u83b7\u5f97\u4e86<code>Mutex</code>\u7684\u9501\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5fc5\u987b\u7b49\u5f85\u76f4\u5230\u8be5\u7ebf\u7a0b\u91ca\u653e\u9501\u3002</p> </li> <li> <p>\u5185\u90e8\u53ef\u53d8\u6027(Interior Mutability)\uff1a\u5728Rust\u4e2d\uff0c<code>Mutex</code>\u901a\u5e38\u4e0e\u5185\u90e8\u53ef\u53d8\u6027(Interior Mutability)\u4e00\u8d77\u4f7f\u7528\u3002\u8fd9\u610f\u5473\u7740**\u4f60\u53ef\u4ee5\u5728\u4e0d\u4f7f\u7528<code>mut</code>\u5173\u952e\u5b57\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u7531<code>Mutex</code>\u4fdd\u62a4\u7684\u6570\u636e**\u3002\u8fd9\u662f\u901a\u8fc7<code>Mutex</code>\u63d0\u4f9b\u7684<code>lock</code>\u65b9\u6cd5\u6765\u5b9e\u73b0\u7684\u3002</p> </li> <li> <p>\u83b7\u53d6\u548c\u91ca\u653e\u9501\uff1a\u8981\u4f7f\u7528<code>Mutex</code>\uff0c\u7ebf\u7a0b\u5fc5\u987b\u9996\u5148\u83b7\u53d6\u9501\uff0c\u7136\u540e\u5728\u4e34\u754c\u533a\u5185\u6267\u884c\u64cd\u4f5c\uff0c\u6700\u540e\u91ca\u653e\u9501\u3002\u8fd9\u901a\u5e38\u662f\u901a\u8fc7<code>lock</code>\u65b9\u6cd5\u6765\u5b8c\u6210\u7684\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u5f97\u9501\u65f6\uff0c\u5176\u4ed6\u7ebf\u7a0b\u5c06\u88ab\u963b\u585e\uff0c\u76f4\u5230\u9501\u88ab\u91ca\u653e\u3002</p> </li> </ol> <pre><code>use std::sync::{Mutex, Arc};\nuse std::thread;\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2aMutex\uff0c\u7528\u4e8e\u5171\u4eab\u6574\u6570\n    let counter = Arc::new(Mutex::new(0));\n    let mut handles = vec![];\n\n    for _ in 0..10 {\n        let counter = Arc::clone(&amp;counter);\n        let handle = thread::spawn(move || {\n            // \u83b7\u53d6\u9501\n            let mut num = counter.lock().unwrap();\n            *num += 1; // \u5728\u4e34\u754c\u533a\u5185\u4fee\u6539\u5171\u4eab\u6570\u636e\n        });\n        handles.push(handle);\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\n    for handle in handles {\n        handle.join().unwrap();\n    }\n\n    println!(\"Result: {}\", *counter.lock().unwrap());\n}\n</code></pre> <ol> <li>\u9519\u8bef\u5904\u7406\uff1a\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528<code>unwrap</code>\u65b9\u6cd5\u6765\u5904\u7406<code>lock</code>\u53ef\u80fd\u8fd4\u56de\u7684\u9519\u8bef\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u66f4\u590d\u6742\u7684\u9519\u8bef\u5904\u7406\u6765\u5904\u7406\u9501\u7684\u83b7\u53d6\u5931\u8d25\u60c5\u51b5\u3002</li> </ol> <p>\u603b\u4e4b\uff0c<code>Mutex</code>\u662fRust\u4e2d\u4e00\u79cd\u975e\u5e38\u91cd\u8981\u7684\u540c\u6b65\u539f\u8bed\uff0c\u7528\u4e8e\u4fdd\u62a4\u5171\u4eab\u6570\u636e\u514d\u53d7\u5e76\u53d1\u8bbf\u95ee\u7684\u95ee\u9898\u3002\u901a\u8fc7\u6b63\u786e\u5730\u4f7f\u7528<code>Mutex</code>\uff0c\u4f60\u53ef\u4ee5\u786e\u4fdd\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\u548c\u53ef\u9760\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#lock","title":"\u8865\u5145\u5b66\u4e60\uff1alock\u65b9\u6cd5","text":"<p>\u4e0a\u9762\u7528\u5230\u7684 <code>lock</code> \u65b9\u6cd5\u662f\u7528\u6765\u5904\u7406\u4e92\u65a5\u9501(Mutex)\u7684\u4e00\u79cd\u7279\u6b8a\u51fd\u6570\u3002\u5b83\u7684\u4f5c\u7528\u6709\u70b9\u50cf\u4e00\u628a\u201c\u94a5\u5319\u201d\uff0c\u53ea\u6709\u62ff\u5230\u8fd9\u628a\u94a5\u5319\u7684\u7ebf\u7a0b\u624d\u80fd\u8fdb\u5165\u88ab\u9501\u4f4f\u7684\u623f\u95f4\uff0c\u4e5f\u5c31\u662f\u4e34\u754c\u533a\uff0c\u4ece\u800c\u5b89\u5168\u5730\u4fee\u6539\u5171\u4eab\u7684\u6570\u636e\u3002</p> <p>\u60f3\u8c61\u4e00\u4e0b\uff0c\u4f60\u548c\u4f60\u7684\u670b\u53cb\u4eec\u4e00\u8d77\u73a9\u4e00\u4e2a\u6e38\u620f\uff0c\u800c\u8fd9\u4e2a\u6e38\u620f\u6709\u4e00\u4e2a\u5f88\u9177\u7684\u73a9\u5177\uff0c\u4f46\u662f\u53ea\u80fd\u4e00\u4e2a\u4eba\u73a9\u3002\u5927\u5bb6\u90fd\u60f3\u8981\u73a9\u8fd9\u4e2a\u73a9\u5177\uff0c\u4f46\u4e0d\u80fd\u540c\u65f6\u3002\u8fd9\u65f6\u5c31\u9700\u8981\u7528\u5230 <code>lock</code> \u65b9\u6cd5\u3002</p> <ol> <li> <p>\u83b7\u53d6\u9501\uff1a\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0b\u60f3\u8981\u8fdb\u5165\u8fd9\u4e2a\u201c\u73a9\u5177\u623f\u95f4\u201d\uff0c\u5b83\u5fc5\u987b\u4f7f\u7528 <code>lock</code> \u65b9\u6cd5\uff0c\u5c31\u50cf\u4f7f\u7528\u4e00\u628a\u7279\u6b8a\u7684\u94a5\u5319\u3002\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u62ff\u5230\u8fd9\u4e2a\u94a5\u5319\uff0c\u8fdb\u5165\u623f\u95f4\uff0c\u7136\u540e\u8fdb\u884c\u64cd\u4f5c\u3002</p> </li> <li> <p>\u5728\u4e34\u754c\u533a\u5185\u5de5\u4f5c\uff1a\u4e00\u65e6\u7ebf\u7a0b\u62ff\u5230\u4e86\u94a5\u5319\uff0c\u5c31\u53ef\u4ee5\u8fdb\u5165\u623f\u95f4\uff0c\u4e5f\u5c31\u662f\u4e34\u754c\u533a\uff0c\u5b89\u5168\u5730\u73a9\u800d\u6216\u4fee\u6539\u5171\u4eab\u6570\u636e\u3002</p> </li> <li> <p>\u91ca\u653e\u9501\uff1a\u5f53\u7ebf\u7a0b\u5b8c\u6210\u4e86\u623f\u95f4\u5185\u7684\u5de5\u4f5c\uff0c\u5c31\u9700\u8981\u628a\u94a5\u5319\u5f52\u8fd8\uff0c\u4e5f\u5c31\u662f\u91ca\u653e\u9501\u3002\u8fd9\u65f6\u5176\u4ed6\u7ebf\u7a0b\u5c31\u6709\u673a\u4f1a\u83b7\u53d6\u9501\uff0c\u8fdb\u5165\u4e34\u754c\u533a\uff0c\u7ee7\u7eed\u5de5\u4f5c\u3002</p> </li> </ol> <p><code>lock</code> \u65b9\u6cd5\u786e\u4fdd\u4e86\u5728\u4efb\u4f55\u65f6\u5019\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u8fdb\u5165\u4e34\u754c\u533a\uff0c\u4ece\u800c\u907f\u514d\u4e86\u6570\u636e\u9519\u4e71\u548c\u6df7\u4e71\u3002\u8fd9\u5c31\u50cf\u662f\u4e00\u4e2a\u73a9\u5177\u7684\u63a7\u5236\u94a5\u5319\uff0c\u7528\u6765\u7ba1\u7406\u5927\u5bb6\u5bf9\u73a9\u5177\u7684\u8bbf\u95ee\uff0c\u8ba9\u7a0b\u5e8f\u66f4\u52a0\u53ef\u9760\u548c\u5b89\u5168\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#_3","title":"\u6848\u4f8b\uff1a\u5b89\u5168\u5730\u66f4\u65b0\u8d26\u6237\u4f59\u989d","text":"<p>\u5728\u91d1\u878d\u9886\u57df\uff0c<code>Mutex</code> \u548c\u591a\u7ebf\u7a0b\u6280\u672f\u53ef\u4ee5\u7528\u4e8e\u786e\u4fdd\u5bf9\u5171\u4eab\u6570\u636e\u7684\u5b89\u5168\u8bbf\u95ee\uff0c\u5c24\u5176\u662f\u5728\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u548c\u66f4\u65b0\u8d26\u6237\u4f59\u989d\u7b49\u91cd\u8981\u91d1\u878d\u6570\u636e\u65f6\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5b8c\u6574\u7684 Rust \u4ee3\u7801\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528 <code>Mutex</code> \u6765\u5904\u7406\u591a\u7ebf\u7a0b\u7684\u5b58\u6b3e\u548c\u53d6\u6b3e\u64cd\u4f5c\uff0c\u5e76\u786e\u4fdd\u8d26\u6237\u4f59\u989d\u7684\u4e00\u81f4\u6027\u548c\u6b63\u786e\u6027\uff1a</p> <pre><code>use std::sync::{Mutex, Arc};\nuse std::thread;\n\n// \u5b9a\u4e49\u94f6\u884c\u8d26\u6237\u7ed3\u6784\nstruct BankAccount {\n    balance: f64,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2aMutex\uff0c\u7528\u4e8e\u5305\u88c5\u94f6\u884c\u8d26\u6237\n    let account = Arc::new(Mutex::new(BankAccount { balance: 1000.0 }));\n    let mut handles = vec![];\n\n    // \u6a21\u62df\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5b58\u6b3e\u548c\u53d6\u6b3e\u64cd\u4f5c\n    for _ in 0..5 {\n        let account = Arc::clone(&amp;account);\n        let handle = thread::spawn(move || {\n            // \u83b7\u53d6\u9501\n            let mut account = account.lock().unwrap();\n\n            // \u6a21\u62df\u5b58\u6b3e\u548c\u53d6\u6b3e\u64cd\u4f5c\n            let deposit_amount = 200.0;\n            let withdrawal_amount = 150.0;\n\n            // \u5b58\u6b3e\n            account.balance += deposit_amount;\n\n            // \u53d6\u6b3e\n            if account.balance &gt;= withdrawal_amount {\n                account.balance -= withdrawal_amount;\n            }\n        });\n        handles.push(handle);\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\n    for handle in handles {\n        handle.join().unwrap();\n    }\n\n    // \u83b7\u53d6\u9501\u5e76\u6253\u5370\u6700\u7ec8\u7684\u8d26\u6237\u4f59\u989d\n    let account = account.lock().unwrap();\n    println!(\"Final Balance: ${:.2}\", account.balance);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Final Balance: $1250.00\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4ee3\u7801\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a\u94f6\u884c\u8d26\u6237\u7ed3\u6784 <code>BankAccount</code>\uff0c\u5305\u62ec\u4e00\u4e2a\u4f59\u989d\u5b57\u6bb5\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a <code>Mutex</code> \u6765\u5305\u88c5\u8fd9\u4e2a\u8d26\u6237\uff0c\u4ee5\u786e\u4fdd\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u5b89\u5168\u5730\u8bbf\u95ee\u5b83\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u591a\u4e2a\u7ebf\u7a0b\u6765\u6a21\u62df\u5b58\u6b3e\u548c\u53d6\u6b3e\u64cd\u4f5c\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u9996\u5148\u4f7f\u7528 <code>lock</code> \u65b9\u6cd5\u83b7\u53d6\u9501\uff0c\u7136\u540e\u8fdb\u884c\u5b58\u6b3e\u548c\u53d6\u6b3e\u64cd\u4f5c\uff0c\u6700\u540e\u91ca\u653e\u9501\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\uff0c\u83b7\u53d6\u9501\uff0c\u5e76\u6253\u5370\u51fa\u6700\u7ec8\u7684\u8d26\u6237\u4f59\u989d\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#59-heap-allocated-pointers","title":"5.9 \u5806\u5206\u914d\u7684\u6307\u9488(heap allocated pointers)","text":"<p>\u5728Rust\u4e2d\uff0c\u5806\u5206\u914d\u7684\u6307\u9488\u901a\u5e38\u662f\u901a\u8fc7\u4f7f\u7528\u5f15\u7528\u8ba1\u6570(Reference Counting)\u6216\u667a\u80fd\u6307\u9488(Smart Pointers)\u6765\u7ba1\u7406\u5806\u4e0a\u7684\u6570\u636e\u7684\u6307\u9488\u3002Rust\u7684\u5b89\u5168\u6027\u548c\u6240\u6709\u6743\u7cfb\u7edf\u8981\u6c42\u5728\u8bbf\u95ee\u5806\u4e0a\u7684\u6570\u636e\u65f6\u8fdb\u884c\u660e\u786e\u7684\u5185\u5b58\u7ba1\u7406\uff0c\u800c\u5806\u5206\u914d\u7684\u6307\u9488\u6b63\u662f\u4e3a\u6b64\u76ee\u7684\u800c\u8bbe\u8ba1\u7684\u3002\u4e0b\u9762\u5c06\u8be6\u7ec6\u89e3\u91ca\u5806\u5206\u914d\u7684\u6307\u9488\u548c\u5b83\u4eec\u5728Rust\u4e2d\u7684\u4f7f\u7528\u3002</p> <p>\u5728Rust\u4e2d\uff0c\u5e38\u89c1\u7684\u5806\u5206\u914d\u7684\u6307\u9488\u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a</p> <ol> <li> <p><code>Box&lt;T&gt;</code> \u667a\u80fd\u6307\u9488\uff1a</p> </li> <li> <p><code>Box&lt;T&gt;</code> \u662fRust\u7684\u4e00\u79cd\u667a\u80fd\u6307\u9488\uff0c\u5b83\u7528\u4e8e\u5728\u5806\u4e0a\u5206\u914d\u5185\u5b58\u5e76\u7ba1\u7406\u5176\u751f\u547d\u5468\u671f\u3002</p> </li> <li><code>Box&lt;T&gt;</code> \u5141\u8bb8\u4f60\u5728\u5806\u4e0a\u5b58\u50a8\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>T</code> \u7684\u503c\uff0c\u5e76\u8d1f\u8d23\u5728\u5176\u8d85\u51fa\u4f5c\u7528\u57df\u65f6\u81ea\u52a8\u91ca\u653e\u8be5\u503c\u3002\u8fd9\u6d88\u9664\u4e86\u5e38\u89c1\u7684\u5185\u5b58\u6cc4\u6f0f\u548cUse-after-free\u9519\u8bef\u3002 \"(Use-after-free\" \u662f\u4e00\u79cd\u5e38\u89c1\u7684\u5185\u5b58\u5b89\u5168\u9519\u8bef\uff0c\u901a\u5e38\u53d1\u751f\u5728\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u5305\u62ecRust\u5728\u5185\u3002\u8fd9\u79cd\u9519\u8bef\u53d1\u751f\u5728\u7a0b\u5e8f\u8bd5\u56fe\u8bbf\u95ee\u5df2\u7ecf\u88ab\u91ca\u653e\u7684\u5185\u5b58\u533a\u57df\u65f6\u3002)</li> <li>\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>Box</code> \u6765\u521b\u5efa\u4e00\u4e2a\u5728\u5806\u4e0a\u5206\u914d\u7684\u6574\u6570\uff1a</li> </ol> <pre><code>let x = Box::new(42); // \u5728\u5806\u4e0a\u5206\u914d\u4e00\u4e2a\u6574\u6570\uff0c\u5e76\u5c06\u5b83\u5b58\u50a8\u5728Box\u4e2d\n</code></pre> <ol> <li> <p>\u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488(<code>Rc&lt;T&gt;</code> \u548c <code>Arc&lt;T&gt;</code>)\uff1a</p> </li> <li> <p><code>Rc&lt;T&gt;</code>(\u5f15\u7528\u8ba1\u6570)\u548c <code>Arc&lt;T&gt;</code>(\u539f\u5b50\u5f15\u7528\u8ba1\u6570)\u662fRust\u4e2d\u7684\u667a\u80fd\u6307\u9488\uff0c\u7528\u4e8e\u8ddf\u8e2a\u5806\u4e0a\u6570\u636e\u7684\u5f15\u7528\u8ba1\u6570\u3002\u5b83\u4eec\u5141\u8bb8\u591a\u4e2a\u6240\u6709\u8005\u5171\u4eab\u540c\u4e00\u5757\u5806\u5185\u5b58\uff0c\u76f4\u5230\u6240\u6709\u6240\u6709\u8005\u90fd\u79bb\u5f00\u4f5c\u7528\u57df\u4e3a\u6b62\u3002</p> </li> <li><code>Rc&lt;T&gt;</code> \u7528\u4e8e\u5355\u7ebf\u7a0b\u73af\u5883\uff0c\u800c <code>Arc&lt;T&gt;</code> \u7528\u4e8e\u591a\u7ebf\u7a0b\u73af\u5883\uff0c\u56e0\u4e3a\u540e\u8005\u5177\u6709\u539f\u5b50\u5f15\u7528\u8ba1\u6570\u3002</li> <li>\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>Rc</code> \u6765\u521b\u5efa\u4e00\u4e2a\u5806\u4e0a\u7684\u5b57\u7b26\u4e32\uff1a</li> </ol> <pre><code>use std::rc::Rc;\n\nlet s1 = Rc::new(String::from(\"hello\")); // \u521b\u5efa\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488\nlet s2 = s1.clone(); // \u514b\u9686\u6307\u9488\uff0c\u589e\u52a0\u5f15\u7528\u8ba1\u6570\n</code></pre> <p>\u8fd9\u4e9b\u5806\u5206\u914d\u7684\u6307\u9488\u5e2e\u52a9Rust\u7a0b\u5e8f\u5458\u5728\u4e0d\u8fdd\u53cd\u6240\u6709\u6743\u89c4\u5219\u7684\u60c5\u51b5\u4e0b\u7ba1\u7406\u5806\u4e0a\u7684\u6570\u636e\u3002\u5f53\u4e0d\u518d\u9700\u8981\u8fd9\u4e9b\u6570\u636e\u65f6\uff0c\u5b83\u4eec\u4f1a\u81ea\u52a8\u91ca\u653e\u5185\u5b58\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5185\u5b58\u6cc4\u6f0f\u548c\u5b89\u5168\u95ee\u9898\u7684\u98ce\u9669\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u5806\u5206\u914d\u7684\u6307\u9488\u5f88\u591a\u60c5\u51b5\u4e0b\u80fd\u63d0\u5347\u6027\u80fd\uff0c\u4f46\u662f\u4e5f\u53ef\u80fd\u4f1a\u5f15\u5165\u8fd0\u884c\u65f6\u5f00\u9500\uff0c\u56e0\u6b64\u5e94\u8c28\u614e\u4f7f\u7528\uff0c\u5c24\u5176\u662f\u5728\u9700\u8981\u9ad8\u6027\u80fd\u7684\u4ee3\u7801\u4e2d\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u518d\u6765\u8be6\u7ec6\u8bb2\u4e00\u4e0b<code>Rc&lt;T&gt;</code> \u548c <code>Arc&lt;T&gt;</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#591-rc-reference-counting","title":"5.9.1 <code>Rc</code> \u6307\u9488(Reference Counting)","text":"<p><code>Rc</code> \u8868\u793a\"\u5f15\u7528\u8ba1\u6570\"(Reference Counting)\uff0c\u5728\u5355\u7ebf\u7a0b\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u5b83\u5141\u8bb8\u591a\u4e2a\u6240\u6709\u8005\u5171\u4eab\u6570\u636e\uff0c\u4f46\u4e0d\u80fd\u7528\u4e8e\u591a\u7ebf\u7a0b\u5e76\u53d1\u3002\u662f\u6545\u53ef\u4ee5\u4f7f\u7528<code>Rc</code>(\u5f15\u7528\u8ba1\u6570)\u6765\u5171\u4eab\u6570\u636e\u5e76\u5728\u591a\u4e2a\u51fd\u6570\u4e4b\u95f4\u4f20\u9012\u53d8\u91cf\u3002</p> <p>\u793a\u4f8b\u4ee3\u7801\uff1a</p> <pre><code>use std::rc::Rc;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u6574\u6570\u5b57\u6bb5\n#[derive(Debug)]\nstruct Data {\n    value: i32,\n}\n\n// \u63a5\u53d7\u4e00\u4e2a\u5305\u542b Rc&lt;Data&gt; \u7684\u53c2\u6570\u7684\u51fd\u6570\nfn print_data(data: Rc&lt;Data&gt;) {\n    println!(\"Data: {:?}\", data);\n}\n\n// \u4fee\u6539 Rc&lt;Data&gt; \u7684\u503c\u7684\u51fd\u6570\nfn modify_data(data: Rc&lt;Data&gt;) -&gt; Rc&lt;Data&gt; {\n    println!(\"Modifying data...\");\n    Rc::new(Data {\n        value: data.value + 1,\n    })\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a Rc&lt;Data&gt; \u5b9e\u4f8b\n    let shared_data = Rc::new(Data { value: 42 });\n\n    // \u5728\u4e0d\u540c\u7684\u51fd\u6570\u4e4b\u95f4\u4f20\u9012 Rc&lt;Data&gt;\n    print_data(Rc::clone(&amp;shared_data)); // \u514b\u9686 Rc&lt;Data&gt; \u5e76\u4f20\u9012\u7ed9\u51fd\u6570\n    let modified_data = modify_data(Rc::clone(&amp;shared_data)); // \u514b\u9686 Rc&lt;Data&gt; \u5e76\u4f20\u9012\u7ed9\u51fd\u6570\n\n    // \u6253\u5370\u4fee\u6539\u540e\u7684\u6570\u636e\n    println!(\"Modified Data: {:?}\", modified_data);\n\n    // \u8fd9\u91cc\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 shared_data \u548c modified_data\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f Rc&lt;Data&gt; \u7684\u6240\u6709\u8005\n    println!(\"Shared Data: {:?}\", shared_data);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5305\u542b\u6574\u6570\u5b57\u6bb5\u7684<code>Data</code>\u7ed3\u6784\u4f53\uff0c\u5e76\u4f7f\u7528<code>Rc</code>\u5305\u88c5\u5b83\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a<code>Rc&lt;Data&gt;</code>\u5b9e\u4f8b\u5e76\u5728\u4e0d\u540c\u7684\u51fd\u6570\u4e4b\u95f4\u4f20\u9012\u5b83\u3002\u5728 <code>print_data</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u53ea\u662f\u6253\u5370\u4e86<code>Rc&lt;Data&gt;</code>\u7684\u503c\uff0c\u800c\u5728<code>modify_data</code>\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684<code>Rc&lt;Data&gt;</code>\u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u4fee\u6539\u4e86\u539f\u59cb\u6570\u636e\u7684\u503c\u3002\u7531\u4e8e<code>Rc</code>\u5141\u8bb8\u591a\u4e2a\u6240\u6709\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u51fd\u6570\u4e4b\u95f4\u4f20\u9012\u6570\u636e\uff0c\u800c\u4e0d\u9700\u8981\u62c5\u5fc3\u6240\u6709\u6743\u7684\u95ee\u9898\u3002</p> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Data: Data { value: 42 }\nModifying data...\nModified Data: Data { value: 43 }\nShared Data: Data { value: 42 }\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#592-arcatomic-reference-counting","title":"5.9.2  `Arc\u6307\u9488(Atomic Reference Counting)","text":"<p><code>Arc</code> \u8868\u793a\"\u539f\u5b50\u5f15\u7528\u8ba1\u6570\"(Atomic Reference Counting)\uff0c\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u5b83\u4e0e <code>Rc</code> \u7c7b\u4f3c\uff0c\u4f46\u5177\u5907\u7ebf\u7a0b\u5b89\u5168\u6027\u3002</p> <pre><code>use std::sync::Arc;\nuse std::thread;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u6574\u6570\u5b57\u6bb5\n#[allow(dead_code)] \n#[derive(Debug)]\nstruct Data {\n    value: i32,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a Arc&lt;Data&gt; \u5b9e\u4f8b\n    let shared_data = Arc::new(Data { value: 42 });\n\n    // \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4f20\u9012 Arc&lt;Data&gt; \u5230\u7ebf\u7a0b\u4e2d\n    let thread_data = Arc::clone(&amp;shared_data);\n\n    let handle = thread::spawn(move || {\n        // \u5728\u65b0\u7ebf\u7a0b\u4e2d\u6253\u5370 Arc&lt;Data&gt; \u7684\u503c\n        println!(\"Thread Data: {:?}\", thread_data);\n    });\n\n    // \u4e3b\u7ebf\u7a0b\u7ee7\u7eed\u4f7f\u7528 shared_data\n    println!(\"Main Data: {:?}\", shared_data);\n\n    // \u7b49\u5f85\u65b0\u7ebf\u7a0b\u5b8c\u6210\n    handle.join().unwrap();\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u6574\u6570\u5b57\u6bb5\u7684 <code>Data</code> \u7ed3\u6784\u4f53\uff0c\u5e76\u5c06\u5176\u7528 <code>Arc</code> \u5305\u88c5\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\uff0c\u5e76\u5728\u65b0\u7ebf\u7a0b\u4e2d\u6253\u5370\u4e86 <code>thread_data</code>(\u4e00\u4e2a\u514b\u9686\u7684 <code>Arc&lt;Data&gt;</code>)\u7684\u503c\u3002\u540c\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u7ee7\u7eed\u4f7f\u7528\u539f\u59cb\u7684 <code>shared_data</code>\u3002\u7531\u4e8e <code>Arc</code> \u5141\u8bb8\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u4f20\u9012\u6570\u636e\u800c\u4e0d\u62c5\u5fc3\u7ebf\u7a0b\u5b89\u5168\u6027\u95ee\u9898\u3002</p> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Main Data: Data { value: 42 }\nThread Data: Data { value: 42 }\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#593-rust","title":"5.9.3 \u5e38\u89c1\u7684 Rust \u667a\u80fd\u6307\u9488\u7c7b\u578b\u4e4b\u95f4\u7684\u6bd4\u8f83\uff1a","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u56de\u987e\u4e00\u4e0b\u6211\u4eec\u5728\u672c\u7ae0\u5b66\u4e60\u7684\u667a\u80fd\u6307\u9488:</p> \u6307\u9488\u7c7b\u578b \u63cf\u8ff0 \u4e3b\u8981\u7279\u6027\u548c\u7528\u9014 <code>Box&lt;T&gt;</code> \u5806\u5206\u914d\u7684\u6307\u9488\uff0c\u62e5\u6709\u552f\u4e00\u6240\u6709\u6743\uff0c\u901a\u5e38\u7528\u4e8e\u6570\u636e\u6240\u6709\u6743\u7684\u8f6c\u79fb\u3002 \u5728\u7f16\u8bd1\u65f6\u68c0\u67e5\u4e0b\uff0c\u907f\u514d\u4e86\u5185\u5b58\u6cc4\u6f0f\u548c\u6570\u636e\u7ade\u4e89\u3002 <code>Rc&lt;T&gt;</code> \u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488\uff0c\u5141\u8bb8\u591a\u4e2a\u6240\u6709\u8005\uff0c\u4f46\u4e0d\u80fd\u7528\u4e8e\u591a\u7ebf\u7a0b\u73af\u5883\u3002 \u7528\u4e8e\u5171\u4eab\u6570\u636e\u7684\u591a\u4e2a\u6240\u6709\u8005\uff0c\u9002\u7528\u4e8e\u5355\u7ebf\u7a0b\u5e94\u7528\u3002 <code>Arc&lt;T&gt;</code> \u539f\u5b50\u5f15\u7528\u8ba1\u6570\u667a\u80fd\u6307\u9488\uff0c\u5141\u8bb8\u591a\u4e2a\u6240\u6709\u8005\uff0c\u9002\u7528\u4e8e\u591a\u7ebf\u7a0b\u73af\u5883\u3002 \u7528\u4e8e\u5171\u4eab\u6570\u636e\u7684\u591a\u4e2a\u6240\u6709\u8005\uff0c\u9002\u7528\u4e8e\u591a\u7ebf\u7a0b\u5e94\u7528\u3002 <code>Mutex&lt;T&gt;</code> \u4e92\u65a5\u9501\u667a\u80fd\u6307\u9488\uff0c\u7528\u4e8e\u591a\u7ebf\u7a0b\u73af\u5883\uff0c\u63d0\u4f9b\u5185\u90e8\u53ef\u53d8\u6027\u3002 \u7528\u4e8e\u5171\u4eab\u6570\u636e\u7684\u591a\u7ebf\u7a0b\u73af\u5883\uff0c\u786e\u4fdd\u4e00\u6b21\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u5171\u4eab\u6570\u636e\u3002 <p>\u8fd9\u4e2a\u8868\u683c\u603b\u7ed3\u4e86 Rust \u4e2d\u5e38\u89c1\u7684\u667a\u80fd\u6307\u9488\u7c7b\u578b\u7684\u6bd4\u8f83\uff0c\u6392\u9664\u4e86 <code>RefCell&lt;T&gt;</code> \u548c <code>Cell&lt;T&gt;</code> \u8fd9\u4e24\u4e2a\u7c7b\u578b\u3002\u6839\u636e\u4f60\u7684\u9700\u6c42\uff0c\u9009\u62e9\u9002\u5408\u7684\u667a\u80fd\u6307\u9488\u7c7b\u578b\uff0c\u4ee5\u6ee1\u8db3\u6240\u6709\u6743\u3001\u53ef\u53d8\u6027\u548c\u7ebf\u7a0b\u5b89\u5168\u6027\u7684\u8981\u6c42\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2005%20-%20%E6%A0%87%E5%87%86%E5%BA%93%E7%B1%BB%E5%9E%8B/#_4","title":"\u6848\u4f8b\uff1a\u4f7f\u7528\u591a\u7ebf\u7a0b\u5907\u4efd\u4e00\u7ec4\u91d1\u878d\u6570\u636e","text":"<p>\u5728Rust\u4e2d\u4f7f\u7528\u591a\u7ebf\u7a0b\uff0c\u4ee5\u66f4\u597d\u7684\u6027\u80fd\u5907\u4efd\u4e00\u7ec4\u91d1\u878d\u6570\u636e\u5230\u672c\u5730\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u5b8c\u6210\uff1a</p> <ol> <li>\u5bfc\u5165\u6240\u9700\u7684\u5e93\uff1a    \u9996\u5148\uff0c\u4f60\u9700\u8981\u5bfc\u5165\u6807\u51c6\u5e93\u4e2d\u7684\u591a\u7ebf\u7a0b\u548c\u6587\u4ef6\u64cd\u4f5c\u76f8\u5173\u7684\u6a21\u5757\u3002</li> </ol> <pre><code>use std::fs::File;\nuse std::io::Write;\nuse std::sync::{Arc, Mutex};\nuse std::thread;\n</code></pre> <ol> <li>\u51c6\u5907\u91d1\u878d\u6570\u636e\uff1a    \u51c6\u5907\u597d\u4f60\u60f3\u8981\u5907\u4efd\u7684\u91d1\u878d\u6570\u636e\uff0c\u53ef\u4ee5\u5b58\u50a8\u5728\u4e00\u4e2a\u5411\u91cf\u6216\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u4e2d\u3002</li> </ol> <pre><code>// \u5047\u8bbe\u6709\u4e00\u7ec4\u91d1\u878d\u6570\u636e\nlet financial_data = vec![\n    \"Data1\",\n    \"Data2\",\n    \"Data3\",\n    // ...\u66f4\u591a\u6570\u636e\n];\n</code></pre> <ol> <li>\u521b\u5efa\u4e00\u4e2a\u4e92\u65a5\u9501\u548c\u4e00\u4e2a\u5171\u4eab\u6570\u636e\u7684Arc(\u539f\u5b50\u5f15\u7528\u8ba1\u6570\u5668)\uff1a    \u8fd9\u5c06\u7528\u4e8e\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u91d1\u878d\u6570\u636e\u3002</li> </ol> <pre><code>let data_mutex = Arc::new(Mutex::new(financial_data));\n</code></pre> <ol> <li>\u5b9a\u4e49\u5907\u4efd\u903b\u8f91\uff1a    \u7f16\u5199\u4e00\u4e2a\u5907\u4efd\u91d1\u878d\u6570\u636e\u7684\u51fd\u6570\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u4f1a\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u6765\u5907\u4efd\u6570\u636e\u3002\u5907\u4efd\u53ef\u4ee5\u7b80\u5355\u5730\u5199\u5165\u6587\u4ef6\u3002</li> </ol> <pre><code>fn backup_data(data: &amp;str, filename: &amp;str) -&gt; std::io::Result&lt;()&gt; {\n    let mut file = File::create(filename)?;\n    file.write_all(data.as_bytes())?;\n    Ok(())\n}\n</code></pre> <ol> <li>\u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\u6765\u5907\u4efd\u6570\u636e\uff1a    \u5bf9\u6bcf\u4e2a\u91d1\u878d\u6570\u636e\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u4f7f\u7528\u4e92\u65a5\u9501\u6765\u83b7\u53d6\u8981\u5907\u4efd\u7684\u6570\u636e\u3002</li> </ol> <pre><code>let mut thread_handles = vec![];\n\nfor (index, data) in data_mutex.lock().unwrap().iter_mut().enumerate() {\n    let filename = format!(\"financial_data_{}.txt\", index);\n    let data = data.clone();\n    let handle = thread::spawn(move || {\n        match backup_data(&amp;data, &amp;filename) {\n            Ok(_) =&gt; println!(\"Backup successful: {}\", filename),\n            Err(err) =&gt; eprintln!(\"Error backing up {}: {:?}\", filename, err),\n        }\n    });\n    thread_handles.push(handle);\n}\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u904d\u5386\u91d1\u878d\u6570\u636e\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u6570\u636e\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u5c06\u91d1\u878d\u6570\u636e\u5907\u4efd\u5230\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff0c\u6587\u4ef6\u540d\u5305\u542b\u4e86\u6570\u636e\u7684\u7d22\u5f15\u3002\u5907\u4efd\u64cd\u4f5c\u4f7f\u7528 <code>backup_data</code> \u51fd\u6570\u5b8c\u6210\u3002</p> <ol> <li>\u7b49\u5f85\u7ebf\u7a0b\u5b8c\u6210\uff1a    \u6700\u540e\uff0c\u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u5907\u4efd\u64cd\u4f5c\u3002</li> </ol> <pre><code>for handle in thread_handles {\n    handle.join().unwrap();\n}\n</code></pre> <p>\u5b8c\u6574\u7684Rust\u591a\u7ebf\u7a0b\u5907\u4efd\u91d1\u878d\u6570\u636e\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>use std::fs::File;\nuse std::io::Write;\nuse std::sync::{Arc, Mutex};\nuse std::thread;\n\nfn backup_data(data: &amp;str, filename: &amp;str) -&gt; std::io::Result&lt;()&gt; {\n    let mut file = File::create(filename)?;\n    file.write_all(data.as_bytes())?;\n    Ok(())\n}\n\nfn main() {\n    let financial_data = vec![\n        \"Data1\",\n        \"Data2\",\n        \"Data3\",\n        // ... \u6dfb\u52a0\u66f4\u591a\u6570\u636e\n    ];\n\n    let data_mutex = Arc::new(Mutex::new(financial_data));\n    let mut thread_handles = vec![];\n\n    for (index, data) in data_mutex.lock().unwrap().iter_mut().enumerate() {\n        let filename = format!(\"financial_data_{}.txt\", index);\n        let data = data.to_string(); // \u5c06&amp;str\u8f6c\u6362\u4e3aString\n        let handle = thread::spawn(move || {\n            match backup_data(&amp;data, &amp;filename) {\n                Ok(_) =&gt; println!(\"Backup successful: {}\", filename),\n                Err(err) =&gt; eprintln!(\"Error backing up {}: {:?}\", filename, err),\n            }\n        });\n        thread_handles.push(handle);\n    }\n\n    for handle in thread_handles {\n        handle.join().unwrap();\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Backup successful: financial_data_0.txt\nBackup successful: financial_data_1.txt\nBackup successful: financial_data_2.txt\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4f7f\u7528\u591a\u7ebf\u7a0b\u5e76\u884c\u5907\u4efd\u91d1\u878d\u6570\u636e\u5230\u4e0d\u540c\u7684\u6587\u4ef6\u4e2d\uff0c\u786e\u4fdd\u6570\u636e\u7684\u5907\u4efd\u64cd\u4f5c\u662f\u5e76\u884c\u6267\u884c\u7684\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u5907\u4efd\u4e00\u4e2a\u6570\u636e\u3002\u5907\u4efd\u6210\u529f\u540e\uff0c\u7a0b\u5e8f\u4f1a\u6253\u5370\u6210\u529f\u7684\u6d88\u606f\uff0c\u5982\u679c\u53d1\u751f\u9519\u8bef\uff0c\u4f1a\u6253\u5370\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/","title":"Chapter 6 - \u53d8\u91cf\u548c\u4f5c\u7528\u57df","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/#61","title":"6.1 \u4f5c\u7528\u57df\u548c\u906e\u853d","text":"<p>\u53d8\u91cf\u7ed1\u5b9a\u6709\u4e00\u4e2a\u4f5c\u7528\u57df(scope)\uff0c\u5b83\u88ab\u9650\u5b9a\u53ea\u5728\u4e00\u4e2a**\u4ee3\u7801\u5757**(block)\u4e2d\u751f\u5b58(live)\u3002 \u4ee3\u7801\u5757\u662f\u4e00\u4e2a\u88ab <code>{}</code> \u5305\u56f4\u7684\u8bed\u53e5\u96c6\u5408\u3002\u53e6\u5916\u4e5f\u5141\u8bb8\u53d8\u91cf\u906e\u853d\u3002</p> <pre><code>fn main() {\n    // \u6b64\u7ed1\u5b9a\u751f\u5b58\u4e8e main \u51fd\u6570\u4e2d\n    let outer_binding = 1;\n\n    // \u8fd9\u662f\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u6bd4 main \u51fd\u6570\u62e5\u6709\u66f4\u5c0f\u7684\u4f5c\u7528\u57df\n    {\n        // \u6b64\u7ed1\u5b9a\u53ea\u5b58\u5728\u4e8e\u672c\u4ee3\u7801\u5757\n        let inner_binding = 2;\n\n        println!(\"inner: {}\", inner_binding);\n\n        // \u6b64\u7ed1\u5b9a*\u906e\u853d*\u4e86\u5916\u9762\u7684\u7ed1\u5b9a\n        let outer_binding = 5_f32;\n\n        println!(\"inner shadowed outer: {}\", outer_binding);\n    }\n    // \u4ee3\u7801\u5757\u7ed3\u675f\n\n    // \u6b64\u7ed1\u5b9a\u4ecd\u7136\u5728\u4f5c\u7528\u57df\u5185\n    println!(\"outer: {}\", outer_binding);\n\n    // \u6b64\u7ed1\u5b9a\u540c\u6837*\u906e\u853d*\u4e86\u524d\u9762\u7684\u7ed1\u5b9a\n    let outer_binding = 'a';\n\n    println!(\"outer shadowed outer: {}\", outer_binding);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>inner: 2\ninner shadowed outer: 5\nouter: 1\nouter shadowed outer: a\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/#62","title":"6.2 \u4e0d\u53ef\u53d8\u53d8\u91cf","text":"<p>\u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u6765\u58f0\u660e\u53ef\u53d8\u53d8\u91cf\u3002\u53ef\u53d8\u53d8\u91cf\u4e0e\u4e0d\u53ef\u53d8\u53d8\u91cf\u76f8\u6bd4\uff0c\u5141\u8bb8\u5728\u7ed1\u5b9a\u540e\u4fee\u6539\u5b83\u4eec\u7684\u503c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u53d8\u7c7b\u578b\uff1a</p> <ol> <li>\u53ef\u53d8\u7ed1\u5b9a(Mutable Bindings)\uff1a\u4f7f\u7528 <code>let mut</code> \u58f0\u660e\u7684\u53d8\u91cf\u662f\u53ef\u53d8\u7684\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u521b\u5efa\u540e\u4fee\u6539\u5b83\u4eec\u7684\u503c\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>let mut x = 5; // x\u662f\u53ef\u53d8\u53d8\u91cf\nx = 10; // \u53ef\u4ee5\u4fee\u6539x\u7684\u503c\n</code></pre> <ol> <li>\u53ef\u53d8\u5f15\u7528(Mutable References)\uff1a\u901a\u8fc7\u4f7f\u7528\u53ef\u53d8\u5f15\u7528\uff0c\u4f60\u53ef\u4ee5\u5728\u4e0d\u6539\u53d8\u53d8\u91cf\u7ed1\u5b9a\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u503c\u3002\u53ef\u53d8\u5f15\u7528\u4f7f\u7528 <code>&amp;mut</code> \u58f0\u660e\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>fn main() {\n    let mut x = 5;\n    modify_value(&amp;mut x); // \u901a\u8fc7\u53ef\u53d8\u5f15\u7528\u4fee\u6539x\u7684\u503c\n    println!(\"x: {}\", x); // \u8f93\u51fa \"x: 10\"\n}\n\nfn modify_value(y: &amp;mut i32) {\n    *y = 10;\n}\n</code></pre> <ol> <li>\u53ef\u53d8\u5b57\u6bb5(Mutable Fields)\uff1a\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\u53ef\u4ee5\u5305\u542b\u53ef\u53d8\u5b57\u6bb5\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u5728\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u521b\u5efa\u540e\u53ef\u4ee5\u4fee\u6539\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u6765\u58f0\u660e\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u7684\u5b57\u6bb5\u662f\u53ef\u53d8\u7684\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>struct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let mut p = Point { x: 1, y: 2 };\n    p.x = 10; // \u53ef\u4ee5\u4fee\u6539Point\u7ed3\u6784\u4f53\u4e2d\u7684\u5b57\u6bb5x\u7684\u503c\n}\n</code></pre> <ol> <li>\u53ef\u53d8\u6570\u7ec4(Mutable Arrays)\uff1a\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u58f0\u660e\u7684\u6570\u7ec4\u662f\u53ef\u53d8\u7684\uff0c\u5141\u8bb8\u4fee\u6539\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>fn main() {\n    let mut arr = [1, 2, 3];\n    arr[0] = 4; // \u53ef\u4ee5\u4fee\u6539\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\n}\n</code></pre> <ol> <li>\u53ef\u53d8\u5b57\u7b26\u4e32(Mutable Strings)\uff1a\u4f7f\u7528 <code>String</code> \u7c7b\u578b\u7684\u53d8\u91cf\u548c <code>push_str</code>\u3001<code>push</code> \u7b49\u65b9\u6cd5\u53ef\u4ee5\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>fn main() {\n    let mut s = String::from(\"Hello\");\n    s.push_str(\", world!\"); // \u53ef\u4ee5\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\n}\n</code></pre> <p>\u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u53d8\u7c7b\u578b\u793a\u4f8b\u3002\u53ef\u53d8\u6027\u662fRust\u7684\u4e00\u4e2a\u5173\u952e\u7279\u6027\uff0c\u5b83\u5141\u8bb8\u4f60\u5728\u9700\u8981\u4fee\u6539\u503c\u65f6\u66f4\u6539\u7ed1\u5b9a\uff0c\u540c\u65f6\u4ecd\u7136\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5b89\u5168\u6027\u548c\u501f\u7528\u68c0\u67e5\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/#63","title":"6.3 \u53ef\u53d8\u53d8\u91cf","text":"<p>\u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u6765\u58f0\u660e\u53ef\u53d8\u53d8\u91cf\u3002\u53ef\u53d8\u53d8\u91cf\u4e0e\u4e0d\u53ef\u53d8\u53d8\u91cf\u76f8\u6bd4\uff0c\u5141\u8bb8\u5728\u7ed1\u5b9a\u540e\u4fee\u6539\u5b83\u4eec\u7684\u503c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u53d8\u7c7b\u578b\uff1a</p> <ol> <li>\u53ef\u53d8\u7ed1\u5b9a(Mutable Bindings)\uff1a\u4f7f\u7528 <code>let mut</code> \u58f0\u660e\u7684\u53d8\u91cf\u662f\u53ef\u53d8\u7684\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u521b\u5efa\u540e\u4fee\u6539\u5b83\u4eec\u7684\u503c\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>let mut x = 5; // x\u662f\u53ef\u53d8\u53d8\u91cf\nx = 10; // \u53ef\u4ee5\u4fee\u6539x\u7684\u503c\n</code></pre> <ol> <li>\u53ef\u53d8\u5f15\u7528(Mutable References)\uff1a\u901a\u8fc7\u4f7f\u7528\u53ef\u53d8\u5f15\u7528\uff0c\u4f60\u53ef\u4ee5\u5728\u4e0d\u6539\u53d8\u53d8\u91cf\u7ed1\u5b9a\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u503c\u3002\u53ef\u53d8\u5f15\u7528\u4f7f\u7528 <code>&amp;mut</code> \u58f0\u660e\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>fn main() {\n    let mut x = 5;\n    modify_value(&amp;mut x); // \u901a\u8fc7\u53ef\u53d8\u5f15\u7528\u4fee\u6539x\u7684\u503c\n    println!(\"x: {}\", x); // \u8f93\u51fa \"x: 10\"\n}\n\nfn modify_value(y: &amp;mut i32) {\n    *y = 10;\n}\n</code></pre> <ol> <li>\u53ef\u53d8\u5b57\u6bb5(Mutable Fields)\uff1a\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\u53ef\u4ee5\u5305\u542b\u53ef\u53d8\u5b57\u6bb5\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u5728\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u521b\u5efa\u540e\u53ef\u4ee5\u4fee\u6539\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u6765\u58f0\u660e\u7ed3\u6784\u4f53\u6216\u679a\u4e3e\u7684\u5b57\u6bb5\u662f\u53ef\u53d8\u7684\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>struct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let mut p = Point { x: 1, y: 2 };\n    p.x = 10; // \u53ef\u4ee5\u4fee\u6539Point\u7ed3\u6784\u4f53\u4e2d\u7684\u5b57\u6bb5x\u7684\u503c\n}\n</code></pre> <ol> <li>\u53ef\u53d8\u6570\u7ec4(Mutable Arrays)\uff1a\u4f7f\u7528 <code>mut</code> \u5173\u952e\u5b57\u58f0\u660e\u7684\u6570\u7ec4\u662f\u53ef\u53d8\u7684\uff0c\u5141\u8bb8\u4fee\u6539\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>fn main() {\n    let mut arr = [1, 2, 3];\n    arr[0] = 4; // \u53ef\u4ee5\u4fee\u6539\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\n}\n</code></pre> <ol> <li>\u53ef\u53d8\u5b57\u7b26\u4e32(Mutable Strings)\uff1a\u4f7f\u7528 <code>String</code> \u7c7b\u578b\u7684\u53d8\u91cf\u548c <code>push_str</code>\u3001<code>push</code> \u7b49\u65b9\u6cd5\u53ef\u4ee5\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>fn main() {\n    let mut s = String::from(\"Hello\");\n    s.push_str(\", world!\"); // \u53ef\u4ee5\u4fee\u6539\u5b57\u7b26\u4e32\u7684\u5185\u5bb9\n}\n</code></pre> <p>\u8fd9\u4e9b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u53d8\u7c7b\u578b\u793a\u4f8b\u3002\u53ef\u53d8\u6027\u662fRust\u7684\u4e00\u4e2a\u5173\u952e\u7279\u6027\uff0c\u5b83\u5141\u8bb8\u4f60\u5728\u9700\u8981\u4fee\u6539\u503c\u65f6\u66f4\u6539\u7ed1\u5b9a\uff0c\u540c\u65f6\u4ecd\u7136\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5b89\u5168\u6027\u548c\u501f\u7528\u68c0\u67e5\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/#64-statementsexpressions-variable-bindings","title":"6.4 \u8bed\u53e5(Statements)\uff0c\u8868\u8fbe\u5f0f(Expressions) \u548c \u53d8\u91cf\u7ed1\u5b9a(Variable Bindings)","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/#641-statements","title":"6.4.1 \u8bed\u53e5(Statements)","text":"<p>Rust \u6709\u591a\u79cd\u8bed\u53e5\u3002\u5728Rust\u4e2d\uff0c\u4e0b\u9762\u7684\u5185\u5bb9\u901a\u5e38\u88ab\u89c6\u4e3a\u8bed\u53e5\uff1a</p> <ol> <li>\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\uff0c\u5982 <code>let x = 5;</code>\u3002</li> <li>\u8d4b\u503c\u8bed\u53e5\uff0c\u5982 <code>x = 10;</code>\u3002</li> <li>\u51fd\u6570\u8c03\u7528\u8bed\u53e5\uff0c\u5982 <code>println!(\"Hello, world!\");</code>\u3002</li> <li>\u63a7\u5236\u6d41\u8bed\u53e5\uff0c\u5982 <code>if</code>\u3001<code>else</code>\u3001<code>while</code>\u3001<code>for</code> \u7b49\u3002</li> </ol> <pre><code>fn main() {\n    // \u53d8\u91cf\u58f0\u660e\u8bed\u53e5\n    let x = 5;\n\n    // \u8d4b\u503c\u8bed\u53e5\n    let mut y = 10;\n    y = y + x;\n\n    // \u51fd\u6570\u8c03\u7528\u8bed\u53e5\n    println!(\"The value of y is: {}\", y);\n\n    // \u63a7\u5236\u6d41\u8bed\u53e5\n    if y &gt; 10 {\n        println!(\"y is greater than 10\");\n    } else {\n        println!(\"y is not greater than 10\");\n    }\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2006%20-%20%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F/#642-expressions","title":"6.4.2 \u8868\u8fbe\u5f0f(Expressions)","text":"<p>\u5728Rust\u4e2d\uff0c\u8bed\u53e5(Statements)\u548c\u8868\u8fbe\u5f0f(Expressions)\u6709\u4e00\u4e9b\u91cd\u8981\u7684\u533a\u522b\uff1a</p> <ol> <li>\u8fd4\u56de\u503c\uff1a</li> <li>\u8bed\u53e5\u6ca1\u6709\u8fd4\u56de\u503c\u3002\u5b83\u4eec\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u6216\u8d4b\u503c\uff0c\u4f46\u4e0d\u4ea7\u751f\u503c\u672c\u8eab\u3002\u4f8b\u5982\uff0c\u8d4b\u503c\u8bed\u53e5 <code>let x = 5;</code> \u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\u3002</li> <li> <p>\u8868\u8fbe\u5f0f\u603b\u662f\u6709\u8fd4\u56de\u503c\u3002\u6bcf\u4e2a\u8868\u8fbe\u5f0f\u90fd\u4f1a\u8ba1\u7b97\u51fa\u4e00\u4e2a\u503c\uff0c\u5e76\u53ef\u4ee5\u88ab\u7528\u4e8e\u5176\u4ed6\u8868\u8fbe\u5f0f\u6216\u8d4b\u503c\u7ed9\u53d8\u91cf\u3002\u4f8b\u5982\uff0c<code>5 + 3</code> \u8868\u8fbe\u5f0f\u8fd4\u56de\u503c <code>8</code>\u3002</p> </li> <li> <p>\u53ef\u5d4c\u5957\u6027\uff1a</p> </li> <li>\u8bed\u53e5\u53ef\u4ee5\u5305\u542b\u8868\u8fbe\u5f0f\uff0c\u4f46\u4e0d\u80fd\u5d4c\u5957\u5176\u4ed6\u8bed\u53e5\u3002\u4f8b\u5982\uff0c<code>let x = { 5 + 3; };</code> \u5728\u4ee3\u7801\u5757\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u4f46\u4ee3\u7801\u5757\u672c\u8eab\u662f\u4e00\u4e2a\u8bed\u53e5\u3002</li> <li> <p>\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u8868\u8fbe\u5f0f\uff0c\u5f62\u6210\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u6811\u3002\u4f8b\u5982\uff0c<code>let y = 5 + (3 * (2 - 1));</code> \u4e2d\u7684\u8868\u8fbe\u5f0f\u5305\u542b\u4e86\u5d4c\u5957\u7684\u5b50\u8868\u8fbe\u5f0f\u3002</p> </li> <li> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> </li> <li>\u8bed\u53e5\u901a\u5e38\u7528\u4e8e\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\uff0c\u5982\u58f0\u660e\u53d8\u91cf\u3001\u8d4b\u503c\u3001\u6267\u884c\u51fd\u6570\u8c03\u7528\u7b49\u3002\u5b83\u4eec\u4e0d\u662f\u4e3a\u4e86\u8fd4\u56de\u503c\u800c\u5b58\u5728\u7684\u3002</li> <li> <p>\u8868\u8fbe\u5f0f\u901a\u5e38\u7528\u4e8e\u8ba1\u7b97\u503c\uff0c\u8fd9\u4e9b\u503c\u53ef\u4ee5\u88ab\u7528\u4e8e\u8d4b\u503c\u3001\u51fd\u6570\u8c03\u7528\u7684\u53c2\u6570\u3001\u6761\u4ef6\u8bed\u53e5\u7684\u5224\u65ad\u6761\u4ef6\u7b49\u3002\u5b83\u4eec\u603b\u662f\u6709\u8fd4\u56de\u503c\u3002</p> </li> <li> <p>\u5206\u53f7\uff1a</p> </li> <li>\u8bed\u53e5\u901a\u5e38\u4ee5\u5206\u53f7 <code>;</code> \u7ed3\u5c3e\uff0c\u8868\u793a\u8bed\u53e5\u7684\u7ed3\u675f\u3002</li> <li>\u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u4ee5\u5206\u53f7 <code>;</code> \u7ed3\u5c3e\uff0c\u4f46\u8fd9\u6837\u505a\u901a\u5e38\u4f1a\u5ffd\u7565\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u3002\u5982\u679c\u7701\u7565\u5206\u53f7\uff0c\u8868\u8fbe\u5f0f\u7684\u503c\u5c06\u88ab\u8fd4\u56de\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u793a\u4f8b\u6765\u8bf4\u660e\u8bed\u53e5\u548c\u8868\u8fbe\u5f0f\u4e4b\u95f4\u7684\u533a\u522b\uff1a</p> <pre><code>// \u8fd9\u662f\u4e00\u4e2a\u8bed\u53e5\uff0c\u5b83\u6ca1\u6709\u8fd4\u56de\u503c\nlet x = 5;\n\n// \u8fd9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5b83\u7684\u503c\u4e3a 8\nlet y = 5 + 3;\n\n// \u8fd9\u662f\u4e00\u4e2a\u8bed\u53e5\u5757\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u4e24\u4e2a\u8bed\u53e5\uff0c\u4f46\u6ca1\u6709\u8fd4\u56de\u503c\n{\n    let a = 1;\n    let b = 2;\n}\n\n// \u8fd9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5176\u503c\u4e3a 6\uff0c\u8fd9\u4e2a\u503c\u53ef\u4ee5\u88ab\u8d4b\u7ed9\u53d8\u91cf\u6216\u7528\u4e8e\u5176\u4ed6\u8868\u8fbe\u5f0f\u4e2d\nlet z = {\n    let a = 2;\n    let b = 3;\n    a + b // \u6ce8\u610f\uff0c\u6ca1\u6709\u5206\u53f7\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\n};\n</code></pre> <p>\u518d\u6765\u770b\u4e00\u4e0b\uff0c\u5982\u679c\u7ed9\u8868\u8fbe\u5f0f\u5f3a\u5236\u4ee5\u5206\u53f7 <code>;</code> \u7ed3\u5c3e\u7684\u6548\u679c\u3002</p> <pre><code>fn main() {\n    //\u53d8\u91cf\u7ed1\u5b9a\uff0c \u521b\u5efa\u4e00\u4e2a\u65e0\u7b26\u53f7\u6574\u6570\u53d8\u91cf `x`\n    let x = 5u32;\n\n    // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf `y` \u5e76\u521d\u59cb\u5316\u5b83\n    let y = {\n        // \u521b\u5efa `x` \u7684\u5e73\u65b9\n        let x_squared = x * x;\n\n        // \u521b\u5efa `x` \u7684\u7acb\u65b9\n        let x_cube = x_squared * x;\n\n        // \u8ba1\u7b97 `x_cube + x_squared + x` \u5e76\u5c06\u7ed3\u679c\u8d4b\u7ed9 `y`\n        x_cube + x_squared + x\n    };\n\n    // \u4ee3\u7801\u5757\u4e5f\u662f\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u5b83\u4eec\u53ef\u4ee5\u7528\u4f5c\u8d4b\u503c\u4e2d\u7684\u503c\u3002\n    // \u8fd9\u91cc\u7684\u4ee3\u7801\u5757\u7684\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u662f `2 * x`\uff0c\u4f46\u7531\u4e8e\u6709\u5206\u53f7\u7ed3\u675f\u4e86\u8fd9\u4e2a\u4ee3\u7801\u5757\uff0c\u6240\u4ee5\u5c06 `()` \u8d4b\u7ed9 `z`\n    let z = {\n        2 * x;\n    };\n\n    // \u6253\u5370\u53d8\u91cf\u7684\u503c\n    println!(\"x is {:?}\", x);\n    println!(\"y is {:?}\", y);\n    println!(\"z is {:?}\", z);\n}\n</code></pre> <p>\u8fd4\u56de\u7684\u662f</p> <pre><code>x is 5\ny is 155\nz is ()\n</code></pre> <p>\u603b\u4e4b\uff0c\u8bed\u53e5\u7528\u4e8e\u6267\u884c\u64cd\u4f5c\uff0c\u800c\u8868\u8fbe\u5f0f\u7528\u4e8e\u8ba1\u7b97\u503c\u3002\u7406\u89e3\u8fd9\u4e24\u8005\u4e4b\u95f4\u7684\u533a\u522b\u5bf9\u4e8e\u7f16\u5199Rust\u4ee3\u7801\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/","title":"Chapter 7 - \u7c7b\u578b\u7cfb\u7edf","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0cRust \u7684\u7c7b\u578b\u7cfb\u7edf\u5177\u6709\u51fa\u8272\u7684\u8868\u73b0\uff0c\u5b83\u5f3a\u8c03\u4e86\u7c7b\u578b\u5b89\u5168\u3001\u6027\u80fd\u548c\u7075\u6d3b\u6027\uff0c\u8fd9\u4f7f\u5f97 Rust \u6210\u4e3a\u4e00\u4e2a\u7406\u60f3\u7684\u7f16\u7a0b\u8bed\u8a00\u6765\u5904\u7406\u91d1\u878d\u6570\u636e\u548c\u7b97\u6cd5\u4ea4\u6613\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u8be6\u7ec6\u4ecb\u7ecd Rust \u7c7b\u578b\u7cfb\u7edf\u7684\u6848\u4f8b\uff0c\u6db5\u76d6\u4e86\u5982\u4f55\u5728\u91d1\u878d\u9886\u57df\u4e2d\u5229\u7528\u5176\u7279\u6027\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#71-literals","title":"7.1 \u5b57\u9762\u91cf (Literals)","text":"<p>\u5bf9\u6570\u503c\u5b57\u9762\u91cf\uff0c\u53ea\u8981\u628a\u7c7b\u578b\u4f5c\u4e3a\u540e\u7f00\u52a0\u4e0a\u53bb\uff0c\u5c31\u5b8c\u6210\u4e86\u7c7b\u578b\u8bf4\u660e\u3002\u6bd4\u5982\u6307\u5b9a\u5b57\u9762\u91cf <code>42</code> \u7684\u7c7b\u578b\u662f <code>i32</code>\uff0c\u53ea\u9700\u8981\u5199 <code>42i32</code>\u3002</p> <p>\u65e0\u540e\u7f00\u7684\u6570\u503c\u5b57\u9762\u91cf\uff0c\u5176\u7c7b\u578b\u53d6\u51b3\u4e8e\u600e\u6837\u4f7f\u7528\u5b83\u4eec\u3002\u5982\u679c\u6ca1\u6709\u9650\u5236\uff0c\u7f16\u8bd1\u5668\u4f1a\u5bf9\u6574\u6570\u4f7f\u7528 <code>i32</code>\uff0c\u5bf9\u6d6e\u70b9\u6570\u4f7f\u7528 <code>f64</code>\u3002</p> <pre><code>fn main() {\n    let a = 3f32;\n    let b = 1;\n    let c = 1.0;\n    let d = 2u32;\n    let e = 1u8;\n\n    println!(\"size of `a` in bytes: {}\", std::mem::size_of_val(&amp;a));\n    println!(\"size of `b` in bytes: {}\", std::mem::size_of_val(&amp;b));\n    println!(\"size of `c` in bytes: {}\", std::mem::size_of_val(&amp;c));\n    println!(\"size of `d` in bytes: {}\", std::mem::size_of_val(&amp;d));\n    println!(\"size of `e` in bytes: {}\", std::mem::size_of_val(&amp;e));\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>size of `a` in bytes: 4\nsize of `b` in bytes: 4\nsize of `c` in bytes: 8\nsize of `d` in bytes: 4\nsize of `e` in bytes: 1\n</code></pre> <p>PS: \u4e0a\u9762\u7684\u4ee3\u7801\u4f7f\u7528\u4e86\u4e00\u4e9b\u8fd8\u6ca1\u6709\u8ba8\u8bba\u8fc7\u7684\u6982\u5ff5\u3002</p> <p><code>std::mem::size_of_val</code> \u662f Rust \u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u83b7\u53d6\u4e00\u4e2a\u503c(\u53d8\u91cf\u6216\u8868\u8fbe\u5f0f)\u6240\u5360\u7528\u7684\u5b57\u8282\u6570\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u503c\u7684\u5927\u5c0f(\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d)\uff0c\u5373\u8be5\u503c\u5728\u5185\u5b58\u4e2d\u6240\u5360\u7528\u7684\u7a7a\u95f4\u5927\u5c0f\u3002</p> <p><code>std::mem::size_of_val</code>\u7684\u8c03\u7528\u65b9\u5f0f\u4f7f\u7528\u4e86\u5b8c\u6574\u8def\u5f84(full path)\u3002\u5728 Rust \u4e2d\uff0c\u4ee3\u7801\u53ef\u4ee5\u88ab\u7ec4\u7ec7\u6210\u79f0\u4e3a\u6a21\u5757(module)\u7684\u903b\u8f91\u5355\u5143\uff0c\u800c\u6a21\u5757\u53ef\u4ee5\u5d4c\u5957\u5728\u5176\u4ed6\u6a21\u5757\u5185\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff1a</p> <ul> <li><code>size_of_val</code> \u51fd\u6570\u662f\u5728\u540d\u4e3a <code>mem</code> \u7684\u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u3002</li> <li><code>mem</code> \u6a21\u5757\u53c8\u662f\u5728\u540d\u4e3a <code>std</code> \u7684 crate \u4e2d\u5b9a\u4e49\u7684\u3002</li> </ul> <p>\u8ba9\u6211\u4eec\u8be6\u7ec6\u89e3\u91ca\u8fd9\u4e9b\u6982\u5ff5\uff1a</p> <ol> <li> <p>Crate\uff1a\u5728 Rust \u4e2d\uff0ccrate \u662f\u6700\u9ad8\u7ea7\u522b\u7684\u4ee3\u7801\u7ec4\u7ec7\u5355\u5143\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5e93\u6216\u4e00\u4e2a\u5305\u3002Rust \u7684\u6807\u51c6\u5e93(Standard Library)\u4e5f\u662f\u4e00\u4e2a crate\uff0c\u901a\u5e38\u88ab\u5f15\u7528\u4e3a <code>std</code>\u3002</p> </li> <li> <p>\u6a21\u5757\uff1a\u6a21\u5757\u662f\u7528\u4e8e\u7ec4\u7ec7\u548c\u5c01\u88c5\u4ee3\u7801\u7684\u903b\u8f91\u5355\u5143\u3002\u6a21\u5757\u53ef\u4ee5\u5305\u542b\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u5e38\u91cf\u7b49\u3002\u5728\u793a\u4f8b\u4e2d\uff0c<code>std</code> crate \u5305\u542b\u4e86\u4e00\u4e2a\u540d\u4e3a <code>mem</code> \u7684\u6a21\u5757\uff0c\u800c <code>mem</code> \u6a21\u5757\u5305\u542b\u4e86 <code>size_of_val</code> \u51fd\u6570\u3002</p> </li> <li> <p>\u5b8c\u6574\u8def\u5f84\uff1a\u5728 Rust \u4e2d\uff0c\u5982\u679c\u8981\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u3001\u8bbf\u95ee\u4e00\u4e2a\u6a21\u5757\u4e2d\u7684\u53d8\u91cf\u7b49\uff0c\u53ef\u4ee5\u4f7f\u7528\u5b8c\u6574\u8def\u5f84\u6765\u6307\u5b9a\u5b83\u4eec\u7684\u4f4d\u7f6e\u3002\u5b8c\u6574\u8def\u5f84\u5305\u62ec crate \u540d\u79f0\u3001\u6a21\u5757\u540d\u79f0\u3001\u51fd\u6570\u540d\u79f0\u7b49\uff0c\u7528\u4e8e\u660e\u786e\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u9879\u3002\u5728\u793a\u4f8b\u4e2d\uff0c<code>std::mem::size_of_val</code> \u4f7f\u7528\u4e86\u5b8c\u6574\u8def\u5f84\uff0c\u4ee5\u786e\u4fdd\u7f16\u8bd1\u5668\u80fd\u591f\u627e\u5230\u6b63\u786e\u7684\u51fd\u6570\u3002</p> </li> </ol> <p>\u6240\u4ee5\uff0c<code>std::mem::size_of_val</code> \u7684\u610f\u601d\u662f\u4ece\u6807\u51c6\u5e93 crate(<code>std</code>)\u4e2d\u7684 <code>mem</code> \u6a21\u5757\u4e2d\u8c03\u7528 <code>size_of_val</code> \u51fd\u6570\u3002\u8fd9\u79cd\u65b9\u5f0f\u6709\u52a9\u4e8e\u9632\u6b62\u547d\u540d\u51b2\u7a81\u548c\u786e\u4fdd\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\uff0c\u56e0\u4e3a\u5b83\u660e\u786e\u6307\u5b9a\u4e86\u8981\u4f7f\u7528\u7684\u51fd\u6570\u7684\u6765\u6e90\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#72-strong-type-system","title":"7.2 \u5f3a\u7c7b\u578b\u7cfb\u7edf (Strong type system)","text":"<p>Rust \u7684\u7c7b\u578b\u7cfb\u7edf\u662f\u5f3a\u7c7b\u578b\u7684\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u53d8\u91cf\u90fd\u5fc5\u987b\u5177\u6709\u660e\u786e\u5b9a\u4e49\u7684\u7c7b\u578b\uff0c\u5e76\u4e14\u5728\u7f16\u8bd1\u65f6\u4f1a\u4e25\u683c\u68c0\u67e5\u7c7b\u578b\u7684\u4e00\u81f4\u6027\u3002\u8fd9\u4e00\u7279\u6027\u5728\u91d1\u878d\u8ba1\u7b97\u4e2d\u5c24\u4e3a\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u6709\u52a9\u4e8e\u9632\u6b62\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u9519\u8bef\u7684\u7c7b\u578b\u4e0d\u5339\u914d\u95ee\u9898\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u8003\u8651\u4ee5\u4e0b\u4ee3\u7801\u7247\u6bb5\uff1a</p> <pre><code>let price: f64 = 150.0; // \u4ef7\u683c\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\nlet quantity: i32 = 100; // \u6570\u91cf\u662f\u4e00\u4e2a\u6574\u6570\nlet total_value = price * quantity; // \u7f16\u8bd1\u9519\u8bef\uff0c\u4e0d\u80fd\u5c06\u6d6e\u70b9\u6570\u4e0e\u6574\u6570\u76f8\u4e58\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u660e\u786e\u6307\u5b9a\u4e86 <code>price</code> \u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u800c <code>quantity</code> \u662f\u4e00\u4e2a\u6574\u6570\u3002\u5f53\u6211\u4eec\u5c1d\u8bd5\u5c06\u5b83\u4eec\u76f8\u4e58\u65f6\uff0cRust \u5728\u7f16\u8bd1\u65f6\u5c31\u4f1a\u7acb\u5373\u6355\u83b7\u5230\u7c7b\u578b\u4e0d\u5339\u914d\u7684\u9519\u8bef\u3002\u8fd9\u79cd\u7c7b\u578b\u68c0\u67e5\u7684\u4e25\u683c\u6027\u6709\u52a9\u4e8e\u907f\u514d\u91d1\u878d\u8ba1\u7b97\u4e2d\u5e38\u89c1\u7684\u9519\u8bef\uff0c\u4f8b\u5982\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u6df7\u6dc6\u6216\u9519\u8bef\u5730\u8fdb\u884c\u6570\u5b66\u8fd0\u7b97\u3002\u56e0\u6b64\uff0cRust \u7684\u5f3a\u7c7b\u578b\u7cfb\u7edf\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u5b89\u5168\u6027\u5c42\uff0c\u786e\u4fdd\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u5728\u7f16\u8bd1\u65f6\u6355\u83b7\u6f5c\u5728\u7684\u95ee\u9898\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5728\u8fd0\u884c\u65f6\u51fa\u73b0\u9519\u8bef\u7684\u98ce\u9669\u3002</p> <p>\u5728 Rust \u7684\u5f3a\u7c7b\u578b\u7cfb\u7edf\u4e2d\uff0c\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\u901a\u5e38\u9700\u8981\u663e\u5f0f\u8fdb\u884c\uff0c\u4ee5\u786e\u4fdd\u7c7b\u578b\u5b89\u5168\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#73-casting","title":"7.3 \u7c7b\u578b\u8f6c\u6362 (Casting)","text":"<p>Rust \u4e0d\u652f\u6301\u539f\u751f\u7c7b\u578b\u4e4b\u95f4\u7684\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362(coercion)\uff0c\u4f46\u5141\u8bb8\u901a\u8fc7 <code>as</code> \u5173\u952e\u5b57\u8fdb\u884c\u660e\u786e\u7684\u7c7b\u578b\u8f6c\u6362(casting)\u3002</p> <ol> <li>as \u8fd0\u7b97\u7b26\uff1a\u53ef\u4ee5\u4f7f\u7528 <code>as</code> \u8fd0\u7b97\u7b26\u6267\u884c\u7c7b\u578b\u8f6c\u6362\uff0c\u4f46\u662f\u53ea\u80fd\u7528\u4e8e\u6570\u503c\u4e4b\u95f4\u7684\u8f6c\u6362\u3002\u4f8b\u5982\uff0c\u5c06\u6574\u6570\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u6216\u5c06\u6d6e\u70b9\u6570\u8f6c\u6362\u4e3a\u6574\u6570\u3002</li> </ol> <pre><code>let integer_num: i32 = 42;\nlet float_num: f64 = integer_num as f64;\n\nlet float_value: f64 = 3.14;\nlet integer_value: i32 = float_value as i32;\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528 <code>as</code> \u8fdb\u884c\u7c7b\u578b\u8f6c\u6362**\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u6216\u4e0d\u786e\u5b9a\u884c\u4e3a**\uff0c\u56e0\u6b64\u8981\u8c28\u614e\u4f7f\u7528\u3002\u5728\u7a0b\u5e8f\u8bbe\u8ba1\u4e4b\u521d\uff0c\u6700\u597d\u5c31\u80fd\u89c4\u5212\u597d\u53d8\u91cf\u6570\u636e\u7684\u7c7b\u578b\u3002</p> <ol> <li>From \u548c Into trait\uff1a</li> </ol> <p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c<code>From</code> \u548c <code>Into</code> trait \u53ef\u4ee5\u7528\u6765\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u4ee5\u4fbf\u5728\u5904\u7406\u91d1\u878d\u6570\u636e\u548c\u7b97\u6cd5\u65f6\u66f4\u65b9\u4fbf\u5730\u64cd\u4f5c\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u3002\u4e0b\u9762\u8ba9\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u8bf4\u660e\u8fd9\u4e24\u4e2a trait \u5728\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u5e94\u7528\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u91d1\u878d\u5de5\u5177\u7c7b\u578b\uff1a<code>Stock</code>(\u80a1\u7968)\u548c <code>Option</code>(\u671f\u6743)\u3002\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u5728\u8fd9\u4e24\u79cd\u7c7b\u578b\u4e4b\u95f4\u8fdb\u884c\u8f6c\u6362\uff0c\u4ee5\u4fbf\u5728\u91d1\u878d\u7b97\u6cd5\u4e2d\u66f4\u7075\u6d3b\u5730\u5904\u7406\u5b83\u4eec\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u8fd9\u4e24\u79cd\u7c7b\u578b\u7684\u7ed3\u6784\u4f53\uff1a</p> <pre><code>struct Stock {\n    symbol: String,\n    price: f64,\n}\n\nstruct Option {\n    symbol: String,\n    strike_price: f64,\n    expiration_date: String,\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528 <code>From</code> \u548c <code>Into</code> trait \u6765\u5b9e\u73b0\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\u3002</p> <p>\u4ece Stock \u5230 Option \u7684\u8f6c\u6362\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u4ece\u4e00\u4e2a\u80a1\u7968\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684\u671f\u6743\u3002\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0 <code>From</code> trait \u6765\u5b9a\u4e49\u5982\u4f55\u4ece <code>Stock</code> \u8f6c\u6362\u4e3a <code>Option</code>\uff1a</p> <pre><code>impl From&lt;Stock&gt; for Option {\n    fn from(stock: Stock) -&gt; Self {\n        Option {\n            symbol: stock.symbol,\n            strike_price: stock.price * 1.1, // \u5047\u8bbe\u671f\u6743\u7684\u884c\u6743\u4ef7\u662f\u80a1\u7968\u4ef7\u683c\u7684110%\n            expiration_date: String::from(\"2023-12-31\"), // \u5047\u8bbe\u671f\u6743\u5230\u671f\u65e5\u671f\n        }\n    }\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u8fdb\u884c\u8f6c\u6362\uff1a</p> <pre><code>let stock = Stock {\n    symbol: String::from(\"AAPL\"),\n    price: 150.0,\n};\n\nlet option: Option = stock.into(); // \u4f7f\u7528 Into trait \u8fdb\u884c\u8f6c\u6362\n</code></pre> <pre><code>**\u4ece Option \u5230 Stock \u7684\u8f6c\u6362**\uff1a\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u5e0c\u671b\u4ece\u4e00\u4e2a\u671f\u6743\u521b\u5efa\u4e00\u4e2a\u5bf9\u5e94\u7684\u80a1\u7968\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u76f8\u53cd\u65b9\u5411\u7684\u8f6c\u6362\uff0c\u4f7f\u7528 <code>From</code> trait \u6216 <code>Into</code> trait \u7684\u9006\u64cd\u4f5c\u3002</p> <pre><code>impl From&lt;Option&gt; for Stock {\n    fn from(option: Option) -&gt; Self {\n        Stock {\n            symbol: option.symbol,\n            price: option.strike_price / 1.1, // \u5047\u8bbe\u671f\u6743\u7684\u884c\u6743\u4ef7\u662f\u80a1\u7968\u4ef7\u683c\u7684110%\n        }\n    }\n}\n</code></pre> <p>\u6216\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>Into</code> trait \u8fdb\u884c\u76f8\u53cd\u65b9\u5411\u7684\u8f6c\u6362\uff1a</p> <pre><code>let option = Option {\n    symbol: String::from(\"AAPL\"),\n    strike_price: 165.0,\n    expiration_date: String::from(\"2023-12-31\"),\n};\n\nlet stock: Stock = option.into(); // \u4f7f\u7528 Into trait \u8fdb\u884c\u8f6c\u6362\n</code></pre> <p>\u901a\u8fc7\u5b9e\u73b0 <code>From</code> \u548c <code>Into</code> trait\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\u903b\u8f91\uff0c\u4f7f\u5f97\u5728\u91cf\u5316\u91d1\u878d\u7b97\u6cd5\u4e2d\u66f4\u5bb9\u6613\u5730\u5904\u7406\u4e0d\u540c\u7684\u91d1\u878d\u5de5\u5177\u7c7b\u578b\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u7075\u6d3b\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002\u8fd9\u6709\u52a9\u4e8e\u7b80\u5316\u91d1\u878d\u6570\u636e\u5904\u7406\u7684\u4ee3\u7801\uff0c\u5e76\u4f7f\u5176\u66f4\u5177\u53ef\u8bfb\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#74-inference","title":"7.4 \u81ea\u52a8\u7c7b\u578b\u63a8\u65ad(Inference)","text":"<p>\u5728Rust\u4e2d\uff0c\u7c7b\u578b\u63a8\u65ad\u5f15\u64ce\u975e\u5e38\u5f3a\u5927\uff0c\u5b83\u4e0d\u4ec5\u5728\u521d\u59cb\u5316\u53d8\u91cf\u65f6\u8003\u8651\u53f3\u503c(r-value)\u7684\u7c7b\u578b\uff0c\u8fd8\u4f1a\u5206\u6790\u53d8\u91cf\u4e4b\u540e\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u4ee5\u4fbf\u66f4\u51c6\u786e\u5730\u63a8\u65ad\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u7c7b\u578b\u63a8\u65ad\u793a\u4f8b\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u8bf4\u660e\u5b83\u7684\u5de5\u4f5c\u539f\u7406\u3002</p> <pre><code>fn main() {\n    let mut x = 5; // \u53d8\u91cf x \u88ab\u521d\u59cb\u5316\u4e3a\u6574\u6570 5\n    x = 10; // \u73b0\u5728\uff0c\u5c06 x \u66f4\u65b0\u4e3a\u6574\u6570 10\n    println!(\"x = {}\", x);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u58f0\u660e\u4e86\u4e00\u4e2a\u53d8\u91cf <code>x</code>\uff0c\u5e76\u5c06\u5176\u521d\u59cb\u5316\u4e3a\u6574\u65705\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06 <code>x</code> \u7684\u503c\u66f4\u6539\u4e3a\u6574\u657010\uff0c\u5e76\u6700\u540e\u6253\u5370\u51fa <code>x</code> \u7684\u503c\u3002</p> <p>Rust\u7684\u7c7b\u578b\u63a8\u65ad\u5f15\u64ce\u5982\u4f55\u5de5\u4f5c\uff1a</p> <ol> <li>\u53d8\u91cf\u521d\u59cb\u5316\uff1a\u5f53\u6211\u4eec\u58f0\u660e <code>x</code> \u5e76\u5c06\u5176\u521d\u59cb\u5316\u4e3a5\u65f6\uff0cRust\u7684\u7c7b\u578b\u63a8\u65ad\u5f15\u64ce\u4f1a\u6839\u636e\u53f3\u503c\u7684\u7c7b\u578b(\u8fd9\u91cc\u662f\u6574\u65705)\u63a8\u65ad\u51fa <code>x</code> \u7684\u7c7b\u578b\u4e3a\u6574\u6570(<code>i32</code>)\u3002</li> <li>\u8d4b\u503c\u64cd\u4f5c\uff1a\u5f53\u6211\u4eec\u6267\u884c <code>x = 10;</code> \u8fd9\u884c\u4ee3\u7801\u65f6\uff0cRust\u4e0d\u4ec5\u68c0\u67e5\u53f3\u503c(\u6574\u657010)\u7684\u7c7b\u578b\uff0c\u8fd8\u4f1a\u8003\u8651\u5de6\u503c(\u53d8\u91cf <code>x</code>)\u7684\u7c7b\u578b\u3002\u5b83\u53d1\u73b0 <code>x</code> \u5df2\u7ecf\u88ab\u63a8\u65ad\u4e3a\u6574\u6570(<code>i32</code>)\uff0c\u6240\u4ee5\u5b83\u77e5\u9053\u6211\u4eec\u5c1d\u8bd5\u5c06\u4e00\u4e2a\u6574\u6570\u8d4b\u7ed9 <code>x</code>\uff0c\u5e76\u4e14\u8fd9\u662f\u5408\u6cd5\u7684\u3002</li> <li>\u6253\u5370\uff1a\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>println!</code> \u5b8f\u6253\u5370 <code>x</code> \u7684\u503c\u3002Rust\u4ecd\u7136\u77e5\u9053 <code>x</code> \u7684\u7c7b\u578b\u662f\u6574\u6570\uff0c\u56e0\u6b64\u5b83\u53ef\u4ee5\u6b63\u786e\u5730\u5c06\u5176\u683c\u5f0f\u5316\u4e3a\u5b57\u7b26\u4e32\u5e76\u6253\u5370\u51fa\u6765\u3002</li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#75-generic-type","title":"7.5 \u6cdb\u578b (Generic Type)","text":"<p>\u5728Rust\u4e2d\uff0c\u6cdb\u578b(Generics)\u5141\u8bb8\u4f60\u7f16\u5199\u53ef\u4ee5\u5904\u7406\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u901a\u7528\u4ee3\u7801\uff0c\u8fd9\u5bf9\u4e8e\u91d1\u878d\u9886\u57df\u7684\u91d1\u878d\u5de5\u5177\u5c24\u5176\u6709\u7528\u3002\u4f60\u53ef\u4ee5\u7f16\u5199\u901a\u7528\u51fd\u6570\u6216\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177(\u5373\u91d1\u878d\u5de5\u5177\u7684\u5404\u79cd\u6570\u636e\u7c7b\u578b)\uff0c\u800c\u4e0d\u5fc5\u4e3a\u6bcf\u79cd\u7c7b\u578b\u90fd\u7f16\u5199\u91cd\u590d\u7684\u4ee3\u7801\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528Rust\u7684\u6cdb\u578b\u6765\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\uff1a</p> <pre><code>struct FinancialInstrument&lt;T&gt; {\n    symbol: String,\n    value: T,\n}\n\nimpl&lt;T&gt; FinancialInstrument&lt;T&gt; {\n    fn new(symbol: &amp;str, value: T) -&gt; Self {\n        FinancialInstrument {\n            symbol: String::from(symbol),\n            value,\n        }\n    }\n\n    fn get_value(&amp;self) -&gt; &amp;T {\n        &amp;self.value\n    }\n}\n\nfn main() {\n    let stock = FinancialInstrument::new(\"AAPL\", \"150.0\"); // \u5f15\u53d1\u6df7\u6dc6\uff0cvalue\u7684\u7c7b\u578b\u5e94\u8be5\u662f\u6570\u5b57\n    let option = FinancialInstrument::new(\"AAPL Call\", true); // \u5f15\u53d1\u6df7\u6dc6\uff0cvalue\u7684\u7c7b\u578b\u5e94\u8be5\u662f\u6570\u5b57\u6216\u91d1\u989d\n\n    println!(\"Stock value: {}\", stock.get_value()); // \u8fd9\u91cc\u5e94\u8be5\u5904\u7406\u6570\u5b57\uff0c\u4f46\u73b0\u5728\u662f\u5b57\u7b26\u4e32\n    println!(\"Option value: {}\", option.get_value()); // \u8fd9\u91cc\u5e94\u8be5\u5904\u7406\u6570\u5b57\u6216\u91d1\u989d\uff0c\u4f46\u73b0\u5728\u662f\u5e03\u5c14\u503c\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c:</p> <pre><code>Stock value: 150.0\nOption value: true\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6cdb\u578b\u7ed3\u6784\u4f53 <code>FinancialInstrument&lt;T&gt;</code>\uff0c\u5b83\u53ef\u4ee5\u5b58\u50a8\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\u7684\u503c\u3002\u65e0\u8bba\u662f\u80a1\u7968\u8fd8\u662f\u671f\u6743\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u4ee3\u7801\u6765\u521b\u5efa\u548c\u8bbf\u95ee\u5b83\u4eec\u7684\u503c\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u80a1\u7968(<code>stock</code>)\u548c\u4e00\u4e2a\u671f\u6743(<code>option</code>)\uff0c\u5b83\u4eec\u90fd\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u6cdb\u578b\u7ed3\u6784\u4f53 <code>FinancialInstrument&lt;T&gt;</code>\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>get_value</code> \u65b9\u6cd5\u6765\u8bbf\u95ee\u5b83\u4eec\u7684\u503c\uff0c\u5e76\u6253\u5370\u51fa\u6765\u3002</p> <p>\u4f46\u662f,</p> <p>\u5728\u5b9e\u9645\u64cd\u4f5c\u5c42\u9762,\u8fd9\u662f\u4e00\u4e2a**\u975e\u5e38\u597d\u7684\u53cd\u4f8b**,\u5e94\u8be5\u5c3d\u91cf\u907f\u514d,\u56e0\u4e3a\u4f7f\u7528\u6cdb\u578b\u628a\u4e0d\u540c\u7684\u91d1\u878d\u5de5\u5177\u5f52\u7eb3\u4e3aFinancialInstrument, \u4f1a\u9020\u6210\u4e0d\u5fc5\u8981\u7684\u6df7\u6dc6\u3002</p> <p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u4f7f\u7528\u6cdb\u578b\u65f6\u9700\u8981\u8003\u8651\u7684\u5efa\u8bae\uff1a</p> <ol> <li>\u5408\u7406\u4f7f\u7528\u6cdb\u578b\uff1a\u53ea\u6709\u5728\u9700\u8981\u5904\u7406\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u60c5\u51b5\u4e0b\u624d\u4f7f\u7528\u6cdb\u578b\u3002\u5982\u679c\u53ea\u6709\u4e00\u79cd\u6216\u5c11\u6570\u51e0\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u90a3\u4e48\u53ef\u80fd\u4e0d\u9700\u8981\u6cdb\u578b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5177\u4f53\u7c7b\u578b\u3002</li> <li>\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u7c7b\u578b\u53c2\u6570\u540d\u79f0\uff1a\u4e3a\u6cdb\u578b\u53c2\u6570\u9009\u62e9\u6709\u610f\u4e49\u7684\u540d\u79f0\uff0c\u4ee5\u4fbf\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u7406\u89e3\u4ee3\u7801\u7684\u542b\u4e49\u3002\u907f\u514d\u4f7f\u7528\u8fc7\u4e8e\u62bd\u8c61\u7684\u540d\u79f0\u3002</li> <li>\u6587\u6863\u548c\u6ce8\u91ca\uff1a\u4e3a\u4f7f\u7528\u6cdb\u578b\u7684\u4ee3\u7801\u63d0\u4f9b\u6e05\u6670\u7684\u6587\u6863\u548c\u6ce8\u91ca\uff0c\u89e3\u91ca\u6cdb\u578b\u53c2\u6570\u7684\u4f5c\u7528\u548c\u9884\u671f\u7684\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u6709\u52a9\u4e8e\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u66f4\u5bb9\u6613\u7406\u89e3\u4ee3\u7801\u3002</li> <li>\u6d4b\u8bd5\u548c\u9a8c\u8bc1\uff1a\u786e\u4fdd\u4f7f\u7528\u6cdb\u578b\u7684\u4ee3\u7801\u7ecf\u8fc7\u5145\u5206\u7684\u6d4b\u8bd5\u548c\u9a8c\u8bc1\uff0c\u4ee5\u786e\u4fdd\u5176\u6b63\u786e\u6027\u548c\u6027\u80fd\u3002\u6cdb\u578b\u4ee3\u7801\u53ef\u80fd\u4f1a\u5f15\u5165\u66f4\u591a\u7684\u590d\u6742\u6027\uff0c\u56e0\u6b64\u9700\u8981\u989d\u5916\u7684\u5173\u6ce8\u3002</li> <li>\u907f\u514d\u8fc7\u5ea6\u62bd\u8c61\uff1a\u907f\u514d\u5728\u4e0d\u5fc5\u8981\u7684\u5730\u65b9\u4f7f\u7528\u6cdb\u578b\u3002\u5982\u679c\u4e00\u4e2a\u7279\u5b9a\u7684\u5b9e\u73b0\u5bf9\u4e8e\u67d0\u4e2a\u7279\u5b9a\u95ee\u9898\u66f4\u52a0\u6e05\u6670\u548c\u9ad8\u6548\uff0c\u4e0d\u8981\u5f3a\u884c\u4f7f\u7528\u6cdb\u578b\u3002</li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#_1","title":"\u6848\u4f8b\uff1a  \u901a\u7528\u6295\u8d44\u7ec4\u5408","text":"<p>\u627f\u63a5\u4e0a\u6587\uff0c\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a**\u66f4\u5408\u9002\u7684\u6848\u4f8b**\uff0c\u5176\u4e2d\u6cdb\u578b\u7528\u4e8e\u5904\u7406\u66f4\u5177\u4f53\u7684\u95ee\u9898\u3002\u8003\u8651\u4e00\u4e2a\u6295\u8d44\u7ec4\u5408\u7ba1\u7406\u7cfb\u7edf\uff0c\u5176\u4e2d\u6709\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7(\u80a1\u7968\u3001\u503a\u5238\u3001\u671f\u6743\u7b49)\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6cdb\u578b\u6765\u5b9e\u73b0\u4e00\u4e2a\u901a\u7528\u7684\u6295\u8d44\u7ec4\u5408\u7ed3\u6784\uff0c\u4f46\u540c\u65f6\u4fdd\u7559\u6bcf\u79cd\u8d44\u4ea7\u7684\u5177\u4f53\u7c7b\u578b\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u6cdb\u578b\u7684\u8d44\u4ea7\u7ed3\u6784\n#[derive(Debug)]\nstruct Asset&lt;T&gt; {\n    name: String,\n    asset_type: T,\n    // \u8fd9\u91cc\u53ef\u4ee5\u5305\u542b\u8d44\u4ea7\u7684\u5176\u4ed6\u5c5e\u6027\n}\n\n// \u5b9a\u4e49\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\n#[derive(Debug)]\nenum AssetType {\n    Stock,\n    Bond,\n    Option,\n    // \u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u7c7b\u578b\n}\n\n// \u793a\u4f8b\u8d44\u4ea7\u7c7b\u578b\u4e4b\u4e00\uff1a\u80a1\u7968\n#[allow(dead_code)]\n#[derive(Debug)]\nstruct Stock {\n    ticker: String,\n    price: f64,\n    // \u5176\u4ed6\u80a1\u7968\u76f8\u5173\u5c5e\u6027\n}\n\n// \u793a\u4f8b\u8d44\u4ea7\u7c7b\u578b\u4e4b\u4e00\uff1a\u503a\u5238\n#[allow(dead_code)]\n#[derive(Debug)]\nstruct Bond {\n    issuer: String,\n    face_value: f64,\n    // \u5176\u4ed6\u503a\u5238\u76f8\u5173\u5c5e\u6027\n}\n\n// \u793a\u4f8b\u8d44\u4ea7\u7c7b\u578b\u4e4b\u4e00\uff1a\u671f\u6743\n#[allow(dead_code)]\n#[derive(Debug)]\nstruct Option {\n    underlying_asset: String,\n    strike_price: f64,\n    // \u5176\u4ed6\u671f\u6743\u76f8\u5173\u5c5e\u6027\n}\n\nfn main() {\n    // \u521b\u5efa\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\u5b9e\u4f8b\n    let stock = Asset {\n        name: \"Apple Inc.\".to_string(),\n        asset_type: AssetType::Stock,\n    };\n\n    let bond = Asset {\n        name: \"US Treasury Bond\".to_string(),\n        asset_type: AssetType::Bond,\n    };\n\n    let option = Asset {\n        name: \"Call Option on Google\".to_string(),\n        asset_type: AssetType::Option,\n    };\n\n    // \u6253\u5370\u4e0d\u540c\u7c7b\u578b\u7684\u8d44\u4ea7\n    println!(\"Asset 1: {} ({:?})\", stock.name, stock.asset_type);\n    println!(\"Asset 2: {} ({:?})\", bond.name, bond.asset_type);\n    println!(\"Asset 3: {} ({:?})\", option.name, option.asset_type);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6cdb\u578b\u7ed3\u6784\u4f53 <code>Asset&lt;T&gt;</code> \u4ee3\u8868\u6295\u8d44\u7ec4\u5408\u4e2d\u7684\u8d44\u4ea7\u3002\u8fd9\u4e2a\u6cdb\u578b\u7ed3\u6784\u4f53\u4f7f\u7528\u4e86\u6cdb\u578b\u53c2\u6570 <code>T</code>\uff0c\u4ee5\u4fdd\u6301\u6295\u8d44\u7ec4\u5408\u7684\u591a\u6837\u548c\u7075\u6d3b\u6027\u2014\u2014\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 trait \u548c\u5177\u4f53\u7684\u8d44\u4ea7\u7c7b\u578b(\u6bd4\u5982 <code>Stock</code>\u3001<code>Option</code> \u7b49)\u6765\u786e\u4fdd\u6bcf\u79cd\u8d44\u4ea7\u90fd\u6709\u81ea\u5df1\u72ec\u7279\u7684\u5c5e\u6027\u548c\u884c\u4e3a\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2007%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/#76-alias","title":"7.6 \u522b\u540d (Alias)","text":"<p>\u5728\u5f88\u591a\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u5305\u62ec\u50cfRust\u3001TypeScript\u548cPython\u7b49\uff0c\u90fd\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\u6765\u7ed9\u5df2\u6709\u7684\u7c7b\u578b\u53d6\u4e00\u4e2a\u65b0\u7684\u540d\u5b57\uff0c\u8fd9\u901a\u5e38\u88ab\u79f0\u4e3a\"\u7c7b\u578b\u522b\u540d\"\u6216\"\u7c7b\u578b\u91cd\u547d\u540d\"\u3002\u8fd9\u53ef\u4ee5\u589e\u52a0\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\uff0c\u5c24\u5176\u5728\u5904\u7406\u590d\u6742\u7684\u7c7b\u578b\u65f6\u5f88\u6709\u7528\u3002Rust\u7684\u7c7b\u578b\u7cfb\u7edf\u53ef\u4ee5\u975e\u5e38\u5f3a\u5927\u548c\u7075\u6d3b\u3002</p> <p>\u8ba9\u6211\u4eec\u518d\u6b21\u6f14\u793a\u4e00\u4e2a\u91cf\u5316\u91d1\u878d\u9886\u57df\u7684\u6848\u4f8b\uff0c\u8fd9\u6b21\u7c7b\u578b\u522b\u540d\u662f\u4e3b\u89d2\u3002\u8fd9\u4e2a\u793a\u4f8b\u5c06\u4f7f\u7528\u7c7b\u578b\u522b\u540d\u6765\u8868\u793a\u4e0d\u540c\u7684\u91d1\u878d\u6570\u636e\uff0c \u5982\u4ef7\u683c\u3001\u4ea4\u6613\u91cf\u3001\u65e5\u671f\u7b49\u3002</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u522b\u540d\uff0c\u8868\u793a\u4ef7\u683c\ntype Price = f64;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u522b\u540d\uff0c\u8868\u793a\u4ea4\u6613\u91cf\ntype Volume = u32;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u522b\u540d\uff0c\u8868\u793a\u65e5\u671f\ntype Date = String;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u80a1\u7968\u6570\u636e\nstruct StockData {\n    symbol: String,\n    date: Date,\n    price: Price,\n    volume: Volume,\n}\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u503a\u5238\u6570\u636e\nstruct BondData {\n    name: String,\n    date: Date,\n    price: Price,\n}\n\nfn main() {\n    // \u521b\u5efa\u80a1\u7968\u6570\u636e\n    let apple_stock = StockData {\n        symbol: String::from(\"AAPL\"),\n        date: String::from(\"2023-09-13\"),\n        price: 150.0,\n        volume: 10000,\n    };\n\n    // \u521b\u5efa\u503a\u5238\u6570\u636e\n    let us_treasury_bond = BondData {\n        name: String::from(\"US Treasury Bond\"),\n        date: String::from(\"2023-09-13\"),\n        price: 1000.0,\n    };\n\n    // \u8f93\u51fa\u80a1\u7968\u6570\u636e\u548c\u503a\u5238\u6570\u636e\n    println!(\"Stock Data:\");\n    println!(\"Symbol: {}\", apple_stock.symbol);\n    println!(\"Date: {}\", apple_stock.date);\n    println!(\"Price: ${}\", apple_stock.price);\n    println!(\"Volume: {}\", apple_stock.volume);\n\n    println!(\"\");\n\n    println!(\"Bond Data:\");\n    println!(\"Name: {}\", us_treasury_bond.name);\n    println!(\"Date: {}\", us_treasury_bond.date);\n    println!(\"Price: ${}\", us_treasury_bond.price);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Stock Data:\nSymbol: AAPL\nDate: 2023-09-13\nPrice: $150\nVolume: 10000\n\nBond Data:\nName: US Treasury Bond\nDate: 2023-09-13\nPrice: $1000\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2008%20-%20%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/","title":"Chapter 8 - \u7c7b\u578b\u8f6c\u6362","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2008%20-%20%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/#81-from-into","title":"8.1 From \u548c Into \u7279\u6027","text":"<p>\u57287.3\u6211\u4eec\u5df2\u7ecf\u8bb2\u8fc7\u901a\u8fc7From\u548cInto Traits \u6765\u5b9e\u73b0\u7c7b\u578b\u8f6c\u6362\uff0c\u73b0\u5728\u6211\u4eec\u6765\u8be6\u7ec6\u89e3\u91ca\u4ee5\u4e0b\u5b83\u7684\u57fa\u7840\u3002</p> <p><code>From</code> \u548c <code>Into</code> \u662f\u4e00\u79cd\u76f8\u5173\u4f46\u7565\u6709\u4e0d\u540c\u7684 trait\uff0c\u5b83\u4eec\u901a\u5e38\u4e00\u8d77\u4f7f\u7528\u4ee5\u63d0\u4f9b\u7c7b\u578b\u4e4b\u95f4\u7684\u53cc\u5411\u8f6c\u6362\u3002\u8fd9\u4e24\u4e2a trait \u7684\u5173\u7cfb\u5982\u4e0b\uff1a</p> <ol> <li><code>From</code> Trait\uff1a\u5b83\u5b9a\u4e49\u4e86\u5982\u4f55\u4ece\u4e00\u4e2a\u7c7b\u578b\u521b\u5efa\u53e6\u4e00\u4e2a\u7c7b\u578b\u7684\u503c\u3002\u901a\u5e38\uff0c\u4f60\u4f1a\u4e3a\u9700\u8981\u81ea\u5b9a\u4e49\u7c7b\u578b\u8f6c\u6362\u7684\u60c5\u51b5\u5b9e\u73b0 <code>From</code> trait\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u5b9e\u73b0 <code>From&lt;i32&gt;</code> \u6765\u5b9a\u4e49\u5982\u4f55\u4ece <code>i32</code> \u8f6c\u6362\u4e3a\u4f60\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\u3002</li> <li><code>Into</code> Trait\uff1a\u5b83\u662f <code>From</code> \u7684\u53cd\u5411\u64cd\u4f5c\u3002<code>Into</code> trait \u5141\u8bb8\u4f60\u5b9a\u4e49\u5982\u4f55\u5c06\u4e00\u4e2a\u7c7b\u578b\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7c7b\u578b\u3002\u5f53\u4f60\u5b9e\u73b0\u4e86 <code>From</code> trait \u65f6\uff0cRust \u4f1a\u81ea\u52a8\u4e3a\u4f60\u63d0\u4f9b <code>Into</code> trait \u7684\u5b9e\u73b0\uff0c\u56e0\u6b64\u4f60\u65e0\u9700\u663e\u5f0f\u5730\u4e3a\u7c7b\u578b\u7684\u53cd\u5411\u8f6c\u6362\u5b9e\u73b0 <code>Into</code>\u3002</li> </ol> <p>\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e24\u4e2a trait \u901a\u5e38\u662f\u4e00\u4f53\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u76f8\u4e92\u5173\u8054\u7684\u3002\u5982\u679c\u4f60\u5b9e\u73b0\u4e86 <code>From</code>\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 <code>into()</code> \u65b9\u6cd5\u6765\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\uff0c\u800c\u5982\u679c\u4f60\u5b9e\u73b0\u4e86 <code>Into</code>\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>from()</code> \u65b9\u6cd5\u6765\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u3002\u8fd9\u4f7f\u5f97\u4ee3\u7801\u66f4\u5177\u7075\u6d3b\u6027\u548c\u53ef\u8bfb\u6027\u3002</p> <p>\u6807\u51c6\u5e93\u4e2d\u5177\u6709 <code>From</code> \u7279\u6027\u5b9e\u73b0\u7684\u7c7b\u578b\u6709\u5f88\u591a\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u4f8b\u5b50\uff1a</p> <ol> <li>&amp;str \u5230 String: \u53ef\u4ee5\u4f7f\u7528 <code>String::from()</code> \u65b9\u6cd5\u5c06\u5b57\u7b26\u4e32\u5207\u7247(<code>&amp;str</code>)\u8f6c\u6362\u4e3a <code>String</code>\uff1a</li> </ol> <pre><code>let my_str = \"hello\";\nlet my_string = String::from(my_str);\n</code></pre> <ol> <li>&amp;String \u5230 &amp;str: <code>String</code> \u7c7b\u578b\u53ef\u4ee5\u901a\u8fc7\u5f15\u7528\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u5207\u7247\uff1a</li> </ol> <pre><code>let my_string = String::from(\"hello\");\nlet my_str: &amp;str = &amp;my_string;\n</code></pre> <ol> <li>\u6570\u5b57\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362: \u4f8b\u5982\uff0c\u53ef\u4ee5\u5c06\u6574\u6570\u7c7b\u578b\u8f6c\u6362\u4e3a\u6d6e\u70b9\u6570\u7c7b\u578b\uff0c\u6216\u8005\u53cd\u4e4b\uff1a</li> </ol> <pre><code>let int_num = 42;\nlet float_num = f64::from(int_num);\n</code></pre> <ol> <li>\u5b57\u7b26\u5230\u5b57\u7b26\u4e32: \u5b57\u7b26\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528 <code>to_string()</code> \u65b9\u6cd5\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff1a</li> </ol> <pre><code>let my_char = 'a';\nlet my_string = my_char.to_string();\n</code></pre> <ol> <li>Vec \u5230 Boxed Slice: \u53ef\u4ee5\u4f7f\u7528 <code>Vec::into_boxed_slice()</code> \u5c06 <code>Vec</code> \u8f6c\u6362\u4e3a\u5806\u5206\u914d\u7684\u5207\u7247(<code>Box&lt;[T]&gt;</code>)\uff1a</li> </ol> <pre><code>let my_vec = vec![1, 2, 3];\nlet boxed_slice: Box&lt;[i32]&gt; = my_vec.into_boxed_slice();\n</code></pre> <p>\u8fd9\u4e9b\u90fd\u662f\u6807\u51c6\u5e93\u4e2d\u5e38\u89c1\u7684 <code>From</code> \u5b9e\u73b0\u7684\u793a\u4f8b\uff0c\u5b83\u4eec\u4f7f\u5f97\u4e0d\u540c\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\u66f4\u52a0\u7075\u6d3b\u548c\u65b9\u4fbf\u3002\u8981\u8bb0\u4f4f\uff0c<code>From</code> \u7279\u6027\u662f\u4e00\u79cd\u7528\u4e8e\u5b9a\u4e49\u7c7b\u578b\u4e4b\u95f4\u8f6c\u6362\u89c4\u5219\u7684\u5f3a\u5927\u5de5\u5177\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2008%20-%20%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/#82-tryfrom-tryinto","title":"8.2 TryFrom \u548c TryInto \u7279\u6027","text":"<p>\u4e0e <code>From</code> \u548c <code>Into</code> \u7c7b\u4f3c\uff0c<code>TryFrom</code> \u548c <code>TryInto</code> \u662f\u7528\u4e8e\u7c7b\u578b\u8f6c\u6362\u7684\u901a\u7528 traits\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c<code>TryFrom</code> \u548c <code>TryInto</code> \u4e3b\u8981\u7528\u4e8e\u53ef\u80fd\u4f1a \u5bfc\u81f4\u9519\u8bef \u7684\u8f6c\u6362\uff0c\u56e0\u6b64\u5b83\u4eec\u7684\u8fd4\u56de\u7c7b\u578b\u4e5f\u662f <code>Result</code>\u3002</p> <p>\u5f53\u4f7f\u7528\u91cf\u5316\u91d1\u878d\u6848\u4f8b\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u5982\u4f55\u5904\u7406\u4e0d\u540c\u91d1\u878d\u5de5\u5177\u7684\u4ef7\u683c\u6216\u6307\u6807\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u4f8b\u5982\u5c06\u80a1\u7968\u4ef7\u683c\u8f6c\u6362\u4e3a\u5bf9\u6570\u6536\u76ca\u7387\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>use std::convert::{TryFrom, TryInto};\n\n// \u6211\u4eec\u6765\u81ea\u5df1\u5efa\u7acb\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u7c7b\u578b ConversionError , \u7528\u6765\u6c47\u62a5\u7c7b\u578b\u8f6c\u6362\u51fa\u9519\n#[derive(Debug)]\nstruct ConversionError;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\u8868\u793a\u80a1\u7968\u4ef7\u683c\nstruct StockPrice {\n    price: f64,\n}\n\n// \u5b9e\u73b0 TryFrom \u6765\u5c1d\u8bd5\u5c06\u80a1\u7968\u4ef7\u683c\u8f6c\u6362\u4e3a\u5bf9\u6570\u6536\u76ca\u7387\uff0c\u53ef\u80fd\u5931\u8d25\nimpl TryFrom&lt;StockPrice&gt; for f64 {\n    type Error = ConversionError;\n\n    fn try_from(stock_price: StockPrice) -&gt; Result&lt;Self, Self::Error&gt; {\n        if stock_price.price &gt; 0.0 {\n            Ok(stock_price.price.ln()) // \u8ba1\u7b97\u5bf9\u6570\u6536\u76ca\u7387\n        } else {\n            Err(ConversionError)\n        }\n    }\n}\n\nfn main() {\n    // \u5c1d\u8bd5\u4f7f\u7528 TryFrom \u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\n    let valid_price = StockPrice { price: 50.0 };\n    let result: Result&lt;f64, ConversionError&gt; = valid_price.try_into();\n    println!(\"{:?}\", result); // \u6253\u5370\u5bf9\u6570\u6536\u76ca\u7387\n\n    let invalid_price = StockPrice { price: -10.0 };\n    let result: Result&lt;f64, ConversionError&gt; = invalid_price.try_into();\n    println!(\"{:?}\", result); // \u6253\u5370\u9519\u8bef\u4fe1\u606f\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>StockPrice</code> \u7ed3\u6784\u4f53\u6765\u8868\u793a\u80a1\u7968\u4ef7\u683c\uff0c\u7136\u540e\u4f7f\u7528 <code>TryFrom</code> \u5b9e\u73b0\u4e86\u4ece <code>StockPrice</code> \u5230 <code>f64</code> \u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5176\u4e2d <code>f64</code> \u8868\u793a\u5bf9\u6570\u6536\u76ca\u7387\u3002</p> <p></p> <p>\u81ea\u7136\u5bf9\u6570(\u82f1\u8bed\uff1aNatural logarithm)\u4e3a\u4ee5\u6570\u5b66\u5e38\u6570e\u4e3a\u5e95\u6570\u7684\u5bf9\u6570\u51fd\u6570\uff0c\u6211\u4eec\u77e5\u9053\u5b83\u7684\u5b9a\u4e49\u57df\u662f**(0, +\u221e)**\uff0c\u4e5f\u5c31\u662f\u53d6\u503c\u662f\u8981\u5927\u4e8e0\u7684\u3002\u5982\u679c\u80a1\u7968\u4ef7\u683c\u5c0f\u4e8e\u7b49\u4e8e0\uff0c\u8f6c\u6362\u4f1a\u4ea7\u751f\u9519\u8bef\u3002\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>TryFrom</code> \u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\uff0c\u5e76\u5728\u53ef\u80fd\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\u83b7\u53d6 <code>Result</code> \u7c7b\u578b\u7684\u7ed3\u679c\u3002\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2008%20-%20%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/#83-tostringfromstr","title":"8.3 ToString\u548cFromStr","text":"<p>\u8fd9\u4e24\u4e2a trait \u662f\u7528\u4e8e\u7c7b\u578b\u8f6c\u6362\u548c\u89e3\u6790\u5b57\u7b26\u4e32\u7684\u5e38\u7528\u65b9\u6cd5\u3002\u8ba9\u6211\u7ed9\u4f60\u89e3\u91ca\u4e00\u4e0b\u5b83\u4eec\u7684\u4f5c\u7528\u548c\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u4e2d\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <p>\u9996\u5148\uff0cToString trait \u662f\u7528\u4e8e\u5c06\u7c7b\u578b\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u7684 trait\u3002\u5b83\u662f\u4e00\u4e2a\u901a\u7528 trait\uff0c\u53ef\u4ee5\u4e3a\u4efb\u4f55\u7c7b\u578b\u5b9e\u73b0\u3002\u901a\u8fc7\u5b9e\u73b0ToString trait\uff0c\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528to_string()\u65b9\u6cd5\u5c06\u81ea\u5df1\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u8868\u793a\u4ef7\u683c\u7684\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\uff0c\u53ef\u4ee5\u5b9e\u73b0ToString trait\u4ee5\u4fbf\u5c06\u5176\u4ef7\u683c\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002</p> <pre><code>struct Price {\n    currency: String,\n    value: f64,\n}\n\nimpl ToString for Price {\n    fn to_string(&amp;self) -&gt; String {\n        format!(\"{} {}\", self.value, self.currency)\n    }\n}\n\nfn main() {\n    let price = Price {\n        currency: String::from(\"USD\"),\n        value: 10.99,\n    };\n    let price_string = price.to_string();\n    println!(\"Price: {}\", price_string); // \u8f93\u51fa: \"Price: 10.99 USD\"\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0cFromStr trait \u662f\u7528\u4e8e\u4ece\u5b57\u7b26\u4e32\u89e3\u6790\u51fa\u6307\u5b9a\u7c7b\u578b\u7684 trait\u3002\u5b83\u4e5f\u662f\u901a\u7528 trait\uff0c\u53ef\u4ee5\u4e3a\u4efb\u4f55\u7c7b\u578b\u5b9e\u73b0\u3002\u901a\u8fc7\u5b9e\u73b0FromStr trait\uff0c\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528from_str()\u65b9\u6cd5\u4ece\u5b57\u7b26\u4e32\u4e2d\u89e3\u6790\u51fa\u81ea\u8eab\u3002</p> <p>\u4f8b\u5982\uff0c\u5728\u91d1\u878d\u9886\u57df\u4e2d\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u8868\u793a\u80a1\u7968\u4ef7\u683c\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u5b9e\u73b0FromStr trait\u4ee5\u4fbf\u4ece\u5b57\u7b26\u4e32\u89e3\u6790\u51fa\u80a1\u7968\u4ef7\u683c\u3002</p> <pre><code>use std::str::FromStr;\n\n// \u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u80a1\u7968\u4ef7\u683c\nstruct StockPrice {\n    ticker_symbol: String,\n    price: f64,\n}\n\n// \u5b9e\u73b0ToString trait\uff0c\u5c06StockPrice\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\nimpl ToString for StockPrice {\n    // \u5c06StockPrice\u7ed3\u6784\u4f53\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\n    fn to_string(&amp;self) -&gt; String {\n        format!(\"{}:{}\", self.ticker_symbol, self.price)\n    }\n}\n\n// \u5b9e\u73b0FromStr trait\uff0c\u4ece\u5b57\u7b26\u4e32\u89e3\u6790\u51faStockPrice\nimpl FromStr for StockPrice {\n    type Err = ();\n\n    // \u4ece\u5b57\u7b26\u4e32\u89e3\u6790StockPrice\n    fn from_str(s: &amp;str) -&gt; Result&lt;Self, Self::Err&gt; {\n        // \u5c06\u5b57\u7b26\u4e32s\u6839\u636e\u5192\u53f7\u5206\u9694\u6210\u4e24\u4e2a\u90e8\u5206\n        let components: Vec&lt;&amp;str&gt; = s.split(':').collect();\n\n        // \u5982\u679c\u5b57\u7b26\u4e32\u4e0d\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff0c\u90a3\u4e00\u5b9a\u662f\u53d1\u751f\u9519\u8bef\u4e86\uff0c\u8fd4\u56de\u9519\u8bef\n        if components.len() != 2 {\n            return Err(());\n        }\n\n        // \u89e3\u6790\u7b2c\u4e00\u4e2a\u90e8\u5206\u4e3a\u80a1\u7968\u4ee3\u7801\n        let ticker_symbol = String::from(components[0]);\n\n        // \u89e3\u6790\u7b2c\u4e8c\u4e2a\u90e8\u5206\u4e3a\u4ef7\u683c\n        // \u8fd9\u91cc\u4f7f\u7528unwrap()\u7528\u4e8e\u7b80\u5316\u793a\u4f8b\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u53ef\u80fd\u9700\u8981\u66f4\u5b8c\u5907\u7684\u9519\u8bef\u5904\u7406\n        let price = components[1].parse::&lt;f64&gt;().unwrap();\n\n        // \u8fd4\u56de\u89e3\u6790\u540e\u7684StockPrice\n        Ok(StockPrice {\n            ticker_symbol,\n            price,\n        })\n    }\n}\n\nfn main() {\n    let price_string = \"AAPL:150.64\";\n\n    // \u4f7f\u7528from_str()\u65b9\u6cd5\u4ece\u5b57\u7b26\u4e32\u89e3\u6790\u51faStockPrice\n    let stock_price = StockPrice::from_str(price_string).unwrap();\n\n    // \u8f93\u51fa\u89e3\u6790\u5f97\u5230\u7684StockPrice\u5b57\u6bb5\n    println!(\"Ticker Symbol: {}\", stock_price.ticker_symbol); // \u8f93\u51fa: \"AAPL\"\n    println!(\"Price: {}\", stock_price.price); // \u8f93\u51fa: \"150.64\"\n\n    // \u4f7f\u7528to_string()\u65b9\u6cd5\u5c06StockPrice\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\n    let price_string_again = stock_price.to_string();\n\n    // \u8f93\u51fa\u8f6c\u6362\u540e\u7684\u5b57\u7b26\u4e32\n    println!(\"Price String: {}\", price_string_again); // \u8f93\u51fa: \"AAPL:150.64\"\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Ticker Symbol: AAPL # from_str\u65b9\u6cd5\u89e3\u6790\u51fa\u6765\u7684\u80a1\u7968\u4ee3\u7801\u4fe1\u606f\nPrice: 150.64 # from_str\u65b9\u6cd5\u89e3\u6790\u51fa\u6765\u7684\u4ef7\u683c\u4fe1\u606f\nPrice String: AAPL:150.64 # \u548c\"let price_string = \"AAPL:150.64\";\"\u53c8\u5bf9\u4e0a\u4e86\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/","title":"Chapter 9 - \u6d41\u7a0b\u63a7\u5236","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#91-if","title":"9.1 if \u6761\u4ef6\u8bed\u53e5","text":"<p>\u5728Rust\u4e2d\uff0c<code>if</code> \u8bed\u53e5\u7528\u4e8e\u6761\u4ef6\u63a7\u5236\uff0c\u5141\u8bb8\u6839\u636e\u6761\u4ef6\u7684\u771f\u5047\u6765\u6267\u884c\u4e0d\u540c\u7684\u4ee3\u7801\u5757\u3002Rust\u7684<code>if</code>\u8bed\u53e5\u6709\u4e00\u4e9b\u7279\u70b9\u548c\u8bed\u6cd5\u7ec6\u8282\uff0c\u4ee5\u4e0b\u662f\u5bf9Rust\u7684<code>if</code>\u8bed\u53e5\u7684\u4ecb\u7ecd\uff1a</p> <ol> <li>\u57fa\u672c\u8bed\u6cd5\uff1a</li> </ol> <pre><code>if condition {\n    // \u5982\u679c\u6761\u4ef6\u4e3a\u771f(true)\uff0c\u6267\u884c\u8fd9\u91cc\u7684\u4ee3\u7801\u5757\n} else {\n    // \u5982\u679c\u6761\u4ef6\u4e3a\u5047(false)\uff0c\u6267\u884c\u8fd9\u91cc\u7684\u4ee3\u7801\u5757(\u53ef\u9009)\n}\n</code></pre> <p><code>condition</code> \u662f\u4e00\u4e2a\u5e03\u5c14\u8868\u8fbe\u5f0f\uff0c\u6839\u636e\u5176\u7ed3\u679c\uff0c\u51b3\u5b9a\u6267\u884c\u54ea\u4e2a\u4ee3\u7801\u5757\u3002<code>else</code>\u90e8\u5206\u662f\u53ef\u9009\u7684\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u4e0d\u5305\u62ec\u5b83\u3002</p> <ol> <li>\u591a\u6761\u4ef6\u7684<code>if</code>\u8bed\u53e5\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>else if</code> \u6765\u6dfb\u52a0\u591a\u4e2a\u6761\u4ef6\u5206\u652f\uff0c\u4f8b\u5982\uff1a</p> <pre><code>if condition1 {\n    // \u6761\u4ef61\u4e3a\u771f\u65f6\u6267\u884c\n} else if condition2 {\n    // \u6761\u4ef61\u4e3a\u5047\uff0c\u6761\u4ef62\u4e3a\u771f\u65f6\u6267\u884c\n} else {\n    // \u6240\u6709\u6761\u4ef6\u90fd\u4e3a\u5047\u65f6\u6267\u884c\n}\n</code></pre> <p>\u8fd9\u5141\u8bb8\u4f60\u5728\u591a\u4e2a\u6761\u4ef6\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\u3002</p> <ol> <li>\u8868\u8fbe\u5f0f\u8fd4\u56de\u503c\uff1a</li> </ol> <p>\u5728Rust\u4e2d\uff0c<code>if</code>\u8bed\u53e5\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u503c\u3002\u8fd9\u4f7f\u5f97\u4f60\u53ef\u4ee5\u5c06<code>if</code>\u8bed\u53e5\u7684\u7ed3\u679c\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>let result = if condition { 1 } else { 0 };\n</code></pre> <p>\u8fd9\u91cc\uff0c<code>result</code>\u7684\u503c\u5c06\u6839\u636e\u6761\u4ef6\u7684\u771f\u5047\u6765\u8d4b\u503c\u4e3a1\u62160\u3002\u6ce8\u610f\u5e76\u4e0d\u662f\u5e03\u5c14\u503c\u3002</p> <ol> <li>\u6a21\u5f0f\u5339\u914d\uff1a</li> </ol> <p>\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>if</code>\u8bed\u53e5\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5e03\u5c14\u6761\u4ef6\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u5339\u914d\u679a\u4e3e\u7c7b\u578b\u6216\u5176\u4ed6\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u503c\u3002</p> <pre><code>enum Status {\n    Success,\n    Error,\n}\n\nlet status = Status::Success;\n\nif let Status::Success = status {\n    // \u5339\u914d\u6210\u529f\n} else {\n    // \u5339\u914d\u5931\u8d25\n}\n</code></pre> <p>\u603b\u7684\u6765\u8bf4\uff0cRust\u7684<code>if</code>\u8bed\u53e5\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u6761\u4ef6\u63a7\u5236\u529f\u80fd\uff0c\u540c\u65f6\u5177\u6709\u8868\u8fbe\u5f0f\u548c\u6a21\u5f0f\u5339\u914d\u7684\u7279\u6027\uff0c\u4f7f\u5f97\u5b83\u5728\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u6761\u4ef6\u548c\u573a\u666f\u65f6\u975e\u5e38\u7075\u6d3b\u548c\u53ef\u8bfb\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u6765\u7b80\u5355\u5e94\u7528\u4e00\u4e0bif\u8bed\u53e5\uff0c\u987a\u4fbf\u9884\u4e60for\u8bed\u53e5\uff1a</p> <pre><code>fn main() {\n    // \u521d\u59cb\u5316\u6295\u8d44\u7ec4\u5408\u7684\u98ce\u9669\u5206\u6570\n    let portfolio_risk_scores = vec![0.8, 0.6, 0.9, 0.5, 0.7];\n    let risk_threshold = 0.7; // \u98ce\u9669\u5206\u6570\u7684\u9608\u503c\n\n    // \u8ba1\u7b97\u9ad8\u98ce\u9669\u8d44\u4ea7\u7684\u6570\u91cf\n    let mut high_risk_assets = 0;\n\n    for &amp;risk_score in portfolio_risk_scores.iter() {\n        // \u4f7f\u7528 if \u6761\u4ef6\u8bed\u53e5\u5224\u65ad\u98ce\u9669\u5206\u6570\u662f\u5426\u8d85\u8fc7\u9608\u503c\n        if risk_score &gt; risk_threshold {\n            high_risk_assets += 1;\n        }\n    }\n\n    // \u57fa\u4e8e\u9ad8\u98ce\u9669\u8d44\u4ea7\u6570\u91cf\u8f93\u51fa\u4e0d\u540c\u7684\u4fe1\u606f\n    if high_risk_assets == 0 {\n        println!(\"\u6295\u8d44\u7ec4\u5408\u98ce\u9669\u6c34\u5e73\u4f4e\uff0c\u6ca1\u6709\u9ad8\u98ce\u9669\u8d44\u4ea7\u3002\");\n    } else if high_risk_assets &lt;= 2 {\n        println!(\"\u6295\u8d44\u7ec4\u5408\u98ce\u9669\u6c34\u5e73\u4e2d\u7b49\uff0c\u6709\u5c11\u91cf\u9ad8\u98ce\u9669\u8d44\u4ea7\u3002\");\n    } else {\n        println!(\"\u6295\u8d44\u7ec4\u5408\u98ce\u9669\u6c34\u5e73\u8f83\u9ad8\uff0c\u6709\u591a\u4e2a\u9ad8\u98ce\u9669\u8d44\u4ea7\u3002\");\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u6295\u8d44\u7ec4\u5408\u98ce\u9669\u6c34\u5e73\u4e2d\u7b49\uff0c\u6709\u5c11\u91cf\u9ad8\u98ce\u9669\u8d44\u4ea7\u3002\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#92-for-for-loops","title":"9.2 for \u5faa\u73af  (For Loops)","text":"<p>Rust \u662f\u4e00\u79cd\u7cfb\u7edf\u7ea7\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u5177\u6709\u5f3a\u5927\u7684\u5185\u5b58\u5b89\u5168\u6027\u548c\u5e76\u53d1\u6027\u80fd\u3002\u5728 Rust \u4e2d\uff0c\u4f7f\u7528 <code>for</code> \u5faa\u73af\u6765\u8fed\u4ee3\u96c6\u5408(\u5982\u6570\u7ec4\u3001\u5411\u91cf\u3001\u5207\u7247\u7b49)\u4e2d\u7684\u5143\u7d20\u6216\u8005\u6267\u884c\u67d0\u4e2a\u64cd\u4f5c\u4e00\u5b9a\u6b21\u6570\u3002\u4e0b\u9762\u662f Rust \u4e2d <code>for</code> \u5faa\u73af\u7684\u57fa\u672c\u8bed\u6cd5\u548c\u4e00\u4e9b\u793a\u4f8b\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#921","title":"9.2.1 \u8303\u56f4","text":"<p>\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 <code>for</code> \u5faa\u73af\u6765\u6267\u884c\u67d0\u4e2a\u64cd\u4f5c\u4e00\u5b9a\u6b21\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>..</code> \u8fd0\u7b97\u7b26\u521b\u5efa\u4e00\u4e2a\u8303\u56f4\uff0c\u5e76\u5728\u5faa\u73af\u4e2d\u4f7f\u7528\u5b83\uff1a</p> <pre><code>fn main() {\n    for i in 1..=5 {\n        println!(\"Iteration: {}\", i);\n    }\n}\n</code></pre> <p>\u4e0a\u8ff0\u793a\u4f8b\u5c06\u6253\u5370\u6570\u5b57 1 \u5230 5\uff0c\u5305\u62ec 5\u3002\u8303\u56f4\u4f7f\u7528 <code>1..=5</code> \u8868\u793a\uff0c\u5305\u62ec\u8d77\u59cb\u503c 1 \u548c\u7ed3\u675f\u503c 5\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#922","title":"9.2.2 \u8fed\u4ee3\u5668","text":"<p>\u5728 Rust \u4e2d\uff0c\u4f7f\u7528 <code>for</code> \u5faa\u73af\u6765\u8fed\u4ee3\u96c6\u5408(\u4f8b\u5982\u6570\u7ec4\u6216\u5411\u91cf)\u4e2d\u7684\u5143\u7d20\u975e\u5e38\u7b80\u5355\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u8fed\u4ee3\u4e00\u4e2a\u6574\u6570\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\uff1a</p> <pre><code>fn main() {\n    let numbers = [1, 2, 3, 4, 5];\n\n    for number in numbers.iter() {\n        println!(\"Number: {}\", number);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>numbers.iter()</code> \u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u901a\u8fc7 <code>for</code> \u5faa\u73af\u8fed\u4ee3\u5668\u4e2d\u7684\u5143\u7d20\u5e76\u6253\u5370\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#93","title":"9.3 \u8fed\u4ee3\u5668\u7684\u8bf8\u79cd\u65b9\u6cd5","text":"<p>\u9664\u4e86\u4f7f\u7528 <code>for</code> \u5faa\u73af\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 Rust \u7684\u8fed\u4ee3\u5668\u65b9\u6cd5\u6765\u5904\u7406\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u3002\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec <code>map</code>\u3001<code>filter</code>\u3001<code>fold</code> \u7b49\uff0c\u5b83\u4eec\u5141\u8bb8\u4f60\u8fdb\u884c\u66f4\u590d\u6742\u7684\u64cd\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#931-map","title":"9.3.1 map\u65b9\u6cd5","text":"<p>\u5728Rust\u4e2d\uff0c<code>map</code>\u65b9\u6cd5\u662f\u7528\u4e8e\u8fed\u4ee3\u548c\u8f6c\u6362\u96c6\u5408\u5143\u7d20\u7684\u5e38\u89c1\u65b9\u6cd5\u4e4b\u4e00\u3002<code>map</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u95ed\u5305(\u6216\u51fd\u6570)\uff0c\u5e76\u5c06\u5176\u5e94\u7528\u4e8e\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u96c6\u5408\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u5e94\u7528\u4e86\u95ed\u5305\u540e\u7684\u7ed3\u679c\u3002\u8fd9\u4e2a\u65b9\u6cd5\u901a\u5e38\u7528\u4e8e\u5bf9\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u6267\u884c\u67d0\u79cd\u64cd\u4f5c\uff0c\u7136\u540e\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u96c6\u5408\uff0c\u800c\u4e0d\u4f1a\u4fee\u6539\u539f\u59cb\u96c6\u5408\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#1-mapx","title":"\u6848\u4f8b1 \u7528map\u8ba1\u7b97\u5e76\u6620\u5c04x\u7684\u5e73\u65b9","text":"<pre><code>fn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4e00\u4e9b\u6570\u5b57\u7684\u5411\u91cf\n    let numbers = vec![1, 2, 3, 4, 5];\n\n    // \u4f7f\u7528map\u65b9\u6cd5\u5bf9\u5411\u91cf\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u5e73\u65b9\u64cd\u4f5c\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5411\u91cf\n    let squared_numbers: Vec&lt;i32&gt; = numbers.iter().map(|&amp;x| x * x).collect();\n\n    // \u8f93\u51fa\u65b0\u7684\u5411\u91cf\n    println!(\"{:?}\", squared_numbers);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u4e00\u4e9b\u6574\u6570\u7684\u5411\u91cf<code>numbers</code>\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528<code>map</code>\u65b9\u6cd5\u5bf9<code>numbers</code>\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u6267\u884c\u4e86\u5e73\u65b9\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u7531\u95ed\u5305<code>|&amp;x| x * x</code>\u5b9a\u4e49\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528<code>collect</code>\u65b9\u6cd5\u5c06\u7ed3\u679c\u6536\u96c6\u5230\u4e00\u4e2a\u65b0\u7684\u5411\u91cf<code>squared_numbers</code> \u4e2d\uff0c\u5e76\u6253\u5370\u51fa\u6765\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#2","title":"\u6848\u4f8b2 \u8ba1\u7b97\u5bf9\u6570\u6536\u76ca\u7387","text":"<pre><code>fn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u5411\u91cf\n    let stock_prices = vec![100.0, 105.0, 110.0, 115.0, 120.0];\n\n    // \u4f7f\u7528map\u65b9\u6cd5\u8ba1\u7b97\u6bcf\u4e2a\u4ef7\u683c\u7684\u5bf9\u6570\u6536\u76ca\u7387\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5411\u91cf\n    let log_returns: Vec&lt;f64&gt; = stock_prices.iter().map(|&amp;price| price / 100.0f64.ln()).collect();\n\n    // \u8f93\u51fa\u5bf9\u6570\u6536\u76ca\u7387\n    println!(\"{:?}\", log_returns);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>[21.71472409516259, 22.80046029992072, 23.88619650467885, 24.971932709436977, 26.05766891419511]\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 <code>map</code> \u65b9\u6cd5\u5c06\u539f\u59cb\u5411\u91cf\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u4e58\u4ee5 2\uff0c\u7136\u540e\u4f7f\u7528 <code>collect</code> \u65b9\u6cd5\u5c06\u7ed3\u679c\u6536\u96c6\u5230\u4e00\u4e2a\u65b0\u7684\u5411\u91cf\u4e2d\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#932-filter","title":"9.3.2 filter \u65b9\u6cd5","text":"<p>filter\u65b9\u6cd5\u662f\u4e00\u4e2a\u5728\u91d1\u878d\u6570\u636e\u5206\u6790\u4e2d\u5e38\u7528\u7684\u65b9\u6cd5\uff0c\u5b83\u7528\u4e8e\u7b5b\u9009\u51fa\u7b26\u5408\u7279\u5b9a\u6761\u4ef6\u7684\u5143\u7d20\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u5668\u3002\u8fd9\u4e2a\u65b9\u6cd5\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\uff0c\u8be5\u95ed\u5305\u63a5\u53d7\u4e00\u4e2a\u5143\u7d20\u7684\u5f15\u7528\u5e76\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u7528\u4e8e\u5224\u65ad\u8be5\u5143\u7d20\u662f\u5426\u5e94\u8be5\u88ab\u5305\u542b\u5728\u7ed3\u679c\u8fed\u4ee3\u5668\u4e2d\u3002</p> <p>\u5728\u91d1\u878d\u5206\u6790\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u9700\u8981\u7b5b\u9009\u51fa\u7b26\u5408\u67d0\u4e9b\u6761\u4ef6\u7684\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u4f8b\u5982\u7b5b\u9009\u51fa\u5927\u4e8e\u67d0\u4e2a\u9608\u503c\u7684\u80a1\u7968\u6216\u8005\u5c0f\u4e8e\u67d0\u4e2a\u9608\u503c\u7684\u4ea4\u6613\u3002filter\u65b9\u6cd5\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u65b9\u4fbf\u5730\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528filter\u65b9\u6cd5\u7b5b\u9009\u51fa\u5927\u4e8e\u67d0\u4e2a\u9608\u503c\u7684\u4ea4\u6613\u7684\u4f8b\u5b50\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2aTrade\u7ed3\u6784\u4f53  \n#[derive(Debug, PartialEq)]  \nstruct Trade {  \n    price: f64,  \n    volume: i32,  \n}  \n\nfn main() {  \n    let trades = vec![  \n        Trade { price: 10.0, volume: 100 },  \n        Trade { price: 20.0, volume: 200 },  \n        Trade { price: 30.0, volume: 300 },  \n    ];  \n\n    let threshold = 25.0;  \n\n    let mut filtered_trades = trades.iter().filter(|trade| trade.price &gt; threshold);  \n\n    match filtered_trades.next() {  \n        Some(&amp;Trade { price: 30.0, volume: 300 }) =&gt; println!(\"\u7b2c\u4e00\u4e2a\u4ea4\u6613\u6b63\u786e\"),  \n        _ =&gt; println!(\"\u7b2c\u4e00\u4e2a\u4ea4\u6613\u4e0d\u6b63\u786e\"),  \n    }  \n\n    match filtered_trades.next() {  \n        None =&gt; println!(\"\u6ca1\u6709\u66f4\u591a\u7684\u4ea4\u6613\"),  \n        _ =&gt; println!(\"\u8fd8\u6709\u66f4\u591a\u7684\u4ea4\u6613\"),  \n    }  \n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u7b2c\u4e00\u4e2a\u4ea4\u6613\u6b63\u786e\n\u6ca1\u6709\u66f4\u591a\u7684\u4ea4\u6613\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u4ea4\u6613\u7684\u5411\u91cf\uff0c\u6bcf\u4e2a\u4ea4\u6613\u90fd\u6709\u4e00\u4e2a\u4ef7\u683c\u548c\u4ea4\u6613\u91cf\u3002\u6211\u4eec\u60f3\u8981\u7b5b\u9009\u51fa\u4ef7\u683c\u5927\u4e8e25.0\u7684\u4ea4\u6613\u3002\u6211\u4eec\u4f7f\u7528filter\u65b9\u6cd5\u4f20\u5165\u4e00\u4e2a\u95ed\u5305\u6765\u5b9e\u73b0\u8fd9\u4e2a\u7b5b\u9009\u3002\u95ed\u5305\u63a5\u53d7\u4e00\u4e2aTrade\u7684\u5f15\u7528\u5e76\u8fd4\u56de\u8be5\u4ea4\u6613\u7684\u4ef7\u683c\u662f\u5426\u5927\u4e8e\u9608\u503c\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u53ea\u5305\u542b\u7b26\u5408\u6761\u4ef6\u7684\u4ea4\u6613\u7684\u8fed\u4ee3\u5668\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#932-next","title":"9.3.2 next\u65b9\u6cd5","text":"<p>\u5728\u91d1\u878d\u9886\u57df\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u5904\u7406\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u96c6\uff0c\u6211\u4eec\u60f3\u8981\u627e\u51fa\u5927\u4e8e\u7ed9\u5b9a\u9608\u503c\u7684\u4e0b\u4e00\u4e2a\u4ef7\u683c\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Rust\u4e2d\u7684<code>next</code>\u65b9\u6cd5\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u8868\u793a\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u3002\u5047\u8bbe\u6211\u4eec\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a<code>Vec&lt;f64&gt;</code>\u4e2d\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5143\u7d20\u4ee3\u8868\u4e00\u4e2a\u65f6\u95f4\u70b9\u7684\u80a1\u7968\u4ef7\u683c\u3002\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>TimeSeries</code>\u7684\u7ed3\u6784\u4f53\uff0c\u5e76\u5b9e\u73b0<code>Iterator</code> trait\u6765\u4f7f\u5176\u53ef\u8fed\u4ee3\u3002</p> <pre><code>pub struct TimeSeries {  \n    data: Vec&lt;f64&gt;,  \n    index: usize,  \n}  \n\nimpl TimeSeries {  \n    pub fn new(data: Vec&lt;f64&gt;) -&gt; Self {  \n        Self { data, index: 0 }  \n    }  \n}  \n\nimpl Iterator for TimeSeries {  \n    type Item = f64;  \n\n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {  \n        if self.index &lt; self.data.len() {  \n            let value = self.data[self.index];  \n            self.index += 1;  \n            Some(value)  \n        } else {  \n            None  \n        }  \n    }  \n}\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\u6765\u627e\u5230\u5927\u4e8e\u7ed9\u5b9a\u9608\u503c\u7684\u4e0b\u4e00\u4e2a\u4ef7\u683c\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>filter</code>\u65b9\u6cd5\u548c<code>next</code>\u65b9\u6cd5\u6765\u904d\u5386\u65f6\u95f4\u5e8f\u5217\u6570\u636e\uff0c\u5e76\u627e\u5230\u7b2c\u4e00\u4e2a\u5927\u4e8e\u9608\u503c\u7684\u4ef7\u683c\u3002</p> <pre><code>pub fn find_next_threshold(time_series: &amp;mut TimeSeries, threshold: f64) -&gt; Option&lt;f64&gt; {  \n    time_series.filter(|&amp;price| price &gt; threshold).next()  \n}\n</code></pre> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u6765\u67e5\u627e\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u4e2d\u5927\u4e8e\u7ed9\u5b9a\u9608\u503c\u7684\u4e0b\u4e00\u4e2a\u4ef7\u683c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>fn main() {  \n    let data = vec![10.0, 20.0, 30.0, 40.0, 50.0];  \n    let mut time_series = TimeSeries::new(data);  \n    let threshold = 35.0;  \n\n    match find_next_threshold(&amp;mut time_series, threshold) {  \n        Some(price) =&gt; println!(\"\u4e0b\u4e00\u4e2a\u5927\u4e8e{}\u7684\u4ef7\u683c\u662f{}\", threshold, price),  \n        None =&gt; println!(\"\u6ca1\u6709\u627e\u5230\u5927\u4e8e{}\u7684\u4ef7\u683c\", threshold),  \n    }  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u80a1\u7968\u4ef7\u683c\u7684\u65f6\u95f4\u5e8f\u5217\u6570\u636e\uff0c\u5e76\u4f7f\u7528<code>find_next_threshold</code>\u51fd\u6570\u627e\u5230\u5927\u4e8e35.0\u7684\u4e0b\u4e00\u4e2a\u4ef7\u683c\u3002\u8f93\u51fa\u5c06\u4f1a\u662f\"\u4e0b\u4e00\u4e2a\u5927\u4e8e35\u7684\u4ef7\u683c\u662f40\"\u3002\u5982\u679c\u6ca1\u6709\u627e\u5230\u5927\u4e8e\u9608\u503c\u7684\u4ef7\u683c\uff0c\u8f93\u51fa\u5c06\u4f1a\u662f\"\u6ca1\u6709\u627e\u5230\u5927\u4e8e35\u7684\u4ef7\u683c\"\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#934-fold","title":"9.3.4 fold \u65b9\u6cd5","text":"<p><code>fold</code> \u662f Rust \u6807\u51c6\u5e93\u4e2d <code>Iterator</code> trait \u63d0\u4f9b\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u6cd5\u4e4b\u4e00\u3002\u5b83\u7528\u4e8e\u5728\u8fed\u4ee3\u5668\u4e2d\u7d2f\u79ef\u503c\uff0c\u5c06\u4e00\u4e2a\u521d\u59cb\u503c\u548c\u4e00\u4e2a\u95ed\u5305\u51fd\u6570\u5e94\u7528\u4e8e\u8fed\u4ee3\u5668\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5e76\u8fd4\u56de\u6700\u7ec8\u7684\u7d2f\u79ef\u7ed3\u679c\u3002<code>fold</code> \u65b9\u6cd5\u7684\u7b7e\u540d\u5982\u4e0b\uff1a</p> <pre><code>fn fold&lt;B, F&gt;(self, init: B, f: F) -&gt; B\nwhere\n    F: FnMut(B, Self::Item) -&gt; B,\n</code></pre> <ul> <li><code>self</code> \u662f\u8fed\u4ee3\u5668\u672c\u8eab\u3002</li> <li><code>init</code> \u662f\u4e00\u4e2a\u521d\u59cb\u503c\uff0c\u7528\u4e8e\u7d2f\u79ef\u64cd\u4f5c\u7684\u521d\u59cb\u72b6\u6001\u3002</li> <li><code>f</code> \u662f\u4e00\u4e2a\u95ed\u5305\u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u7d2f\u79ef\u503c\uff08\u521d\u59cb\u503c\u6216\u4e0a\u4e00\u6b21\u8fed\u4ee3\u7684\u7ed3\u679c\uff09\u548c\u8fed\u4ee3\u5668\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u8fd4\u56de\u65b0\u7684\u7d2f\u79ef\u503c\u3002</li> </ul> <p><code>fold</code> \u65b9\u6cd5\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u4f7f\u7528\u521d\u59cb\u503c <code>init</code> \u521d\u59cb\u5316\u7d2f\u79ef\u503c\u3002</li> <li>\u5bf9\u4e8e\u8fed\u4ee3\u5668\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u8c03\u7528\u95ed\u5305\u51fd\u6570 <code>f</code>\uff0c\u4f20\u9012\u5f53\u524d\u7d2f\u79ef\u503c\u548c\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u3002</li> <li>\u5c06\u95ed\u5305\u51fd\u6570\u7684\u8fd4\u56de\u503c\u66f4\u65b0\u4e3a\u65b0\u7684\u7d2f\u79ef\u503c\u3002</li> <li>\u91cd\u590d\u6b65\u9aa4 2 \u548c 3\uff0c\u76f4\u5230\u8fed\u4ee3\u5668\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u88ab\u5904\u7406\u3002</li> <li>\u8fd4\u56de\u6700\u7ec8\u7684\u7d2f\u79ef\u503c\u3002</li> </ol> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u91d1\u878d\u6848\u4f8b\u6765\u6f14\u793a <code>fold</code> \u65b9\u6cd5\u7684\u4f7f\u7528\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u7ec4\u91d1\u878d\u4ea4\u6613\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u8bb0\u5f55\u5305\u542b\u4ea4\u6613\u7c7b\u578b\uff08\u5b58\u6b3e\u6216\u63d0\u6b3e\uff09\u548c\u91d1\u989d\u3002\u6211\u4eec\u60f3\u8981\u8ba1\u7b97\u603b\u5b58\u6b3e\u548c\u603b\u63d0\u6b3e\u7684\u5dee\u503c\uff0c\u4ee5\u67e5\u770b\u8d26\u6237\u7684\u4f59\u989d\u3002</p> <pre><code>struct Transaction {\n    transaction_type: &amp;'static str,\n    amount: f64,\n}\n\nfn main() {\n    let transactions = vec![\n        Transaction { transaction_type: \"Deposit\", amount: 100.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 50.0 },\n        Transaction { transaction_type: \"Deposit\", amount: 200.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 75.0 },\n    ];\n\n    let initial_balance = 0.0; // \u521d\u59cb\u4f59\u989d\u4e3a\u96f6\n\n    let balance = transactions.iter().fold(initial_balance, |acc, transaction| {\n        match transaction.transaction_type {\n            \"Deposit\" =&gt; acc + transaction.amount,\n            \"Withdrawal\" =&gt; acc - transaction.amount,\n            _ =&gt; acc,\n        }\n    });\n\n    println!(\"Account Balance: ${:.2}\", balance);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>Transaction</code> \u7ed3\u6784\u4f53\u6765\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5305\u62ec\u4ea4\u6613\u7c7b\u578b\u548c\u91d1\u989d\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u4ea4\u6613\u8bb0\u5f55\u7684 <code>transactions</code> \u5411\u91cf\u3002\u6211\u4eec\u4f7f\u7528 <code>fold</code> \u65b9\u6cd5\u6765\u8ba1\u7b97\u603b\u5b58\u6b3e\u548c\u603b\u63d0\u6b3e\u7684\u5dee\u503c\uff0c\u4ee5\u83b7\u53d6\u8d26\u6237\u7684\u4f59\u989d\u3002</p> <p>\u5728 <code>fold</code> \u65b9\u6cd5\u7684\u95ed\u5305\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u6839\u636e\u4ea4\u6613\u7c7b\u578b\u6765\u66f4\u65b0\u7d2f\u79ef\u503c <code>acc</code>\u3002\u5982\u679c\u4ea4\u6613\u7c7b\u578b\u662f \"Deposit\"\uff0c\u6211\u4eec\u5c06\u91d1\u989d\u6dfb\u52a0\u5230\u4f59\u989d\u4e0a\uff0c\u5982\u679c\u662f \"Withdrawal\"\uff0c\u5219\u5c06\u91d1\u989d\u4ece\u4f59\u989d\u4e2d\u51cf\u53bb\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u6253\u5370\u51fa\u8d26\u6237\u4f59\u989d\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#935-collect","title":"9.3.5 collect \u65b9\u6cd5","text":"<p><code>collect</code> \u662f Rust \u4e2d\u7528\u4e8e\u5c06\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u6536\u96c6\u5230\u4e00\u4e2a\u96c6\u5408\uff08collection\uff09\u4e2d\u7684\u65b9\u6cd5\u3002\u5b83\u662f <code>Iterator</code> trait \u63d0\u4f9b\u7684\u4e00\u4e2a\u91cd\u8981\u65b9\u6cd5\u3002<code>collect</code> \u65b9\u6cd5\u7684\u7b7e\u540d\u5982\u4e0b\uff1a</p> <pre><code>fn collect&lt;B&gt;(self) -&gt; B\nwhere\n    B: FromIterator&lt;Self::Item&gt;,\n</code></pre> <ul> <li><code>self</code> \u662f\u8fed\u4ee3\u5668\u672c\u8eab\u3002</li> <li><code>B</code> \u662f\u8981\u6536\u96c6\u5230\u7684\u96c6\u5408\u7c7b\u578b\uff0c\u5b83\u5fc5\u987b\u5b9e\u73b0 <code>FromIterator</code> trait\uff0c\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u4ece\u8fed\u4ee3\u5668\u7684\u5143\u7d20\u7c7b\u578b\u6784\u5efa\u8be5\u96c6\u5408\u7c7b\u578b\u3002</li> <li><code>collect</code> \u65b9\u6cd5\u5c06\u8fed\u4ee3\u5668\u4e2d\u7684\u5143\u7d20\u8f6c\u6362\u4e3a\u96c6\u5408 <code>B</code> \u5e76\u8fd4\u56de\u3002</li> </ul> <p><code>collect</code> \u65b9\u6cd5\u7684\u5de5\u4f5c\u539f\u7406\u5982\u4e0b\uff1a</p> <ol> <li>\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u96c6\u5408 <code>B</code>\uff0c\u8fd9\u4e2a\u96c6\u5408\u5c06\u7528\u4e8e\u5b58\u50a8\u8fed\u4ee3\u5668\u4e2d\u7684\u5143\u7d20\u3002</li> <li>\u5bf9\u4e8e\u8fed\u4ee3\u5668\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5c06\u5143\u7d20\u6dfb\u52a0\u5230\u96c6\u5408 <code>B</code> \u4e2d\u3002</li> <li>\u8fd4\u56de\u96c6\u5408 <code>B</code>\u3002</li> </ol> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u91d1\u878d\u6848\u4f8b\u6765\u6f14\u793a <code>collect</code> \u65b9\u6cd5\u7684\u4f7f\u7528\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u7ec4\u91d1\u878d\u4ea4\u6613\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u8bb0\u5f55\u5305\u542b\u4ea4\u6613\u7c7b\u578b\uff08\u5b58\u6b3e\u6216\u63d0\u6b3e\uff09\u548c\u91d1\u989d\u3002\u6211\u4eec\u60f3\u8981\u5c06\u6240\u6709\u5b58\u6b3e\u8bb0\u5f55\u6536\u96c6\u5230\u4e00\u4e2a\u5411\u91cf\u4e2d\uff0c\u4ee5\u8fdb\u4e00\u6b65\u5206\u6790\u3002</p> <pre><code>struct Transaction {\n    transaction_type: &amp;'static str,\n    amount: f64,\n}\n\nfn main() {\n    let transactions = vec![\n        Transaction { transaction_type: \"Deposit\", amount: 100.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 50.0 },\n        Transaction { transaction_type: \"Deposit\", amount: 200.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 75.0 },\n    ];\n\n    // \u4f7f\u7528 collect \u65b9\u6cd5\u5c06\u5b58\u6b3e\u8bb0\u5f55\u6536\u96c6\u5230\u4e00\u4e2a\u5411\u91cf\u4e2d\n    let deposits: Vec&lt;Transaction&gt; = transactions\n        .iter()\n        .filter(|&amp;transaction| transaction.transaction_type == \"Deposit\")\n        .cloned()\n        .collect();\n\n    println!(\"Deposit Transactions: {:?}\", deposits);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>Transaction</code> \u7ed3\u6784\u4f53\u6765\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5305\u62ec\u4ea4\u6613\u7c7b\u578b\u548c\u91d1\u989d\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u4ea4\u6613\u8bb0\u5f55\u7684 <code>transactions</code> \u5411\u91cf\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4f7f\u7528 <code>collect</code> \u65b9\u6cd5\u6765\u5c06\u6240\u6709\u5b58\u6b3e\u8bb0\u5f55\u6536\u96c6\u5230\u4e00\u4e2a\u65b0\u7684 <code>Vec&lt;Transaction&gt;</code> \u5411\u91cf\u4e2d\u3002\u6211\u4eec\u9996\u5148\u4f7f\u7528 <code>iter()</code> \u65b9\u6cd5\u5c06 <code>transactions</code> \u5411\u91cf\u8f6c\u6362\u4e3a\u8fed\u4ee3\u5668\uff0c\u7136\u540e\u4f7f\u7528 <code>filter</code> \u65b9\u6cd5\u7b5b\u9009\u51fa\u4ea4\u6613\u7c7b\u578b\u4e3a \"Deposit\" \u7684\u8bb0\u5f55\u3002\u63a5\u7740\uff0c\u6211\u4eec\u4f7f\u7528 <code>cloned()</code> \u65b9\u6cd5\u6765\u514b\u9686\u8fd9\u4e9b\u8bb0\u5f55\uff0c\u4ee5\u4fbf\u5c06\u5b83\u4eec\u6536\u96c6\u5230\u65b0\u7684\u5411\u91cf\u4e2d\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u6253\u5370\u51fa\u5305\u542b\u6240\u6709\u5b58\u6b3e\u8bb0\u5f55\u7684\u5411\u91cf\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6210\u529f\u5730\u4f7f\u7528 <code>collect</code> \u65b9\u6cd5\u5c06\u7279\u5b9a\u7c7b\u578b\u7684\u4ea4\u6613\u8bb0\u5f55\u6536\u96c6\u5230\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5206\u6790\u6216\u5904\u7406\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#94-while-while-loops","title":"9.4 while \u5faa\u73af (While Loops)","text":"<p><code>while</code> \u5faa\u73af\u662f\u4e00\u79cd\u5728 Rust \u4e2d\u7528\u4e8e\u91cd\u590d\u6267\u884c\u4ee3\u7801\u5757\u76f4\u5230\u6761\u4ef6\u4e0d\u518d\u6ee1\u8db3\u7684\u63a7\u5236\u7ed3\u6784\u3002\u5b83\u7684\u6267\u884c\u65b9\u5f0f\u662f\u5728\u6bcf\u6b21\u5faa\u73af\u8fed\u4ee3\u4e4b\u524d\u68c0\u67e5\u4e00\u4e2a\u6761\u4ef6\u8868\u8fbe\u5f0f\uff0c\u53ea\u8981\u6761\u4ef6\u4e3a\u771f\uff0c\u5faa\u73af\u5c31\u4f1a\u7ee7\u7eed\u6267\u884c\u3002\u4e00\u65e6\u6761\u4ef6\u4e3a\u5047\uff0c\u5faa\u73af\u5c06\u7ec8\u6b62\uff0c\u63a7\u5236\u6d41\u5c06\u8df3\u51fa\u5faa\u73af\u3002</p> <p>\u4ee5\u4e0b\u662f <code>while</code> \u5faa\u73af\u7684\u4e00\u822c\u5f62\u5f0f\uff1a</p> <pre><code>while condition {\n    // \u5faa\u73af\u4f53\u4ee3\u7801\n}\n</code></pre> <ul> <li><code>condition</code> \u662f\u4e00\u4e2a\u5e03\u5c14\u8868\u8fbe\u5f0f\uff0c\u5b83\u7528\u4e8e\u68c0\u67e5\u5faa\u73af\u662f\u5426\u5e94\u8be5\u7ee7\u7eed\u6267\u884c\u3002\u53ea\u8981 <code>condition</code> \u4e3a\u771f\uff0c\u5faa\u73af\u4f53\u4e2d\u7684\u4ee3\u7801\u5c06\u88ab\u6267\u884c\u3002</li> <li>\u5faa\u73af\u4f53\u5305\u542b\u8981\u91cd\u590d\u6267\u884c\u7684\u4ee3\u7801\uff0c\u901a\u5e38\u4f1a\u6539\u53d8\u67d0\u4e9b\u72b6\u6001\u4ee5\u6700\u7ec8\u4f7f\u5f97 <code>condition</code> \u4e3a\u5047\uff0c\u4ece\u800c\u9000\u51fa\u5faa\u73af\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 <code>while</code> \u5faa\u73af\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u8ba1\u7b97\u5b58\u6b3e\u548c\u63d0\u6b3e\u7684\u603b\u548c\uff0c\u76f4\u5230\u4ea4\u6613\u8bb0\u5f55\u5217\u8868\u4e3a\u7a7a\uff1a</p> <pre><code>struct Transaction {\n    transaction_type: &amp;'static str,\n    amount: f64,\n}\n\nfn main() {\n    let mut transactions = vec![\n        Transaction { transaction_type: \"Deposit\", amount: 100.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 50.0 },\n        Transaction { transaction_type: \"Deposit\", amount: 200.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 75.0 },\n    ];\n\n    let mut total_balance = 0.0;\n\n    while !transactions.is_empty() {\n        let transaction = transactions.pop().unwrap(); // \u4ece\u672b\u5c3e\u53d6\u51fa\u4e00\u4e2a\u4ea4\u6613\u8bb0\u5f55\n        match transaction.transaction_type {\n            \"Deposit\" =&gt; total_balance += transaction.amount,\n            \"Withdrawal\" =&gt; total_balance -= transaction.amount,\n            _ =&gt; (),\n        }\n    }\n\n    println!(\"Account Balance: ${:.2}\", total_balance);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>Transaction</code> \u7ed3\u6784\u4f53\u6765\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5305\u62ec\u4ea4\u6613\u7c7b\u578b\u548c\u91d1\u989d\u3002\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u4ea4\u6613\u8bb0\u5f55\u7684 <code>transactions</code> \u5411\u91cf\uff0c\u5e76\u521d\u59cb\u5316 <code>total_balance</code> \u4e3a\u96f6\u3002</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>while</code> \u5faa\u73af\u6765\u8fed\u4ee3\u5904\u7406\u4ea4\u6613\u8bb0\u5f55\uff0c\u76f4\u5230 <code>transactions</code> \u5411\u91cf\u4e3a\u7a7a\u3002\u5728\u6bcf\u6b21\u5faa\u73af\u8fed\u4ee3\u4e2d\uff0c\u6211\u4eec\u4ece <code>transactions</code> \u5411\u91cf\u7684\u672b\u5c3e\u53d6\u51fa\u4e00\u4e2a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5e76\u6839\u636e\u4ea4\u6613\u7c7b\u578b\u66f4\u65b0 <code>total_balance</code>\u3002\u6700\u7ec8\uff0c\u5f53\u6240\u6709\u4ea4\u6613\u8bb0\u5f55\u90fd\u5904\u7406\u5b8c\u6bd5\u65f6\uff0c\u5faa\u73af\u5c06\u7ec8\u6b62\uff0c\u6211\u4eec\u6253\u5370\u51fa\u8d26\u6237\u4f59\u989d\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>while</code> \u5faa\u73af\u6765\u5904\u7406\u4e00\u4e2a\u52a8\u6001\u53d8\u5316\u7684\u6570\u636e\u96c6\uff0c\u76f4\u5230\u6ee1\u8db3\u9000\u51fa\u6761\u4ef6\u4e3a\u6b62\u3002\u5728\u91d1\u878d\u9886\u57df\uff0c\u8fd9\u79cd\u5faa\u73af\u53ef\u4ee5\u7528\u4e8e\u5904\u7406\u4ea4\u6613\u8bb0\u5f55\u3001\u8d26\u5355\u6216\u5176\u4ed6\u9700\u8981\u8fed\u4ee3\u5904\u7406\u7684\u6570\u636e\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#95-loop","title":"9.5 loop\u5faa\u73af","text":"<p><code>loop</code> \u5faa\u73af\u662f Rust \u4e2d\u7684\u4e00\u79cd\u57fa\u672c\u5faa\u73af\u7ed3\u6784\uff0c\u5b83\u5141\u8bb8\u4f60\u65e0\u9650\u6b21\u5730\u91cd\u590d\u6267\u884c\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u76f4\u5230\u660e\u786e\u901a\u8fc7 <code>break</code> \u8bed\u53e5\u7ec8\u6b62\u5faa\u73af\u3002\u4e0e <code>while</code> \u5faa\u73af\u4e0d\u540c\uff0c<code>loop</code> \u5faa\u73af\u6ca1\u6709\u6761\u4ef6\u8868\u8fbe\u5f0f\u6765\u5224\u65ad\u662f\u5426\u9000\u51fa\u5faa\u73af\uff0c\u56e0\u6b64\u5b83\u603b\u662f\u4f1a\u65e0\u9650\u5faa\u73af\uff0c\u76f4\u5230\u9047\u5230 <code>break</code>\u3002</p> <p>\u4ee5\u4e0b\u662f <code>loop</code> \u5faa\u73af\u7684\u4e00\u822c\u5f62\u5f0f\uff1a</p> <pre><code>loop {\n    // \u5faa\u73af\u4f53\u4ee3\u7801\n    if condition {\n        break; // \u901a\u8fc7 break \u8bed\u53e5\u7ec8\u6b62\u5faa\u73af\n    }\n}\n</code></pre> <ul> <li>\u5faa\u73af\u4f53\u4e2d\u7684\u4ee3\u7801\u5757\u5c06\u65e0\u9650\u6b21\u5730\u6267\u884c\uff0c\u76f4\u5230\u9047\u5230 <code>break</code> \u8bed\u53e5\u3002</li> <li><code>condition</code> \u662f\u4e00\u4e2a\u53ef\u9009\u7684\u6761\u4ef6\u8868\u8fbe\u5f0f\uff0c\u5f53\u6761\u4ef6\u4e3a\u771f\u65f6\uff0c\u5faa\u73af\u5c06\u7ec8\u6b62\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 <code>loop</code> \u5faa\u73af\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u8ba1\u7b97\u5b58\u6b3e\u548c\u63d0\u6b3e\u7684\u603b\u548c\uff0c\u76f4\u5230\u8f93\u5165\u7684\u4ea4\u6613\u8bb0\u5f55\u4e3a\u7a7a\uff1a</p> <pre><code>struct Transaction {\n    transaction_type: &amp;'static str,\n    amount: f64,\n}\n\nfn main() {\n    let mut transactions = Vec::new();\n\n    loop {\n        let transaction_type: String = {\n            println!(\"Enter transaction type (Deposit/Withdrawal) or 'done' to finish:\");\n            let mut input = String::new();\n            std::io::stdin().read_line(&amp;mut input).expect(\"Failed to read line\");\n            input.trim().to_string()\n        };\n\n        if transaction_type == \"done\" {\n            break; // \u901a\u8fc7 break \u8bed\u53e5\u7ec8\u6b62\u5faa\u73af\n        }\n\n        let amount: f64 = {\n            println!(\"Enter transaction amount:\");\n            let mut input = String::new();\n            std::io::stdin().read_line(&amp;mut input).expect(\"Failed to read line\");\n            input.trim().parse().expect(\"Invalid input\")\n        };\n\n        transactions.push(Transaction {\n            transaction_type: &amp;transaction_type,\n            amount,\n        });\n    }\n\n    let mut total_balance = 0.0;\n\n    for transaction in &amp;transactions {\n        match transaction.transaction_type {\n            \"Deposit\" =&gt; total_balance += transaction.amount,\n            \"Withdrawal\" =&gt; total_balance -= transaction.amount,\n            _ =&gt; (),\n        }\n    }\n\n    println!(\"Account Balance: ${:.2}\", total_balance);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>Transaction</code> \u7ed3\u6784\u4f53\u6765\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5305\u62ec\u4ea4\u6613\u7c7b\u578b\u548c\u91d1\u989d\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u7a7a\u7684 <code>transactions</code> \u5411\u91cf\uff0c\u7528\u4e8e\u5b58\u50a8\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\u8bb0\u5f55\u3002</p> <p>\u63a5\u7740\uff0c\u6211\u4eec\u4f7f\u7528 <code>loop</code> \u5faa\u73af\u6765\u53cd\u590d\u8be2\u95ee\u7528\u6237\u8f93\u5165\u4ea4\u6613\u7c7b\u578b\u548c\u91d1\u989d\uff0c\u76f4\u5230\u7528\u6237\u8f93\u5165 \"done\" \u4e3a\u6b62\u3002\u5982\u679c\u7528\u6237\u8f93\u5165 \"done\"\uff0c\u5219\u901a\u8fc7 <code>break</code> \u8bed\u53e5\u7ec8\u6b62\u5faa\u73af\u3002\u5426\u5219\uff0c\u6211\u4eec\u5c06\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\u8bb0\u5f55\u6dfb\u52a0\u5230 <code>transactions</code> \u5411\u91cf\u4e2d\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u904d\u5386 <code>transactions</code> \u5411\u91cf\uff0c\u8ba1\u7b97\u5b58\u6b3e\u548c\u63d0\u6b3e\u7684\u603b\u548c\uff0c\u4ee5\u83b7\u53d6\u8d26\u6237\u4f59\u989d\uff0c\u5e76\u6253\u5370\u51fa\u7ed3\u679c\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>loop</code> \u5faa\u73af\u5904\u7406\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\u8bb0\u5f55\uff0c\u76f4\u5230\u7528\u6237\u9009\u62e9\u9000\u51fa\u3002\u5728\u91d1\u878d\u9886\u57df\uff0c\u8fd9\u79cd\u5faa\u73af\u53ef\u4ee5\u7528\u4e8e\u4ea4\u4e92\u5f0f\u5730\u8bb0\u5f55\u548c\u8ba1\u7b97\u8d26\u6237\u7684\u4ea4\u6613\u4fe1\u606f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#96-if-let-while-let","title":"9.6 if let \u548c while let\u8bed\u6cd5\u7cd6","text":"<p><code>if let</code> \u548c <code>while let</code> \u662f Rust \u4e2d\u7684\u8bed\u6cd5\u7cd6\uff0c\u7528\u4e8e\u7b80\u5316\u6a21\u5f0f\u5339\u914d\u7684\u5e38\u89c1\u7528\u4f8b\uff0c\u7279\u522b\u662f\u7528\u4e8e\u5904\u7406 <code>Option</code> \u548c <code>Result</code> \u7c7b\u578b\u3002\u5b83\u4eec\u5141\u8bb8\u4f60\u4ee5\u66f4\u7b80\u6d01\u7684\u65b9\u5f0f\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff0c\u4ee5\u5904\u7406\u53ef\u80fd\u7684\u6210\u529f\u6216\u5931\u8d25\u60c5\u51b5\u3002</p> <p>1. if let \u8868\u8fbe\u5f0f\uff1a</p> <p><code>if let</code> \u5141\u8bb8\u4f60\u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u5339\u914d\u67d0\u4e2a\u6a21\u5f0f\uff0c\u5e76\u5728\u5339\u914d\u6210\u529f\u65f6\u6267\u884c\u4ee3\u7801\u5757\u3002\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>if let Some(value) = some_option {\n    // \u5339\u914d\u6210\u529f\uff0c\u4f7f\u7528 value\n} else {\n    // \u5339\u914d\u5931\u8d25\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u5982\u679c <code>some_option</code> \u662f <code>Some</code> \u5305\u88c5\u7684\u503c\uff0c\u90a3\u4e48\u5339\u914d\u6210\u529f\uff0c\u5e76\u4e14 <code>value</code> \u5c06\u88ab\u7ed1\u5b9a\u5230 <code>Some</code> \u4e2d\u7684\u503c\uff0c\u7136\u540e\u6267\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u5757\u3002\u5982\u679c <code>some_option</code> \u662f <code>None</code>\uff0c\u5219\u5339\u914d\u5931\u8d25\uff0c\u6267\u884c <code>else</code> \u5757\u3002</p> <p>2. while let \u5faa\u73af\uff1a</p> <p><code>while let</code> \u5141\u8bb8\u4f60\u91cd\u590d\u6267\u884c\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u76f4\u5230\u5339\u914d\u5931\u8d25\uff08\u901a\u5e38\u662f\u76f4\u5230 <code>None</code>\uff09\u3002\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>while let Some(value) = some_option {\n    // \u5339\u914d\u6210\u529f\uff0c\u4f7f\u7528 value\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u53ea\u8981 <code>some_option</code> \u662f <code>Some</code> \u5305\u88c5\u7684\u503c\uff0c\u5c31\u4f1a\u91cd\u590d\u6267\u884c\u4ee3\u7801\u5757\uff0c\u5e76\u4e14 <code>value</code> \u4f1a\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u88ab\u7ed1\u5b9a\u5230 <code>Some</code> \u4e2d\u7684\u503c\u3002\u4e00\u65e6\u5339\u914d\u5931\u8d25\uff08\u5373 <code>some_option</code> \u53d8\u4e3a <code>None</code>\uff09\uff0c\u5faa\u73af\u5c06\u7ec8\u6b62\u3002</p> <p>\u91d1\u878d\u6848\u4f8b\u793a\u4f8b\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\uff0c\u5176\u4e2d\u7528\u6237\u53ef\u4ee5\u8fdb\u884c\u5b58\u6b3e\u548c\u63d0\u6b3e\u64cd\u4f5c\uff0c\u800c\u6bcf\u4e2a\u64cd\u4f5c\u90fd\u4ee5 <code>Transaction</code> \u7ed3\u6784\u4f53\u8868\u793a\u3002\u6211\u4eec\u5c06\u4f7f\u7528 <code>Option</code> \u6765\u6a21\u62df\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\uff0c\u7136\u540e\u4f7f\u7528 <code>if let</code> \u548c <code>while let</code> \u5904\u7406\u8fd9\u4e9b\u4ea4\u6613\u3002</p> <pre><code>struct Transaction {\n    transaction_type: &amp;'static str,\n    amount: f64,\n}\n\nfn main() {\n    let mut account_balance = 0.0;\n\n    // \u6a21\u62df\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\u5217\u8868\n    let transactions = vec![\n        Some(Transaction { transaction_type: \"Deposit\", amount: 100.0 }),\n        Some(Transaction { transaction_type: \"Withdrawal\", amount: 50.0 }),\n        Some(Transaction { transaction_type: \"Deposit\", amount: 200.0 }),\n        None, // \u7528\u6237\u7ed3\u675f\u8f93\u5165\n    ];\n\n    for transaction in transactions {\n        if let Some(tx) = transaction {\n            match tx.transaction_type {\n                \"Deposit\" =&gt; {\n                    account_balance += tx.amount;\n                    println!(\"Deposited ${:.2}\", tx.amount);\n                }\n                \"Withdrawal\" =&gt; {\n                    account_balance -= tx.amount;\n                    println!(\"Withdrawn ${:.2}\", tx.amount);\n                }\n                _ =&gt; println!(\"Invalid transaction type\"),\n            }\n        } else {\n            break; // \u7528\u6237\u7ed3\u675f\u8f93\u5165\uff0c\u9000\u51fa\u5faa\u73af\n        }\n    }\n\n    println!(\"Account Balance: ${:.2}\", account_balance);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>transactions</code> \u5411\u91cf\u6765\u6a21\u62df\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\u8bb0\u5f55\uff0c\u5305\u62ec\u5b58\u6b3e\u548c\u63d0\u6b3e\uff0c\u4ee5\u53ca\u4e00\u4e2a <code>None</code> \u8868\u793a\u7528\u6237\u7ed3\u675f\u8f93\u5165\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>for</code> \u5faa\u73af\u548c <code>if let</code> \u6765\u5904\u7406\u6bcf\u4e2a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5f53\u9047\u5230 <code>None</code> \u65f6\uff0c\u5faa\u73af\u7ec8\u6b62\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>if let</code> \u548c <code>while let</code> \u7b80\u5316\u6a21\u5f0f\u5339\u914d\uff0c\u4ee5\u5904\u7406\u53ef\u80fd\u7684\u6210\u529f\u548c\u5931\u8d25\u60c5\u51b5\uff0c\u4ee5\u53ca\u5728\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5904\u7406\u7528\u6237\u8f93\u5165\u7684\u4ea4\u6613\u8bb0\u5f55\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2009%20-%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#97","title":"9.7 \u5e76\u53d1\u8fed\u4ee3\u5668","text":"<p>\u5728 Rust \u4e2d\uff0c\u901a\u8fc7\u6807\u51c6\u5e93\u7684 <code>rayon</code> crate\uff0c\u4f60\u53ef\u4ee5\u8f7b\u677e\u521b\u5efa\u5e76\u53d1\u8fed\u4ee3\u5668\uff0c\u7528\u4e8e\u5728\u5e76\u884c\u8ba1\u7b97\u4e2d\u9ad8\u6548\u5904\u7406\u96c6\u5408\u7684\u5143\u7d20\u3002<code>rayon</code> \u63d0\u4f9b\u4e86\u4e00\u79cd\u5e76\u53d1\u7f16\u7a0b\u7684\u65b9\u5f0f\uff0c\u80fd\u591f\u5229\u7528\u591a\u6838\u5904\u7406\u5668\u7684\u6027\u80fd\uff0c\u7279\u522b\u9002\u5408\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u96c6\u3002</p> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528\u5e76\u53d1\u8fed\u4ee3\u5668\u7684\u4e00\u822c\u6b65\u9aa4\uff1a</p> <ol> <li>\u9996\u5148\uff0c\u786e\u4fdd\u5728 <code>Cargo.toml</code> \u4e2d\u6dfb\u52a0 <code>rayon</code> crate \u7684\u4f9d\u8d56\uff1a</li> </ol> <pre><code>[dependencies]\nrayon = \"1.5\"\n</code></pre> <ol> <li>\u5bfc\u5165 <code>rayon</code> crate\uff1a</li> </ol> <pre><code>use rayon::prelude::*;\n</code></pre> <ol> <li>\u4f7f\u7528 <code>.par_iter()</code> \u65b9\u6cd5\u5c06\u96c6\u5408\u8f6c\u6362\u4e3a\u5e76\u53d1\u8fed\u4ee3\u5668\u3002\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u8c03\u7528 <code>.for_each()</code>\u3001<code>.map()</code>\u3001<code>.filter()</code> \u7b49\u65b9\u6cd5\u6765\u8fdb\u884c\u5e76\u884c\u64cd\u4f5c\u3002</li> </ol> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u91d1\u878d\u6848\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u5e76\u53d1\u8fed\u4ee3\u5668\u8ba1\u7b97\u591a\u4e2a\u8d26\u6237\u7684\u603b\u4f59\u989d\u3002\u6bcf\u4e2a\u8d26\u6237\u5305\u542b\u4e00\u7ec4\u4ea4\u6613\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u8bb0\u5f55\u90fd\u6709\u4ea4\u6613\u7c7b\u578b\uff08\u5b58\u6b3e\u6216\u63d0\u6b3e\uff09\u548c\u91d1\u989d\u3002\u6211\u4eec\u5c06\u5e76\u884c\u8ba1\u7b97\u6bcf\u4e2a\u8d26\u6237\u7684\u603b\u4f59\u989d\uff0c\u7136\u540e\u8ba1\u7b97\u6240\u6709\u8d26\u6237\u7684\u603b\u4f59\u989d\u3002</p> <pre><code>use rayon::prelude::*;\n\nstruct Transaction {\n    transaction_type: &amp;'static str,\n    amount: f64,\n}\n\nstruct Account {\n    transactions: Vec&lt;Transaction&gt;,\n}\n\nimpl Account {\n    fn new(transactions: Vec&lt;Transaction&gt;) -&gt; Self {\n        Account { transactions }\n    }\n\n    fn calculate_balance(&amp;self) -&gt; f64 {\n        self.transactions\n            .par_iter() // \u5c06\u8fed\u4ee3\u5668\u8f6c\u6362\u4e3a\u5e76\u53d1\u8fed\u4ee3\u5668\n            .map(|transaction| {\n                match transaction.transaction_type {\n                    \"Deposit\" =&gt; transaction.amount,\n                    \"Withdrawal\" =&gt; -transaction.amount,\n                    _ =&gt; 0.0,\n                }\n            })\n            .sum() // \u5e76\u884c\u8ba1\u7b97\u603b\u548c\n    }\n}\n\nfn main() {\n    let account1 = Account::new(vec![\n        Transaction { transaction_type: \"Deposit\", amount: 100.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 50.0 },\n        Transaction { transaction_type: \"Deposit\", amount: 200.0 },\n    ]);\n\n    let account2 = Account::new(vec![\n        Transaction { transaction_type: \"Deposit\", amount: 300.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 75.0 },\n    ]);\n\n    let total_balance: f64 = vec![&amp;account1, &amp;account2]\n        .par_iter()\n        .map(|account| account.calculate_balance())\n        .sum(); // \u5e76\u884c\u8ba1\u7b97\u603b\u548c\n\n    println!(\"Total Account Balance: ${:.2}\", total_balance);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86 <code>Transaction</code> \u7ed3\u6784\u4f53\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\u548c <code>Account</code> \u7ed3\u6784\u4f53\u8868\u793a\u8d26\u6237\u3002\u6bcf\u4e2a\u8d26\u6237\u5305\u542b\u4e00\u7ec4\u4ea4\u6613\u8bb0\u5f55\u3002\u5728 <code>Account</code> \u7ed3\u6784\u4f53\u4e0a\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86 <code>calculate_balance()</code> \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4f7f\u7528\u5e76\u53d1\u8fed\u4ee3\u5668\u8ba1\u7b97\u8d26\u6237\u7684\u603b\u4f59\u989d\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e24\u4e2a\u8d26\u6237 <code>account1</code> \u548c <code>account2</code>\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u653e\u5165\u4e00\u4e2a\u5411\u91cf\u4e2d\u3002\u63a5\u7740\uff0c\u6211\u4eec\u4f7f\u7528\u5e76\u53d1\u8fed\u4ee3\u5668\u6765\u5e76\u884c\u8ba1\u7b97\u6bcf\u4e2a\u8d26\u6237\u7684\u4f59\u989d\uff0c\u5e76\u5c06\u6240\u6709\u8d26\u6237\u7684\u603b\u4f59\u989d\u76f8\u52a0\uff0c\u6700\u540e\u6253\u5370\u51fa\u7ed3\u679c\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>rayon</code> crate \u7684\u5e76\u53d1\u8fed\u4ee3\u5668\u6765\u9ad8\u6548\u5904\u7406\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6570\u636e\uff0c\u7279\u522b\u662f\u5728\u5904\u7406\u591a\u4e2a\u8d26\u6237\u65f6\uff0c\u53ef\u4ee5\u5145\u5206\u5229\u7528\u591a\u6838\u5904\u7406\u5668\u7684\u6027\u80fd\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/","title":"Chapter 10 - \u51fd\u6570, \u65b9\u6cd5 \u548c \u95ed\u5305","text":"<p>\u5728Rust\u4e2d\uff0c\u51fd\u6570\u3001\u65b9\u6cd5\u548c\u95ed\u5305\u90fd\u662f\u7528\u4e8e\u6267\u884c\u4ee3\u7801\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u4f46\u5b83\u4eec\u5728\u8bed\u6cd5\u548c\u7528\u9014\u4e0a\u6709\u76f8\u5f53\u7684\u4e0d\u540c\u3002\u4e0b\u9762\u6211\u4f1a\u8be6\u7ec6\u89e3\u91ca\u6bcf\u79cd\u53ef\u8c03\u7528\u5bf9\u8c61\u7684\u7279\u70b9\u548c\u7528\u6cd5\uff1a</p> <ol> <li> <p>\u51fd\u6570(Function)\uff1a</p> </li> <li> <p>\u51fd\u6570\u662fRust\u4e2d\u6700\u57fa\u672c\u7684\u53ef\u8c03\u7528\u5bf9\u8c61\u3002</p> </li> <li> <p>\u51fd\u6570\u901a\u5e38\u5728\u5168\u5c40\u4f5c\u7528\u57df\u6216\u6a21\u5757\u4e2d\u5b9a\u4e49\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u540d\u79f0\u6765\u8c03\u7528\u3002</p> </li> <li> <p>\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570\uff0c\u5e76\u4e14\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u503c\u3002</p> </li> <li> <p>\u51fd\u6570\u7684\u5b9a\u4e49\u4ee5 <code>fn</code> \u5173\u952e\u5b57\u5f00\u5934\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>fn add(a: i32, b: i32) -&gt; i32 {\n    a + b\n}\n</code></pre> </li> <li> <p>\u5728\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5176\u540d\u79f0\uff0c\u5e76\u4f20\u9012\u9002\u5f53\u7684\u53c2\u6570\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>let result = add(5, 3);\n</code></pre> </li> <li> <p>\u65b9\u6cd5(Method)\uff1a</p> </li> <li> <p>\u65b9\u6cd5\u662f\u4e0e\u7279\u5b9a\u7c7b\u578b\u5173\u8054\u7684\u51fd\u6570\u3002\u5728Rust\u4e2d\uff0c\u65b9\u6cd5\u662f\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u4e00\u90e8\u5206\u3002</p> </li> <li> <p>\u65b9\u6cd5\u662f\u901a\u8fc7\u5c06\u51fd\u6570\u4e0e\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u6216\u8005 trait \u76f8\u5173\u8054\u6765\u5b9a\u4e49\u7684\u3002</p> </li> <li> <p>\u65b9\u6cd5\u4f7f\u7528 <code>self</code> \u53c2\u6570\u6765\u8bbf\u95ee\u8c03\u7528\u5b83\u4eec\u7684\u5b9e\u4f8b\u7684\u5c5e\u6027\u548c\u884c\u4e3a\u3002</p> </li> <li> <p>\u65b9\u6cd5\u7684\u5b9a\u4e49\u4ee5 <code>impl</code> \u5173\u952e\u5b57\u5f00\u59cb\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>struct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nimpl Rectangle {\n    fn area(&amp;self) -&gt; u32 {\n        self.width * self.height\n    }\n}\n</code></pre> </li> <li> <p>\u5728\u8c03\u7528\u65b9\u6cd5\u65f6\uff0c\u4f60\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u7136\u540e\u4f7f\u7528\u70b9\u53f7\u8fd0\u7b97\u7b26\u8c03\u7528\u65b9\u6cd5\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>let rect = Rectangle { width: 10, height: 20 };\nlet area = rect.area();\n</code></pre> </li> <li> <p>\u95ed\u5305(Closure)\uff1a</p> </li> <li> <p>\u95ed\u5305\u662f\u4e00\u4e2a\u53ef\u4ee5\u6355\u83b7\u5176\u73af\u5883\u7684\u533f\u540d\u51fd\u6570\u3002\u5b83\u4eec\u7c7b\u4f3c\u4e8e\u51fd\u6570\uff0c\u4f46\u53ef\u4ee5\u6355\u83b7\u5c40\u90e8\u53d8\u91cf\u548c\u5916\u90e8\u53d8\u91cf\uff0c\u4f7f\u5176\u5177\u6709\u4e00\u5b9a\u7684\u72b6\u6001\u3002</p> </li> <li> <p>\u95ed\u5305\u53ef\u4ee5\u5b58\u50a8\u5728\u53d8\u91cf\u4e2d\uff0c\u4f20\u9012\u7ed9\u5176\u4ed6\u51fd\u6570\u6216\u8fd4\u56de\u4f5c\u4e3a\u51fd\u6570\u7684\u7ed3\u679c\u3002</p> </li> <li> <p>\u95ed\u5305\u901a\u5e38\u4f7f\u7528 <code>||</code> \u8bed\u6cd5\u6765\u5b9a\u4e49\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>let add_closure = |a, b| a + b;\n</code></pre> </li> <li> <p>\u4f60\u53ef\u4ee5\u50cf\u8c03\u7528\u51fd\u6570\u4e00\u6837\u8c03\u7528\u95ed\u5305\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>let result = add_closure(5, 3);\n</code></pre> </li> <li> <p>\u95ed\u5305\u53ef\u4ee5\u6355\u83b7\u5916\u90e8\u53d8\u91cf\uff0c\u4f8b\u5982\uff1a</p> <pre><code>let x = 5;\nlet closure = |y| x + y;\nlet result = closure(3); // result \u7b49\u4e8e 8\n</code></pre> </li> </ol> <p>\u8fd9\u4e9b\u662fRust\u4e2d\u51fd\u6570\u3001\u65b9\u6cd5\u548c\u95ed\u5305\u7684\u57fa\u672c\u6982\u5ff5\u548c\u7528\u6cd5\u3002\u6bcf\u79cd\u53ef\u8c03\u7528\u5bf9\u8c61\u90fd\u6709\u5176\u81ea\u5df1\u7684\u7528\u9014\u548c\u9002\u7528\u573a\u666f\uff0c\u6839\u636e\u9700\u8981\u9009\u62e9\u5408\u9002\u7684\u5de5\u5177\u6765\u7f16\u5199\u4ee3\u7801\u3002\u672c\u7ae0\u7684\u91cd\u70b9\u5219\u662f\u51fd\u6570\u7684\u8fdb\u9636\u7528\u6cd5\u548c\u95ed\u5305\u7684\u5b66\u4e60\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#101","title":"10.1 \u51fd\u6570\u8fdb\u9636","text":"<p>\u5982\u540cpython\u652f\u6301\u6cdb\u578b\u51fd\u6570\u3001\u9ad8\u9636\u51fd\u6570\u3001\u533f\u540d\u51fd\u6570;C\u8bed\u8a00\u4e5f\u652f\u6301\u6cdb\u578b\u51fd\u6570\u548c\u51fd\u6570\u6307\u9488\u4e00\u6837\uff0cRust\u4e2d\u7684\u51fd\u6570\u652f\u6301\u8bb8\u591a\u8fdb\u9636\u7528\u6cd5\uff0c\u8fd9\u4e9b\u7528\u6cd5\u53ef\u4ee5\u5e2e\u52a9\u4f60\u7f16\u5199\u66f4\u7075\u6d3b\u3001\u66f4\u9ad8\u6548\u7684\u4ee3\u7801\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u51fd\u6570\u8fdb\u9636\u7528\u6cd5\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#1011-generic-functions","title":"10.1.1 \u6cdb\u578b\u51fd\u6570(Generic Functions)","text":"<p>(\u5728\u7b2c14\u7ae0\uff0c\u6211\u4eec\u4f1a\u8fdb\u4e00\u6b65\u8be6\u7ec6\u4e86\u89e3\u6cdb\u578b\u51fd\u6570)</p> <p>\u4f7f\u7528\u6cdb\u578b\u53c2\u6570\u53ef\u4ee5\u7f16\u5199\u901a\u7528\u7684\u51fd\u6570\uff0c\u8fd9\u4e9b\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002</p> <p>\u901a\u8fc7\u5728\u51fd\u6570\u7b7e\u540d\u4e2d\u4f7f\u7528\u5c16\u62ec\u53f7 <code>&lt;T&gt;</code> \u6765\u58f0\u660e\u6cdb\u578b\u53c2\u6570\uff0c\u5e76\u5728\u51fd\u6570\u4f53\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u53c2\u6570\u6765\u7f16\u5199\u901a\u7528\u4ee3\u7801\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u66f4\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6f14\u793a\u5982\u4f55\u7f16\u5199\u4e00\u4e2a\u6cdb\u578b\u51fd\u6570 <code>find_max</code> \u6765\u67e5\u627e\u4efb\u4f55\u7c7b\u578b\u7684\u5143\u7d20\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c\uff1a</p> <pre><code>fn find_max_and_report_letters(list: &amp;[&amp;str]) -&gt; Option&lt;f64&gt; {\n    if list.is_empty() {\n        return None; // \u5982\u679c\u5217\u8868\u4e3a\u7a7a\uff0c\u8fd4\u56de None\n    }\n\n    let mut max = None; // \u7528 Option \u6765\u5b58\u50a8\u6700\u5927\u503c\n    let mut has_letters = false; // \u7528\u6765\u6807\u8bb0\u662f\u5426\u5305\u542b\u5b57\u6bcd\n\n    for item in list.iter() {\n        match item.parse::&lt;f64&gt;() {\n            Ok(number) =&gt; {\n                // \u5982\u679c\u6210\u529f\u89e3\u6790\u4e3a\u6d6e\u70b9\u6570\n                if max.is_none() || number &gt; max.unwrap() {\n                    max = Some(number);\n                }\n            }\n            Err(_) =&gt; {\n                // \u89e3\u6790\u5931\u8d25\uff0c\u8868\u793a\u5217\u8868\u4e2d\u4e0d\u5c0f\u5fc3\u6df7\u5165\u4e86\u5b57\u6bcd\uff0c\u65e0\u6cd5\u6bd4\u8f83\u3002\u628a\u8fd9\u4e2abool\u4f20\u7ed9has_letters.\n                has_letters = true;\n            }\n        }\n    }\n\n    if has_letters {\n        println!(\"\u5217\u8868\u4e2d\u5305\u542b\u5b57\u6bcd\u3002\");\n    }\n\n    max // \u8fd4\u56de\u627e\u5230\u7684\u6700\u5927\u503c\u4f5c\u4e3a Option&lt;f64&gt;\n}\n\nfn main() {\n    let data = vec![\"3.5\", \"7.2\", \"1.8\", \"9.0\", \"4.7\", \"2.1\", \"A\", \"B\"];\n    let max_number = find_max_and_report_letters(&amp;data);\n\n    match max_number {\n        Some(max) =&gt; println!(\"\u6700\u5927\u7684\u6570\u5b57\u662f: {}\", max),\n        None =&gt; println!(\"\u6ca1\u6709\u627e\u5230\u6709\u6548\u7684\u6570\u5b57\u3002\"),\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u5217\u8868\u4e2d\u5305\u542b\u5b57\u6bcd\u3002\n\u6700\u5927\u7684\u6570\u5b57\u662f: 9\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>find_max</code> \u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u6cdb\u578b\u5207\u7247 <code>list</code>\uff0c\u5e76\u5728\u5176\u4e2d\u67e5\u627e\u6700\u5927\u503c\u3002\u9996\u5148\uff0c\u5b83\u68c0\u67e5\u5217\u8868\u662f\u5426\u4e3a\u7a7a\uff0c\u5982\u679c\u662f\uff0c\u5219\u8fd4\u56de <code>None</code>\u3002\u7136\u540e\uff0c\u5b83\u904d\u5386\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5c06\u5f53\u524d\u6700\u5927\u503c\u4e0e\u5143\u7d20\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u627e\u5230\u66f4\u5927\u7684\u5143\u7d20\uff0c\u5c31\u66f4\u65b0 <code>max</code>\uff0c\u5e76\u4e14\u5982\u679c\u6709\u5b57\u6bcd\u8fd8\u4f1a\u6c47\u62a5\u7ed9\u6211\u4eec\u3002\u6700\u540e\uff0c\u51fd\u6570\u8fd4\u56de\u627e\u5230\u7684\u6700\u5927\u503c\u4f5c\u4e3a <code>Option&lt;&amp;T&gt;</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#1012-higher-order-functions","title":"10.1.2 \u9ad8\u9636\u51fd\u6570(Higher-Order Functions)","text":"<p>\u9ad8\u9636\u51fd\u6570(Higher-Order Functions)\u662f\u4e00\u79cd\u7f16\u7a0b\u6982\u5ff5\uff0c\u6307\u53ef\u4ee5\u63a5\u53d7\u5176\u4ed6\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u6216\u8005\u8fd4\u56de\u51fd\u6570\u4f5c\u4e3a\u7ed3\u679c\u7684\u51fd\u6570, \u5b83\u5728Rust\u4e2d\u6709\u5e7f\u6cdb\u7684\u652f\u6301\u548c\u5e94\u7528\u3002</p> <p>\u4ee5\u4e0b\u662f\u5173\u4e8e\u9ad8\u9636\u51fd\u6570\u5728Rust\u4e2d\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p> <ol> <li>\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff1a \u5728Rust\u4e2d\uff0c\u53ef\u4ee5\u5c06\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u5176\u4ed6\u51fd\u6570\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u901a\u7528\u7684\u51fd\u6570\uff0c\u4ee5\u4fbf\u5b83\u4eec\u53ef\u4ee5\u64cd\u4f5c\u4e0d\u540c\u7c7b\u578b\u7684\u51fd\u6570\u3002\u901a\u5e38\uff0c\u8fd9\u6837\u7684\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\u95ed\u5305(closure)\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u5728\u5176\u5185\u90e8\u4f7f\u7528\u8fd9\u4e2a\u95ed\u5305\u6765\u5b8c\u6210\u4e00\u4e9b\u64cd\u4f5c\u3002</li> </ol> <pre><code>fn apply&lt;F&gt;(func: F, value: i32) -&gt; i32\nwhere\n    F: Fn(i32) -&gt; i32,\n{\n    func(value)\n}\n\nfn double(x: i32) -&gt; i32 {\n    x * 2\n}\n\nfn main() {\n    let result = apply(double, 5);\n    println!(\"Result: {}\", result);\n}\n</code></pre> <ol> <li>\u8fd4\u56de\u51fd\u6570\uff1a \u7c7b\u4f3c\u5730\uff0c\u4f60\u53ef\u4ee5\u7f16\u5199\u51fd\u6570\uff0c\u4ee5\u51fd\u6570\u4f5c\u4e3a\u5b83\u4eec\u7684\u8fd4\u56de\u503c\u3002\u8fd9\u79cd\u51fd\u6570\u901a\u5e38\u88ab\u79f0\u4e3a\u5de5\u5382\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u4eec\u8fd4\u56de\u5176\u4ed6\u51fd\u6570\u7684\u5b9e\u4f8b\u3002</li> </ol> <pre><code>fn create_multiplier(factor: i32) -&gt; impl Fn(i32) -&gt; i32 { //\"impl Fn(i32) -&gt; i32 \" \u662f\u8fd4\u56de\u7c7b\u578b\u7684\u6807\u8bb0\uff0c\u5b83\u7528\u4e8e\u6307\u5b9a\u95ed\u5305\u7684\u7c7b\u578b\u7b7e\u540d\u3002\n    move |x| x * factor\n}\n\nfn main() {\n    let multiply_by_3 = create_multiplier(3);\n    let result = multiply_by_3(5);\n    println!(\"Result: {}\", result); // \u8f93\u51fa 15\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<code>move</code> \u5173\u952e\u5b57\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u95ed\u5305(\u533f\u540d\u51fd\u6570)\uff0c\u8fd9\u4e2a\u95ed\u5305\u6355\u83b7\u4e86\u5916\u90e8\u7684\u53d8\u91cf <code>factor</code>\u3002\u5728 Rust \u4e2d\uff0c\u95ed\u5305\u9ed8\u8ba4\u662f\u5bf9\u5916\u90e8\u53d8\u91cf\u7684\u501f\u7528(borrow)\uff0c\u4f46\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u4f7f\u7528 <code>move</code> \u5173\u952e\u5b57\u8868\u793a\u95ed\u5305\u4f1a**\u62e5\u6709**\u6355\u83b7\u7684\u53d8\u91cf <code>factor</code> \u7684\u6240\u6709\u6743\uff1a</p> <ol> <li> <p><code>create_multiplier</code> \u51fd\u6570\u63a5\u53d7\u4e00\u4e2a <code>factor</code> \u53c2\u6570\uff0c\u5b83\u662f\u4e00\u4e2a\u6574\u6570\u3002\u7136\u540e\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u95ed\u5305\uff0c\u8fd9\u4e2a\u95ed\u5305\u63a5\u53d7\u4e00\u4e2a\u6574\u6570 <code>x</code> \u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de <code>x * factor</code> \u7684\u7ed3\u679c\u3002</p> </li> <li> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u8c03\u7528 <code>create_multiplier(3)</code>\uff0c\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a\u95ed\u5305\uff0c\u8fd9\u4e2a\u95ed\u5305\u6355\u83b7\u4e86 <code>factor</code> \u53d8\u91cf\uff0c\u5176\u503c\u4e3a 3\u3002</p> </li> <li> <p>\u7136\u540e\uff0c\u6211\u4eec\u8c03\u7528 <code>multiply_by_3(5)</code>\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u4e86\u6211\u4eec\u4e4b\u524d\u521b\u5efa\u7684\u95ed\u5305\u3002\u95ed\u5305\u4e2d\u7684 <code>factor</code> \u503c\u662f 3\uff0c\u6240\u4ee5 <code>5 * 3</code> \u7684\u7ed3\u679c\u662f 15\u3002</p> </li> <li> <p>\u6700\u540e\uff0c\u6211\u4eec\u5c06\u7ed3\u679c\u6253\u5370\u5230\u63a7\u5236\u53f0\uff0c\u8f93\u51fa\u7684\u7ed3\u679c\u662f <code>15</code>\u3002</p> </li> </ol> <p><code>move</code> \u5173\u952e\u5b57\u7684\u4f5c\u7528\u662f\u5c06\u5916\u90e8\u53d8\u91cf\u7684\u6240\u6709\u6743\u79fb\u52a8\u5230\u95ed\u5305\u5185\u90e8\uff0c\u8fd9\u610f\u5473\u7740\u95ed\u5305\u5728\u5185\u90e8\u62e5\u6709\u8fd9\u4e2a\u53d8\u91cf\u7684\u63a7\u5236\u6743\uff0c\u4e0d\u518d\u4f9d\u8d56\u4e8e\u5916\u90e8\u7684\u53d8\u91cf\u3002\u8fd9\u5bf9\u4e8e\u5728\u95ed\u5305\u4e2d\u6355\u83b7\u5916\u90e8\u53d8\u91cf\u5e76\u5728\u4e4b\u540e\u7ee7\u7eed\u4f7f\u7528\u5b83\u4eec\u975e\u5e38\u6709\u7528\uff0c\u5c24\u5176\u662f\u5f53\u8fd9\u4e9b\u5916\u90e8\u53d8\u91cf\u53ef\u80fd\u8d85\u51fa\u4e86\u5176\u4f5c\u7528\u57df\u65f6(\u5982\u5728\u5f02\u6b65\u7f16\u7a0b\u4e2d)\u3002</p> <ol> <li>\u8fed\u4ee3\u5668\u548c\u9ad8\u9636\u51fd\u6570\uff1a Rust\u7684\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u8fed\u4ee3\u5668\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5141\u8bb8\u4f60\u5bf9\u96c6\u5408(\u5982\u6570\u7ec4\u3001\u5411\u91cf\u3001\u8fed\u4ee3\u5668\u7b49)\u8fdb\u884c\u9ad8\u7ea7\u64cd\u4f5c\uff0c\u4f8b\u5982<code>map</code>\u3001<code>filter</code>\u3001<code>fold</code>\u7b49\u3002\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u53ef\u4ee5\u63a5\u53d7\u51fd\u6570\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f7f\u4f60\u80fd\u591f\u975e\u5e38\u7075\u6d3b\u5730\u5904\u7406\u6570\u636e\u3002</li> </ol> <pre><code>let numbers = vec![1, 2, 3, 4, 5];\n\n// \u4f7f\u7528map\u9ad8\u9636\u51fd\u6570\u5c06\u6bcf\u4e2a\u6570\u5b57\u52a0\u500d\nlet doubled_numbers: Vec&lt;i32&gt; = numbers.iter().map(|x| x * 2).collect();\n\n// \u4f7f\u7528filter\u9ad8\u9636\u51fd\u6570\u9009\u62e9\u5076\u6570\nlet even_numbers: Vec&lt;i32&gt; = numbers.iter().filter(|x| x % 2 == 0).cloned().collect();\n</code></pre> <p>\u9ad8\u9636\u51fd\u6570\u4f7f\u5f97\u5728Rust\u4e2d\u7f16\u5199\u66f4\u5177\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u7684\u4ee3\u7801\u53d8\u5f97\u66f4\u5bb9\u6613\uff0c\u540c\u65f6\u4e5f\u5141\u8bb8\u4f60\u4ee5\u4e00\u79cd\u66f4\u52a0\u62bd\u8c61\u7684\u65b9\u5f0f\u5904\u7406\u6570\u636e\u548c\u903b\u8f91\u3002\u901a\u8fc7\u4f7f\u7528\u95ed\u5305\u548c\u6cdb\u578b\uff0cRust\u7684\u9ad8\u9636\u51fd\u6570\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u4f7f\u5f97\u7f16\u7a0b\u66f4\u52a0\u7075\u6d3b\u548c\u8868\u8fbe\u529b\u5f3a\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#1013-anonymous-functions","title":"10.1.3 \u533f\u540d\u51fd\u6570(Anonymous Functions)","text":"<ul> <li>\u9664\u4e86\u5e38\u89c4\u7684\u51fd\u6570\u5b9a\u4e49\uff0cRust\u8fd8\u652f\u6301\u533f\u540d\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u95ed\u5305\u3002</li> <li>\u95ed\u5305\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u5b9a\u4e49\uff0c\u5e76\u4e14\u53ef\u4ee5\u6355\u83b7\u5176\u73af\u5883\u4e2d\u7684\u53d8\u91cf\u3002</li> </ul> <pre><code>let add = |a, b| a + b;\nlet result = add(5, 3); // result \u7b49\u4e8e 8\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#_1","title":"\u6848\u4f8b\uff1a\u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u9884\u671f\u6536\u76ca\u548c\u98ce\u9669","text":"<p>\u5728\u91d1\u878d\u9886\u57df\uff0c\u9ad8\u9636\u51fd\u6570\u53ef\u4ee5\u7528\u6765\u5904\u7406\u6295\u8d44\u7ec4\u5408(portfolio)\u7684\u5404\u79cd\u5206\u6790\u548c\u4f18\u5316\u95ee\u9898\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u9ad8\u9636\u51fd\u6570\u6765\u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u6536\u76ca\u548c\u98ce\u9669\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u6295\u8d44\u7ec4\u5408\uff0c\u5176\u4e2d\u5305\u542b\u591a\u4e2a\u4e0d\u540c\u7684\u8d44\u4ea7\uff0c\u6bcf\u4e2a\u8d44\u4ea7\u90fd\u6709\u4e00\u4e2a\u9884\u671f\u6536\u76ca\u7387\u548c\u98ce\u9669(\u6807\u51c6\u5dee)\u7387\u3002\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u9ad8\u9636\u51fd\u6570\u6765\u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u9884\u671f\u6536\u76ca\u548c\u98ce\u9669\uff0c\u4ee5\u53ca\u6839\u636e\u98ce\u9669\u504f\u597d\u4f18\u5316\u8d44\u4ea7\u914d\u7f6e\u3002</p> <pre><code>struct Asset {\n    expected_return: f64,\n    risk: f64,\n}\n\nfn calculate_portfolio_metrics(assets: &amp;[Asset], weights: &amp;[f64]) -&gt; (f64, f64) {\n    let expected_return: f64 = assets\n        .iter()\n        .zip(weights.iter())\n        .map(|(asset, weight)| asset.expected_return * weight)\n        .sum::&lt;f64&gt;();\n\n    let portfolio_risk: f64 = assets\n        .iter()\n        .zip(weights.iter())\n        .map(|(asset, weight)| asset.risk * asset.risk * weight * weight)\n        .sum::&lt;f64&gt;();\n\n    (expected_return, portfolio_risk)\n}\n\nfn optimize_with_algorithm&lt;F&gt;(_objective_function: F, initial_weights: Vec&lt;f64&gt;) -&gt; Vec&lt;f64&gt;\nwhere\n    F: Fn(Vec&lt;f64&gt;) -&gt; f64,\n{\n    // \u8fd9\u91cc\u7b80\u5316\u4e3a\u5747\u5300\u5206\u914d\u6743\u91cd\u7684\u5b9e\u73b0\uff0c\u5b9e\u9645\u4e2d\u9700\u8981\u4f7f\u7528\u4f18\u5316\u7b97\u6cd5\n    initial_weights\n}\n\nfn optimize_portfolio(assets: &amp;[Asset], risk_preference: f64) -&gt; Vec&lt;f64&gt; {\n    let objective_function = |weights: Vec&lt;f64&gt;| -&gt; f64 {\n        let (expected_return, portfolio_risk) = calculate_portfolio_metrics(&amp;assets, &amp;weights);\n        expected_return - risk_preference * portfolio_risk\n    };\n\n    let num_assets = assets.len();\n    let initial_weights = vec![1.0 / num_assets as f64; num_assets];\n    let optimized_weights = optimize_with_algorithm(objective_function, initial_weights);\n\n    optimized_weights\n}\n\nfn main() {\n    let asset1 = Asset {\n        expected_return: 0.08,\n        risk: 0.12,\n    };\n    let asset2 = Asset {\n        expected_return: 0.12,\n        risk: 0.18,\n    };\n\n    let assets = vec![asset1, asset2];\n    let risk_preference = 2.0;\n\n    let optimized_weights = optimize_portfolio(&amp;assets, risk_preference);\n\n    println!(\"Optimal Portfolio Weights: {:?}\", optimized_weights);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u9ad8\u9636\u51fd\u6570\u6765\u8ba1\u7b97\u6295\u8d44\u7ec4\u5408\u7684\u9884\u671f\u6536\u76ca\u548c\u98ce\u9669\uff0c\u5e76\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4f18\u5316\u51fd\u6570\u4f5c\u4e3a\u95ed\u5305\u3002\u901a\u8fc7\u4f20\u9012\u4e0d\u540c\u7684\u98ce\u9669\u504f\u597d\u53c2\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u4f18\u5316\u8d44\u4ea7\u914d\u7f6e\uff0c\u4ee5\u5728\u98ce\u9669\u548c\u56de\u62a5\u4e4b\u95f4\u627e\u5230\u6700\u4f73\u5e73\u8861\u70b9\u3002\u8fd9\u662f\u91d1\u878d\u9886\u57df\u4e2d\u4f7f\u7528\u9ad8\u9636\u51fd\u6570\u8fdb\u884c\u6295\u8d44\u7ec4\u5408\u5206\u6790\u548c\u4f18\u5316\u7684\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\u3002\u5b9e\u9645\u4e2d\uff0c\u4f1a\u6709\u66f4\u591a\u590d\u6742\u7684\u6a21\u578b\u548c\u7b97\u6cd5\u7528\u4e8e\u5904\u7406\u8fd9\u7c7b\u95ee\u9898\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#zip","title":"\u8865\u5145\u5b66\u4e60\uff1azip\u65b9\u6cd5","text":"<p>\u5728Rust\u4e2d\uff0c<code>zip</code> \u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\u9002\u914d\u5668\u65b9\u6cd5\uff0c\u5b83\u7528\u4e8e\u5c06\u4e24\u4e2a\u8fed\u4ee3\u5668\u9010\u4e2a\u5143\u7d20\u5730\u914d\u5bf9\u5728\u4e00\u8d77\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u5668\uff0c\u8be5\u8fed\u4ee3\u5668\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u6765\u81ea\u4e24\u4e2a\u539f\u59cb\u8fed\u4ee3\u5668\u7684\u5bf9\u5e94\u5143\u7d20\u3002</p> <p><code>zip</code> \u65b9\u6cd5\u7684\u7b7e\u540d\u5982\u4e0b\uff1a</p> <pre><code>fn zip&lt;U&gt;(self, other: U) -&gt; Zip&lt;Self, U::IntoIter&gt;\nwhere\n    U: IntoIterator;\n</code></pre> <p>\u8fd9\u4e2a\u65b9\u6cd5\u63a5\u53d7\u53e6\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61 <code>other</code> \u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a <code>Zip</code> \u8fed\u4ee3\u5668\uff0c\u8be5\u8fed\u4ee3\u5668\u4ea7\u751f\u4e00\u4e2a\u5143\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u6765\u81ea\u8c03\u7528 <code>zip</code> \u65b9\u6cd5\u7684\u8fed\u4ee3\u5668\u548c <code>other</code> \u8fed\u4ee3\u5668\u7684\u5bf9\u5e94\u5143\u7d20\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528 <code>zip</code> \u65b9\u6cd5\uff1a</p> <pre><code>fn main() {\n    let numbers = vec![1, 2, 3];\n    let letters = vec!['A', 'B', 'C'];\n\n    let zipped = numbers.iter().zip(letters.iter());\n\n    for (num, letter) in zipped {\n        println!(\"Number: {}, Letter: {}\", num, letter);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u5411\u91cf <code>numbers</code> \u548c <code>letters</code>\uff0c\u5b83\u4eec\u5206\u522b\u5305\u542b\u6574\u6570\u548c\u5b57\u7b26\u3002\u6211\u4eec\u4f7f\u7528 <code>zip</code> \u65b9\u6cd5\u5c06\u5b83\u4eec\u914d\u5bf9\u5728\u4e00\u8d77\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u5668 <code>zipped</code>\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>for</code> \u5faa\u73af\u904d\u5386 <code>zipped</code> \u8fed\u4ee3\u5668\uff0c\u6bcf\u6b21\u8fed\u4ee3\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u6574\u6570\u548c\u5b57\u7b26\u7684\u5143\u7ec4\uff0c\u5141\u8bb8\u6211\u4eec\u540c\u65f6\u8bbf\u95ee\u4e24\u4e2a\u5411\u91cf\u7684\u5143\u7d20\u3002</p> <p>\u8f93\u51fa\u7ed3\u679c\u5c06\u4f1a\u662f\uff1a</p> <pre><code>Number: 1, Letter: A\nNumber: 2, Letter: B\nNumber: 3, Letter: C\n</code></pre> <p><code>zip</code> \u65b9\u6cd5\u5728\u5904\u7406\u591a\u4e2a\u8fed\u4ee3\u5668\u5e76\u5e0c\u671b\u5c06\u5b83\u4eec\u4e00\u4e00\u5339\u914d\u5728\u4e00\u8d77\u65f6\u975e\u5e38\u6709\u7528\u3002\u8fd9\u4f7f\u5f97\u540c\u65f6\u904d\u5386\u591a\u4e2a\u96c6\u5408\u53d8\u5f97\u66f4\u52a0\u65b9\u4fbf\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2010%20-%20%E5%87%BD%E6%95%B0%2C%20%E6%96%B9%E6%B3%95%20%E5%92%8C%20%E9%97%AD%E5%8C%85/#102","title":"10.2 \u95ed\u5305\u8fdb\u9636","text":"<p>\u95ed\u5305\u662f Rust \u4e2d\u975e\u5e38\u5f3a\u5927\u548c\u7075\u6d3b\u7684\u6982\u5ff5\uff0c\u5b83\u4eec\u5141\u8bb8\u4f60\u5c06\u4ee3\u7801\u5757\u5c01\u88c5\u4e3a\u503c\uff0c\u4ee5\u4fbf\u5728\u7a0b\u5e8f\u4e2d\u4f20\u9012\u548c\u4f7f\u7528\u3002\u95ed\u5305\u901a\u5e38\u7528\u4e8e\u4ee5\u4e0b\u51e0\u79cd\u573a\u666f\uff1a</p> <ol> <li>\u533f\u540d\u51fd\u6570\uff1a \u95ed\u5305\u5141\u8bb8\u4f60\u521b\u5efa\u533f\u540d\u51fd\u6570\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u9700\u8981\u7684\u5730\u65b9\u5b9a\u4e49\u548c\u4f7f\u7528\uff0c\u800c\u4e0d\u5fc5\u547d\u540d\u4e3a\u51fd\u6570\u3002</li> <li>\u6355\u83b7\u73af\u5883\uff1a \u95ed\u5305\u53ef\u4ee5\u6355\u83b7\u5176\u5468\u56f4\u7684\u53d8\u91cf\u548c\u72b6\u6001\uff0c\u53ef\u4ee5\u5728\u95ed\u5305\u5185\u90e8\u5f15\u7528\u5916\u90e8\u4f5c\u7528\u57df\u4e2d\u7684\u53d8\u91cf\u3002</li> <li>\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff1a \u95ed\u5305\u53ef\u4ee5\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u4f20\u9012\uff0c\u4ece\u800c\u53ef\u4ee5\u5c06\u81ea\u5b9a\u4e49\u884c\u4e3a\u6ce8\u5165\u5230\u51fd\u6570\u4e2d\u3002</li> <li>\u8fed\u4ee3\u5668\uff1a Rust \u4e2d\u7684\u8fed\u4ee3\u5668\u65b9\u6cd5\u901a\u5e38\u63a5\u53d7\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\uff0c\u7528\u4e8e\u81ea\u5b9a\u4e49\u5143\u7d20\u5904\u7406\u903b\u8f91\u3002</li> </ol> <p>\u4ee5\u4e0b\u662f\u95ed\u5305\u7684\u4e00\u822c\u8bed\u6cd5\uff1a</p> <pre><code>|\u53c2\u65701, \u53c2\u65702| -&gt; \u8fd4\u56de\u7c7b\u578b {\n    // \u95ed\u5305\u4f53\n    // \u53ef\u4ee5\u4f7f\u7528\u53c2\u65701\u3001\u53c2\u65702\u4ee5\u53ca\u6355\u83b7\u7684\u5916\u90e8\u53d8\u91cf\n}\n</code></pre> <p>\u95ed\u5305\u53c2\u6570\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a\uff0c\u5e76\u4e14\u53ef\u4ee5\u6307\u5b9a\u8fd4\u56de\u7c7b\u578b\u3002\u95ed\u5305\u4f53\u662f\u4ee3\u7801\u5757\uff0c\u5b83\u5b9a\u4e49\u4e86\u95ed\u5305\u7684\u884c\u4e3a\u3002</p> <p>\u95ed\u5305\u7684\u79cd\u7c7b\uff1a</p> <p>Rust \u4e2d\u6709\u4e09\u79cd\u4e3b\u8981\u7c7b\u578b\u7684\u95ed\u5305\uff0c\u5206\u522b\u662f\uff1a</p> <ol> <li>FnOnce\uff1a \u53ea\u80fd\u8c03\u7528\u4e00\u6b21\u7684\u95ed\u5305\uff0c\u901a\u5e38\u4f1a\u6d88\u8017\uff08move\uff09\u6355\u83b7\u7684\u53d8\u91cf\u3002</li> <li>FnMut\uff1a \u53ef\u4ee5\u591a\u6b21\u8c03\u7528\u7684\u95ed\u5305\uff0c\u901a\u5e38\u4f1a\u53ef\u53d8\u5730\u501f\u7528\u6355\u83b7\u7684\u53d8\u91cf\u3002</li> <li>Fn\uff1a \u53ef\u4ee5\u591a\u6b21\u8c03\u7528\u7684\u95ed\u5305\uff0c\u901a\u5e38\u4f1a\u4e0d\u53ef\u53d8\u5730\u501f\u7528\u6355\u83b7\u7684\u53d8\u91cf\u3002</li> </ol> <p>\u95ed\u5305\u7684\u79cd\u7c7b\u7531\u95ed\u5305\u7684\u884c\u4e3a\u548c\u6355\u83b7\u7684\u53d8\u91cf\u662f\u5426\u53ef\u53d8\u6765\u51b3\u5b9a\u3002</p> <p>\u793a\u4f8b1\uff1a</p> <pre><code>// \u4e00\u4e2a\u7b80\u5355\u7684\u95ed\u5305\u793a\u4f8b\uff0c\u8ba1\u7b97\u4e24\u4e2a\u6570\u5b57\u7684\u548c\nlet add = |x, y| x + y;\nlet result = add(2, 3); // \u8c03\u7528\u95ed\u5305\nprintln!(\"Sum: {}\", result);\n</code></pre> <p>\u793a\u4f8b2\uff1a</p> <pre><code>// \u6355\u83b7\u5916\u90e8\u53d8\u91cf\u7684\u95ed\u5305\u793a\u4f8b\nlet x = 10;\nlet increment = |y| y + x;\nlet result = increment(5); // \u8c03\u7528\u95ed\u5305\nprintln!(\"Result: {}\", result);\n</code></pre> <p>\u793a\u4f8b3\uff1a</p> <pre><code>// \u4f7f\u7528\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\u7684\u51fd\u6570\u793a\u4f8b\nfn apply_operation&lt;F&gt;(a: i32, b: i32, operation: F) -&gt; i32\nwhere\n    F: Fn(i32, i32) -&gt; i32,\n{\n    operation(a, b)\n}\n\nlet sum = apply_operation(2, 3, |x, y| x + y);\nlet product = apply_operation(2, 3, |x, y| x * y);\n\nprintln!(\"Sum: {}\", sum);\nprintln!(\"Product: {}\", product);\n</code></pre> <p>\u91d1\u878d\u6848\u4f8b1\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u5b58\u50a8\u80a1\u7968\u4ef7\u683c\u7684\u5411\u91cf\uff0c\u5e76\u5e0c\u671b\u8ba1\u7b97\u8fd9\u4e9b\u4ef7\u683c\u7684\u5e73\u5747\u503c\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u95ed\u5305\u6765\u5b9a\u4e49\u81ea\u5b9a\u4e49\u7684\u8ba1\u7b97\u5e73\u5747\u503c\u903b\u8f91\u3002</p> <pre><code>fn main() {\n    let stock_prices = vec![50.0, 55.0, 60.0, 65.0, 70.0];\n\n    // \u4f7f\u7528\u95ed\u5305\u8ba1\u7b97\u5e73\u5747\u503c\n    let calculate_average = |prices: &amp;[f64]| {\n        let sum: f64 = prices.iter().sum();\n        sum / (prices.len() as f64)\n    };\n\n    let average_price = calculate_average(&amp;stock_prices);\n    println!(\"Average Stock Price: {:.2}\", average_price);\n}\n</code></pre> <p>\u91d1\u878d\u6848\u4f8b2\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u94f6\u884c\u5e94\u7528\u7a0b\u5e8f\uff0c\u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u8d26\u6237\u7c7b\u578b\u8ba1\u7b97\u5229\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u95ed\u5305\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u5230\u51fd\u6570\u4e2d\uff0c\u6839\u636e\u4e0d\u540c\u7684\u8d26\u6237\u7c7b\u578b\u5e94\u7528\u4e0d\u540c\u7684\u5229\u606f\u8ba1\u7b97\u903b\u8f91\u3002</p> <pre><code>fn main() {\n    struct Account {\n        balance: f64,\n        account_type: &amp;'static str,\n    }\n\n    let accounts = vec![\n        Account { balance: 1000.0, account_type: \"Savings\" },\n        Account { balance: 5000.0, account_type: \"Checking\" },\n        Account { balance: 20000.0, account_type: \"Fixed Deposit\" },\n    ];\n\n    // \u4f7f\u7528\u95ed\u5305\u8ba1\u7b97\u5229\u606f\n    let calculate_interest = |balance: f64, account_type: &amp;str| -&gt; f64 {\n        match account_type {\n            \"Savings\" =&gt; balance * 0.03,\n            \"Checking\" =&gt; balance * 0.01,\n            \"Fixed Deposit\" =&gt; balance * 0.05,\n            _ =&gt; \n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u4e3a <code>FnOnce</code> \u548c <code>FnMut</code> \u4e5f\u63d0\u4f9b\u4e00\u4e2a\u91d1\u878d\u6848\u4f8b\u3002</p> <p>\u91d1\u878d\u6848\u4f8b3\uff08<code>FnOnce</code>\uff09\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u8d26\u6237\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a <code>Transaction</code> \u7ed3\u6784\u4f53\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\u3002\u6211\u4eec\u5e0c\u671b\u4f7f\u7528 <code>FnOnce</code> \u95ed\u5305\u6765\u5904\u7406\u6bcf\u4e2a\u4ea4\u6613\uff0c\u786e\u4fdd\u6bcf\u7b14\u4ea4\u6613\u53ea\u5904\u7406\u4e00\u6b21\uff0c\u4ee5\u9632\u6b62\u91cd\u590d\u8ba1\u7b97\u3002</p> <pre><code>fn main() {\n    struct Transaction {\n        transaction_type: &amp;'static str,\n        amount: f64,\n    }\n\n    let transactions = vec![\n        Transaction { transaction_type: \"Deposit\", amount: 100.0 },\n        Transaction { transaction_type: \"Withdrawal\", amount: 50.0 },\n        Transaction { transaction_type: \"Deposit\", amount: 200.0 },\n    ];\n\n    // \u5b9a\u4e49\u5904\u7406\u4ea4\u6613\u7684\u95ed\u5305\n    let process_transaction = |transaction: Transaction| {\n        match transaction.transaction_type {\n            \"Deposit\" =&gt; println!(\"Processed deposit of ${:.2}\", transaction.amount),\n            \"Withdrawal\" =&gt; println!(\"Processed withdrawal of ${:.2}\", transaction.amount),\n            _ =&gt; println!(\"Invalid transaction type\"),\n        }\n    };\n\n    // \u4f7f\u7528FnOnce\u95ed\u5305\u5904\u7406\u4ea4\u6613\uff0c\u6bcf\u7b14\u4ea4\u6613\u53ea\u80fd\u5904\u7406\u4e00\u6b21\n    for transaction in transactions {\n        process_transaction(transaction);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a <code>Transaction</code> \u7ed3\u6784\u4f53\u8868\u793a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5e76\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>process_transaction</code> \u95ed\u5305\uff0c\u7528\u4e8e\u5904\u7406\u6bcf\u7b14\u4ea4\u6613\u3002\u7531\u4e8e <code>FnOnce</code> \u95ed\u5305\u53ea\u80fd\u8c03\u7528\u4e00\u6b21\uff0c\u6211\u4eec\u5728\u5faa\u73af\u4e2d\u4f20\u9012\u6bcf\u4e2a\u4ea4\u6613\u8bb0\u5f55\uff0c\u5e76\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u4f7f\u7528 <code>process_transaction</code> \u95ed\u5305\u5904\u7406\u4ea4\u6613\u3002</p> <p>\u91d1\u878d\u6848\u4f8b4\uff08<code>FnMut</code>\uff09\uff1a</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u80a1\u7968\u76d1\u63a7\u5e94\u7528\u7a0b\u5e8f\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u80a1\u7968\u4ef7\u683c\u5217\u8868\uff0c\u6211\u4eec\u9700\u8981\u5468\u671f\u6027\u5730\u66f4\u65b0\u80a1\u7968\u4ef7\u683c\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>FnMut</code> \u95ed\u5305\u6765\u66f4\u65b0\u4ef7\u683c\u5217\u8868\u4e2d\u7684\u80a1\u7968\u4ef7\u683c\u3002</p> <pre><code>fn main() {\n    let mut stock_prices = vec![50.0, 55.0, 60.0, 65.0, 70.0];\n\n    // \u5b9a\u4e49\u66f4\u65b0\u80a1\u7968\u4ef7\u683c\u7684\u95ed\u5305\n    let mut update_stock_prices = |prices: &amp;mut Vec&lt;f64&gt;| {\n        for price in prices.iter_mut() {\n            // \u6a21\u62df\u5e02\u573a\u6ce2\u52a8\uff0c\u66f4\u65b0\u4ef7\u683c\n            let market_fluctuation = rand::random::&lt;f64&gt;() * 5.0 - 2.5;\n            *price += market_fluctuation;\n        }\n    };\n\n    // \u4f7f\u7528FnMut\u95ed\u5305\u5468\u671f\u6027\u5730\u66f4\u65b0\u80a1\u7968\u4ef7\u683c\n    for _ in 0..5 {\n        update_stock_prices(&amp;mut stock_prices);\n        println!(\"Updated Stock Prices: {:?}\", stock_prices);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u80a1\u7968\u4ef7\u683c\u5217\u8868 <code>stock_prices</code>\uff0c\u5e76\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>update_stock_prices</code> \u95ed\u5305\uff0c\u8be5\u95ed\u5305\u4f7f\u7528 <code>FnMut</code> \u7279\u6027\u4ee5\u53ef\u53d8\u65b9\u5f0f\u66f4\u65b0\u4ef7\u683c\u5217\u8868\u4e2d\u7684\u80a1\u7968\u4ef7\u683c\u3002\u6211\u4eec\u5728\u5faa\u73af\u4e2d\u591a\u6b21\u8c03\u7528 <code>update_stock_prices</code> \u95ed\u5305\uff0c\u6a21\u62df\u5e02\u573a\u6ce2\u52a8\u548c\u4ef7\u683c\u66f4\u65b0\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2011%20-%20%E6%A8%A1%E5%9D%97/","title":"Chapter 11 - \u6a21\u5757","text":"<p>\u5728 Rust \u4e2d\uff0c\u6a21\u5757(Modules)\u662f\u4e00\u79cd\u7ec4\u7ec7\u548c\u7ba1\u7406\u4ee3\u7801\u7684\u65b9\u5f0f\uff0c\u5b83\u5141\u8bb8\u4f60\u5c06\u76f8\u5173\u7684\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u5e38\u91cf\u7b49\u9879\u7ec4\u7ec7\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u5355\u5143\u3002\u6a21\u5757\u6709\u52a9\u4e8e\u4ee3\u7801\u7684\u7ec4\u7ec7\u3001\u53ef\u7ef4\u62a4\u6027\u548c\u5c01\u88c5\u6027\uff0c\u4f7f\u5f97\u5927\u578b\u9879\u76ee\u66f4\u5bb9\u6613\u7ba1\u7406\u548c\u7406\u89e3\u3002</p> <p>\u4ee5\u4e0b\u662f\u5173\u4e8e Rust \u6a21\u5757\u7684\u91cd\u8981\u6982\u5ff5\u548c\u89e3\u91ca\uff1a</p> <ol> <li>\u6a21\u5757\u7684\u5b9a\u4e49\uff1a \u6a21\u5757\u53ef\u4ee5\u5728 Rust \u4ee3\u7801\u4e2d\u901a\u8fc7 <code>mod</code> \u5173\u952e\u5b57\u5b9a\u4e49\u3002\u4e00\u4e2a\u6a21\u5757\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u6a21\u5757\u3001\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u3001\u5e38\u91cf\u548c\u5176\u4ed6\u9879\u3002\u6a21\u5757\u901a\u5e38\u4ee5\u4e00\u4e2a\u5305\u542b\u76f8\u5173\u529f\u80fd\u7684\u6587\u4ef6\u4e3a\u5355\u4f4d\u8fdb\u884c\u7ec4\u7ec7\u3002</li> </ol> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a `my_module` \u7684\u6a21\u5757\nmod my_module {\n    // \u5728\u6a21\u5757\u5185\u90e8\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u9879\n    fn my_function() {\n        println!(\"This is my function.\");\n    }\n}\n</code></pre> <ol> <li>\u6a21\u5757\u7684\u5d4c\u5957\uff1a \u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u6a21\u5757\u5185\u90e8\u5b9a\u4e49\u5176\u4ed6\u6a21\u5757\uff0c\u4ece\u800c\u521b\u5efa\u5d4c\u5957\u7684\u6a21\u5757\u7ed3\u6784\uff0c\u8fd9\u6709\u52a9\u4e8e\u66f4\u7ec6\u7c92\u5ea6\u5730\u7ec4\u7ec7\u4ee3\u7801\u3002</li> </ol> <pre><code>mod outer_module {\n    mod inner_module {\n        // ...\n    }\n}\n</code></pre> <ol> <li>\u8bbf\u95ee\u9879\uff1a \u6a21\u5757\u5185\u90e8\u7684\u9879\u9ed8\u8ba4\u662f\u79c1\u6709\u7684\uff0c\u5982\u679c\u8981\u4ece\u5916\u90e8\u8bbf\u95ee\u6a21\u5757\u5185\u7684\u9879\uff0c\u9700\u8981\u4f7f\u7528 <code>pub</code> \u5173\u952e\u5b57\u6765\u5c06\u5b83\u4eec\u6807\u8bb0\u4e3a\u516c\u5171\u3002</li> </ol> <pre><code>mod my_module {\n    pub fn my_public_function() {\n        println!(\"This is a public function.\");\n    }\n}\n</code></pre> <ol> <li>\u4f7f\u7528\u6a21\u5757\uff1a \u5728\u5176\u4ed6\u6587\u4ef6\u4e2d\u4f7f\u7528\u6a21\u5757\u5185\u7684\u9879\u9700\u8981\u4f7f\u7528 <code>use</code> \u5173\u952e\u5b57\u5bfc\u5165\u6a21\u5757\u3002</li> </ol> <pre><code>// \u5bfc\u5165\u6a21\u5757\nuse my_module::my_public_function;\n\nfn main() {\n    // \u8c03\u7528\u6a21\u5757\u5185\u7684\u51fd\u6570\n    my_public_function();\n}\n</code></pre> <ol> <li>\u6a21\u5757\u6587\u4ef6\u7ed3\u6784\uff1a Rust \u9f13\u52b1\u6309\u7167\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u7ed3\u6784\u6765\u7ec4\u7ec7\u6a21\u5757\u3002\u6bcf\u4e2a\u6a21\u5757\u901a\u5e38\u4f4d\u4e8e\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff0c\u6587\u4ef6\u7684\u7ed3\u6784\u548c\u6a21\u5757\u7ed3\u6784\u76f8\u5bf9\u5e94\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u540d\u4e3a <code>my_module</code> \u7684\u6a21\u5757\u901a\u5e38\u5b58\u50a8\u5728\u4e00\u4e2a\u540d\u4e3a <code>my_module.rs</code> \u7684\u6587\u4ef6\u4e2d\u3002</li> </ol> <pre><code>project/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.rs\n\u2502   \u251c\u2500\u2500 my_module.rs\n\u2502   \u2514\u2500\u2500 other_module.rs\n</code></pre> <ol> <li> <p>\u6a21\u5757\u7684\u53ef\u89c1\u6027\uff1a \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6a21\u5757\u5185\u7684\u9879\u5bf9\u5916\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u9664\u975e\u5b83\u4eec\u88ab\u6807\u8bb0\u4e3a <code>pub</code>\u3002\u8fd9\u6709\u52a9\u4e8e\u5c01\u88c5\u4ee3\u7801\uff0c\u53ea\u6709\u516c\u5171\u63a5\u53e3\u5bf9\u5916\u53ef\u89c1\uff0c\u5185\u90e8\u5b9e\u73b0\u7ec6\u8282\u88ab\u9690\u85cf\u3002</p> </li> <li> <p>\u6a21\u5757\u7684\u4f5c\u7528\u57df\uff1a Rust \u7684\u6a21\u5757\u7cfb\u7edf\u5177\u6709\u8bcd\u6cd5\u4f5c\u7528\u57df\u3002\u8fd9\u610f\u5473\u7740\u6a21\u5757\u548c\u9879\u7684\u53ef\u89c1\u6027\u662f\u901a\u8fc7\u5b83\u4eec\u5728\u4ee3\u7801\u4e2d\u7684\u4f4d\u7f6e\u6765\u786e\u5b9a\u7684\u3002\u4e00\u4e2a\u6a21\u5757\u53ef\u4ee5\u8bbf\u95ee\u5176\u7236\u6a21\u5757\u7684\u9879\uff0c\u4f46\u4e0d\u80fd\u8bbf\u95ee\u5176\u5b50\u6a21\u5757\u7684\u9879\uff0c\u9664\u975e\u5b83\u4eec\u88ab\u5bfc\u5165\u3002</p> </li> </ol> <p>\u6a21\u5757\u662f Rust \u8bed\u8a00\u4e2d\u7684\u4e00\u4e2a\u5173\u952e\u6982\u5ff5\uff0c\u5b83\u6709\u52a9\u4e8e\u6784\u5efa\u6a21\u5757\u5316\u3001\u53ef\u7ef4\u62a4\u548c\u53ef\u6269\u5c55\u7684\u4ee3\u7801\u7ed3\u6784\u3002\u901a\u8fc7\u5408\u7406\u4f7f\u7528\u6a21\u5757\uff0c\u53ef\u4ee5\u5c06\u4ee3\u7801\u5206\u89e3\u4e3a\u66f4\u5c0f\u7684\u3001\u53ef\u91cd\u7528\u7684\u5355\u5143\uff0c\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2011%20-%20%E6%A8%A1%E5%9D%97/#_1","title":"\u6848\u4f8b\uff1a\u8f6f\u4ef6\u5de5\u7a0b\uff1a\u7ec4\u7ec7\u91d1\u878d\u4ea7\u54c1\u6a21\u5757","text":"<p>\u5728\u91d1\u878d\u9886\u57df\uff0c\u4f7f\u7528 Rust \u7684\u6a21\u5757\u7cfb\u7edf\u53ef\u4ee5\u5f88\u597d\u5730\u7ec4\u7ec7\u548c\u7ba1\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\u548c\u8ba1\u7b97\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u6a21\u5757\u6765\u7ec4\u7ec7\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\u548c\u76f8\u5173\u8ba1\u7b97\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u51e0\u79cd\u91d1\u878d\u5de5\u5177\uff0c\u4f8b\u5982\u80a1\u7968(Stock)\u3001\u503a\u5238(Bond)\u548c\u671f\u6743(Option)\uff0c\u4ee5\u53ca\u4e00\u4e9b\u8ba1\u7b97\u51fd\u6570\uff0c\u5982\u8ba1\u7b97\u6536\u76ca\u3001\u98ce\u9669\u7b49\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6a21\u5757\u6765\u7ec4\u7ec7\u8fd9\u4e9b\u529f\u80fd\u3002</p> <p>\u9996\u5148\uff0c\u521b\u5efa\u4e00\u4e2a <code>financial_instruments</code> \u6a21\u5757\uff0c\u5176\u4e2d\u5305\u542b\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\u5b9a\u4e49\uff1a</p> <pre><code>// financial_instruments.rs\n\npub mod stock {\n    pub struct Stock {\n        // ...\n    }\n\n    impl Stock {\n        pub fn new() -&gt; Self {\n            // \u521d\u59cb\u5316\u80a1\u7968\n            Stock {\n                // ...\n            }\n        }\n\n        // \u5176\u4ed6\u80a1\u7968\u76f8\u5173\u65b9te x t\u6cd5\n    }\n}\n\npub mod bond {\n    pub struct Bond {\n        // ...\n    }\n\n    impl Bond {\n        pub fn new() -&gt; Self {\n            // \u521d\u59cb\u5316\u503a\u5238\n            Bond {\n                // ...\n            }\n        }\n\n        // \u5176\u4ed6\u503a\u5238\u76f8\u5173\u65b9\u6cd5\n    }\n}\n\npub mod option {\n    pub struct Option {\n        // ...\n    }\n\n    impl Option {\n        pub fn new() -&gt; Self {\n            // \u521d\u59cb\u5316\u671f\u6743\n            Option {\n                // ...\n            }\n        }\n\n        // \u5176\u4ed6\u671f\u6743\u76f8\u5173\u65b9\u6cd5\n    }\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u521b\u5efa\u4e00\u4e2a <code>calculations</code> \u6a21\u5757\uff0c\u5176\u4e2d\u5305\u542b\u4e0e\u91d1\u878d\u5de5\u5177\u76f8\u5173\u7684\u8ba1\u7b97\u51fd\u6570\uff1a</p> <pre><code>// calculations.rs\n\nuse crate::financial_instruments::{stock::Stock, bond::Bond, option::Option};\n\npub fn calculate_stock_return(stock: &amp;Stock) -&gt; f64 {\n    // \u8ba1\u7b97\u80a1\u7968\u7684\u6536\u76ca\n    // ...\n}\n\npub fn calculate_bond_return(bond: &amp;Bond) -&gt; f64 {\n    // \u8ba1\u7b97\u503a\u5238\u7684\u6536\u76ca\n    // ...\n}\n\npub fn calculate_option_risk(option: &amp;Option) -&gt; f64 {\n    // \u8ba1\u7b97\u671f\u6743\u7684\u98ce\u9669\n    // ...\n}\n</code></pre> <p>\u6700\u540e\uff0c\u5728\u4e3b\u7a0b\u5e8f\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5bfc\u5165\u6a21\u5757\u5e76\u4f7f\u7528\u5b9a\u4e49\u7684\u91d1\u878d\u5de5\u5177\u548c\u8ba1\u7b97\u51fd\u6570\uff1a</p> <pre><code>// main.rs\n\nmod financial_instruments;\nmod calculations;\n\nuse financial_instruments::{stock::Stock, bond::Bond, option::Option};\nuse calculations::{calculate_stock_return, calculate_bond_return, calculate_option_risk};\n\nfn main() {\n    let stock = Stock::new();\n    let bond = Bond::new();\n    let option = Option::new();\n\n    let stock_return = calculate_stock_return(&amp;stock);\n    let bond_return = calculate_bond_return(&amp;bond);\n    let option_risk = calculate_option_risk(&amp;option);\n\n    println!(\"Stock Return: {}\", stock_return);\n    println!(\"Bond Return: {}\", bond_return);\n    println!(\"Option Risk: {}\", option_risk);\n}\n</code></pre> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4f60\u53ef\u4ee5\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5de5\u5177\u548c\u76f8\u5173\u8ba1\u7b97\u51fd\u6570\u5c01\u88c5\u5728\u4e0d\u540c\u7684\u6a21\u5757\u4e2d\uff0c\u4f7f\u4ee3\u7801\u66f4\u6709\u7ed3\u6784\u548c\u7ec4\u7ec7\u6027\u3002\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\uff0c\u4f7f\u5f97\u5728\u91d1\u878d\u9886\u57df\u5f00\u53d1\u590d\u6742\u5e94\u7528\u7a0b\u5e8f\u66f4\u5bb9\u6613\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/","title":"Chapter 12 - Cargo \u7684\u8fdb\u9636\u4f7f\u7528","text":"<p>\u5728\u91d1\u878d\u9886\u57df\uff0c\u4f7f\u7528 Cargo \u7684\u8fdb\u9636\u529f\u80fd\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7ec4\u7ec7\u548c\u7ba1\u7406\u91d1\u878d\u8f6f\u4ef6\u9879\u76ee\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5173\u4e8e\u91d1\u878d\u9886\u57df\u4e2d\u4f7f\u7528 Cargo \u8fdb\u9636\u529f\u80fd\u7684\u8be6\u7ec6\u53d9\u8ff0\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#121","title":"12.1 \u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c","text":"<p>\u91d1\u878d\u9886\u57df\u7684\u9879\u76ee\u901a\u5e38\u9700\u8981\u5904\u7406\u5927\u91cf\u6570\u636e\u548c\u8ba1\u7b97\u3002\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\u53ef\u4ee5\u7528\u4e8e\u6570\u636e\u9884\u5904\u7406\u3001\u6a21\u578b\u8bad\u7ec3\u3001\u98ce\u9669\u4f30\u7b97\u7b49\u4efb\u52a1\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u6784\u5efa\u811a\u672c\u81ea\u52a8\u4e0b\u8f7d\u91d1\u878d\u6570\u636e\u3001\u6267\u884c\u590d\u6742\u7684\u6570\u5b66\u8ba1\u7b97\u6216\u751f\u6210\u62a5\u544a\uff0c\u4ee5\u4fbf\u9879\u76ee\u6784\u5efa\u6d41\u7a0b\u66f4\u52a0\u81ea\u52a8\u5316\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#_1","title":"\u6848\u4f8b\uff1a \u81ea\u52a8\u4e0b\u8f7d\u91d1\u878d\u6570\u636e\u5e76\u6267\u884c\u8ba1\u7b97\u4efb\u52a1","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u5728\u91d1\u878d\u9886\u57df\u7684 Rust \u9879\u76ee\u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\u6765\u81ea\u52a8\u4e0b\u8f7d\u91d1\u878d\u6570\u636e\u5e76\u6267\u884c\u8ba1\u7b97\u4efb\u52a1\u3002\u5047\u8bbe\u4f60\u6b63\u5728\u5f00\u53d1\u4e00\u4e2a\u91d1\u878d\u5206\u6790\u5de5\u5177\uff0c\u9700\u8981\u4ece\u7279\u5b9a\u6570\u636e\u6e90\u83b7\u53d6\u5386\u53f2\u80a1\u7968\u4ef7\u683c\u5e76\u8ba1\u7b97\u5176\u6536\u76ca\u7387\u3002</p> <ol> <li>\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Rust \u9879\u76ee\u5e76\u5b9a\u4e49\u4f9d\u8d56\u5173\u7cfb\u3002</li> </ol> <p>\u9996\u5148\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Rust \u9879\u76ee\u5e76\u5728 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\u5b9a\u4e49\u6240\u9700\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5305\u62ec\u7528\u4e8e HTTP \u8bf7\u6c42\u548c\u6570\u636e\u5904\u7406\u7684\u5e93\uff0c\u4f8b\u5982 <code>reqwest</code> \u548c <code>serde</code>\u3002</p> <pre><code>[package]\nname = \"financial_analysis\"\nversion = \"0.1.0\"\nedition = \"2018\"\n\n[dependencies]\nreqwest = \"0.11\"\nserde = { version = \"1\", features = [\"derive\"] }\n</code></pre> <ol> <li>\u521b\u5efa\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\u3002</li> </ol> <p>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>build.rs</code> \u7684\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\u6587\u4ef6\u3002\u8fd9\u4e2a\u811a\u672c\u5c06\u5728\u9879\u76ee\u6784\u5efa\u524d\u6267\u884c\u3002</p> <pre><code>// build.rs\n\nfn main() {\n    // \u4f7f\u7528 reqwest \u5e93\u4ece\u6570\u636e\u6e90\u4e0b\u8f7d\u5386\u53f2\u80a1\u7968\u4ef7\u683c\u6570\u636e\n    // \u8fd9\u91cc\u53ea\u662f\u793a\u4f8b\uff0c\u5b9e\u9645\u4e0a\u9700\u8981\u6307\u5b9a\u6b63\u786e\u7684\u6570\u636e\u6e90\u548c URL\n    let data_source_url = \"https://example.com/financial_data.csv\";\n    let response = reqwest::blocking::get(data_source_url);\n\n    match response {\n        Ok(response) =&gt; {\n            if response.status().is_success() {\n                // \u4e0b\u8f7d\u6210\u529f\uff0c\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u6587\u4ef6\u6216\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\n                println!(\"Downloaded financial data successfully.\");\n                // \u5728\u6b64\u5904\u6dfb\u52a0\u6570\u636e\u5904\u7406\u548c\u8ba1\u7b97\u903b\u8f91\n            } else {\n                println!(\"Failed to download financial data.\");\n            }\n        }\n        Err(err) =&gt; {\n            println!(\"Error downloading financial data: {:?}\", err);\n        }\n    }\n}\n</code></pre> <ol> <li>\u7f16\u5199\u6570\u636e\u5904\u7406\u548c\u8ba1\u7b97\u903b\u8f91\u3002</li> </ol> <p>\u5728\u6784\u5efa\u811a\u672c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>reqwest</code> \u5e93\u4ece\u6570\u636e\u6e90\u4e0b\u8f7d\u4e86\u5386\u53f2\u80a1\u7968\u4ef7\u683c\u6570\u636e\uff0c\u5e76\u4e14\u5728\u6210\u529f\u4e0b\u8f7d\u540e\uff0c\u53ef\u4ee5\u5728\u6784\u5efa\u811a\u672c\u4e2d\u6267\u884c\u8fdb\u4e00\u6b65\u7684\u6570\u636e\u5904\u7406\u548c\u8ba1\u7b97\u903b\u8f91\u3002\u8fd9\u4e9b\u903b\u8f91\u53ef\u4ee5\u5305\u62ec\u89e3\u6790\u6570\u636e\u3001\u8ba1\u7b97\u6536\u76ca\u7387\u3001\u751f\u6210\u62a5\u544a\u7b49\u3002</p> <ol> <li>\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u6570\u636e\u3002</li> </ol> <p>\u5728\u9879\u76ee\u7684\u5176\u4ed6\u90e8\u5206(\u4f8b\u5982\uff0c\u4e3b\u7a0b\u5e8f\u6216\u5e93\u6a21\u5757)\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5df2\u7ecf\u4e0b\u8f7d\u5e76\u5904\u7406\u8fc7\u7684\u6570\u636e\u6765\u6267\u884c\u91d1\u878d\u5206\u6790\u548c\u8ba1\u7b97\u4efb\u52a1\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\u6765\u81ea\u52a8\u4e0b\u8f7d\u91d1\u878d\u6570\u636e\u5e76\u6267\u884c\u8ba1\u7b97\u4efb\u52a1\uff0c\u4ece\u800c\u5b9e\u73b0\u9879\u76ee\u6784\u5efa\u6d41\u7a0b\u7684\u81ea\u52a8\u5316\u3002\u8fd9\u5bf9\u4e8e\u91d1\u878d\u9886\u57df\u7684\u9879\u76ee\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u901a\u5e38\u9700\u8981\u5904\u7406\u5927\u91cf\u6570\u636e\u548c\u590d\u6742\u7684\u8ba1\u7b97\u3002\u8bf7\u6ce8\u610f\uff0c\u5b9e\u9645\u6570\u636e\u6e90\u548c\u8ba1\u7b97\u903b\u8f91\u53ef\u80fd\u4f1a\u6839\u636e\u9879\u76ee\u7684\u9700\u6c42\u6709\u6240\u4e0d\u540c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#_2","title":"\u6ce8\u610f\uff1a\u81ea\u52a8\u6784\u5efa\u811a\u672c\u8fd0\u884c\u7684\u524d\u7f6e\u6761\u4ef6","text":"<p>\u5bf9\u4e8e Cargo \u6784\u5efa\u8fc7\u7a0b\uff0c\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c <code>build.rs</code> \u4e0d\u4f1a\u5728 <code>cargo build</code> \u65f6\u81ea\u52a8\u6267\u884c\u3002\u5b83\u4e3b\u8981\u7528\u4e8e\u5728\u6784\u5efa\u9879\u76ee\u4e4b\u524d\u6267\u884c\u4e00\u4e9b\u9884\u5904\u7406\u6216\u7279\u5b9a\u4efb\u52a1\u3002</p> <p>\u8981\u8fd0\u884c\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\uff0c\u5148\u8981\u5207\u6362\u5230nightly\u7248\u672c\uff0c\u7136\u540e\u8981\u6253\u5f00<code>-Z unstable-options</code>\u9009\u9879\uff0c\u7136\u540e\u624d\u53ef\u4ee5\u4f7f\u7528 <code>cargo build</code> \u547d\u4ee4\u7684 <code>--build-plan</code> \u9009\u9879\uff0c\u8be5\u9009\u9879\u4f1a\u663e\u793a\u6784\u5efa\u8ba1\u5212\uff0c\u5305\u62ec\u6784\u5efa\u811a\u672c\u7684\u6267\u884c\u3002\u4f8b\u5982\uff1a</p> <pre><code>cargo build --build-plan\n</code></pre> <p>\u8fd9\u5c06\u663e\u793a\u6784\u5efa\u8ba1\u5212\uff0c\u5305\u62ec\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u6267\u884c\u7684\u6b65\u9aa4\uff0c\u5176\u4e2d\u5305\u62ec\u6267\u884c <code>build.rs</code> \u811a\u672c\u3002</p> <p>\u5982\u679c\u9700\u8981\u5728\u6bcf\u6b21\u6784\u5efa\u9879\u76ee\u65f6\u90fd\u6267\u884c\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u5c06\u5176\u6dfb\u52a0\u5230\u6784\u5efa\u7684\u524d\u7f6e\u6b65\u9aa4\uff0c\u4f8b\u5982\u5728\u6784\u5efa\u811a\u672c\u4e2d\u8c03\u7528 <code>cargo build</code> \u547d\u4ee4\u524d\u6267\u884c\u4f60\u7684\u81ea\u5b9a\u4e49\u4efb\u52a1\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5728 <code>build.rs</code> \u4e2d\u4f7f\u7528 Rust \u7684 <code>std::process::Command</code> \u6765\u5b9e\u73b0\u3002</p> <pre><code>// build.rs\n\nfn main() {\n    // \u5728\u6267\u884c cargo build \u4e4b\u524d\u6267\u884c\u81ea\u5b9a\u4e49\u4efb\u52a1\n    let status = std::process::Command::new(\"cargo\")\n        .arg(\"build\")\n        .status()\n        .expect(\"Failed to run cargo build\");\n\n    if status.success() {\n        println!(\"Custom build script completed successfully.\");\n    } else {\n        println!(\"Custom build script failed.\");\n    }\n}\n</code></pre> <p>\u8fd9\u6837\uff0c\u5728\u8fd0\u884c <code>cargo build</code> \u65f6\uff0c\u81ea\u5b9a\u4e49\u6784\u5efa\u811a\u672c\u4f1a\u5728\u6784\u5efa\u4e4b\u524d\u6267\u884c\u4f60\u7684\u81ea\u5b9a\u4e49\u4efb\u52a1\uff0c\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u4efb\u52a1\u7684\u6210\u529f\u6216\u5931\u8d25\u72b6\u6001\u91c7\u53d6\u8fdb\u4e00\u6b65\u7684\u64cd\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#122-cargo","title":"12.2 \u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4","text":"<p>\u5728\u91d1\u878d\u9886\u57df\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u6267\u884c\u7279\u5b9a\u7684\u5206\u6790\u6216\u98ce\u9669\u8bc4\u4f30\uff0c\u8fd9\u4e9b\u4efb\u52a1\u53ef\u4ee5\u4f5c\u4e3a\u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4\u5b9e\u73b0\u3002\u4f60\u53ef\u4ee5\u521b\u5efa Cargo \u5b50\u547d\u4ee4\u6765\u6267\u884c\u7edf\u8ba1\u5206\u6790\u3001\u8499\u7279\u5361\u6d1b\u6a21\u62df\u3001\u91d1\u878d\u6a21\u578b\u8bc4\u4f30\u7b49\u4efb\u52a1\uff0c\u4ee5\u4fbf\u66f4\u65b9\u4fbf\u5730\u5728\u4e0d\u540c\u9879\u76ee\u4e2d\u91cd\u590d\u4f7f\u7528\u8fd9\u4e9b\u529f\u80fd\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#_3","title":"\u6848\u4f8b\uff1a \u8499\u7279\u5361\u6d1b\u6a21\u62df","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u5728\u91d1\u878d\u9886\u57df\u7684 Rust \u9879\u76ee\u4e2d\u521b\u5efa\u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4\u6765\u6267\u884c\u8499\u7279\u5361\u6d1b\u6a21\u62df\uff0c\u4ee5\u8bc4\u4f30\u6295\u8d44\u7ec4\u5408\u7684\u98ce\u9669\u3002</p> <ol> <li>\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Rust \u9879\u76ee\u5e76\u5b9a\u4e49\u4f9d\u8d56\u5173\u7cfb\u3002</li> </ol> <p>\u9996\u5148\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Rust \u9879\u76ee\u5e76\u5728 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\u5b9a\u4e49\u6240\u9700\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 <code>rand</code> \u5e93\u6765\u751f\u6210\u968f\u673a\u6570\uff0c\u4ee5\u8fdb\u884c\u8499\u7279\u5361\u6d1b\u6a21\u62df\u3002</p> <pre><code>[package]\nname = \"portfolio_simulation\"\nversion = \"0.1.0\"\nedition = \"2018\"\n\n[dependencies]\nrand = \"0.8\"\n</code></pre> <ol> <li>\u521b\u5efa\u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4\u3002</li> </ol> <p>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>src/bin</code> \u7684\u76ee\u5f55\uff0c\u5e76\u5728\u5176\u4e2d\u521b\u5efa\u4e00\u4e2a Rust \u6587\u4ef6\uff0c\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>monte_carlo.rs</code> \u7684\u6587\u4ef6\u3002</p> <pre><code>// src/bin/monte_carlo.rs\nuse rand::Rng;\nuse std::env;\n\nfn main() {\n    let args: Vec&lt;String&gt; = env::args().collect();\n\n    if args.len() != 2 {\n        eprintln!(\"Usage: cargo run --bin monte_carlo &lt;num_simulations&gt;\");\n        std::process::exit(1);\n    }\n\n    let num_simulations: usize = args[1].parse().expect(\"Invalid number of simulations\");\n\n    let portfolio_value = 1000000.0; // \u521d\u59cb\u6295\u8d44\u7ec4\u5408\u4ef7\u503c\n    let expected_return = 0.08; // \u5e74\u5316\u9884\u671f\u6536\u76ca\u7387\n    let risk = 0.15; // \u5e74\u5316\u98ce\u9669(\u6807\u51c6\u5dee)\n\n    let mut rng = rand::thread_rng();\n    let mut total_returns = Vec::new();\n\n    for _ in 0..num_simulations {\n        // \u4f7f\u7528\u8499\u7279\u5361\u6d1b\u6a21\u62df\u751f\u6210\u6295\u8d44\u7ec4\u5408\u7684\u672a\u6765\u6536\u76ca\u7387\n        let random_return = rng.gen_range(-risk, risk);\n        let portfolio_return = expected_return + random_return;\n        let new_portfolio_value = portfolio_value * (1.0 + portfolio_return);\n        total_returns.push(new_portfolio_value);\n    }\n\n    // \u5728\u8fd9\u91cc\u6267\u884c\u98ce\u9669\u8bc4\u4f30\u3001\u751f\u6210\u62a5\u544a\u6216\u5176\u4ed6\u5206\u6790\u4efb\u52a1\n    let average_return: f64 = total_returns.iter().sum::&lt;f64&gt;() / num_simulations as f64;\n    println!(\"Average Portfolio Return: {:.2}%\", (average_return - 1.0) * 100.0);\n}\n</code></pre> <ol> <li>\u6ce8\u518c\u81ea\u5b9a\u4e49\u5b50\u547d\u4ee4\u3002</li> </ol> <p>\u8981\u5728 Cargo \u9879\u76ee\u4e2d\u6ce8\u518c\u81ea\u5b9a\u4e49\u5b50\u547d\u4ee4\uff0c\u9700\u8981\u5728\u9879\u76ee\u7684 <code>Cargo.toml</code> \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u90e8\u5206\uff1a</p> <pre><code>[[bin]]\nname = \"monte_carlo\"\npath = \"src/bin/monte_carlo.rs\"\n</code></pre> <p>\u8fd9\u5c06\u544a\u8bc9 Cargo \u5173\u8054 <code>monte_carlo.rs</code> \u6587\u4ef6\u4f5c\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u5b50\u547d\u4ee4\u3002</p> <ol> <li>\u8fd0\u884c\u81ea\u5b9a\u4e49\u5b50\u547d\u4ee4\u3002</li> </ol> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u8fd0\u884c\u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4\u5e76\u6267\u884c\u8499\u7279\u5361\u6d1b\u6a21\u62df\uff1a</p> <pre><code>cargo run --bin monte_carlo &lt;num_simulations&gt;\n</code></pre> <p>\u5176\u4e2d <code>&lt;num_simulations&gt;</code> \u662f\u6a21\u62df\u7684\u6b21\u6570\u3002\u5b50\u547d\u4ee4\u5c06\u6a21\u62df\u6295\u8d44\u7ec4\u5408\u7684\u591a\u6b21\u6536\u76ca\uff0c\u5e76\u8ba1\u7b97\u5e73\u5747\u6536\u76ca\u7387\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6a21\u62df\u4e2d\u6dfb\u52a0\u66f4\u591a\u53c2\u6570\u548c\u590d\u6742\u7684\u91d1\u878d\u6a21\u578b\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u521b\u5efa\u81ea\u5b9a\u4e49 Cargo \u5b50\u547d\u4ee4\u6765\u6267\u884c\u91d1\u878d\u9886\u57df\u7684\u8499\u7279\u5361\u6d1b\u6a21\u62df\u4efb\u52a1\u3002\u8fd9\u4f7f\u6211\u4eec\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5730\u5728\u4e0d\u540c\u9879\u76ee\u4e2d\u91cd\u590d\u4f7f\u7528\u8fd9\u4e9b\u5206\u6790\u529f\u80fd\uff0c\u4ee5\u8bc4\u4f30\u6295\u8d44\u7ec4\u5408\u7684\u98ce\u9669\u548c\u6536\u76ca\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#cargoshell","title":"\u8865\u5145\u5b66\u4e60\uff1a\u4e3acargo\u7684\u5b50\u547d\u4ee4\u521b\u9020shell\u522b\u540d","text":"<p>\u8981\u5728 Linux \u4e0a\u4e3a <code>cargo run --bin monte_carlo &lt;num_simulations&gt;</code> \u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u522b\u540d <code>monte_carlo</code>\uff0c\u53ef\u4ee5\u4f7f\u7528 shell \u7684\u522b\u540d\u673a\u5236\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4f7f\u7528\u7684 shell(\u4f8b\u5982\uff0cbash\u3001zsh\u3001fish \u7b49)\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528 bash shell \u7684\u65b9\u5f0f\uff1a</p> <ol> <li> <p>\u6253\u5f00\u6211\u4eec\u7684\u7ec8\u7aef\u3002</p> </li> <li> <p>\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668(\u5982 <code>nano</code> \u6216 <code>vim</code>)\u6253\u5f00\u6211\u4eec\u7684 shell \u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u5e38\u662f <code>~/.bashrc</code> \u6216 <code>~/.bash_aliases</code>\u3002\u4f8b\u5982\uff1a</p> </li> </ol> <pre><code>nano ~/.bashrc\n</code></pre> <ol> <li>\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u672b\u5c3e\u6dfb\u52a0\u4ee5\u4e0b\u884c\uff1a</li> </ol> <pre><code>alias monte_carlo='cargo run --bin monte_carlo'\n</code></pre> <p>\u8fd9\u5c06\u521b\u5efa\u540d\u4e3a <code>monte_carlo</code> \u7684\u522b\u540d\uff0c\u5b83\u4f1a\u81ea\u52a8\u5c55\u5f00\u4e3a <code>cargo run --bin monte_carlo</code> \u547d\u4ee4\u3002</p> <ol> <li> <p>\u4fdd\u5b58\u5e76\u5173\u95ed\u914d\u7f6e\u6587\u4ef6\u3002</p> </li> <li> <p>\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4f7f\u914d\u7f6e\u6587\u4ef6\u751f\u6548\uff1a</p> </li> </ol> <pre><code>source ~/.bashrc\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528\u7684\u662f <code>~/.bash_aliases</code> \u6216\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6\uff0c\u8bf7\u76f8\u5e94\u5730\u4f7f\u7528 <code>source</code> \u547d\u4ee4\u3002</p> <ol> <li>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 <code>monte_carlo</code> \u547d\u4ee4\uff0c\u540e\u9762\u52a0\u4e0a\u6a21\u62df\u7684\u6b21\u6570\uff0c\u4f8b\u5982\uff1a</li> </ol> <pre><code>monte_carlo 1000\n</code></pre> <p>\u8fd9\u5c06\u6267\u884c\u6211\u4eec\u7684 Cargo \u5b50\u547d\u4ee4\u5e76\u8fdb\u884c\u8499\u7279\u5361\u6d1b\u6a21\u62df\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u522b\u540d\u4ec5\u5728\u5f53\u524d shell \u4f1a\u8bdd\u4e2d\u6709\u6548\u3002\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5728\u6bcf\u6b21\u542f\u52a8\u7ec8\u7aef\u65f6\u90fd\u4f7f\u7528\u8fd9\u4e2a\u522b\u540d\uff0c\u53ef\u4ee5\u5c06\u5b83\u6dfb\u52a0\u5230\u6211\u4eec\u7684 shell \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2012%20-%20Cargo%20%E7%9A%84%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8/#123","title":"12.3 \u5de5\u4f5c\u7a7a\u95f4","text":"<p>\u91d1\u878d\u8f6f\u4ef6\u901a\u5e38\u7531\u591a\u4e2a\u76f8\u5173\u4f46\u72ec\u7acb\u7684\u6a21\u5757\u7ec4\u6210\uff0c\u5982\u98ce\u9669\u5206\u6790\u3001\u6295\u8d44\u7ec4\u5408\u4f18\u5316\u3001\u6570\u636e\u53ef\u89c6\u5316\u7b49\u3002\u4f7f\u7528 Cargo \u7684\u5de5\u4f5c\u7a7a\u95f4\u529f\u80fd\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u6a21\u5757\u7ec4\u7ec7\u5230\u4e00\u4e2a\u96c6\u6210\u7684\u9879\u76ee\u4e2d\u3002\u5de5\u4f5c\u7a7a\u95f4\u5141\u8bb8\u4f60\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u73af\u5883\u4e2d\u7ba1\u7406\u548c\u5171\u4eab\u4ee3\u7801\uff0c\u4f7f\u5f97\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u66f4\u52a0\u9ad8\u6548\u3002</p> <p>\u786e\u5b9e\uff0cCargo\u7684\u5de5\u4f5c\u7a7a\u95f4\u529f\u80fd\u53ef\u4ee5\u4f7fRust\u9879\u76ee\u7684\u7ec4\u7ec7\u548c\u7ba1\u7406\u66f4\u52a0\u9ad8\u6548\u3002\u7279\u522b\u662f\u5728\u5f00\u53d1\u91d1\u878d\u8f6f\u4ef6\u8fd9\u6837\u9700\u8981\u591a\u4e2a\u72ec\u7acb\u4f46\u76f8\u4e92\u5173\u8054\u7684\u6a21\u5757\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u529f\u80fd\u975e\u5e38\u6709\u7528\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6b63\u5728\u5f00\u53d1\u4e00\u4e2a\u540d\u4e3a\"FinancialApp\"\u7684\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\uff0c\u8fd9\u4e2a\u7a0b\u5e8f\u5305\u542b\u4e09\u4e2a\u4e3b\u8981\u6a21\u5757\uff1a\u98ce\u9669\u5206\u6790\u3001\u6295\u8d44\u7ec4\u5408\u4f18\u5316\u548c\u6570\u636e\u53ef\u89c6\u5316\u3002\u6bcf\u4e2a\u6a21\u5757\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u5e93\u6216\u8005\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u8fdb\u884c\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002</p> <ol> <li>\u9996\u5148\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Cargo\u5de5\u4f5c\u7a7a\u95f4\uff0c\u547d\u540d\u4e3a\"FinancialApp\"\u3002</li> </ol> <pre><code>$ cargo new --workspace FinancialApp\n</code></pre> <ol> <li>\u63a5\u7740\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u6a21\u5757\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5e93\u6216\u4e8c\u8fdb\u5236\u9879\u76ee\u3002\u9996\u5148\u521b\u5efa\"risk_analysis\"\u5e93\uff1a</li> </ol> <pre><code>$ cargo new --lib risk_analysis\n</code></pre> <p>\u7136\u540e\u5c06\"risk_analysis\"\u5e93\u52a0\u5165\u5230\u5de5\u4f5c\u7a7a\u95f4\u4e2d\uff1a</p> <pre><code>$ cargo workspace add risk_analysis\n</code></pre> <p>\u7528\u540c\u6837\u7684\u65b9\u5f0f\u521b\u5efa\"portfolio_optimization\"\u548c\"data_visualization\"\u4e24\u4e2a\u5e93\uff0c\u5e76\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u3002</p> <ol> <li>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5728\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5f00\u53d1\u548c\u6d4b\u8bd5\u6bcf\u4e2a\u6a21\u5757\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u5165\"risk_analysis\"\u76ee\u5f55\u5e76\u8fd0\u884c\u6d4b\u8bd5\uff1a</li> </ol> <pre><code>$ cd risk_analysis  \n$ cargo test\n</code></pre> <ol> <li>\u5f53\u6240\u6709\u7684\u6a21\u5757\u90fd\u5f00\u53d1\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4eec\u6574\u5408\u5230\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u3002\u5728\u5de5\u4f5c\u7a7a\u95f4\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e8c\u8fdb\u5236\u9879\u76ee\uff1a</li> </ol> <pre><code>$ cargo new --bin financial_app\n</code></pre> <p>\u7136\u540e\u5728\"financial_app\"\u7684Cargo.toml\u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0\u5bf9\"risk_analysis\"\u3001\"portfolio_optimization\"\u548c\"data_visualization\"\u7684\u4f9d\u8d56\uff1a</p> <pre><code>[dependencies]  \nrisk_analysis = { path = \"../risk_analysis\" }  \nportfolio_optimization = { path = \"../portfolio_optimization\" }  \ndata_visualization = { path = \"../data_visualization\" }\n</code></pre> <p>\u73b0\u5728\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\"financial_app\"\u7684\u4e3b\u51fd\u6570\u4e2d\u8c03\u7528\u8fd9\u4e9b\u6a21\u5757\u7684\u51fd\u6570\u548c\u670d\u52a1\uff0c\u5f62\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u3002</p> <ol> <li>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u8bd1\u548c\u8fd0\u884c\u8fd9\u4e2a\u5b8c\u6574\u7684\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\uff1a</li> </ol> <pre><code>$ cd ..  \n$ cargo run --bin financial_app\n</code></pre> <p>\u8fd9\u5c31\u662f\u4f7f\u7528Cargo\u5de5\u4f5c\u7a7a\u95f4\u529f\u80fd\u7ec4\u7ec7\u548c\u7ba1\u7406\u91d1\u878d\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u4e2a\u7b80\u5355\u6848\u4f8b\u3002\u901a\u8fc7\u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5404\u4e2a\u6a21\u5757\u6574\u5408\u5230\u4e00\u4e2a\u7edf\u4e00\u7684\u9879\u76ee\u4e2d\uff0c\u5171\u4eab\u4ee3\u7801\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/","title":"Chapter 13 - \u5c5e\u6027(Attributes)","text":"<p>\u5c5e\u6027(Attributes)\u5728 Rust \u4e2d\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8bed\u6cd5\uff0c\u5b83\u4eec\u53ef\u4ee5\u63d0\u4f9b\u5173\u4e8e\u4ee3\u7801\u5757\u3001\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u7b49\u5143\u7d20\u7684\u9644\u52a0\u4fe1\u606f\u3002Rust \u7f16\u8bd1\u5668\u4f1a\u4f7f\u7528\u8fd9\u4e9b\u4fe1\u606f\u6765\u66f4\u597d\u5730\u7406\u89e3\u3001\u5904\u7406\u4ee3\u7801\u3002</p> <p>\u5c5e\u6027\u6709\u4e24\u79cd\u4e3b\u8981\u5f62\u5f0f\uff1a**\u5185\u90e8\u5c5e\u6027**\u548c\u5916\u90e8\u5c5e\u6027\u3002\u5185\u90e8\u5c5e\u6027(Inner Attributes)\u7528\u4e8e\u8bbe\u7f6e crate \u7ea7\u522b\u7684\u5143\u6570\u636e\uff0c\u4f8b\u5982 crate \u540d\u79f0\u3001\u7248\u672c\u548c\u7c7b\u578b\u7b49\u3002\u800c\u5916\u90e8\u5c5e\u6027(Outer Attributes)\u5219\u5e94\u7528\u4e8e\u6a21\u5757\u3001\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u7b49\uff0c\u7528\u4e8e\u8bbe\u7f6e\u7f16\u8bd1\u6761\u4ef6\u3001\u7981\u7528 lint\u3001\u542f\u7528\u7f16\u8bd1\u5668\u7279\u6027\u7b49\u3002</p> <p>\u4e4b\u524d\u6211\u4eec\u5df2\u7ecf\u53cd\u590d\u63a5\u89e6\u8fc7\u4e86\u5c5e\u6027\u5e94\u7528\u7684\u4e00\u4e2a\u57fa\u672c\u4f8b\u5b50\uff1a</p> <pre><code>#[derive(Debug)]  \nstruct Person {  \n    name: String,  \n    age: u32,  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>#[derive(Debug)]</code> \u662f\u4e00\u4e2a\u5c5e\u6027\uff0c\u5b83\u544a\u8bc9 Rust \u7f16\u8bd1\u5668\u81ea\u52a8\u4e3a <code>Person</code> \u7ed3\u6784\u4f53\u5b9e\u73b0 <code>Debug</code> trait\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u6253\u5370\u51fa\u8be5\u7ed3\u6784\u4f53\u7684\u8c03\u8bd5\u4fe1\u606f\u3002</p> <p>\u4e0b\u9762\u662f\u51e0\u4e2a\u5e38\u7528\u5c5e\u6027\u7684\u5177\u4f53\u8bf4\u660e\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#131","title":"13.1 \u6761\u4ef6\u7f16\u8bd1","text":"<p><code>#[cfg(...)]</code>\u3002\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u6839\u636e\u7279\u5b9a\u7684\u7f16\u8bd1\u6761\u4ef6\u6765\u51b3\u5b9a\u662f\u5426\u7f16\u8bd1\u67d0\u6bb5\u4ee3\u7801\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#1311","title":"13.1.1 \u5728\u7279\u5b9a\u64cd\u4f5c\u7cfb\u7edf\u6267\u884c\u4e0d\u540c\u4ee3\u7801","text":"<p>\u4f60\u53ef\u80fd\u60f3\u5728\u53ea\u6709\u5728\u7279\u5b9a\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u624d\u7f16\u8bd1\u67d0\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>#[cfg(target_os = \"linux\")]  //\u7f16\u8bd1\u65f6\u4f1a\u68c0\u67e5\u4ee3\u7801\u4e2d\u7684 #[cfg(target_os = \"linux\")] \u5c5e\u6027\nfn on_linux() {  \n    println!(\"This code is compiled on Linux only.\");  \n}  \n\n#[cfg(target_os = \"windows\")]  //\u7f16\u8bd1\u65f6\u4f1a\u68c0\u67e5\u4ee3\u7801\u4e2d\u7684 #[cfg(target_os = \"windows\")] \u5c5e\u6027\nfn on_windows() {  \n    println!(\"This code is compiled on Windows only.\");  \n}  \n\nfn main() {  \n    on_linux();  \n    on_windows();  \n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c<code>on_linux</code>\u51fd\u6570\u53ea\u5728\u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\u662fLinux\u65f6\u88ab\u7f16\u8bd1\uff0c\u800c<code>on_windows</code>\u51fd\u6570\u53ea\u5728\u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\u662fWindows\u65f6\u88ab\u7f16\u8bd1\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5728<code>cfg</code>\u5c5e\u6027\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u6761\u4ef6\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#1312","title":"13.1.2 \u6761\u4ef6\u7f16\u8bd1\u6d4b\u8bd5","text":"<p><code>#[cfg(test)]</code> \u901a\u5e38\u5c5e\u6027\u7528\u4e8e\u6761\u4ef6\u7f16\u8bd1\uff0c\u5c06\u6d4b\u8bd5\u4ee3\u7801\u9650\u5b9a\u5728\u6d4b\u8bd5\u73af\u5883(<code>cargo test</code>)\u4e2d\u3002</p> <p>\u5f53\u4f60\u7684 Rust \u6e90\u4ee3\u7801\u4e2d\u5305\u542b <code>#[cfg(test)]</code> \u65f6\uff0c\u8fd9\u4e9b\u4ee3\u7801\u5c06\u4ec5\u5728\u8fd0\u884c\u6d4b\u8bd5\u65f6\u7f16\u8bd1\u548c\u6267\u884c\u3002**\u5728\u6b63\u5e38\u6784\u5efa\u65f6\uff0c\u8fd9\u4e9b\u4ee3\u7801\u4f1a\u88ab\u6392\u9664\u5728\u5916\u3002**\u6240\u4ee5\u4e00\u822c\u7528\u4e8e\u7f16\u5199\u6d4b\u8bd5\u76f8\u5173\u7684\u8f85\u52a9\u51fd\u6570\u6216\u6d4b\u8bd5\u6a21\u62df\u3002</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>rustCopy code#[cfg(test)]\nmod tests {\n    // \u6b64\u6a21\u5757\u4e2d\u7684\u4ee3\u7801\u4ec5\u5728\u6d4b\u8bd5\u65f6\u7f16\u8bd1\u548c\u6267\u884c\n    #[test]\n    fn test_addition() {\n        assert_eq!(2 + 2, 4);\n    }\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#132-lint","title":"13.2 \u7981\u7528 lint","text":"<p><code>#[allow(...)]</code> \u6216 <code>#[deny(...)]</code>\u3002\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u7981\u7528\u6216\u542f\u7528\u7279\u5b9a\u7684\u7f16\u8bd1\u5668\u8b66\u544a\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u4f1a\u5141\u8bb8\u4e00\u4e2a\u88ab\u8ba4\u4e3a\u662f\u4e0d\u5b89\u5168\u7684\u4ee3\u7801\u6a21\u5f0f\uff0c\u56e0\u4e3a\u4f60\u7684\u56e2\u961f\u548c\u4f60\u672c\u4eba\u90fd\u786e\u5b9a\u4f60\u7684\u4ee3\u7801\u662f\u5b89\u5168\u7684\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#1321","title":"13.2.1 \u5141\u8bb8\u53ef\u53d8\u5f15\u7528\u8f6c\u53d8\u4e3a\u4e0d\u53ef\u53d8","text":"<pre><code>#[allow(clippy::mut_from_ref)]  \nfn main() {  \n    let x = &amp;mut 42;  \n    let y = &amp;*x;  \n    **y += 1;  \n    println!(\"{}\", x); // \u8f93\u51fa 43  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>#[allow(clippy::mut_from_ref)]</code>\u5c5e\u6027\u5141\u8bb8\u4f7f\u7528<code>&amp;mut</code>\u5f15\u7528\u8f6c\u6362\u4e3a<code>&amp;</code>\u5f15\u7528\u7684\u4ee3\u7801\u6a21\u5f0f\u3002\u5982\u679c\u6ca1\u6709\u8be5\u5c5e\u6027\uff0c\u7f16\u8bd1\u5668\u4f1a\u53d1\u51fa\u8b66\u544a\uff0c\u56e0\u4e3a\u8fd9\u79cd\u4ee3\u7801\u6a21\u5f0f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u7684\u884c\u4e3a\u3002\u4f46\u662f\u5728\u8fd9\u4e2a\u7279\u5b9a\u7684\u4f8b\u5b50\u4e2d\uff0c\u4f60\u77e5\u9053\u4ee3\u7801\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u4f60\u6ca1\u6709\u5728\u4efb\u4f55\u5730\u65b9\u5bf9<code>y</code>\u8fdb\u884c\u518d\u6b21\u7684\u501f\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#1322-self","title":"13.2.2 \u5f3a\u5236\u7981\u6b62\u672a\u4f7f\u7528\u7684<code>self</code>\u53c2\u6570","text":"<p>\u53e6\u4e00\u65b9\u9762\uff0c<code>#[deny(...)]</code>\u5c5e\u6027\u53ef\u4ee5\u7528\u4e8e\u7981\u6b62\u7279\u5b9a\u7684\u8b66\u544a\u3002\u8fd9\u53ef\u4ee5\u7528\u4e8e\u5728\u56e2\u961f\u4e2d\u5f3a\u5236\u6267\u884c\u4e00\u4e9b\u7f16\u7801\u89c4\u5219\u6216\u5b89\u5168\u6027\u6807\u51c6\u3002\u4f8b\u5982\uff1a</p> <pre><code>#[deny(clippy::unused_self)]  \nfn main() {  \n    struct Foo;  \n    impl Foo {  \n        fn bar(&amp;self) {}  \n    }  \n    Foo.bar(); // \u8fd9\u5c06\u5f15\u53d1\u4e00\u4e2a\u7f16\u8bd1\u9519\u8bef\uff0c\u56e0\u4e3a`self`\u53c2\u6570\u672a\u4f7f\u7528  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>#[deny(clippy::unused_self)]</code>\u5c5e\u6027\u7981\u6b62\u4e86\u672a\u4f7f\u7528\u7684<code>self</code>\u53c2\u6570\u7684\u8b66\u544a\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u56e2\u961f\u6210\u5458\u5728\u4ed6\u4eec\u7684\u4ee3\u7801\u4e2d\u6ca1\u6709\u6b63\u786e\u5730\u4f7f\u7528<code>self</code>\u53c2\u6570\uff0c\u4ed6\u4eec\u5c06\u6536\u5230\u4e00\u4e2a\u7f16\u8bd1\u9519\u8bef\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u8b66\u544a\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u4fdd\u56e2\u961f\u9075\u5faa\u4e00\u81f4\u7684\u7f16\u7801\u5b9e\u8df5\uff0c\u5e76\u51cf\u5c11\u6f5c\u5728\u7684\u9519\u8bef\u6216\u5b89\u5168\u6f0f\u6d1e\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#1323","title":"13.2.3 \u5176\u4ed6\u5e38\u89c1 \u53ef\u7528\u5c5e\u6027","text":"<p>\u4e0b\u9762\u662f\u4e00\u4e9b\u5176\u4ed6\u5e38\u89c1\u7684<code>allow</code>\u548c<code>deny</code>\u9009\u9879\uff1a</p> <ol> <li><code>warnings</code>: \u5141\u8bb8\u6216\u7981\u6b62\u6240\u6709\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(warnings)]</code> \u6216 <code>#[deny(warnings)]</code></li> <li><code>unused_variables</code>: \u5141\u8bb8\u6216\u7981\u6b62\u672a\u4f7f\u7528\u53d8\u91cf\u7684\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(unused_variables)]</code> \u6216 <code>#[deny(unused_variables)]</code></li> <li><code>unused_mut</code>: \u5141\u8bb8\u6216\u7981\u6b62\u672a\u4f7f\u7528\u53ef\u53d8\u53d8\u91cf\u7684\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(unused_mut)]</code> \u6216 <code>#[deny(unused_mut)]</code></li> <li><code>unused_assignments</code>: \u5141\u8bb8\u6216\u7981\u6b62\u672a\u4f7f\u7528\u8d4b\u503c\u7684\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(unused_assignments)]</code> \u6216 <code>#[deny(unused_assignments)]</code></li> <li><code>dead_code</code>: \u5141\u8bb8\u6216\u7981\u6b62\u6b7b\u4ee3\u7801\u7684\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(dead_code)]</code> \u6216 <code>#[deny(dead_code)]</code></li> <li><code>unreachable_patterns</code>: \u5141\u8bb8\u6216\u7981\u6b62\u4e0d\u53ef\u8fbe\u6a21\u5f0f\u7684\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(unreachable_patterns)]</code> \u6216 <code>#[deny(unreachable_patterns)]</code></li> <li><code>clippy::all</code>: \u5141\u8bb8\u6216\u7981\u6b62\u6240\u6709Clippy lints\u7684\u8b66\u544a\u3002    \u793a\u4f8b\uff1a<code>#[allow(clippy::all)]</code> \u6216 <code>#[deny(clippy::all)]</code></li> <li><code>clippy::pedantic</code>: \u5141\u8bb8\u6216\u7981\u6b62\u6240\u6709Clippy lints\u7684\u8b66\u544a\uff0c\u5305\u62ec\u4e00\u4e9b\u53ef\u80fd\u8bef\u62a5\u7684\u60c5\u51b5\u3002    \u793a\u4f8b\uff1a<code>#[allow(clippy::pedantic)]</code> \u6216 <code>#[deny(clippy::pedantic)]</code></li> </ol> <p>\u8fd9\u4e9b\u9009\u9879\u53ea\u662f\u5176\u4e2d\u7684\u4e00\u90e8\u5206\uff0cRust\u7f16\u8bd1\u5668\u548cClippy\u5de5\u5177\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u8bb8\u591alint\u9009\u9879\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u9002\u5f53\u7684\u9009\u9879\u6765\u914d\u7f6e\u7f16\u8bd1\u5668\u7684\u8b66\u544a\u5904\u7406\u884c\u4e3a\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#_1","title":"\u8865\u5145\u5b66\u4e60\uff1a\u4e0d\u53ef\u8fbe\u6a21\u5f0f","text":"<p>'unreachable'\u5b8f\u662f\u7528\u6765\u6307\u793a\u7f16\u8bd1\u5668\u67d0\u6bb5\u4ee3\u7801\u662f\u4e0d\u53ef\u8fbe\u7684\u3002</p> <p>\u5f53\u7f16\u8bd1\u5668\u65e0\u6cd5\u786e\u5b9a\u67d0\u6bb5\u4ee3\u7801\u662f\u5426\u4e0d\u53ef\u8fbe\u65f6\uff0c\u8fd9\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c\u5728\u6a21\u5f0f\u5339\u914d\u8bed\u53e5\u4e2d\uff0c\u5982\u679c\u67d0\u4e2a\u5206\u652f\u7684\u6761\u4ef6\u6c38\u8fdc\u4e0d\u4f1a\u6ee1\u8db3\uff0c\u7f16\u8bd1\u5668\u5c31\u53ef\u80fd\u6807\u8bb0\u8fd9\u4e2a\u5206\u652f\u7684\u4ee3\u7801\u4e3a'unreachable'\u3002</p> <p>\u5982\u679c\u8fd9\u6bb5\u88ab\u6807\u8bb0\u4e3a'unreachable'\u7684\u4ee3\u7801\u5b9e\u9645\u4e0a\u80fd\u88ab\u6267\u884c\u5230\uff0c\u7a0b\u5e8f\u4f1a\u7acb\u5373panic\u5e76\u7ec8\u6b62\u3002\u6b64\u5916\uff0cRust\u8fd8\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u4e0d\u5b89\u5168\u51fd\u6570'unreachable_unchecked'\uff0c\u5373\u5982\u679c\u8fd9\u6bb5\u4ee3\u7801\u88ab\u6267\u884c\u5230\uff0c\u4f1a\u5bfc\u81f4\u672a\u5b9a\u4e49\u884c\u4e3a\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6b63\u5728\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\u6765\u5904\u7406\u80a1\u7968\u4ea4\u6613\u3002\u5728\u8fd9\u4e2a\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u8fd9\u6837\u7684\u60c5\u51b5\uff1a</p> <pre><code>fn process_order(order: &amp;Order) -&gt; Result&lt;(), Error&gt; {  \n    match order.get_type() {  \n        OrderType::Buy =&gt; {  \n            // \u6267\u884c\u8d2d\u4e70\u903b\u8f91...  \n            Ok(())  \n        },  \n        OrderType::Sell =&gt; {  \n            // \u6267\u884c\u5356\u51fa\u903b\u8f91...  \n            Ok(())  \n        },  \n        _ =&gt; unreachable!(\"Invalid order type\"),  \n    }  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u8ba2\u5355\u7c7b\u578b\u53ea\u80fd\u662f\u201c\u4e70\u5165\u201d\u6216\u201c\u5356\u51fa\u201d\u3002\u5982\u679c\u6709\u5176\u4ed6\u7684\u8ba2\u5355\u7c7b\u578b\uff0c\u6211\u4eec\u5c31\u7528 <code>unreachable!()</code> \u5b8f\u6765\u8868\u793a\u8fd9\u79cd\u60c5\u51b5\u662f\u4e0d\u5e94\u8be5\u53d1\u751f\u7684\u3002\u5982\u679c\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u6211\u4eec\u7684\u7a0b\u5e8f\u63a5\u6536\u5230\u4e86\u4e00\u4e2a\u6211\u4eec\u4e0d\u77e5\u9053\u7684\u8ba2\u5355\u7c7b\u578b\uff0c\u7a0b\u5e8f\u5c31\u4f1a\u7acb\u5373 panic\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u7acb\u5373\u53d1\u73b0\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u8ba9\u7a0b\u5e8f\u7ee7\u7eed\u6267\u884c\u5e76\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#133","title":"13.3 \u542f\u7528\u7f16\u8bd1\u5668\u7684\u7279\u6027","text":"<p>\u5728 Rust \u4e2d\uff0c<code>#[feature(...)]</code> \u5c5e\u6027\u7528\u4e8e\u542f\u7528\u7f16\u8bd1\u5668\u7684\u7279\u5b9a\u7279\u6027\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\u6848\u4f8b\uff0c\u5c55\u793a\u4e86\u4f7f\u7528 <code>#[feature(...)]</code> \u5c5e\u6027\u542f\u7528\u5168\u5c40\u5bfc\u5165(glob import)\u548c\u5b8f(macros)\u7684\u7279\u6027\uff1a</p> <pre><code>#![feature(glob_import, proc_macro_hygiene)]  \n\nuse std::collections::*; // \u5168\u5c40\u5bfc\u5165 std::collections \u6a21\u5757\u4e2d\u7684\u6240\u6709\u5185\u5bb9  \n\n#[macro_use]  \nextern crate my_macros; // \u542f\u7528\u5b8f\u7279\u6027\uff0c\u5e76\u5bfc\u5165\u5916\u90e8\u5b8f\u5e93 my_macros  \n\nfn main() {  \n    let mut map = HashMap::new(); // \u4f7f\u7528\u5168\u5c40\u5bfc\u5165\u7684 HashMap \u7c7b\u578b  \n    map.insert(\"key\", \"value\");  \n    println!(\"{:?}\", map);  \n\n    my_macro!(\"Hello, world!\"); // \u4f7f\u7528\u5916\u90e8\u5b8f\u5e93 my_macros \u4e2d\u7684\u5b8f my_macro!  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>#![feature(glob_import, proc_macro_hygiene)]</code> \u5c5e\u6027\u542f\u7528\u4e86\u5168\u5c40\u5bfc\u5165\u548c\u5b8f\u7684\u7279\u6027\u3002\u63a5\u4e0b\u6765\uff0c<code>use std::collections::*;</code> \u8bed\u53e5\u4f7f\u7528\u5168\u5c40\u5bfc\u5165\u5c06 <code>std::collections</code> \u6a21\u5757\u4e2d\u7684**\u6240\u6709\u5185\u5bb9**\u5bfc\u5165\u5230\u5f53\u524d\u4f5c\u7528\u57df\u3002\u7136\u540e\uff0c<code>#[macro_use] extern crate my_macros;</code> \u8bed\u53e5\u542f\u7528\u4e86\u5b8f\u7279\u6027\uff0c\u5e76\u5bfc\u5165\u4e86\u540d\u4e3a <code>my_macros</code> \u7684**\u5916\u90e8\u5b8f\u5e93**\u3002</p> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a <code>HashMap</code> \u5b9e\u4f8b\uff0c\u5e76\u4f7f\u7528\u4e86\u5168\u5c40\u5bfc\u5165\u7684 <code>HashMap</code> \u7c7b\u578b\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8c03\u7528\u4e86 <code>my_macro!(\"Hello, world!\");</code> \u5b8f\uff0c\u8be5\u5b8f\u5728\u7f16\u8bd1\u65f6\u4f1a\u88ab\u6269\u5c55\u4e3a\u76f8\u5e94\u7684\u4ee3\u7801\u3002</p> <p>\u6ce8\u610f\uff0c\u4f7f\u7528 <code>#[feature(...)]</code> \u5c5e\u6027\u542f\u7528\u7279\u6027\u662f\u7f16\u8bd1\u5668\u76f8\u5173\u7684\uff0c\u4e0d\u540c\u7684 Rust \u7f16\u8bd1\u5668\u7248\u672c\u53ef\u80fd\u652f\u6301\u4e0d\u540c\u7684\u7279\u6027\u96c6\u5408\u3002\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u5e94\u8be5\u6839\u636e\u6240\u4f7f\u7528\u7684 Rust \u7248\u672c\u548c\u7f16\u8bd1\u5668\u7279\u6027\u6765\u9009\u62e9\u9002\u5f53\u7684\u7279\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#134-rust","title":"13.4 \u94fe\u63a5\u5230\u4e00\u4e2a\u975e Rust \u8bed\u8a00\u7684\u5e93","text":"<p><code>#[link(...)]</code> \u662f Rust \u4e2d\u7528\u4e8e\u544a\u8bc9\u7f16\u8bd1\u5668\u5982\u4f55\u94fe\u63a5\u5230\u5916\u90e8\u5e93\u7684\u5c5e\u6027\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u4e0e\u975e Rust \u8bed\u8a00\u7f16\u5199\u7684\u5e93\u8fdb\u884c\u4ea4\u4e92\u3002 <code>#[link]</code> \u5c5e\u6027\u901a\u5e38**\u4e0d\u9700\u8981\u663e\u5f0f\u58f0\u660e**\uff0c\u800c\u662f\u901a\u8fc7\u5728 Cargo.toml \u6587\u4ef6\u4e2d\u7684 <code>[dependencies]</code> \u90e8\u5206\u6307\u5b9a\u5916\u90e8\u5e93\u7684\u540d\u79f0\u6765\u5b8c\u6210\u94fe\u63a5\u3002</p> <p>\u5047\u8bbe\u4f60\u6709\u4e00\u4e2aC\u8bed\u8a00\u5e93\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u540d\u4e3a <code>my_c_library</code> \u7684\u51fd\u6570\uff0c\u4f60\u60f3\u5728Rust\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u3002</p> <ol> <li> <p>\u9996\u5148\uff0c\u786e\u4fdd\u4f60\u5df2\u7ecf\u5b89\u88c5\u4e86Rust\uff0c\u5e76\u4e14\u4f60\u7684Rust\u9879\u76ee\u5df2\u7ecf\u521d\u59cb\u5316\u3002</p> </li> <li> <p>\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Rust\u6e90\u4ee3\u7801\u6587\u4ef6\uff0c\u4f8b\u5982 <code>main.rs</code>\u3002</p> </li> <li> <p>\u5728Rust\u6e90\u4ee3\u7801\u6587\u4ef6\u4e2d\uff0c\u4f7f\u7528 <code>extern</code> \u5173\u952e\u5b57\u58f0\u660e\u5916\u90e8C\u51fd\u6570\u7684\u539f\u578b\uff0c\u5e76\u4f7f\u7528 <code>#[link]</code> \u5c5e\u6027\u6307\u5b9a\u8981\u94fe\u63a5\u7684\u5e93\u7684\u540d\u79f0\u3002\u793a\u4f8b\u5982\u4e0b\uff1a</p> </li> </ol> <pre><code>extern {\n    // \u58f0\u660e\u5916\u90e8C\u51fd\u6570\u7684\u539f\u578b\n    fn my_c_library_function(arg1: i32, arg2: i32) -&gt; i32;\n}\n\nfn main() {\n    let result;\n    unsafe {\n        // \u8c03\u7528\u5916\u90e8C\u51fd\u6570\n        result = my_c_library_function(42, 23);\n    }\n    println!(\"Result from C function: {}\", result);\n}\n</code></pre> <ol> <li>\u7f16\u8bd1\u4f60\u7684Rust\u4ee3\u7801\uff0c\u540c\u65f6\u94fe\u63a5\u5230C\u8bed\u8a00\u5e93\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>rustc</code> \u547d\u4ee4\uff0c\u4f46\u66f4\u5e38\u89c1\u7684\u662f\u4f7f\u7528 <code>Cargo</code> \u6784\u5efa\u5de5\u5177\u3002\u9996\u5148\uff0c\u786e\u4fdd\u4f60\u7684\u9879\u76ee\u7684 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a</li> </ol> <pre><code>[dependencies]\n</code></pre> <p>\u7136\u540e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>cargo build\n</code></pre> <p>Cargo \u5c06\u4f1a\u81ea\u52a8\u67e5\u627e\u7cfb\u7edf\u4e2d\u662f\u5426\u5b58\u5728 <code>my_c_library</code>\uff0c\u5982\u679c\u627e\u5230\u7684\u8bdd\uff0c\u5b83\u5c06\u4f1a\u94fe\u63a5\u5230\u8be5\u5e93\u5e76\u7f16\u8bd1\u4f60\u7684Rust\u4ee3\u7801\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#135","title":"13.5 \u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u5355\u5143\u6d4b\u8bd5","text":"<p><code>#[test]</code>\u3002\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u6807\u8bb0\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u5355\u5143\u6d4b\u8bd5\u51fd\u6570\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u4f7f\u7528 Rust \u7684\u6d4b\u8bd5\u6846\u67b6\u6765\u8fd0\u884c\u8fd9\u4e2a\u6d4b\u8bd5\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a</p> <pre><code>#[test]  \nfn test_addition() {  \n    assert_eq!(2 + 2, 4);  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>#[test]</code> \u5c5e\u6027\u88ab\u5e94\u7528\u4e8e <code>test_addition</code> \u51fd\u6570\uff0c\u8868\u793a\u5b83\u662f\u4e00\u4e2a\u5355\u5143\u6d4b\u8bd5\u3002\u51fd\u6570\u4f53\u4e2d\u7684 <code>assert_eq!</code> \u5b8f\u7528\u4e8e\u65ad\u8a00\u4e24\u4e2a\u8868\u8fbe\u5f0f\u662f\u5426\u76f8\u7b49\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u68c0\u67e5 <code>2 + 2</code> \u662f\u5426\u7b49\u4e8e <code>4</code>\u3002\u5982\u679c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u8fd4\u56de <code>true</code>\uff0c\u90a3\u4e48\u6d4b\u8bd5\u5c31\u4f1a\u901a\u8fc7\u3002\u5982\u679c\u8fd4\u56de <code>false</code>\uff0c\u6d4b\u8bd5\u5c31\u4f1a\u5931\u8d25\uff0c\u5e76\u8f93\u51fa\u76f8\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u6d4b\u8bd5\u51fd\u6570\u4e2d\u4f7f\u7528\u5176\u4ed6\u5b8f\u548c\u51fd\u6570\u6765\u7f16\u5199\u66f4\u590d\u6742\u7684\u6d4b\u8bd5\u903b\u8f91\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>assert!</code> \u5b8f\u6765\u65ad\u8a00\u4e00\u4e2a\u8868\u8fbe\u5f0f\u662f\u5426\u4e3a\u771f\uff0c\u6216\u8005\u4f7f\u7528 <code>assert_ne!</code> \u5b8f\u6765\u65ad\u8a00\u4e24\u4e2a\u8868\u8fbe\u5f0f\u662f\u5426\u4e0d\u76f8\u7b49\u3002</p> <p>\u6ce8\u610f\uff0c#[test]\u548c#[cfg(test)]\u662f\u6709\u533a\u522b\u7684\uff1a</p> \u7279\u6027 <code>#[test]</code> <code>#[cfg(test)]</code> \u7528\u9014 \u7528\u4e8e\u6807\u8bb0\u5355\u5143\u6d4b\u8bd5\u51fd\u6570 \u7528\u4e8e\u6761\u4ef6\u7f16\u8bd1\u6d4b\u8bd5\u76f8\u5173\u7684\u4ee3\u7801 \u6240\u5c5e\u4e0a\u4e0b\u6587 \u51fd\u6570\u7ea7\u522b\u7684\u5c5e\u6027 \u4ee3\u7801\u5757\u7ea7\u522b\u7684\u5c5e\u6027 \u6267\u884c\u65f6\u673a \u5728\u6d4b\u8bd5\u8fd0\u884c\u65f6\u6267\u884c \u4ec5\u5728\u8fd0\u884c\u6d4b\u8bd5\u65f6\u7f16\u8bd1\u548c\u6267\u884c \u5178\u578b\u7528\u6cd5 \u7f16\u5199\u548c\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b \u5305\u542b\u6d4b\u8bd5\u8f85\u52a9\u51fd\u6570\u6216\u6a21\u62df\u7684\u4ee3\u7801 \u793a\u4f8b <code>rust fn test_function() {...}</code> <code>rust #[cfg(test)] mod tests { ... }</code> \u6d4b\u8bd5\u8fd0\u884c\u65b9\u5f0f \u5728\u6d4b\u8bd5\u6a21\u5757\u4e2d\u6267\u884c\uff0c\u901a\u5e38\u7531\u6d4b\u8bd5\u8fd0\u884c\u5668\u7ba1\u7406 \u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u8fd0\u884c\uff0c\u6b63\u5e38\u6784\u5efa\u65f6\u6392\u9664 \u662f\u5426\u9700\u8981\u65ad\u8a00\u5b8f \u901a\u5e38\u9700\u8981\u4f7f\u7528\u65ad\u8a00\u5b8f(\u4f8b\u5982 <code>assert_eq!</code>)\u8fdb\u884c\u6d4b\u8bd5 \u4e0d\u4e00\u5b9a\u9700\u8981\uff0c\u53ef\u4ee5\u7528\u4e8e\u7f16\u5199\u6d4b\u8bd5\u8f85\u52a9\u51fd\u6570 \u7528\u4e8e\u7ec4\u7ec7\u6d4b\u8bd5\u4ee3\u7801 \u76f4\u63a5\u5305\u542b\u5728\u6d4b\u8bd5\u51fd\u6570\u5185\u90e8 \u901a\u5e38\u5305\u542b\u5728\u6a21\u5757\u4e2d <p>\u4f46\u662f\u8fd9\u4e24\u4e2a\u5c5e\u6027\u901a\u5e38\u4e00\u8d77\u4f7f\u7528\uff0c<code>#[cfg(test)]</code> \u7528\u4e8e\u5305\u88c5\u6d4b\u8bd5\u8f85\u52a9\u4ee3\u7801\u548c\u6a21\u62df\uff0c\u800c <code>#[test]</code> \u7528\u4e8e\u6807\u8bb0\u8981\u8fd0\u884c\u7684\u6d4b\u8bd5\u7528\u4f8b\u51fd\u6570\u3002\u572819\u7ae0\u6211\u4eec\u8fd8\u4f1a\u8be6\u7ec6\u53d9\u8ff0\u6d4b\u8bd5\u7684\u5e94\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2013%20-%20%E5%B1%9E%E6%80%A7%28Attributes%29/#136","title":"13.6 \u6807\u8bb0\u51fd\u6570\u4f5c\u4e3a\u57fa\u51c6\u6d4b\u8bd5\u7684\u67d0\u4e2a\u90e8\u5206","text":"<p>\u4f7f\u7528 Rust \u7f16\u5199\u57fa\u51c6\u6d4b\u8bd5\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>#[bench]</code> \u5c5e\u6027\u6765\u6807\u8bb0\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u57fa\u51c6\u6d4b\u8bd5\u51fd\u6570\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>#[bench]</code> \u5c5e\u6027\u548c Rust \u7684\u57fa\u51c6\u6d4b\u8bd5\u6846\u67b6\u6765\u6d4b\u8bd5\u4e00\u4e2a\u51fd\u6570\u7684\u6027\u80fd\u3002</p> <pre><code>use test::Bencher;  \n\n#[bench]  \nfn bench_addition(b: &amp;mut Bencher) {  \n    b.iter(|| {  \n        let sum = 2 + 2;  \n        assert_eq!(sum, 4);  \n    });  \n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>bench_addition</code> \u7684\u51fd\u6570\uff0c\u5e76\u4f7f\u7528 <code>#[bench]</code> \u5c5e\u6027\u8fdb\u884c\u6807\u8bb0\u3002\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a <code>&amp;mut Bencher</code> \u7c7b\u578b\u7684\u53c2\u6570 <code>b</code>\uff0c\u5b83\u63d0\u4f9b\u4e86\u7528\u4e8e\u8fd0\u884c\u57fa\u51c6\u6d4b\u8bd5\u7684\u65b9\u6cd5\u3002</p> <p>\u5728\u51fd\u6570\u4f53\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>b.iter</code> \u65b9\u6cd5\u6765\u6307\u5b9a\u8981\u91cd\u590d\u8fd0\u884c\u7684\u6d4b\u8bd5\u4ee3\u7801\u5757\u3002\u8fd9\u91cc\u4f7f\u7528\u4e86\u4e00\u4e2a\u95ed\u5305 <code>|| { ... }</code> \u6765\u5b9a\u4e49\u8981\u8fd0\u884c\u7684\u4ee3\u7801\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u7b80\u5355\u5730\u5c06 <code>2 + 2</code> \u7684\u7ed3\u679c\u5b58\u50a8\u5728 <code>sum</code> \u53d8\u91cf\u4e2d\uff0c\u5e76\u4f7f\u7528 <code>assert_eq!</code> \u5b8f\u6765\u65ad\u8a00 <code>sum</code> \u662f\u5426\u7b49\u4e8e <code>4</code>\u3002</p> <p>\u8981\u8fd0\u884c\u8fd9\u4e2a\u57fa\u51c6\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528 <code>cargo bench</code> \u547d\u4ee4\u3002Rust \u7684\u57fa\u51c6\u6d4b\u8bd5\u6846\u67b6\u4f1a\u81ea\u52a8\u8bc6\u522b\u5e76\u4f7f\u7528 <code>#[bench]</code> \u5c5e\u6027\u6807\u8bb0\u7684\u51fd\u6570\uff0c\u5e76\u8fd0\u884c\u5b83\u4eec\u4ee5\u6d4b\u91cf\u6027\u80fd\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/","title":"Chapter 14 - \u6cdb\u578b\u8fdb\u9636(Advanced Generic Type Usage)","text":"<p>\u6cdb\u578b\u662f\u4e00\u79cd\u7f16\u7a0b\u6982\u5ff5\uff0c\u7528\u4e8e\u6cdb\u5316\u7c7b\u578b\u548c\u51fd\u6570\u529f\u80fd\uff0c\u4ee5\u6269\u5c55\u5b83\u4eec\u7684\u9002\u7528\u8303\u56f4\u3002\u4f7f\u7528\u6cdb\u578b\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u4ee3\u7801\u7684\u91cd\u590d\uff0c\u4f46\u4f7f\u7528\u6cdb\u578b\u7684\u8bed\u6cd5\u9700\u8981\u8c28\u614e\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4f7f\u7528\u6cdb\u578b\u610f\u5473\u7740\u4f60\u9700\u8981\u660e\u786e\u6307\u5b9a\u5728\u5177\u4f53\u60c5\u51b5\u4e0b\uff0c\u54ea\u79cd\u7c7b\u578b\u662f\u5408\u6cd5\u7684\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u6cdb\u578b\u5c31\u662f\u5b9a\u4e49\u53ef\u4ee5\u9002\u7528\u4e8e\u4e0d\u540c\u5177\u4f53\u7c7b\u578b\u7684**\u4ee3\u7801\u6a21\u677f**\u3002\u5728\u4f7f\u7528\u65f6\uff0c\u6211\u4eec\u4f1a\u4e3a\u8fd9\u4e9b\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u63d0\u4f9b\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u5c31\u50cf\u4f20\u9012\u53c2\u6570\u4e00\u6837\u3002</p> <p>\u5728Rust\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u5c16\u62ec\u53f7\u548c\u5927\u5199\u5b57\u6bcd\u7684\u540d\u79f0(\u4f8b\u5982\uff1a<code>&lt;Aaa, Bbb, ...&gt;</code>)\u6765\u6307\u5b9a\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528<code>&lt;T&gt;</code>\u6765\u8868\u793a\u4e00\u4e2a\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u3002\u5728Rust\u4e2d\uff0c\u6cdb\u578b\u4e0d\u4ec5\u4ec5\u8868\u793a\u7c7b\u578b\uff0c\u8fd8\u8868\u793a\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6216\u591a\u4e2a\u6cdb\u578b\u7c7b\u578b\u53c2\u6570<code>&lt;T&gt;</code>\u7684\u4efb\u4f55\u5185\u5bb9\u3002</p> <p>\u8ba9\u6211\u4eec\u7f16\u5199\u4e00\u4e2a\u8f7b\u677e\u7684\u793a\u4f8b\uff0c\u4ee5\u66f4\u8be6\u7ec6\u5730\u8bf4\u660eRust\u4e2d\u6cdb\u578b\u7684\u6982\u5ff5\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b `Fruit`\u3002\nstruct Fruit {\n    name: String,\n}\n\n// \u5728\u5b9a\u4e49\u7c7b\u578b `Basket` \u65f6\uff0c\u7b2c\u4e00\u6b21\u4f7f\u7528\u7c7b\u578b `Fruit` \u4e4b\u524d\u6ca1\u6709\u5199 `&lt;Fruit&gt;`\u3002\n// \u56e0\u6b64\uff0c`Basket` \u662f\u4e2a\u5177\u4f53\u7c7b\u578b\uff0c`Fruit` \u53d6\u4e0a\u9762\u7684\u5b9a\u4e49\u3002\nstruct Basket(Fruit);\n//            ^ \u8fd9\u91cc\u662f `Basket` \u5bf9\u7c7b\u578b `Fruit` \u7684\u7b2c\u4e00\u6b21\u4f7f\u7528\u3002\n\n// \u6b64\u5904 `&lt;T&gt;` \u5728\u7b2c\u4e00\u6b21\u4f7f\u7528 `T` \u4e4b\u524d\u51fa\u73b0\uff0c\u6240\u4ee5 `BasketGen` \u662f\u4e00\u4e2a\u6cdb\u578b\u7c7b\u578b\u3002\n// \u56e0\u4e3a `T` \u662f\u6cdb\u578b\u7684\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\uff0c\u5305\u62ec\u5728\u4e0a\u9762\u5b9a\u4e49\u7684\u5177\u4f53\u7c7b\u578b `Fruit`\u3002\nstruct BasketGen&lt;T&gt;(T);\n\nfn main() {\n    // `Basket` \u662f\u5177\u4f53\u7c7b\u578b\uff0c\u5e76\u4e14\u663e\u5f0f\u5730\u4f7f\u7528\u7c7b\u578b `Fruit`\u3002\n    let apple = Fruit {\n        name: String::from(\"Apple\"),\n    };\n    let _basket = Basket(apple);\n\n    // \u521b\u5efa\u4e00\u4e2a `BasketGen&lt;String&gt;` \u7c7b\u578b\u7684\u53d8\u91cf `_str_basket`\uff0c\u5e76\u4ee4\u5176\u503c\u4e3a `BasketGen(\"Banana\")`\n    // \u8fd9\u91cc\u7684 `BasketGen` \u7684\u7c7b\u578b\u53c2\u6570\u662f\u663e\u5f0f\u6307\u5b9a\u7684\u3002\n    let _str_basket: BasketGen&lt;String&gt; = BasketGen(String::from(\"Banana\"));\n\n    // `BasketGen` \u7684\u7c7b\u578b\u53c2\u6570\u4e5f\u53ef\u4ee5\u9690\u5f0f\u5730\u6307\u5b9a\u3002\n    let _fruit_basket = BasketGen(Fruit {\n        name: String::from(\"Orange\"),\n    }); // \u4f7f\u7528\u5728\u4e0a\u9762\u5b9a\u4e49\u7684 `Fruit`\u3002\n    let _weight_basket = BasketGen(42); // \u4f7f\u7528 `i32` \u7c7b\u578b\u3002\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b <code>Fruit</code>\uff0c\u7136\u540e\u4f7f\u7528\u5b83\u5728 <code>Basket</code> \u7ed3\u6784\u4f53\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6cdb\u578b\u7ed3\u6784\u4f53 <code>BasketGen&lt;T&gt;</code>\uff0c\u5b83\u53ef\u4ee5\u5b58\u50a8\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u636e\u3002\u6211\u4eec\u521b\u5efa\u4e86\u51e0\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684 <code>BasketGen</code> \u5b9e\u4f8b\uff0c\u6709\u4e9b\u662f\u663e\u5f0f\u6307\u5b9a\u7c7b\u578b\u53c2\u6570\u7684\uff0c\u800c\u6709\u4e9b\u5219\u662f\u9690\u5f0f\u6307\u5b9a\u7684\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86Rust\u4e2d\u6cdb\u578b\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u521b\u5efa\u6cdb\u578b\u7ed3\u6784\u4f53\u5b9e\u4f8b\u65f6\u660e\u786e\u6216\u9690\u542b\u5730\u6307\u5b9a\u7c7b\u578b\u53c2\u6570\u3002\u6cdb\u578b\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u901a\u7528\u548c\u53ef\u590d\u7528\uff0c\u5141\u8bb8\u6211\u4eec\u521b\u5efa\u80fd\u591f\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u7684\u901a\u7528\u6570\u636e\u7ed3\u6784\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#141","title":"14.1 \u6cdb\u578b\u5b9e\u73b0","text":"<p>\u6cdb\u578b\u5b9e\u73b0\u662fRust\u4e2d\u4e00\u79cd\u975e\u5e38\u5f3a\u5927\u7684\u7279\u6027\uff0c\u5b83\u5141\u8bb8\u6211\u4eec\u7f16\u5199\u901a\u7528\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u540c\u65f6\u4fdd\u6301\u7c7b\u578b\u5b89\u5168\u6027\u3002\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u4e00\u4e0b\u5982\u4f55\u5728Rust\u4e2d\u4f7f\u7528\u6cdb\u578b\u5b9e\u73b0\u3002</p> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u4e86\u89e3\u5982\u4f55\u5728\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u548ctrait\u4e2d\u5b9e\u73b0\u6cdb\u578b\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#1411","title":"14.1.1 \u5728\u7ed3\u6784\u4f53\u4e2d\u5b9e\u73b0\u6cdb\u578b","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728\u7ed3\u6784\u4f53\u4e2d\u4f7f\u7528\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\uff0c\u5e76\u4e3a\u8be5\u7ed3\u6784\u4f53\u5b9e\u73b0\u65b9\u6cd5\u3002\u4f8b\u5982\uff1a</p> <pre><code>struct Pair&lt;T&gt; {\n    first: T,\n    second: T,\n}\n\nimpl&lt;T&gt; Pair&lt;T&gt; {\n    fn new(first: T, second: T) -&gt; Self {\n        Pair { first, second }\n    }\n\n    fn get_first(&amp;self) -&gt; &amp;T {\n        &amp;self.first\n    }\n\n    fn get_second(&amp;self) -&gt; &amp;T {\n        &amp;self.second\n    }\n}\n\nfn main() {\n    let pair_of_integers = Pair::new(1, 2);\n    println!(\"First: {}\", pair_of_integers.get_first());\n    println!(\"Second: {}\", pair_of_integers.get_second());\n\n    let pair_of_strings = Pair::new(\"hello\", \"world\");\n    println!(\"First: {}\", pair_of_strings.get_first());\n    println!(\"Second: {}\", pair_of_strings.get_second());\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4e3a\u6cdb\u578b\u7ed3\u6784\u4f53<code>Pair&lt;T&gt;</code>\u5b9e\u73b0\u4e86<code>new</code>\u65b9\u6cd5\u548c\u83b7\u53d6<code>first</code>\u548c<code>second</code>\u503c\u7684\u65b9\u6cd5\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#1412","title":"14.1.2 \u5728\u679a\u4e3e\u4e2d\u5b9e\u73b0\u6cdb\u578b","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u679a\u4e3e\u4e2d\u4f7f\u7528\u6cdb\u578b\u7c7b\u578b\u53c2\u6570\u3002\u4f8b\u5982\u7ecf\u5178\u7684Result\u679a\u4e3e\u7c7b\u578b\uff1a</p> <pre><code>enum Result&lt;T, E&gt; {\n    Ok(T),\n    Err(E),\n}\n\nfn main() {\n    let success: Result&lt;i32, &amp;str&gt; = Result::Ok(42);\n    let failure: Result&lt;i32, &amp;str&gt; = Result::Err(\"Something went wrong\");\n\n    match success {\n        Result::Ok(value) =&gt; println!(\"Success: {}\", value),\n        Result::Err(err) =&gt; println!(\"Error: {}\", err),\n    }\n\n    match failure {\n        Result::Ok(value) =&gt; println!(\"Success: {}\", value),\n        Result::Err(err) =&gt; println!(\"Error: {}\", err),\n    }\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6cdb\u578b\u679a\u4e3e<code>Result&lt;T, E&gt;</code>\uff0c\u5b83\u53ef\u4ee5\u8868\u793a\u6210\u529f(<code>Ok</code>)\u6216\u5931\u8d25(<code>Err</code>)\u7684\u7ed3\u679c\u3002\u5728<code>main</code>\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684<code>Result</code>\u5b9e\u4f8b\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#1413","title":"14.1.3 \u5728\u7279\u6027\u4e2d\u5b9e\u73b0\u6cdb\u578b","text":"<p>\u5728trait\u4e2d\u5b9a\u4e49\u6cdb\u578b\u65b9\u6cd5\uff0c\u7136\u540e**\u4e3a\u4e0d\u540c\u7c7b\u578b\u5b9e\u73b0\u8be5trait**\u3002\u4f8b\u5982\uff1a</p> <pre><code>trait Summable&lt;T&gt; {\n    fn sum(&amp;self) -&gt; T;\n}\n\nimpl Summable&lt;i32&gt; for Vec&lt;i32&gt; {\n    fn sum(&amp;self) -&gt; i32 {\n        self.iter().sum()\n    }\n}\n\nimpl Summable&lt;f64&gt; for Vec&lt;f64&gt; {\n    fn sum(&amp;self) -&gt; f64 {\n        self.iter().sum()\n    }\n}\n\nfn main() {\n    let numbers_int = vec![1, 2, 3, 4, 5];\n    let numbers_float = vec![1.1, 2.2, 3.3, 4.4, 5.5];\n\n    println!(\"Sum of integers: {}\", numbers_int.sum());\n    println!(\"Sum of floats: {}\", numbers_float.sum());\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#142-multiple-trait-bounds","title":"14.2 \u591a\u91cd\u7ea6\u675f (Multiple-Trait Bounds)","text":"<p>\u591a\u91cd\u7ea6\u675f (Multiple Trait Bounds) \u662f Rust \u4e2d\u4e00\u79cd\u5f3a\u5927\u7684\u7279\u6027\uff0c\u5141\u8bb8\u5728\u6cdb\u578b\u53c2\u6570\u4e0a\u6307\u5b9a\u591a\u4e2a trait \u7ea6\u675f\u3002\u8fd9\u610f\u5473\u7740\u6cdb\u578b\u7c7b\u578b\u5fc5\u987b\u540c\u65f6\u5b9e\u73b0\u591a\u4e2a trait \u624d\u80fd\u6ee1\u8db3\u8fd9\u4e2a\u6cdb\u578b\u53c2\u6570\u7684\u7ea6\u675f\u3002\u591a\u91cd\u7ea6\u675f\u901a\u5e38\u5728\u9700\u8981\u5bf9\u6cdb\u578b\u53c2\u6570\u8fdb\u884c\u66f4\u7cbe\u786e\u7684\u7ea6\u675f\u65f6\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5141\u8bb8\u4f60\u6307\u5b9a\u6cdb\u578b\u53c2\u6570\u5fc5\u987b\u5177\u5907\u591a\u4e2a\u7279\u5b9a\u7684\u884c\u4e3a\u3002</p> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528\u591a\u91cd\u7ea6\u675f\u7684\u793a\u4f8b\u4ee5\u53ca\u4e00\u4e9b\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <pre><code>use std::fmt::{Debug, Display};\n\nfn compare_prints&lt;T: Debug + Display&gt;(t: &amp;T) {\n    println!(\"Debug: `{:?}`\", t);\n    println!(\"Display: `{}`\", t);\n}\n\nfn compare_types&lt;T: Debug, U: Debug&gt;(t: &amp;T, u: &amp;U) {\n    println!(\"t: `{:?}`\", t);\n    println!(\"u: `{:?}`\", u);\n}\n\nfn main() {\n    let string = \"words\";\n    let array = [1, 2, 3];\n    let vec = vec![1, 2, 3];\n\n    compare_prints(&amp;string);\n    // compare_prints(&amp;array);   //\u56e0\u4e3a&amp;array\u5e76\u672a\u5b9e\u73b0std::fmt::Display\uff0c\u6240\u4ee5\u53ea\u8981\u8fd9\u884c\u88ab\u6fc0\u6d3b\u5c31\u4f1a\u7f16\u8bd1\u5931\u8d25\u3002\n\n    compare_types(&amp;array, &amp;vec);\n}\n</code></pre> <p>\u56e0\u4e3a<code>&amp;array</code>\u5e76\u672a\u5b9e\u73b0<code>Display</code> trait\uff0c\u6240\u4ee5\u53ea\u8981  <code>compare_prints(&amp;array);</code>  \u88ab\u6fc0\u6d3b\uff0c\u5c31\u4f1a\u7f16\u8bd1\u5931\u8d25\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#143-where","title":"14.3 where\u8bed\u53e5","text":"<p>\u5728 Rust \u4e2d\uff0c<code>where</code> \u8bed\u53e5\u662f\u4e00\u79cd\u7528\u4e8e\u5728 trait bounds \u4e2d\u63d0\u4f9b\u66f4\u7075\u6d3b\u548c\u6e05\u6670\u7684\u7ea6\u675f\u6761\u4ef6\u7684\u65b9\u5f0f\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>where</code> \u8bed\u53e5\u6765\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\uff1a</p> <pre><code>use std::fmt::{Debug, Display};\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6cdb\u578b\u51fd\u6570\uff0c\u63a5\u53d7\u4e24\u4e2a\u6cdb\u578b\u53c2\u6570 T \u548c U\uff0c\n// \u5e76\u8981\u6c42 T \u5fc5\u987b\u5b9e\u73b0 Display trait\uff0cU \u5fc5\u987b\u5b9e\u73b0 Debug trait\u3002\nfn display_and_debug&lt;T, U&gt;(t: T, u: U)\nwhere\n    T: Display,\n    U: Debug,\n{\n    println!(\"Display: {}\", t);\n    println!(\"Debug: {:?}\", u);\n}\n\nfn main() {\n    let number = 42;\n    let text = \"hello\";\n\n    display_and_debug(number, text);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a <code>display_and_debug</code> \u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u4e24\u4e2a\u6cdb\u578b\u53c2\u6570 <code>T</code> \u548c <code>U</code>\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>where</code> \u8bed\u53e5\u6765\u6307\u5b9a\u7ea6\u675f\u6761\u4ef6\uff1a<code>T: Display</code> \u8868\u793a <code>T</code> \u5fc5\u987b\u5b9e\u73b0 <code>Display</code> trait\uff0c<code>U: Debug</code> \u8868\u793a <code>U</code> \u5fc5\u987b\u5b9e\u73b0 <code>Debug</code> trait\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2014%20-%20%E6%B3%9B%E5%9E%8B%E8%BF%9B%E9%98%B6%28Advanced%20Generic%20Type%20Usage%29/#144-associated-items","title":"14.4 \u5173\u8054\u9879 (associated items)","text":"<p>\u5728 Rust \u4e2d\uff0c\"\u5173\u8054\u9879\"(associated items)\u662f\u4e0e\u7279\u5b9a trait \u6216\u7c7b\u578b\u76f8\u5173\u8054\u7684\u9879\uff0c\u8fd9\u4e9b\u9879\u53ef\u4ee5\u5305\u62ec\u4e0e trait \u76f8\u5173\u7684\u5173\u8054\u7c7b\u578b(associated types)\u3001\u5173\u8054\u5e38\u91cf(associated constants)\u548c\u5173\u8054\u51fd\u6570(associated functions)\u3002\u5173\u8054\u9879\u662f trait \u548c\u7c7b\u578b\u7684\u4e00\u90e8\u5206\uff0c\u5b83\u4eec\u5141\u8bb8\u5728 trait \u6216\u7c7b\u578b\u7684\u4e0a\u4e0b\u6587\u4e2d\u5b9a\u4e49\u4e0e\u4e4b\u76f8\u5173\u7684\u6570\u636e\u548c\u51fd\u6570\u3002</p> <p>\u4ee5\u4e0b\u662f\u5173\u8054\u9879\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li>\u5173\u8054\u7c7b\u578b(Associated Types)\uff1a</li> </ol> <p>\u5f53\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a trait \u5e76\u4f7f\u7528\u5173\u8054\u7c7b\u578b\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u5728 trait \u7684\u5b9e\u73b0\u4e2d\u53ef\u4ee5\u5177\u4f53\u6307\u5b9a\u8fd9\u4e9b\u5173\u8054\u7c7b\u578b\u3002\u5173\u8054\u7c7b\u578b\u5141\u8bb8\u6211\u4eec\u5728 trait \u4e2d\u5f15\u5165\u4e0e\u5177\u4f53\u7c7b\u578b\u6709\u5173\u7684\u5360\u4f4d\u7b26\uff0c\u7136\u540e\u5728\u5b9e\u73b0\u65f6\u63d0\u4f9b\u5177\u4f53\u7c7b\u578b\u3002</p> <pre><code>trait Iterator {\n    type Item; // \u5b9a\u4e49\u5173\u8054\u7c7b\u578b\n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;; // \u4f7f\u7528\u5173\u8054\u7c7b\u578b\n}\n\n// \u5b9e\u73b0 Iterator trait\uff0c\u5e76\u6307\u5b9a\u5173\u8054\u7c7b\u578b Item \u4e3a i32\nimpl Iterator for Counter {\n    type Item = i32;\n    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {\n        // \u5b9e\u73b0\u65b9\u6cd5\n    }\n}\n</code></pre> <ol> <li> <p>\u5173\u8054\u5e38\u91cf(Associated Constants)\uff1a</p> </li> <li> <p>\u5173\u8054\u5e38\u91cf\u662f\u4e0e trait \u76f8\u5173\u8054\u7684\u5e38\u91cf\u503c\u3002</p> </li> <li>\u4e0e\u5173\u8054\u7c7b\u578b\u4e0d\u540c\uff0c\u5173\u8054\u5e38\u91cf\u662f\u5177\u4f53\u7684\u503c\uff0c\u800c\u4e0d\u662f\u7c7b\u578b\u3002</li> <li>\u5173\u8054\u5e38\u91cf\u4f7f\u7528 <code>const</code> \u5173\u952e\u5b57\u6765\u58f0\u660e\uff0c\u5e76\u5728\u5b9e\u73b0 trait \u65f6\u63d0\u4f9b\u5177\u4f53\u503c\u3002</li> </ol> <pre><code>trait MathConstants {\n    const PI: f64; // \u5b9a\u4e49\u5173\u8054\u5e38\u91cf\n}\n\n// \u5b9e\u73b0 MathConstants trait\uff0c\u5e76\u63d0\u4f9b PI \u7684\u5177\u4f53\u503c\nimpl MathConstants for Circle {\n    const PI: f64 = 3.14159265359;\n}\n</code></pre> <ol> <li> <p>\u5173\u8054\u51fd\u6570(Associated Functions)\uff1a</p> </li> <li> <p>\u5173\u8054\u51fd\u6570\u662f\u4e0e\u7c7b\u578b\u5173\u8054\u7684\u51fd\u6570\uff0c\u901a\u5e38\u7528\u4e8e\u521b\u5efa\u8be5\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002</p> </li> <li>\u5173\u8054\u51fd\u6570\u4e0d\u4f9d\u8d56\u4e8e\u5177\u4f53\u7684\u5b9e\u4f8b\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u4ee5\u5728\u7c7b\u578b\u7ea7\u522b\u8c03\u7528\uff0c\u800c\u4e0d\u9700\u8981\u5b9e\u4f8b\u3002</li> <li>\u5173\u8054\u51fd\u6570\u4f7f\u7528 <code>fn</code> \u5173\u952e\u5b57\u6765\u5b9a\u4e49\u3002</li> </ol> <pre><code>struct Point {\n    x: i32,\n    y: i32,\n}\n\nimpl Point {\n    // \u5b9a\u4e49\u5173\u8054\u51fd\u6570\uff0c\u7528\u4e8e\u521b\u5efa Point \u7684\u65b0\u5b9e\u4f8b\n    fn new(x: i32, y: i32) -&gt; Self {\n        Point { x, y }\n    }\n}\n\nfn main() {\n    let point = Point::new(10, 20); // \u8c03\u7528\u5173\u8054\u51fd\u6570\u521b\u5efa\u5b9e\u4f8b\n}\n</code></pre> <p>\u5173\u8054\u9879\u662f Rust \u4e2d\u975e\u5e38\u5f3a\u5927\u548c\u7075\u6d3b\u7684\u6982\u5ff5\uff0c\u5b83\u4eec\u4f7f\u5f97 trait \u548c\u7c7b\u578b\u80fd\u591f\u5b9a\u4e49\u66f4\u62bd\u8c61\u548c\u901a\u7528\u7684\u63a5\u53e3\uff0c\u5e76\u4e14\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u7c7b\u578b\u7684\u9700\u8981\u8fdb\u884c\u5b9a\u5236\u5316\u3002\u8fd9\u4e9b\u6982\u5ff5\u5bf9\u4e8e\u521b\u5efa\u53ef\u590d\u7528\u7684\u4ee3\u7801\u548c\u5b9e\u73b0\u901a\u7528\u6570\u636e\u7ed3\u6784\u975e\u5e38\u6709\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","title":"Chapter 15 - \u4f5c\u7528\u57df\u89c4\u5219\u548c\u751f\u547d\u5468\u671f","text":"<p>Rust\u7684\u4f5c\u7528\u57df\u89c4\u5219\u548c\u751f\u547d\u5468\u671f\u662f\u8be5\u8bed\u8a00\u4e2d\u7684\u5173\u952e\u6982\u5ff5\uff0c\u7528\u4e8e\u7ba1\u7406\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u3001\u5f15\u7528\u7684\u6709\u6548\u6027\u548c\u8d44\u6e90\u7684\u91ca\u653e\u3002</p> <p>Rust\u7684\u4f5c\u7528\u57df\u89c4\u5219\u548c\u751f\u547d\u5468\u671f\u662f\u8be5\u8bed\u8a00\u4e2d\u7684\u5173\u952e\u6982\u5ff5\uff0c\u7528\u4e8e\u7ba1\u7406\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u3001\u5f15\u7528\u7684\u6709\u6548\u6027\u548c\u8d44\u6e90\u7684\u91ca\u653e\u3002\u8ba9\u6211\u4eec\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3\u4e00\u4e0b\u8fd9\u4e9b\u6982\u5ff5\u3002</p> <ol> <li>\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u89c4\u5219\uff1a</li> </ol> <p>Rust\u4e2d\u7684\u53d8\u91cf\u6709\u660e\u786e\u7684\u4f5c\u7528\u57df\uff0c\u8fd9\u610f\u5473\u7740\u53d8\u91cf\u53ea\u5728\u5176\u5b9a\u4e49\u7684\u4f5c\u7528\u57df\u5185\u53ef\u89c1\u548c\u53ef\u8bbf\u95ee\u3002\u4f5c\u7528\u57df\u901a\u5e38\u7531\u5927\u62ec\u53f7 <code>{}</code> \u5b9a\u4e49\uff0c\u4f8b\u5982\u51fd\u6570\u3001\u4ee3\u7801\u5757\u6216\u7ed3\u6784\u4f53\u5b9a\u4e49\u3002</p> <pre><code>fn main() {\n    let x = 42; // x \u5728 main \u51fd\u6570\u7684\u4f5c\u7528\u57df\u5185\u53ef\u89c1\n    println!(\"x = {}\", x);\n} // x \u7684\u4f5c\u7528\u57df\u5728\u8fd9\u91cc\u7ed3\u675f\uff0c\u5b83\u88ab\u9500\u6bc1\n</code></pre> <ol> <li>\u5f15\u7528\u548c\u501f\u7528\uff1a</li> </ol> <p>\u5728Rust\u4e2d\uff0c\u5f15\u7528\u662f\u4e00\u79cd\u5141\u8bb8\u4f60\u501f\u7528(\u6216\u8005\u8bf4\u8bbf\u95ee)\u6570\u636e\u800c\u4e0d\u62e5\u6709\u5b83\u7684\u65b9\u5f0f\u3002\u5f15\u7528\u6709\u4e24\u79cd\u7c7b\u578b\uff1a\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\u3002</p> <ul> <li>\u4e0d\u53ef\u53d8\u5f15\u7528(<code>&amp;T</code>)\uff1a\u5141\u8bb8\u591a\u4e2a\u53ea\u8bfb\u5f15\u7528\u540c\u65f6\u5b58\u5728\uff0c\u4f46\u4e0d\u5141\u8bb8\u4fee\u6539\u6570\u636e\u3002</li> <li>\u53ef\u53d8\u5f15\u7528(<code>&amp;mut T</code>)\uff1a\u5141\u8bb8\u5355\u4e00\u53ef\u53d8\u5f15\u7528\uff0c\u4f46\u4e0d\u5141\u8bb8\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u5f15\u7528\u3002</li> </ul> <pre><code>fn main() {\n    let mut x = 42;\n\n    let y = &amp;x; // \u4e0d\u53ef\u53d8\u5f15\u7528\n    // let z = &amp;mut x; // \u9519\u8bef\uff0c\u4e0d\u80fd\u540c\u65f6\u5b58\u5728\u53ef\u53d8\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\n\n    println!(\"x = {}\", x);\n}\n</code></pre> <ol> <li>\u751f\u547d\u5468\u671f\uff1a</li> </ol> <p>\u751f\u547d\u5468\u671f(Lifetime)\u662f\u4e00\u79cd\u7528\u4e8e\u63cf\u8ff0\u5f15\u7528\u7684\u6709\u6548\u8303\u56f4\u7684\u6807\u8bb0\uff0c\u5b83\u786e\u4fdd\u5f15\u7528\u5728\u5176\u751f\u547d\u5468\u671f\u5185\u6709\u6548\u3002\u751f\u547d\u5468\u671f\u53c2\u6570\u901a\u5e38\u4ee5\u5355\u5f15\u53f7 <code>'</code> \u5f00\u5934\uff0c\u4f8b\u5982 <code>'a</code>\u3002</p> <pre><code>fn longest&lt;'a&gt;(s1: &amp;'a str, s2: &amp;'a str) -&gt; &amp;'a str {\n    if s1.len() &gt; s2.len() {\n        s1\n    } else {\n        s2\n    }\n}\n\nfn main() {\n    let s1 = \"Hello\";\n    let s2 = \"World\";\n\n    let result = longest(s1, s2);\n\n    println!(\"The longest string is: {}\", result);\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c<code>longest</code> \u51fd\u6570\u7684\u53c2\u6570\u548c\u8fd4\u56de\u503c\u90fd\u6709\u76f8\u540c\u7684\u751f\u547d\u5468\u671f <code>'a</code>\uff0c\u8fd9\u8868\u793a\u51fd\u6570\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u4e0e\u8f93\u5165\u53c2\u6570\u4e2d\u66f4\u957f\u7684\u90a3\u4e2a\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u76f8\u540c\u3002\u8fd9\u662f\u901a\u8fc7\u751f\u547d\u5468\u671f\u53c2\u6570 <code>'a</code> \u6765\u8868\u8fbe\u7684\u3002</p> <ol> <li>\u751f\u547d\u5468\u671f\u6ce8\u89e3\uff1a</li> </ol> <p>\u6709\u65f6\uff0c\u7f16\u8bd1\u5668\u65e0\u6cd5\u81ea\u52a8\u786e\u5b9a\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u5173\u7cfb\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4f7f\u7528\u751f\u547d\u5468\u671f\u6ce8\u89e3\u6765\u5e2e\u52a9\u7f16\u8bd1\u5668\u7406\u89e3\u5f15\u7528\u7684\u5173\u7cfb\u3002\u751f\u547d\u5468\u671f\u6ce8\u89e3\u7684\u8bed\u6cd5\u662f\u5c06\u751f\u547d\u5468\u671f\u53c2\u6570\u653e\u5728\u51fd\u6570\u7b7e\u540d\u4e2d\uff0c\u5e76\u4f7f\u7528\u5355\u5f15\u53f7\u6807\u8bc6\uff0c\u4f8b\u5982 <code>'a</code>\u3002</p> <pre><code>fn first_word(s: &amp;str) -&gt; &amp;str {\n    let bytes = s.as_bytes();\n\n    for (i, &amp;byte) in bytes.iter().enumerate() {\n        if byte == b' ' {\n            return &amp;s[0..i];\n        }\n    }\n\n    &amp;s[..]\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c<code>&amp;str</code> \u7c7b\u578b\u7684\u5f15\u7528 <code>s</code> \u6709\u4e00\u4e2a\u751f\u547d\u5468\u671f\uff0c\u4f46\u7f16\u8bd1\u5668\u53ef\u4ee5\u81ea\u52a8\u63a8\u65ad\u51fa\u6765\u3002\u5982\u679c\u7f16\u8bd1\u5668\u65e0\u6cd5\u81ea\u52a8\u63a8\u65ad\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u751f\u547d\u5468\u671f\u6ce8\u89e3\u6765\u660e\u786e\u6307\u5b9a\u5f15\u7528\u4e4b\u95f4\u7684\u751f\u547d\u5468\u671f\u5173\u7cfb\u3002</p> <p>\u8fd9\u4e9b\u662fRust\u4e2d\u4f5c\u7528\u57df\u89c4\u5219\u548c\u751f\u547d\u5468\u671f\u7684\u57fa\u672c\u6982\u5ff5\u3002\u5b83\u4eec\u5e2e\u52a9\u7f16\u8bd1\u5668\u8fdb\u884c\u6b63\u786e\u6027\u68c0\u67e5\uff0c\u9632\u6b62\u6570\u636e\u7ade\u4e89\u548c\u8d44\u6e90\u6cc4\u6f0f\uff0c\u4f7fRust\u6210\u4e3a\u4e00\u95e8\u5b89\u5168\u7684\u7cfb\u7edf\u7f16\u7a0b\u8bed\u8a00\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#151-raiiresource-acquisition-is-initialization","title":"15.1 RAII(Resource Acquisition Is Initialization)","text":"<p>\u8d44\u6e90\u83b7\u53d6\u5373\u521d\u59cb\u5316 / RAII(Resource Acquisition Is Initialization)\u662f\u4e00\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u4e3b\u8981\u7528\u4e8eC++\u548cRust\u7b49\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u65e8\u5728\u901a\u8fc7\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u6765\u7ba1\u7406\u8d44\u6e90\u7684\u83b7\u53d6\u548c\u91ca\u653e\u3002RAII\u7684\u6838\u5fc3\u601d\u60f3\u662f\u8d44\u6e90\u7684\u83b7\u53d6\u5e94\u8be5\u5728\u5bf9\u8c61\u7684\u6784\u9020\u9636\u6bb5\u5b8c\u6210\uff0c\u800c\u8d44\u6e90\u7684\u91ca\u653e\u5e94\u8be5\u5728\u5bf9\u8c61\u7684\u6790\u6784\u9636\u6bb5\u5b8c\u6210\uff0c\u4ece\u800c\u786e\u4fdd\u8d44\u6e90\u7684\u6b63\u786e\u7ba1\u7406\uff0c\u907f\u514d\u8d44\u6e90\u6cc4\u6f0f\u3002</p> <p>\u5728\u91d1\u878d\u9886\u57df\u7684\u8bed\u5883\u4e2d\uff0cRAII(Resource Acquisition Is Initialization)\u7684\u539f\u5219\u53ef\u4ee5\u7406\u89e3\u4e3a\u8d44\u6e90\u7684\u83b7\u53d6\u548c\u91ca\u653e\u4e0e\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u7d27\u5bc6\u76f8\u5173\uff0c\u4ee5\u786e\u4fdd\u91d1\u878d\u6570\u636e\u7684\u6b63\u786e\u7ba1\u7406\u548c\u8d44\u6e90\u7684\u5408\u7406\u4f7f\u7528\u3002\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u5728\u91d1\u878d\u80cc\u666f\u4e0b\u5e94\u7528RAII\u7684\u91cd\u8981\u6982\u5ff5\u548c\u539f\u5219\uff1a</p> <ol> <li> <p>\u8d44\u6e90\u7684\u83b7\u53d6\u548c\u91ca\u653e\u7ed1\u5b9a\u5230\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\uff1a \u5728\u91d1\u878d\u9886\u57df\uff0c\u8d44\u6e90\u53ef\u4ee5\u662f\u91d1\u878d\u6570\u636e\u3001\u4ea4\u6613\u8ba2\u5355\u3001\u6570\u636e\u5e93\u8fde\u63a5\u7b49\uff0c\u8fd9\u4e9b\u8d44\u6e90\u7684\u83b7\u53d6\u548c\u91ca\u653e\u5e94\u8be5\u4e0e\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u7d27\u5bc6\u7ed1\u5b9a\u3002\u8fd9\u786e\u4fdd\u4e86\u8d44\u6e90\u7684\u6b63\u786e\u4f7f\u7528\uff0c\u907f\u514d\u4e86\u8d44\u6e90\u6cc4\u6f0f\u6216\u9519\u8bef\u7684\u8d44\u6e90\u91ca\u653e\u3002</p> </li> <li> <p>\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u8d1f\u8d23\u8d44\u6e90\u7684\u83b7\u53d6\uff1a \u5728\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u5e94\u8be5\u8d1f\u8d23\u83b7\u53d6\u76f8\u5173\u8d44\u6e90\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5728\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u521b\u5efa\u65f6\u4ece\u6570\u636e\u5e93\u4e2d\u52a0\u8f7d\u6570\u636e\u6216\u5efa\u7acb\u7f51\u7edc\u8fde\u63a5\u3002</p> </li> <li> <p>\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u6790\u6784\u51fd\u6570\u8d1f\u8d23\u8d44\u6e90\u7684\u91ca\u653e\uff1a \u91d1\u878d\u6570\u636e\u5bf9\u8c61\u7684\u6790\u6784\u51fd\u6570\u5e94\u8be5\u8d1f\u8d23\u91ca\u653e\u4e0e\u5176\u5173\u8054\u7684\u8d44\u6e90\u3002\u8fd9\u53ef\u80fd\u5305\u62ec\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\u3001\u91ca\u653e\u5185\u5b58\u6216\u63d0\u4ea4\u4ea4\u6613\u8ba2\u5355\u3002</p> </li> <li> <p>\u81ea\u52a8\u5316\u7ba1\u7406\uff1a RAII\u7684\u4e00\u4e2a\u5173\u952e\u7279\u70b9\u662f\u8d44\u6e90\u7ba1\u7406\u7684\u81ea\u52a8\u5316\u3002\u5f53\u91d1\u878d\u6570\u636e\u5bf9\u8c61\u8d85\u51fa\u5176\u4f5c\u7528\u57df(\u4f8b\u5982\uff0c\u79bb\u5f00\u51fd\u6570\u6216\u4ee3\u7801\u5757)\u65f6\uff0c\u6790\u6784\u51fd\u6570\u4f1a\u81ea\u52a8\u8c03\u7528\uff0c\u786e\u4fdd\u8d44\u6e90\u88ab\u6b63\u786e\u91ca\u653e\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u4eba\u4e3a\u9519\u8bef\u7684\u53ef\u80fd\u6027\u3002</p> </li> <li> <p>\u5f02\u5e38\u5b89\u5168\u6027\uff1a \u5728\u91d1\u878d\u9886\u57df\uff0c\u5f02\u5e38\u5904\u7406\u975e\u5e38\u91cd\u8981\u3002RAII\u786e\u4fdd\u4e86\u5f02\u5e38\u5b89\u5168\u6027\uff0c\u5373\u4f7f\u5728\u5904\u7406\u91d1\u878d\u6570\u636e\u65f6\u53d1\u751f\u5f02\u5e38\uff0c\u4e5f\u4f1a\u786e\u4fdd\u76f8\u5173\u8d44\u6e90\u7684\u6b63\u786e\u91ca\u653e\uff0c\u4ece\u800c\u9632\u6b62\u6570\u636e\u4e0d\u4e00\u81f4\u6216\u8d44\u6e90\u6cc4\u6f0f\u3002</p> </li> <li> <p>\u5d4c\u5957\u8d44\u6e90\u7ba1\u7406\uff1a \u91d1\u878d\u6570\u636e\u5904\u7406\u901a\u5e38\u6d89\u53ca\u591a\u5c42\u5d4c\u5957\uff0c\u4f8b\u5982\uff0c\u4e00\u4e2a\u4ea4\u6613\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u8ba2\u5355\uff0c\u6bcf\u4e2a\u8ba2\u5355\u53ef\u80fd\u6d89\u53ca\u4e0d\u540c\u7684\u91d1\u878d\u5de5\u5177\u3002RAII\u53ef\u4ee5\u5e2e\u52a9\u7ba1\u7406\u8fd9\u4e9b\u5d4c\u5957\u8d44\u6e90\uff0c\u786e\u4fdd\u5b83\u4eec\u5728\u6b63\u786e\u7684\u65f6\u95f4\u88ab\u83b7\u53d6\u548c\u91ca\u653e\u3002</p> </li> <li> <p>\u901a\u7528\u6027\uff1a RAII\u539f\u5219\u5728\u91d1\u878d\u9886\u57df\u7684\u901a\u7528\u6027\u5f3a\uff0c\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u6570\u636e\u548c\u8d44\u6e90\u7ba1\u7406\uff0c\u5305\u62ec\u8bc1\u5238\u4ea4\u6613\u3001\u98ce\u9669\u7ba1\u7406\u3001\u6570\u636e\u5206\u6790\u7b49\u5404\u4e2a\u65b9\u9762\uff0c\u4ee5\u786e\u4fdd\u4ee3\u7801\u7684\u53ef\u9760\u6027\u548c\u5b89\u5168\u6027\u3002</p> </li> </ol> <p>\u5728C++\u4e2d\uff0cRAII\u901a\u5e38\u4f7f\u7528\u7c7b\u548c\u6790\u6784\u51fd\u6570\u6765\u5b9e\u73b0\u3002\u5728Rust\u4e2d\uff0cRAII\u7684\u6982\u5ff5\u4e0eC++\u7c7b\u4f3c\uff0c\u4f46\u4f7f\u7528\u4e86\u6240\u6709\u6743\u548c\u751f\u547d\u5468\u671f\u7cfb\u7edf\u6765\u786e\u4fdd\u8d44\u6e90\u7684\u5b89\u5168\u7ba1\u7406\uff0c\u800c\u4e0d\u9700\u8981\u663e\u5f0f\u7684\u6790\u6784\u51fd\u6570\u3002</p> <p>\u603b\u4e4b\uff0cRAII\u662f\u4e00\u79cd\u91cd\u8981\u7684\u8d44\u6e90\u7ba1\u7406\u8303\u5f0f\uff0c\u5b83\u901a\u8fc7\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f\u6765\u81ea\u52a8\u5316\u8d44\u6e90\u7684\u83b7\u53d6\u548c\u91ca\u653e\uff0c\u786e\u4fdd\u8d44\u6e90\u7684\u6b63\u786e\u7ba1\u7406\u548c\u5f02\u5e38\u5b89\u5168\u6027\u3002\u8fd9\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u53ef\u9760\u3001\u6613\u4e8e\u7ef4\u62a4\uff0c\u540c\u65f6\u51cf\u5c11\u4e86\u8d44\u6e90\u6cc4\u6f0f\u548c\u5185\u5b58\u6cc4\u6f0f\u7684\u98ce\u9669\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#152-drop-trait","title":"15.2 \u6790\u6784\u51fd\u6570 &amp; Drop trait","text":"<p>\u5728Rust\u4e2d\uff0c\u6790\u6784\u51fd\u6570\u7684\u6982\u5ff5\u4e0e\u4e00\u4e9b\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00(\u5982C++)\u4e2d\u7684\u6790\u6784\u51fd\u6570\u4e0d\u540c\u3002Rust\u4e2d**\u6ca1\u6709\u4f20\u7edf\u7684\u6790\u6784\u51fd\u6570**\uff0c\u800c\u662f\u901a\u8fc7<code>Drop</code> trait\u6765\u5b9e\u73b0\u8d44\u6e90\u7684\u91ca\u653e\u548c\u6e05\u7406\u64cd\u4f5c\u3002\u8ba9\u6211\u8be6\u7ec6\u89e3\u91ca\u4e00\u4e0b<code>Drop</code> trait\u4ee5\u53ca\u5982\u4f55\u5728Rust\u4e2d\u4f7f\u7528\u5b83\u6765\u7ba1\u7406\u8d44\u6e90\u3002</p> <p><code>Drop</code> trait\u662fRust\u4e2d\u7684\u4e00\u79cd\u7279\u6b8atrait\uff0c\u7528\u4e8e\u5b9a\u4e49\u8d44\u6e90\u91ca\u653e\u7684\u903b\u8f91\u3002\u5f53\u62e5\u6709\u5b9e\u73b0<code>Drop</code> trait\u7684\u7c7b\u578b\u7684\u503c\u7684\u751f\u547d\u5468\u671f\u7ed3\u675f\u65f6(\u4f8b\u5982\uff0c\u79bb\u5f00\u4f5c\u7528\u57df\u6216\u901a\u8fc7<code>std::mem::drop</code>\u51fd\u6570\u624b\u52a8\u91ca\u653e)\uff0cRust\u4f1a\u81ea\u52a8\u8c03\u7528\u8fd9\u4e2a\u7c7b\u578b\u7684<code>drop</code>\u65b9\u6cd5\uff0c\u4ee5\u8fdb\u884c\u8d44\u6e90\u6e05\u7406\u548c\u91ca\u653e\u3002</p> <p><code>Drop</code> trait\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a</p> <pre><code>pub trait Drop {\n    fn drop(&amp;mut self);\n}\n</code></pre> <p><code>Drop</code> trait\u53ea\u6709\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5373<code>drop</code>\u65b9\u6cd5\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528<code>&amp;mut self</code>\uff0c\u5728\u5176\u4e2d\u7f16\u5199\u8d44\u6e90\u7684\u91ca\u653e\u903b\u8f91\u3002</p> <p>\u793a\u4f8b\uff1a\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528<code>Drop</code> trait\u6765\u7ba1\u7406\u8d44\u6e90\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7ed3\u6784<code>FileHandler</code>\uff0c\u7528\u4e8e\u6253\u5f00\u6587\u4ef6\uff0c\u5e76\u5728\u5bf9\u8c61\u9500\u6bc1\u65f6\u5173\u95ed\u6587\u4ef6\uff1a</p> <pre><code>use std::fs::File;\nuse std::io::Write;\n\nstruct FileHandler {\n    file: File,\n}\n\nimpl FileHandler {\n    fn new(filename: &amp;str) -&gt; std::io::Result&lt;Self&gt; {\n        let file = File::create(filename)?;\n        Ok(FileHandler { file })\n    }\n\n    fn write_data(&amp;mut self, data: &amp;[u8]) -&gt; std::io::Result&lt;usize&gt; {\n        self.file.write(data)\n    }\n}\n\nimpl Drop for FileHandler {\n    fn drop(&amp;mut self) {\n        println!(\"Closing file.\");\n    }\n}\n\nfn main() -&gt; std::io::Result&lt;()&gt; {\n    let mut file_handler = FileHandler::new(\"example.txt\")?;\n    file_handler.write_data(b\"Hello, RAII!\")?;\n\n    // file_handler\u5bf9\u8c61\u5728\u8fd9\u91cc\u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u89e6\u53d1Drop trait\u4e2d\u7684drop\u65b9\u6cd5\n    // \u6587\u4ef6\u4f1a\u88ab\u81ea\u52a8\u5173\u95ed\n    Ok(())\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c<code>FileHandler</code>\u7ed3\u6784\u5b9e\u73b0\u4e86<code>Drop</code> trait\uff0c\u5728<code>drop</code>\u65b9\u6cd5\u4e2d\u5173\u95ed\u6587\u4ef6\u3002\u5f53<code>file_handler</code>\u5bf9\u8c61\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0c<code>Drop</code> trait\u7684<code>drop</code>\u65b9\u6cd5\u4f1a\u88ab\u81ea\u52a8\u8c03\u7528\uff0c\u5173\u95ed\u6587\u4ef6\u3002\u8fd9\u786e\u4fdd\u4e86\u6587\u4ef6\u8d44\u6e90\u7684\u6b63\u786e\u91ca\u653e\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#153-lifetimes","title":"15.3 \u751f\u547d\u5468\u671f\uff08Lifetimes\uff09\u8be6\u89e3","text":"<p>\u751f\u547d\u5468\u671f\uff08Lifetimes\uff09\u662fRust\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u786e\u4fdd\u5185\u5b58\u5b89\u5168\u548c\u9632\u6b62\u6570\u636e\u7ade\u4e89\u3002\u5728Rust\u4e2d\uff0c\u751f\u547d\u5468\u671f\u6307\u5b9a\u4e86\u5f15\u7528\u7684\u6709\u6548\u8303\u56f4\uff0c\u5e2e\u52a9\u7f16\u8bd1\u5668\u68c0\u67e5\u5f15\u7528\u662f\u5426\u5408\u6cd5\u3002\u5728\u8fdb\u9636Rust\u4e2d\uff0c\u6211\u4eec\u5c06\u6df1\u5165\u63a2\u8ba8\u751f\u547d\u5468\u671f\u7684\u9ad8\u7ea7\u6982\u5ff5\u548c\u5e94\u7528\u3002</p> <p>\u5728\u8fdb\u9636Rust\u4e2d\uff0c\u6211\u4eec\u5c06\u6df1\u5165\u63a2\u8ba8\u751f\u547d\u5468\u671f\u7684\u9ad8\u7ea7\u6982\u5ff5\u548c\u5e94\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#1531","title":"15.3.1 \u751f\u547d\u5468\u671f\u7684\u81ea\u52a8\u63a8\u65ad\u548c\u7701\u7565","text":"<p>\u5176\u5b9eRust\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u751a\u81f3\u5f0f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u81ea\u52a8\u63a8\u65ad\u751f\u547d\u5468\u671f\uff0c\u4f46\u6709\u65f6\u9700\u8981\u663e\u5f0f\u6ce8\u89e3\u6765\u5e2e\u52a9\u7f16\u8bd1\u5668\u7406\u89e3\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5173\u4e8eRust\u751f\u547d\u5468\u671f\u81ea\u52a8\u63a8\u65ad\u7684\u793a\u4f8b\u548c\u89e3\u91ca\u3002</p> <pre><code>fn get_length(s: &amp;str) -&gt; usize {\n    s.len()\n}\n\nfn main() {\n    let text = String::from(\"Hello, Rust!\");\n    let length = get_length(&amp;text);\n    println!(\"Length: {}\", length);\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c<code>get_length</code>\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a<code>&amp;str</code>\u5f15\u7528\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u6ca1\u6709\u663e\u5f0f\u6307\u5b9a\u751f\u547d\u5468\u671f\u3002Rust\u4f1a\u81ea\u52a8\u63a8\u65ad\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\uff0c\u4f7f\u5176\u4e0e\u8c03\u7528\u8005\u7684\u751f\u547d\u5468\u671f\u76f8\u7b26\u3002</p> <p>\u4f46\u662f\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u4f60\u9700\u8981\u663e\u5f0f\u58f0\u660e\u751f\u547d\u5468\u671f\u53c2\u6570\u6765\u4f7f\u4ee3\u7801\u5408\u6cd5\uff1a</p> <pre><code>fn shorter&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str, z: &amp;'a str) -&gt; &amp;str {\n    if x.len() &lt;= y.len() &amp;&amp; x.len() &lt;= z.len() {\n        x\n    } else if y.len() &lt;= x.len() &amp;&amp; y.len() &lt;= z.len() {\n        y\n    } else {\n        z\n    }\n}\n\nfn main() {\n    let string1 = String::from(\"abcd\");\n    let string2 = \"xyz\";\n    let string3 = \"lmnop\";\n\n    let result = shorter(string1.as_str(), string2, string3);\n    println!(\"The shortest string is {}\", result);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>error[E0106]: missing lifetime specifier\n --&gt; src/main.rs:1:55\n  |\n1 | fn shorter&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str, z: &amp;'a str) -&gt; &amp;str {\n  |                   -------     -------     -------     ^ expected named lifetime parameter\n  |\n  = help: this function's return type contains a borrowed value with an elided lifetime, but the lifetime cannot be derived from the arguments\nhelp: consider using the `'a` lifetime\n  |\n1 | fn shorter&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str, z: &amp;'a str) -&gt; &amp;'a str {\n  |                                                        ++\n\nFor more information about this error, try `rustc --explain E0106`.\nerror: could not compile `book_test` (bin \"book_test\") due to previous error\n</code></pre> <p>\u5728 Rust \u4e2d\uff0c\u751f\u547d\u5468\u671f\u53c2\u6570\u5e94\u8be5\u5728\u51fd\u6570\u53c2\u6570\u548c\u8fd4\u56de\u503c\u4e2d\u4fdd\u6301\u4e00\u81f4\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u501f\u7528\u89c4\u5219\u5f97\u5230\u6b63\u786e\u7684\u5e94\u7528\u548c\u7f16\u8bd1\u5668\u80fd\u591f\u7406\u89e3\u4ee3\u7801\u7684\u751f\u547d\u5468\u671f\u8981\u6c42\u3002\u5728\u4f60\u7684 <code>shorter</code> \u51fd\u6570\u4e2d\uff0c\u6240\u6709\u7684\u53c2\u6570\u548c\u8fd4\u56de\u503c\u5f15\u7528\u90fd\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u751f\u547d\u5468\u671f\u53c2\u6570 <code>'a</code>\uff0c\u8fd9\u662f\u6b63\u786e\u7684\u505a\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u5e94\u8be5\u5728\u540c\u4e00\u4e2a\u751f\u547d\u5468\u671f\u5185\u6709\u6548\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#1532","title":"15.3.2 \u751f\u547d\u5468\u671f\u548c\u7ed3\u6784\u4f53","text":"<p>\u5728\u7ed3\u6784\u4f53\u4e2d\u6807\u6ce8\u751f\u547d\u5468\u671f\u548c\u51fd\u6570\u7684\u7c7b\u4f3c, \u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u6807\u6ce8\u6765\u4f7f\u53d8\u91cf\u6216\u8005\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u8d85\u8fc7\u7ed3\u6784\u4f53\u6216\u8005\u679a\u4e3e\u672c\u8eab\u3002\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50:</p> <pre><code>#[derive(Debug)]\nstruct Book&lt;'a&gt; {\n    title: &amp;'a str,\n    author: &amp;'a str,\n}\n\n#[derive(Debug)]\nstruct Chapter&lt;'a&gt; {\n    book: &amp;'a Book&lt;'a&gt;,\n    title: &amp;'a str,\n}\n\nfn main() {\n    let book_title = \"Rust Programming\";\n    let book_author = \"Arthur\";\n\n    let book = Book {\n        title: &amp;book_title,\n        author: &amp;book_author,\n    };\n\n    let chapter_title = \"Chapter 1: Introduction\";\n    let chapter = Chapter {\n        book: &amp;book,\n        title: &amp;chapter_title,\n    };\n\n    println!(\"Book: {:?}\", book);\n    println!(\"Chapter: {:?}\", chapter);\n}\n</code></pre> <p>\u5728\u8fd9\u91cc\uff0c<code>'a</code> \u662f\u4e00\u4e2a\u751f\u547d\u5468\u671f\u53c2\u6570\uff0c\u5b83\u544a\u8bc9\u7f16\u8bd1\u5668\u5f15\u7528 <code>title</code> \u548c <code>author</code> \u7684\u6709\u6548\u8303\u56f4\u4e0e <code>'a</code> \u76f8\u5173\u8054\u3002\u8fd9\u610f\u5473\u7740 <code>title</code> \u548c <code>author</code> \u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u4e0d\u80fd\u8d85\u8fc7\u4e0e <code>Book</code> \u7ed3\u6784\u4f53\u5173\u8054\u7684\u751f\u547d\u5468\u671f <code>'a</code>\u3002</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u6765\u770b <code>Chapter</code> \u7ed3\u6784\u4f53\uff0c\u5b83\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9 <code>Book</code> \u7ed3\u6784\u4f53\u7684\u5f15\u7528\uff0c\u4ee5\u53ca\u7ae0\u8282\u7684\u6807\u9898\u5f15\u7528\u3002\u6ce8\u610f\uff0c<code>Chapter</code> \u7ed3\u6784\u4f53\u7684\u751f\u547d\u5468\u671f\u53c2\u6570 <code>'a</code> \u4e0e <code>Book</code> \u7ed3\u6784\u4f53\u7684\u751f\u547d\u5468\u671f\u53c2\u6570\u76f8\u540c\uff0c\u8fd9\u610f\u5473\u7740 <code>Chapter</code> \u7ed3\u6784\u4f53\u4e2d\u7684\u5f15\u7528\u4e5f\u5fc5\u987b\u5728 <code>'a</code> \u751f\u547d\u5468\u671f\u5185\u6709\u6548\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#1533-static","title":"15.3.3 static","text":"<p>\u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>static</code>\u58f0\u660e\u6765\u521b\u5efa\u5177\u6709\u9759\u6001\u751f\u547d\u5468\u671f\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u5c06\u5728\u6574\u4e2a\u7a0b\u5e8f\u8fd0\u884c\u671f\u95f4\u5b58\u5728\uff0c\u5e76\u4e14\u53ef\u4ee5\u88ab\u5f3a\u5236\u8f6c\u6362\u6210\u66f4\u77ed\u7684\u751f\u547d\u5468\u671f\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7ed9\u4e50\u961f\u6210\u5458\u62a5\u5e55\u7684Rust\u4ee3\u7801\u793a\u4f8b\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u4e50\u961f\u6210\u5458\u4fe1\u606f\u7684\u7ed3\u6784\u4f53\nstruct BandMember {\n    name: &amp;'static str,\n    age: u32,\n    instrument: &amp;'static str,\n}\n\n// \u58f0\u660e\u4e00\u4e2a\u5177\u6709 'static \u751f\u547d\u5468\u671f\u7684\u5168\u5c40\u53d8\u91cf\nstatic BAND_MEMBERS: [BandMember; 4] = [\n    BandMember { name: \"John\", age: 30, instrument: \"\u5409\u4ed6\u624b\" },\n    BandMember { name: \"Lisa\", age: 28, instrument: \"\u8d1d\u65af\u624b\" },\n    BandMember { name: \"Mike\", age: 32, instrument: \"\u9f13\u624b\" },\n    BandMember { name: \"Sarah\", age: 25, instrument: \"\u952e\u76d8\u624b\" },\n];\n\nfn main() {\n    // \u7ed9\u4e50\u961f\u6210\u5458\u62a5\u5e55\n    for member in BAND_MEMBERS.iter() {\n        println!(\"\u6b22\u8fce {}\uff0c{}\u5c81\uff0c\u8d1f\u8d23{}\uff01\", member.name, member.age, member.instrument);\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u6b22\u8fce John\uff0c30\u5c81\uff0c\u8d1f\u8d23\u5409\u4ed6\u624b\uff01\n\u6b22\u8fce Lisa\uff0c28\u5c81\uff0c\u8d1f\u8d23\u8d1d\u65af\u624b\uff01\n\u6b22\u8fce Mike\uff0c32\u5c81\uff0c\u8d1f\u8d23\u9f13\u624b\uff01\n\u6b22\u8fce Sarah\uff0c25\u5c81\uff0c\u8d1f\u8d23\u952e\u76d8\u624b\uff01\n</code></pre> <p>\u5728\u8fd9\u4e2a\u6267\u884c\u7ed3\u679c\u4e2d\uff0c\u7a0b\u5e8f\u4f7f\u7528<code>println!</code>\u5b8f\u4e3a\u6bcf\u4f4d\u4e50\u961f\u6210\u5458\u751f\u6210\u4e86\u4e00\u6761\u62a5\u5e55\u4fe1\u606f\uff0c\u663e\u793a\u4e86\u4ed6\u4eec\u7684\u59d3\u540d\u3001\u5e74\u9f84\u548c\u62c5\u4efb\u7684\u4e50\u5668\u3002\u8fd9\u6837\u5c31\u6a21\u62df\u4e86\u7ed9\u4e50\u961f\u6210\u5458\u62a5\u5e55\u7684\u6548\u679c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#static","title":"\u6848\u4f8b <code>'static</code> \u5728\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u4f5c\u7528","text":"<p><code>'static</code> \u5728\u91cf\u5316\u91d1\u878d\u4e2d\u53ef\u4ee5\u5177\u6709\u91cd\u8981\u7684\u4f5c\u7528\uff0c\u5c24\u5176\u662f\u5728\u5904\u7406\u5e38\u91cf\u3001\u5168\u5c40\u914d\u7f6e\u3001\u53c2\u6570\u4ee5\u53ca\u6a21\u578b\u53c2\u6570\u7b49\u65b9\u9762\u3002\u4ee5\u4e0b\u662f\u4e94\u4e2a\u7b80\u5355\u7684\u6848\u4f8b\u793a\u4f8b\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#1","title":"1: \u5168\u5c40\u914d\u7f6e\u548c\u53c2\u6570","text":"<p>\u5728\u4e00\u4e2a\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u5168\u5c40\u914d\u7f6e\u548c\u53c2\u6570\uff0c\u4f8b\u5982\u4ea4\u6613\u624b\u7eed\u8d39\u3001\u5e02\u573a\u6570\u636e\u6e90\u548c\u56de\u6d4b\u5468\u671f\uff0c\u5e76\u5c06\u5b83\u4eec\u5b58\u50a8\u5728\u5177\u6709 <code>'static</code> \u751f\u547d\u5468\u671f\u7684\u5168\u5c40\u53d8\u91cf\u4e2d\uff1a</p> <pre><code>static TRADING_COMMISSION: f64 = 0.005; // \u4ea4\u6613\u624b\u7eed\u8d39\u7387 (0.5%)\nstatic MARKET_DATA_SOURCE: &amp;str = \"NASDAQ\"; // \u5e02\u573a\u6570\u636e\u6e90\nstatic BACKTEST_PERIOD: u32 = 365; // \u56de\u6d4b\u5468\u671f\uff08\u4e00\u5e74\uff09\n</code></pre> <p>\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u5728\u6574\u4e2a\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u4e2d\u5171\u4eab\u548c\u8bbf\u95ee\uff0c\u4ee5\u786e\u4fdd\u4e00\u81f4\u6027\u548c\u65b9\u4fbf\u7684\u914d\u7f6e\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#2","title":"2: \u6a21\u578b\u53c2\u6570","text":"<p>\u5047\u8bbe\u4f60\u6b63\u5728\u5f00\u53d1\u4e00\u4e2a\u91d1\u878d\u6a21\u578b\uff0c\u4f8b\u5982\u5e03\u83b1\u514b-\u65af\u79d1\u5c14\u65af\u671f\u6743\u5b9a\u4ef7\u6a21\u578b\u3002\u6a21\u578b\u4e2d\u7684\u53c2\u6570\uff08\u4f8b\u5982\u6ce2\u52a8\u7387\u3001\u65e0\u98ce\u9669\u5229\u7387\uff09\u53ef\u4ee5\u5b9a\u4e49\u4e3a <code>'static</code> \u751f\u547d\u5468\u671f\u7684\u5168\u5c40\u53d8\u91cf\uff1a</p> <pre><code>static VOLATILITY: f64 = 0.2; // \u6ce2\u52a8\u7387\u53c2\u6570\nstatic RISK_FREE_RATE: f64 = 0.03; // \u65e0\u98ce\u9669\u5229\u7387\n</code></pre> <p>\u8fd9\u4e9b\u6a21\u578b\u53c2\u6570\u53ef\u4ee5\u5728\u6574\u4e2a\u6a21\u578b\u7684\u5b9e\u73b0\u4e2d\u4f7f\u7528\uff0c\u800c\u4e0d\u5fc5\u5728\u51fd\u6570\u4e4b\u95f4\u4f20\u9012\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#3","title":"3: \u5e38\u91cf\u5b9a\u4e49","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u4e2d\uff0c\u5e38\u5e38\u6709\u4e00\u4e9b\u5e38\u91cf\uff0c\u5982\u4ea4\u6613\u6240\u7684\u4ea4\u6613\u65f6\u95f4\u8868\u3001\u8bc1\u5238\u4ee3\u7801\u524d\u7f00\u7b49\u3002\u8fd9\u4e9b\u5e38\u91cf\u53ef\u4ee5\u5b9a\u4e49\u4e3a <code>'static</code> \u751f\u547d\u5468\u671f\u7684\u5168\u5c40\u5e38\u91cf\uff1a</p> <pre><code>static TRADING_HOURS: [u8; 24] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]; // \u4ea4\u6613\u65f6\u95f4\nstatic STOCK_PREFIX: &amp;str = \"AAPL\"; // \u8bc1\u5238\u4ee3\u7801\u524d\u7f00\n</code></pre> <p>\u8fd9\u4e9b\u5e38\u91cf\u53ef\u4ee5\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\uff0c\u800c\u65e0\u9700\u91cd\u590d\u5b9a\u4e49\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#4","title":"4: \u7f13\u5b58\u6570\u636e","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u7f13\u5b58\u5e02\u573a\u6570\u636e\uff0c\u4ee5\u51cf\u5c11\u5bf9\u5916\u90e8\u6570\u636e\u6e90\u7684\u9891\u7e41\u8bbf\u95ee\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>'static</code> \u751f\u547d\u5468\u671f\u7684\u53d8\u91cf\u6765\u5b58\u50a8\u7f13\u5b58\u6570\u636e\uff1a</p> <pre><code>static mut PRICE_CACHE: HashMap&lt;String, f64&gt; = HashMap::new(); // \u4ef7\u683c\u7f13\u5b58\n</code></pre> <p>\u8fd9\u4e2a\u7f13\u5b58\u53ef\u4ee5\u5728\u591a\u4e2a\u51fd\u6570\u4e2d\u4f7f\u7528\uff0c\u4ee5\u4fbf\u5feb\u901f\u8bbf\u95ee\u6700\u8fd1\u7684\u4ef7\u683c\u6570\u636e\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2015%20-%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%A7%84%E5%88%99%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#5","title":"5: \u5355\u4f8b\u6a21\u5f0f","text":"<p>\u5047\u8bbe\u4f60\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u5355\u4f8b\u5bf9\u8c61\uff0c\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u5668\uff0c\u4ee5\u786e\u4fdd\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>'static</code> \u751f\u547d\u5468\u671f\u6765\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\uff1a</p> <pre><code>struct Logger {\n    // \u65e5\u5fd7\u8bb0\u5f55\u5668\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\n}\n\nimpl Logger {\n    fn new() -&gt; Self {\n        Logger {\n            // \u521d\u59cb\u5316\u65e5\u5fd7\u8bb0\u5f55\u5668\n        }\n    }\n}\n\nstatic LOGGER: Logger = Logger::new(); // \u5355\u4f8b\u65e5\u5fd7\u8bb0\u5f55\u5668\n\nfn main() {\n    // \u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 LOGGER \u8bbf\u95ee\u5355\u4f8b\u65e5\u5fd7\u8bb0\u5f55\u5668\n    LOGGER.log(\"This is a log message\");\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c<code>LOGGER</code> \u662f\u5177\u6709 <code>'static</code> \u751f\u547d\u5468\u671f\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u786e\u4fdd\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u53ea\u6709\u4e00\u4e2a\u65e5\u5fd7\u8bb0\u5f55\u5668\u5b9e\u4f8b\u3002</p> <p>\u8fd9\u4e9b\u6848\u4f8b\u7a81\u51fa\u4e86\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u4f7f\u7528 <code>'static</code> \u751f\u547d\u5468\u671f\u7684\u4e0d\u540c\u60c5\u51b5\uff0c\u4ee5\u7ba1\u7406\u5168\u5c40\u914d\u7f6e\u3001\u6a21\u578b\u53c2\u6570\u3001\u5e38\u91cf\u3001\u7f13\u5b58\u6570\u636e\u548c\u5355\u4f8b\u5bf9\u8c61\u3002\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u3001\u4e00\u81f4\u6027\u548c\u6027\u80fd\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/","title":"Chapter 16 - \u9519\u8bef\u5904\u7406\u8fdb\u9636(Advanced Error handling)","text":"<p>Rust \u4e2d\u7684\u9519\u8bef\u5904\u7406\u5177\u6709\u5f88\u9ad8\u7684\u7075\u6d3b\u6027\u548c\u8868\u73b0\u529b\u3002\u9664\u4e86\u57fa\u672c\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\uff08\u4f7f\u7528 <code>Result</code> \u548c <code>Option</code>\uff09\uff0cRust \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9ad8\u9636\u7684\u9519\u8bef\u5904\u7406\u6280\u672f\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\u3001\u9519\u8bef\u94fe\u3001\u9519\u8bef\u5904\u7406\u5b8f\u7b49\u3002</p> <p>\u4ee5\u4e0b\u662f Rust \u4e2d\u9519\u8bef\u5904\u7406\u7684\u4e00\u4e9b\u9ad8\u9636\u7528\u6cd5\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#161","title":"16.1 \u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b","text":"<p>Rust \u5141\u8bb8\u4f60\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u7c7b\u578b\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u8868\u8fbe\u4f60\u7684\u9519\u8bef\u60c5\u51b5\u3002\u8fd9\u901a\u5e38\u6d89\u53ca\u521b\u5efa\u4e00\u4e2a\u679a\u4e3e\uff0c\u5176\u4e2d\u7684\u53d8\u4f53\u8868\u793a\u4e0d\u540c\u7684\u9519\u8bef\u60c5\u51b5\u3002\u4f60\u53ef\u4ee5\u5b9e\u73b0 <code>std::error::Error</code> trait \u6765\u4e3a\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\u63d0\u4f9b\u989d\u5916\u7684\u4fe1\u606f\u3002</p> <pre><code>use std::error::Error;\nuse std::fmt;\n\n// \u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\n#[derive(Debug)]\nenum MyError {\n    IoError(std::io::Error),\n    CustomError(String),\n}\n\n// \u5b9e\u73b0 Error trait\nimpl Error for MyError {}\n\n// \u5b9e\u73b0 Display trait \u7528\u4e8e\u6253\u5370\u9519\u8bef\u4fe1\u606f\nimpl fmt::Display for MyError {\n    fn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result {\n        match *self {\n            MyError::IoError(ref e) =&gt; write!(f, \"IO Error: {}\", e),\n            MyError::CustomError(ref msg) =&gt; write!(f, \"Custom Error: {}\", msg),\n        }\n    }\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#162","title":"16.2 \u9519\u8bef\u94fe","text":"<p>Rust \u5141\u8bb8\u4f60\u5728\u9519\u8bef\u5904\u7406\u4e2d\u521b\u5efa\u9519\u8bef\u94fe\uff0c\u4ee5\u8ddf\u8e2a\u9519\u8bef\u7684\u6765\u6e90\u3002\u8fd9\u5728\u8c03\u8bd5\u590d\u6742\u7684\u9519\u8bef\u65f6\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u663e\u793a\u9519\u8bef\u4f20\u64ad\u7684\u8def\u5f84\u3002</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570 `foo`\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a Result \u7c7b\u578b\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\nfn foo() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {\n    // \u6a21\u62df\u4e00\u4e2a\u9519\u8bef\uff0c\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u81ea\u5b9a\u4e49\u9519\u8bef\u6d88\u606f\u7684 Result\n    let err: Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; = Err(Box::new(MyError::CustomError(\"Something went wrong\".to_string())));\n    // \u4f7f\u7528 `?` \u8fd0\u7b97\u7b26\uff0c\u5982\u679c `err` \u5305\u542b\u9519\u8bef\uff0c\u5219\u5c06\u9519\u8bef\u7acb\u5373\u8fd4\u56de\n    err?;\n    // \u5982\u679c\u6ca1\u6709\u9519\u8bef\uff0c\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u6210\u529f\u7684 Ok(())\n    Ok(())\n}\n\nfn main() {\n    // \u8c03\u7528 `foo` \u51fd\u6570\u5e76\u68c0\u67e5\u5176\u8fd4\u56de\u503c\n    if let Err(e) = foo() {\n        // \u5982\u679c\u5b58\u5728\u9519\u8bef\uff0c\u6253\u5370\u9519\u8bef\u6d88\u606f\n        println!(\"Error: {}\", e);\n\n        // \u521d\u59cb\u5316\u4e00\u4e2a\u9519\u8bef\u94fe\u7684\u6e90\uff08source\uff09\u8fed\u4ee3\u5668\n        let mut source = e.source();\n\n        // \u4f7f\u7528\u8fed\u4ee3\u5668\u904d\u5386\u9519\u8bef\u94fe\n        while let Some(err) = source {\n            // \u6253\u5370\u6bcf\u4e2a\u9519\u8bef\u94fe\u4e2d\u7684\u9519\u8bef\u6d88\u606f\n            println!(\"Caused by: {}\", err);\n            // \u83b7\u53d6\u4e0b\u4e00\u4e2a\u9519\u8bef\u94fe\u7684\u6e90\n            source = err.source();\n        }\n    }\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Error: Something went wrong\nCaused by: Something went wrong\n</code></pre> <p>\u89e3\u91ca\u548c\u539f\u7406\uff1a</p> <ol> <li><code>fn foo() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt;</code>\uff1a\u8fd9\u662f\u4e00\u4e2a\u51fd\u6570\u7b7e\u540d\uff0c\u8868\u793a <code>foo</code> \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a <code>Result</code> \u7c7b\u578b\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u7a7a\u5143\u7ec4 <code>()</code>\uff0c\u8868\u793a\u6210\u529f\u65f6\u4e0d\u8fd4\u56de\u5177\u4f53\u7684\u503c\u3002\u540c\u65f6\uff0c\u9519\u8bef\u7c7b\u578b\u4e3a <code>Box&lt;dyn std::error::Error&gt;</code>\uff0c\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u8fd4\u56de\u4efb\u4f55\u5b9e\u73b0\u4e86 <code>std::error::Error</code> trait \u7684\u9519\u8bef\u7c7b\u578b\u3002</li> <li><code>let err: Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; = Err(Box::new(MyError::CustomError(\"Something went wrong\".to_string())));</code>\uff1a\u5728\u51fd\u6570\u5185\u90e8\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9519\u8bef\u5bf9\u8c61 <code>MyError::CustomError</code> \u5e76\u5c06\u5176\u5305\u88c5\u5728 <code>Box</code> \u4e2d\uff0c\u7136\u540e\u5c06\u5176\u5305\u88c5\u6210\u4e00\u4e2a <code>Result</code> \u5bf9\u8c61 <code>err</code>\u3002\u8fd9\u4e2a\u9519\u8bef\u8868\u793a \"Something went wrong\"\u3002</li> <li><code>err?;</code>\uff1a\u8fd9\u662f\u4e00\u4e2a\u77ed\u8def\u8fd0\u7b97\u7b26\uff0c\u5982\u679c <code>err</code> \u5305\u542b\u9519\u8bef\uff0c\u5219\u4f1a\u7acb\u5373\u8fd4\u56de\u9519\u8bef\uff0c\u5426\u5219\u7ee7\u7eed\u6267\u884c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c <code>err</code> \u5305\u542b\u9519\u8bef\uff0c<code>foo</code> \u51fd\u6570\u4f1a\u7acb\u5373\u8fd4\u56de\u8be5\u9519\u8bef\u3002</li> <li><code>if let Err(e) = foo() { ... }</code>\uff1a\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u8c03\u7528 <code>foo</code> \u51fd\u6570\u5e76\u68c0\u67e5\u5176\u8fd4\u56de\u503c\u3002\u5982\u679c\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u9519\u8bef\uff0c\u5c06\u9519\u8bef\u5bf9\u8c61\u7ed1\u5b9a\u5230\u53d8\u91cf <code>e</code> \u4e2d\u3002</li> <li><code>println!(\"Error: {}\", e);</code>\uff1a\u5982\u679c\u5b58\u5728\u9519\u8bef\uff0c\u6253\u5370\u9519\u8bef\u6d88\u606f\u3002</li> <li><code>let mut source = e.source();</code>\uff1a\u521d\u59cb\u5316\u4e00\u4e2a\u9519\u8bef\u94fe\u7684\u6e90\uff08source\uff09\u8fed\u4ee3\u5668\uff0c\u4ee5\u4fbf\u904d\u5386\u9519\u8bef\u94fe\u3002</li> <li><code>while let Some(err) = source { ... }</code>\uff1a\u4f7f\u7528 <code>while let</code> \u5faa\u73af\u904d\u5386\u9519\u8bef\u94fe\uff0c\u9010\u4e2a\u6253\u5370\u9519\u8bef\u94fe\u4e2d\u7684\u9519\u8bef\u6d88\u606f\uff0c\u5e76\u83b7\u53d6\u4e0b\u4e00\u4e2a\u9519\u8bef\u94fe\u7684\u6e90\u3002\u8fd9\u5141\u8bb8\u4f60\u67e5\u770b\u5bfc\u81f4\u9519\u8bef\u7684\u5168\u90e8\u5386\u53f2\u3002</li> </ol> <p>\u8fd9\u6bb5\u4ee3\u7801\u6f14\u793a\u4e86\u5982\u4f55\u5904\u7406\u9519\u8bef\uff0c\u5e76\u5728\u9519\u8bef\u94fe\u4e2d\u8ffd\u8e2a\u9519\u8bef\u7684\u6765\u6e90\u3002\u8fd9\u5bf9\u4e8e\u8c03\u8bd5\u548c\u6392\u67e5\u95ee\u9898\u975e\u5e38\u6709\u7528\uff0c\u5c24\u5176\u662f\u5728\u590d\u6742\u7684\u9519\u8bef\u573a\u666f\u4e0b\u3002</p> <p>\u5728\u91cf\u5316\u91d1\u878d Rust \u5f00\u53d1\u4e2d\uff0c\u9519\u8bef\u94fe\u53ef\u4ee5\u5e94\u7528\u4e8e\u65b9\u65b9\u9762\u9762\uff0c\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u9760\u6027\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u53ef\u80fd\u7684\u5e94\u7528\u573a\u666f\uff1a</p> <ol> <li> <p>\u6570\u636e\u6e90\u8fde\u63a5\u548c\u89e3\u6790\uff1a \u5728\u91cf\u5316\u91d1\u878d\u4e2d\uff0c\u6570\u636e\u6e90\u53ef\u80fd\u6765\u81ea\u5404\u79cd\u5e02\u573a\u6570\u636e\u63d0\u4f9b\u5546\u548c\u4ea4\u6613\u6240\u3002\u4f7f\u7528\u9519\u8bef\u94fe\u53ef\u4ee5\u66f4\u597d\u5730\u5904\u7406\u6570\u636e\u6e90\u7684\u8fde\u63a5\u9519\u8bef\u3001\u6570\u636e\u89e3\u6790\u9519\u8bef\u4ee5\u53ca\u6570\u636e\u8d28\u91cf\u95ee\u9898\u3002</p> </li> <li> <p>\u7b56\u7565\u6267\u884c\u548c\u4ea4\u6613\uff1a \u91cf\u5316\u7b56\u7565\u7684\u6267\u884c\u548c\u4ea4\u6613\u53ef\u80fd\u6d89\u53ca\u5230\u590d\u6742\u7684\u7b97\u6cd5\u548c\u8ba2\u5355\u7ba1\u7406\u3002\u9519\u8bef\u94fe\u53ef\u4ee5\u7528\u4e8e\u8ddf\u8e2a\u7b56\u7565\u6267\u884c\u4e2d\u7684\u9519\u8bef\uff0c\u5305\u62ec\u8ba2\u5355\u6267\u884c\u9519\u8bef\u3001\u4ef7\u683c\u8ba1\u7b97\u9519\u8bef\u7b49\u3002</p> </li> <li> <p>\u6570\u636e\u5b58\u50a8\u548c\u67e5\u8be2\uff1a \u91d1\u878d\u6570\u636e\u7684\u5b58\u50a8\u548c\u67e5\u8be2\u901a\u5e38\u6d89\u53ca\u6570\u636e\u5e93\u64cd\u4f5c\u3002\u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u5904\u7406\u6570\u636e\u5e93\u8fde\u63a5\u95ee\u9898\u3001\u6570\u636e\u63d2\u5165/\u67e5\u8be2\u9519\u8bef\u4ee5\u53ca\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898\u3002</p> </li> <li> <p>\u98ce\u9669\u7ba1\u7406\uff1a \u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u9700\u8981\u8fdb\u884c\u98ce\u9669\u7ba1\u7406\u548c\u76d1\u63a7\u3002\u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u8bb0\u5f55\u98ce\u9669\u68c0\u6d4b\u3001\u98ce\u9669\u9650\u5236\u8fdd\u89c4\u4ee5\u53ca\u98ce\u9669\u62a5\u544a\u751f\u6210\u4e2d\u7684\u95ee\u9898\u3002</p> </li> <li> <p>\u6a21\u578b\u5f00\u53d1\u548c\u9a8c\u8bc1\uff1a \u91d1\u878d\u6a21\u578b\u7684\u5f00\u53d1\u548c\u9a8c\u8bc1\u53ef\u80fd\u6d89\u53ca\u6570\u5b66\u8ba1\u7b97\u548c\u6a21\u62df\u3002\u9519\u8bef\u94fe\u53ef\u4ee5\u7528\u4e8e\u8ddf\u8e2a\u6a21\u578b\u9a8c\u8bc1\u8fc7\u7a0b\u4e2d\u7684\u9519\u8bef\u548c\u5f02\u5e38\u60c5\u51b5\u3002</p> </li> <li> <p>\u901a\u4fe1\u548c\u62a5\u544a\uff1a \u91d1\u878d\u7cfb\u7edf\u9700\u8981\u4e0e\u4ea4\u6613\u6240\u3001\u76d1\u7ba1\u673a\u6784\u548c\u5ba2\u6237\u8fdb\u884c\u901a\u4fe1\u3002\u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u5904\u7406\u901a\u4fe1\u9519\u8bef\u3001\u62a5\u544a\u751f\u6210\u9519\u8bef\u4ee5\u53ca\u4e0e\u5916\u90e8\u5b9e\u4f53\u7684\u4ea4\u4e92\u4e2d\u7684\u95ee\u9898\u3002</p> </li> <li> <p>\u76d1\u63a7\u548c\u544a\u8b66\uff1a \u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u5efa\u7acb\u76d1\u63a7\u7cfb\u7edf\uff0c\u4ee5\u68c0\u6d4b\u7cfb\u7edf\u6027\u80fd\u95ee\u9898\u3001\u9519\u8bef\u7387\u4e0a\u5347\u548c\u5f02\u5e38\u884c\u4e3a\uff0c\u5e76\u751f\u6210\u544a\u8b66\u4ee5\u53ca\u6267\u884c\u76f8\u5e94\u7684\u5e94\u6025\u63aa\u65bd\u3002</p> </li> <li> <p>\u56de\u6d4b\u548c\u6027\u80fd\u4f18\u5316\uff1a \u5728\u7b56\u7565\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u8fdb\u884c\u56de\u6d4b\u548c\u6027\u80fd\u4f18\u5316\u3002\u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u8bb0\u5f55\u56de\u6d4b\u9519\u8bef\u3001\u6027\u80fd\u6d4b\u8bd5\u7ed3\u679c\u548c\u4f18\u5316\u8fc7\u7a0b\u4e2d\u7684\u95ee\u9898\u3002</p> </li> <li> <p>\u6570\u636e\u9690\u79c1\u548c\u5b89\u5168\u6027\uff1a \u91d1\u878d\u6570\u636e\u5177\u6709\u9ad8\u5ea6\u7684\u654f\u611f\u6027\uff0c\u9700\u8981\u4fdd\u62a4\u6570\u636e\u9690\u79c1\u548c\u786e\u4fdd\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u3002\u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u5904\u7406\u5b89\u5168\u6027\u68c0\u67e5\u3001\u8eab\u4efd\u9a8c\u8bc1\u9519\u8bef\u4ee5\u53ca\u6570\u636e\u6cc4\u9732\u95ee\u9898\u3002</p> </li> <li> <p>\u7248\u672c\u63a7\u5236\u548c\u90e8\u7f72\uff1a \u5728\u91d1\u878d\u7cfb\u7edf\u7684\u5f00\u53d1\u548c\u90e8\u7f72\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u7248\u672c\u63a7\u5236\u548c\u90e8\u7f72\u9519\u8bef\u3002\u9519\u8bef\u94fe\u53ef\u7528\u4e8e\u8ddf\u8e2a\u7248\u672c\u51b2\u7a81\u3001\u4f9d\u8d56\u95ee\u9898\u4ee5\u53ca\u90e8\u7f72\u5931\u8d25\u3002</p> </li> </ol> <p>\u9519\u8bef\u94fe\u7684\u5e94\u7528\u6709\u52a9\u4e8e\u66f4\u597d\u5730\u8bc6\u522b\u3001\u8bb0\u5f55\u548c\u5904\u7406\u7cfb\u7edf\u4e2d\u7684\u95ee\u9898\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u540c\u65f6\u4e5f\u6709\u52a9\u4e8e\u5feb\u901f\u5b9a\u4f4d\u548c\u89e3\u51b3\u6f5c\u5728\u7684\u95ee\u9898\u3002\u8fd9\u5bf9\u4e8e\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u7cfb\u7edf\u901a\u5e38\u9700\u8981\u9ad8\u5ea6\u7684\u53ef\u9760\u6027\u548c\u7a33\u5b9a\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#foo-bar","title":"\u8865\u5145\u5b66\u4e60\uff1a foo \u548c bar","text":"<p>\u4e3a\u4ec0\u4e48\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\u559c\u6b22\u4f7f\u7528 <code>foo</code> \u548c <code>bar</code> \u8fd9\u6837\u7684\u540d\u79f0\u662f\u6709\u591a\u79cd\u8bf4\u6cd5\u5386\u53f2\u6e0a\u6e90\u7684\u3002\u8fd9\u4e9b\u540d\u79f0\u6700\u65e9\u8d77\u6e90\u4e8e\u65e9\u671f\u8ba1\u7b97\u673a\u7f16\u7a0b\u548c\u8ba1\u7b97\u673a\u6587\u5316\uff0c\u6839\u636ewiki,  foo \u548c bar\u53ef\u80fd\u5177\u6709\u4ee5\u4e0b\u4e00\u4e9b\u5386\u53f2\u548c\u4f20\u7edf\u80cc\u666f\uff1a</p> <ol> <li>Playful Allusion\uff08\u4fcf\u76ae\u6697\u793a\uff09\uff1a \u6709\u4eba\u8ba4\u4e3a <code>foobar</code> \u53ef\u80fd\u662f\u5bf9\u4e8c\u6218\u65f6\u671f\u519b\u4e8b\u4fda\u8bed \"FUBAR\"\uff08Fucked Up Beyond All Recognition\uff09\u7684\u4e00\u79cd\u620f\u8c11\u5f15\u7528\u3002\u8fd9\u79cd\u5f15\u7528\u53ef\u80fd\u662f\u4e3a\u4e86\u5f3a\u8c03\u4ee3\u7801\u4e2d\u7684\u6df7\u4e71\u6216\u95ee\u9898\u3002</li> <li>Tech Model Railroad Club\uff08TMRC\uff09\uff1a \u5728\u7f16\u7a0b\u4e0a\u4e0b\u6587\u4e2d\uff0c\"foo\" \u548c \"bar\" \u7684\u9996\u6b21\u5370\u5237\u4f7f\u7528\u51fa\u73b0\u5728\u9ebb\u7701\u7406\u5de5\u5b66\u9662\uff08MIT\uff09\u7684 Tech Engineering News \u7684 1965 \u5e74\u7248\u4e2d\u3002\"foo\" \u5728\u7f16\u7a0b\u4e0a\u4e0b\u6587\u4e2d\u7684\u4f7f\u7528\u901a\u5e38\u5f52\u529f\u4e8e MIT \u7684 Tech Model Railroad Club\uff08TMRC\uff09\uff0c\u5927\u7ea6\u5728 1960 \u5e74\u5de6\u53f3\u3002\u5728 TMRC \u7684\u590d\u6742\u6a21\u578b\u7cfb\u7edf\u4e2d\uff0c\u623f\u95f4\u5404\u5904\u90fd\u6709\u7d27\u6025\u5173\u95ed\u5f00\u5173\uff0c\u5982\u679c\u53d1\u751f\u4e0d\u671f\u671b\u7684\u60c5\u51b5\uff08\u4f8b\u5982\uff0c\u706b\u8f66\u5168\u901f\u5411\u969c\u788d\u7269\u524d\u8fdb\uff09\uff0c\u5219\u53ef\u4ee5\u89e6\u53d1\u8fd9\u4e9b\u5f00\u5173\u3002\u7cfb\u7edf\u7684\u53e6\u4e00\u4e2a\u7279\u70b9\u662f\u8c03\u5ea6\u677f\u4e0a\u7684\u6570\u5b57\u65f6\u949f\u3002\u5f53\u6709\u4eba\u6309\u4e0b\u5173\u95ed\u5f00\u5173\u65f6\uff0c\u65f6\u949f\u505c\u6b62\u8fd0\u884c\uff0c\u5e76\u4e14\u663e\u793a\u66f4\u6539\u4e3a\u5355\u8bcd \"FOO\"\uff1b\u56e0\u6b64\uff0c\u5728 TMRC\uff0c\u8fd9\u4e9b\u5173\u95ed\u5f00\u5173\u88ab\u79f0\u4e3a \"Foo \u5f00\u5173\"\u3002</li> </ol> <p>\u603b\u7684\u6765\u8bf4\uff0c\"foo\" \u548c \"bar\" \u8fd9\u4e9b\u547d\u540d\u4e60\u60ef\u5728\u8ba1\u7b97\u673a\u7f16\u7a0b\u4e2d\u7684\u4f7f\u7528\u8d77\u6e90\u4e8e\u65e9\u671f\u8ba1\u7b97\u673a\u6587\u5316\u548c\u7f16\u7a0b\u793e\u533a\uff0c\u5e76\u4e14\u5df2\u7ecf\u6210\u4e3a\u4e86\u4e00\u79cd\u4f20\u7edf\u3002\u5b83\u4eec\u901a\u5e38\u88ab\u7528\u4e8e\u793a\u4f8b\u4ee3\u7801\u3001\u6d4b\u8bd5\u548c\u6587\u6863\u4e2d\uff0c\u4ee5\u4fbf\u7b80\u5316\u793a\u4f8b\u7684\u7f16\u5199\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5bf9\u7279\u5b9a\u542b\u4e49\u4ea7\u751f\u6df7\u6dc6\u3002\u867d\u7136\u5b83\u4eec\u662f\u901a\u7528\u7684\u3001\u4e0d\u5177\u5907\u7279\u5b9a\u542b\u4e49\u7684\u540d\u79f0\uff0c\u4f46\u5b83\u4eec\u5728\u7f16\u7a0b\u793e\u533a\u4e2d\u5f97\u5230\u4e86\u5e7f\u6cdb\u63a5\u53d7\uff0c\u5e76\u4e14\u7528\u4e8e\u6559\u80b2\u548c\u6982\u5ff5\u9a8c\u8bc1\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#source","title":"\u8865\u5145\u5b66\u4e60\uff1a source\u65b9\u6cd5","text":"<p>\u5728 Rust \u4e2d\uff0c<code>source</code> \u65b9\u6cd5\u662f\u7528\u4e8e\u8bbf\u95ee\u9519\u8bef\u94fe\u4e2d\u4e0b\u4e00\u4e2a\u9519\u8bef\u6e90\uff08source\uff09\u7684\u65b9\u6cd5\u3002\u5b83\u662f\u7531 <code>std::error::Error</code> trait \u63d0\u4f9b\u7684\u65b9\u6cd5\uff0c\u5141\u8bb8\u4f60\u5728\u9519\u8bef\u5904\u7406\u4e2d\u904d\u5386\u9519\u8bef\u94fe\uff0c\u4ee5\u67e5\u770b\u5bfc\u81f4\u9519\u8bef\u7684\u5168\u90e8\u5386\u53f2\u3002</p> <p>\u4ee5\u4e0b\u662f <code>source</code> \u65b9\u6cd5\u7684\u7b7e\u540d\uff1a</p> <pre><code>fn source(&amp;self) -&gt; Option&lt;&amp;(dyn Error + 'static)&gt;\n</code></pre> <p>\u89e3\u91ca\u6bcf\u4e2a\u90e8\u5206\u7684\u542b\u4e49\uff1a</p> <ul> <li> <p><code>fn source(&amp;self)</code>\uff1a\u8fd9\u662f\u4e00\u4e2a\u65b9\u6cd5\u7b7e\u540d\uff0c\u8868\u793a\u4e00\u4e2a\u65b9\u6cd5\u540d\u4e3a <code>source</code>\uff0c\u63a5\u53d7 <code>&amp;self</code> \u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u5bf9\u5b9e\u73b0\u4e86 <code>std::error::Error</code> trait \u7684\u9519\u8bef\u5bf9\u8c61\u7684\u5f15\u7528\u3002</p> </li> <li> <p><code>-&gt; Option&lt;&amp;(dyn Error + 'static)&gt;</code>\uff1a\u8fd9\u662f\u8fd4\u56de\u503c\u7c7b\u578b\uff0c\u8868\u793a\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a <code>Option</code>\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u5bf9\u4e0b\u4e00\u4e2a\u9519\u8bef\u6e90\uff08\u5982\u679c\u5b58\u5728\uff09\u7684\u5f15\u7528\u3002<code>Option</code> \u53ef\u80fd\u662f <code>Some</code>\uff08\u5305\u542b\u9519\u8bef\u6e90\uff09\u6216 <code>None</code>\uff08\u8868\u793a\u6ca1\u6709\u66f4\u591a\u7684\u9519\u8bef\u6e90\uff09\u3002<code>&amp;(dyn Error + 'static)</code> \u8868\u793a\u9519\u8bef\u6e90\u7684\u5f15\u7528\uff0c<code>dyn Error</code> \u8868\u793a\u5b9e\u73b0\u4e86 <code>std::error::Error</code> trait \u7684\u9519\u8bef\u7c7b\u578b\u3002<code>'static</code> \u662f\u9519\u8bef\u6e90\u7684\u751f\u547d\u5468\u671f\uff0c\u901a\u5e38\u4e3a\u9759\u6001\u751f\u547d\u5468\u671f\uff0c\u8868\u793a\u9519\u8bef\u6e90\u7684\u751f\u547d\u5468\u671f\u662f\u9759\u6001\u7684\u3002</p> </li> </ul> <p>\u8981\u4f7f\u7528 <code>source</code> \u65b9\u6cd5\uff0c\u4f60\u9700\u8981\u5728\u5b9e\u73b0\u4e86 <code>std::error::Error</code> trait \u7684\u81ea\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b\u4e0a\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u4ee5\u8bbf\u95ee\u4e0b\u4e00\u4e2a\u9519\u8bef\u6e90\uff08\u5982\u679c\u5b58\u5728\uff09\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#163","title":"16.3 \u9519\u8bef\u5904\u7406\u5b8f","text":"<p>Rust \u7684\u6807\u51c6\u5e93\u548c\u5176\u4ed6\u5e93\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u5b8f\uff0c\u7528\u4e8e\u7b80\u5316\u81ea\u5b9a\u4e49\u9519\u8bef\u5904\u7406\u7684\u4ee3\u7801\uff0c\u4f8b\u5982\uff0c<code>anyhow</code>\u3001<code>thiserror</code> \u548c <code>failure</code> \u7b49\u5e93\u3002</p> <pre><code>use anyhow::{Result, anyhow};\n\nfn foo() -&gt; Result&lt;()&gt; {\n    let condition = false;\n    if condition {\n        Ok(())\n    } else {\n        Err(anyhow!(\"Something went wrong\"))\n    }\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>anyhow</code> \u5b8f\u6765\u521b\u5efa\u4e00\u4e2a\u5e26\u6709\u9519\u8bef\u6d88\u606f\u7684 <code>Result</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#164","title":"16.4  \u628a\u9519\u8bef\u201c\u88c5\u7bb1\u201d","text":"<p>\u5728 Rust \u4e2d\u5904\u7406\u591a\u79cd\u9519\u8bef\u7c7b\u578b\uff0c\u53ef\u4ee5\u5c06\u5b83\u4eec\u88c5\u7bb1\u4e3a <code>Box&lt;dyn error::Error&gt;</code> \u7c7b\u578b\u7684\u7ed3\u679c\u3002\u8fd9\u79cd\u505a\u6cd5\u6709\u51e0\u4e2a\u597d\u5904\u548c\u539f\u56e0\uff1a</p> <ol> <li>\u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406\uff1a\u4f7f\u7528 <code>Box&lt;dyn error::Error&gt;</code> \u7c7b\u578b\u53ef\u4ee5\u7edf\u4e00\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u9519\u8bef\uff0c\u65e0\u8bba\u9519\u8bef\u7c7b\u578b\u662f\u4f55\u79cd\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u90fd\u53ef\u4ee5\u7528\u76f8\u540c\u7684\u65b9\u5f0f\u5904\u7406\u3002\u8fd9\u7b80\u5316\u4e86\u9519\u8bef\u5904\u7406\u7684\u4ee3\u7801\uff0c\u51cf\u5c11\u4e86\u5197\u4f59\u3002</li> <li>\u9519\u8bef\u4fe1\u606f\u7684\u62bd\u8c61\uff1aRust \u7684\u9519\u8bef\u5904\u7406\u673a\u5236\u5141\u8bb8\u6355\u83b7\u548c\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u9519\u8bef\uff0c\u4f46\u5728\u4e0a\u5c42\u4ee3\u7801\u4e2d\uff0c\u901a\u5e38\u53ea\u9700\u5173\u5fc3\u9519\u8bef\u7684\u62bd\u8c61\u4fe1\u606f\uff0c\u800c\u4e0d\u9700\u8981\u5173\u5fc3\u5177\u4f53\u7684\u9519\u8bef\u7c7b\u578b\u3002\u4f7f\u7528 <code>Box&lt;dyn error::Error&gt;</code> \u53ef\u4ee5\u63d0\u4f9b\u9519\u8bef\u7684\u62bd\u8c61\u8868\u793a\uff0c\u800c\u4e0d\u66b4\u9732\u5177\u4f53\u7684\u9519\u8bef\u7c7b\u578b\u7ed9\u4e0a\u5c42\u4ee3\u7801\u3002</li> <li>\u9519\u8bef\u7684\u5c01\u88c5\uff1a\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u9519\u8bef\u88c5\u7bb1\u4e3a <code>Box&lt;dyn error::Error&gt;</code> \u53ef\u4ee5\u5c06\u9519\u8bef\u4fe1\u606f\u548c\u539f\u56e0\u8fdb\u884c\u5c01\u88c5\u3002\u8fd9\u5141\u8bb8\u5728\u9519\u8bef\u94fe\u4e2d\u6784\u5efa\u66f4\u4e30\u5bcc\u7684\u4fe1\u606f\uff0c\u4ee5\u4fbf\u4e8e\u8c03\u8bd5\u548c\u9519\u8bef\u8ffd\u8e2a\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4e00\u4e2a\u9519\u8bef\u53ef\u80fd\u4f1a\u5bfc\u81f4\u53e6\u4e00\u4e2a\u9519\u8bef\uff0c\u800c <code>Box&lt;dyn error::Error&gt;</code> \u5141\u8bb8\u5c06\u8fd9\u4e9b\u9519\u8bef\u94fe\u63a5\u5728\u4e00\u8d77\u3002</li> <li>\u7075\u6d3b\u6027\uff1a\u4f7f\u7528 <code>Box&lt;dyn error::Error&gt;</code> \u4f5c\u4e3a\u9519\u8bef\u7c7b\u578b\uff0c\u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5730\u5904\u7406\u4e0d\u540c\u7c7b\u578b\u7684\u9519\u8bef\u3002\u8fd9\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u975e\u5e38\u6709\u7528\uff0c\u4f8b\u5982\u5904\u7406\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u7684\u9519\u8bef\u6216\u63d2\u4ef6\u7cfb\u7edf\u4e2d\u7684\u9519\u8bef\u3002</li> </ol> <p>\u5c06\u9519\u8bef\u88c5\u7bb1\u4e3a <code>Box&lt;dyn error::Error&gt;</code> \u662f\u4e00\u79cd\u901a\u7528\u7684\u3001\u7075\u6d3b\u7684\u9519\u8bef\u5904\u7406\u65b9\u5f0f\uff0c\u5b83\u5141\u8bb8\u5904\u7406\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u9519\u8bef\uff0c\u5e76\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u9519\u8bef\u4fe1\u606f\u7ba1\u7406\u548c\u62bd\u8c61\u3002\u8fd9\u79cd\u505a\u6cd5\u4f7f\u5f97\u4ee3\u7801\u66f4\u5bb9\u6613\u7f16\u5199\u3001\u7ef4\u62a4\u548c\u6269\u5c55\uff0c\u540c\u65f6\u4e5f\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u9519\u8bef\u8bca\u65ad\u548c\u8ffd\u8e2a\u529f\u80fd\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#165-map-option-case-required","title":"16.5  \u7528 map\u65b9\u6cd5 \u5904\u7406 option\u94fe\u6761 (case required)","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u8da3\u5473\u6027\u7684\u793a\u4f8b\uff0c\u6a21\u62df\u4e86\u5236\u4f5c\u5bff\u53f8\u7684\u8fc7\u7a0b\uff0c\u5305\u62ec\u6dd8\u7c73\u3001\u51c6\u5907\u98df\u6750\u3001\u70f9\u996a\u548c\u5305\u88f9\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>Option</code> \u7c7b\u578b\u6765\u8868\u793a\u6bcf\u4e2a\u5236\u4f5c\u6b65\u9aa4\uff0c\u5e76\u4f7f\u7528 <code>map</code> \u65b9\u6cd5\u6765\u6a21\u62df\u6bcf\u4e2a\u6b65\u9aa4\u7684\u5904\u7406\u8fc7\u7a0b\uff1a</p> <pre><code>#![allow(dead_code)]\n\n// \u5bff\u53f8\u7684\u98df\u6750\n#[derive(Debug)] enum SushiIngredient { Rice, Fish, Seaweed, SoySauce, Wasabi }\n\n// \u5bff\u53f8\u5236\u4f5c\u6b65\u9aa4\nstruct WashedRice(SushiIngredient);\nstruct PreparedIngredients(SushiIngredient);\nstruct CookedSushi(SushiIngredient);\nstruct WrappedSushi(SushiIngredient);\n\n// \u6dd8\u7c73\u3002\u5982\u679c\u6ca1\u6709\u98df\u6750\uff0c\u5c31\u8fd4\u56de `None`\u3002\u5426\u5219\u8fd4\u56de\u6dd8\u597d\u7684\u7c73\u3002\nfn wash_rice(ingredient: Option&lt;SushiIngredient&gt;) -&gt; Option&lt;WashedRice&gt; {\n    ingredient.map(|i| WashedRice(i))\n}\n\n// \u51c6\u5907\u98df\u6750\u3002\u5982\u679c\u6ca1\u6709\u98df\u6750\uff0c\u5c31\u8fd4\u56de `None`\u3002\u5426\u5219\u8fd4\u56de\u51c6\u5907\u597d\u7684\u98df\u6750\u3002\nfn prepare_ingredients(rice: Option&lt;WashedRice&gt;) -&gt; Option&lt;PreparedIngredients&gt; {\n    rice.map(|WashedRice(i)| PreparedIngredients(i))\n}\n\n// \u70f9\u996a\u5bff\u53f8\u3002\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528 `map()` \u6765\u66ff\u4ee3 `match` \u4ee5\u5904\u7406\u5404\u79cd\u60c5\u51b5\u3002\nfn cook_sushi(ingredients: Option&lt;PreparedIngredients&gt;) -&gt; Option&lt;CookedSushi&gt; {\n    ingredients.map(|PreparedIngredients(i)| CookedSushi(i))\n}\n\n// \u5305\u88f9\u5bff\u53f8\u3002\u5982\u679c\u6ca1\u6709\u98df\u6750\uff0c\u5c31\u8fd4\u56de `None`\u3002\u5426\u5219\u8fd4\u56de\u5305\u88f9\u597d\u7684\u5bff\u53f8\u3002\nfn wrap_sushi(sushi: Option&lt;CookedSushi&gt;) -&gt; Option&lt;WrappedSushi&gt; {\n    sushi.map(|CookedSushi(i)| WrappedSushi(i))\n}\n\n// \u5403\u5bff\u53f8\nfn eat_sushi(sushi: Option&lt;WrappedSushi&gt;) {\n    match sushi {\n        Some(WrappedSushi(i)) =&gt; println!(\"Delicious sushi with {:?}\", i),\n        None                  =&gt; println!(\"Oops! Something went wrong.\"),\n    }\n}\n\nfn main() {\n    let rice = Some(SushiIngredient::Rice);\n    let fish = Some(SushiIngredient::Fish);\n    let seaweed = Some(SushiIngredient::Seaweed);\n    let soy_sauce = Some(SushiIngredient::SoySauce);\n    let wasabi = Some(SushiIngredient::Wasabi);\n\n    // \u5236\u4f5c\u5bff\u53f8\n    let washed_rice = wash_rice(rice);\n    let prepared_ingredients = prepare_ingredients(washed_rice);\n    let cooked_sushi = cook_sushi(prepared_ingredients);\n    let wrapped_sushi = wrap_sushi(cooked_sushi);\n\n    // \u5403\u5bff\u53f8\n    eat_sushi(wrapped_sushi);\n}\n</code></pre> <p>\u8fd9\u4e2a\u793a\u4f8b\u6a21\u62df\u4e86\u5236\u4f5c\u5bff\u53f8\u7684\u6d41\u7a0b\uff0c\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u4f7f\u7528 <code>Option</code> \u8868\u793a\uff0c\u5e76\u4f7f\u7528 <code>map</code> \u65b9\u6cd5\u8fdb\u884c\u5904\u7406\u3002\u5f53\u98df\u6750\u7ecf\u8fc7\u4e00\u7cfb\u5217\u6b65\u9aa4\u540e\uff0c\u6700\u7ec8\u5236\u4f5c\u51fa\u7f8e\u5473\u7684\u5bff\u53f8\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#166-and_then","title":"16.6 and_then \u65b9\u6cd5","text":"<p>\u7ec4\u5408\u7b97\u5b50 <code>and_then</code> \u662f\u53e6\u4e00\u79cd\u5728 Rust \u7f16\u7a0b\u8bed\u8a00\u4e2d\u5e38\u89c1\u7684\u7ec4\u5408\u5b50\uff08combinator\uff09\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u5904\u7406 Option \u7c7b\u578b\u6216 Result \u7c7b\u578b\u7684\u503c\uff0c\u901a\u8fc7\u94fe\u5f0f\u8c03\u7528\u6765\u7ec4\u5408\u591a\u4e2a\u64cd\u4f5c\u3002</p> <p>\u5728 Rust \u4e2d\uff0c<code>and_then</code> \u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u4e8e Option \u7c7b\u578b\u7684\u503c\u3002\u5b83\u7684\u4f5c\u7528\u662f\u5f53 Option \u503c\u4e3a Some \u65f6\uff0c\u6267\u884c\u6307\u5b9a\u7684\u64cd\u4f5c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Option \u503c\u3002\u5982\u679c Option \u503c\u4e3a None\uff0c\u5219\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\uff0c\u76f4\u63a5\u8fd4\u56de None\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 <code>and_then</code> \u7684\u793a\u4f8b\uff1a</p> <pre><code>let option1 = Some(10);  \nlet option2 = option1.and_then(|x| Some(x + 5));  \nlet option3 = option2.and_then(|x| if x &gt; 15 { Some(x * 2) } else { None });  \n\nmatch option3 {  \n    Some(value) =&gt; println!(\"Option 3: {}\", value),  \n    None =&gt; println!(\"Option 3 is None\"),  \n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a Option \u503c <code>option1</code>\uff0c\u5176\u503c\u4e3a Some(10)\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>and_then</code> \u65b9\u6cd5\u5bf9 <code>option1</code> \u8fdb\u884c\u64cd\u4f5c\uff0c\u5c06\u5176\u503c\u52a0\u4e0a 5\uff0c\u5e76\u5c06\u7ed3\u679c\u5305\u88c5\u4e3a\u4e00\u4e2a\u65b0\u7684 Option \u503c <code>option2</code>\u3002\u63a5\u7740\uff0c\u6211\u4eec\u518d\u6b21\u4f7f\u7528 <code>and_then</code> \u65b9\u6cd5\u5bf9 <code>option2</code> \u8fdb\u884c\u64cd\u4f5c\uff0c\u5982\u679c\u503c\u5927\u4e8e 15\uff0c\u5219\u5c06\u5176\u4e58\u4ee5 2\uff0c\u5426\u5219\u8fd4\u56de None\u3002\u6700\u540e\uff0c\u6211\u4eec\u5c06\u7ed3\u679c\u8d4b\u503c\u7ed9 <code>option3</code>\u3002</p> <p>\u6839\u636e\u793a\u4f8b\u4e2d\u7684\u64cd\u4f5c\uff0c<code>option3</code> \u7684\u503c\u5c06\u4e3a Some(30)\uff0c\u56e0\u4e3a 10 + 5 = 15\uff0c15 &gt; 15\uff0c\u6240\u4ee5\u4e58\u4ee5 2 \u5f97\u5230 30\u3002</p> <p>\u901a\u8fc7\u94fe\u5f0f\u8c03\u7528 <code>and_then</code> \u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u591a\u4e2a\u64cd\u4f5c\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u4ee5\u4fbf\u5728 Option \u503c\u4e0a\u6267\u884c\u4e00\u7cfb\u5217\u7684\u8ba1\u7b97\u6216\u8f6c\u6362\u3002\u8fd9\u79cd\u7ec4\u5408\u5b50\u7684\u4f7f\u7528\u53ef\u4ee5\u4f7f\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u548c\u6613\u8bfb\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#167-filter_map","title":"16.7 \u7528filter_map \u65b9\u6cd5\u5ffd\u7565\u7a7a\u503c","text":"<p>\u5728 Rust \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>filter_map</code> \u65b9\u6cd5\u6765\u5ffd\u7565\u96c6\u5408\u4e2d\u7684\u7a7a\u503c\u3002\u8fd9\u5bf9\u4e8e\u4ece\u96c6\u5408\u4e2d\u8fc7\u6ee4\u6389 <code>None</code> \u503c\u5e76\u540c\u65f6\u63d0\u53d6 <code>Some</code> \u503c\u975e\u5e38\u6709\u7528\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>fn main() {\n    let values: Vec&lt;Option&lt;i32&gt;&gt; = vec![Some(1), None, Some(2), None, Some(3)];\n\n    // \u4f7f\u7528 filter_map \u8fc7\u6ee4\u6389 None \u503c\u5e76\u63d0\u53d6 Some \u503c\n    let filtered_values: Vec&lt;i32&gt; = values.into_iter().filter_map(|x| x).collect();\n\n    println!(\"{:?}\", filtered_values); // \u8f93\u51fa [1, 2, 3]\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5305\u542b <code>Option&lt;i32&gt;</code> \u503c\u7684 <code>values</code> \u5411\u91cf\u3002\u6211\u4eec\u4f7f\u7528 <code>filter_map</code> \u65b9\u6cd5\u6765\u8fc7\u6ee4\u6389 <code>None</code> \u503c\u5e76\u63d0\u53d6 <code>Some</code> \u503c\uff0c\u6700\u7ec8\u5c06\u7ed3\u679c\u6536\u96c6\u5230\u4e00\u4e2a\u65b0\u7684 <code>Vec&lt;i32&gt;</code> \u4e2d\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a\u53ea\u5305\u542b\u975e\u7a7a\u503c\u7684\u65b0\u96c6\u5408 <code>filtered_values</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#_1","title":"\u6848\u4f8b\uff1a \u6570\u636e\u6e05\u6d17","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0cRust \u4e2d\u7684 <code>filter_map</code> \u65b9\u6cd5\u53ef\u4ee5\u7528\u4e8e\u5904\u7406\u548c\u6e05\u7406\u6570\u636e\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u5728\u4e00\u4e2a\u5305\u542b\u91d1\u878d\u6570\u636e\u7684 <code>Vec&lt;Option&lt;f64&gt;&gt;</code> \u4e2d\u8fc7\u6ee4\u6389\u7a7a\u503c\uff08<code>None</code>\uff09\u5e76\u63d0\u53d6\u6709\u6548\u7684\u4ef7\u683c\u6570\u636e\uff08<code>Some</code> \u503c\uff09\uff1a</p> <pre><code>fn main() {\n    // \u6a21\u62df\u4e00\u4e2a\u5305\u542b\u91d1\u878d\u4ef7\u683c\u6570\u636e\u7684\u5411\u91cf\n    let financial_data: Vec&lt;Option&lt;f64&gt;&gt; = vec![\n        Some(100.0),\n        Some(105.5),\n        None,\n        Some(98.75),\n        None,\n        Some(102.3),\n    ];\n\n    // \u4f7f\u7528 filter_map \u8fc7\u6ee4\u6389\u7a7a\u503c\u5e76\u63d0\u53d6\u4ef7\u683c\u6570\u636e\n    let valid_prices: Vec&lt;f64&gt; = financial_data.into_iter().filter_map(|price| price).collect();\n\n    // \u6253\u5370\u6709\u6548\u4ef7\u683c\u6570\u636e\n    for price in &amp;valid_prices {\n        println!(\"Price: {}\", price);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6a21\u62df\u4e86\u4e00\u4e2a\u5305\u542b\u91d1\u878d\u4ef7\u683c\u6570\u636e\u7684\u5411\u91cf <code>financial_data</code>\uff0c\u5176\u4e2d\u6709\u4e00\u4e9b\u6761\u76ee\u662f\u7a7a\u503c\uff08<code>None</code>\uff09\u3002\u6211\u4eec\u4f7f\u7528 <code>filter_map</code> \u65b9\u6cd5\u5c06\u6709\u6548\u7684\u4ef7\u683c\u6570\u636e\u63d0\u53d6\u5230\u65b0\u7684\u5411\u91cf <code>valid_prices</code> \u4e2d\u3002\u7136\u540e\u518d\u6253\u5370\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#168-collect","title":"16.8 \u7528collect \u65b9\u6cd5\u8ba9\u6574\u4e2a\u64cd\u4f5c\u94fe\u6761\u5931\u8d25","text":"<p>\u5728 Rust \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>collect</code> \u65b9\u6cd5\u5c06\u4e00\u4e2a <code>Iterator</code> \u8f6c\u6362\u4e3a\u4e00\u4e2a <code>Result</code>\uff0c\u5e76\u4e14\u4e00\u65e6\u9047\u5230 <code>Result::Err</code>\uff0c\u904d\u5386\u5c31\u4f1a\u7ec8\u6b62\u3002\u8fd9\u5728\u5904\u7406\u4e00\u7cfb\u5217 <code>Result</code> \u7c7b\u578b\u7684\u64cd\u4f5c\u65f6\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u53ea\u8981\u6709\u4e00\u4e2a\u64cd\u4f5c\u5931\u8d25\uff0c\u6574\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u7acb\u5373\u5931\u8d25\u5e76\u8fd4\u56de\u9519\u8bef\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>collect</code> \u65b9\u6cd5\u5c06\u4e00\u4e2a\u5305\u542b <code>Result&lt;i32, Error&gt;</code> \u7684\u8fed\u4ee3\u5668\u8f6c\u6362\u4e3a <code>Result&lt;Vec&lt;i32&gt;, Error&gt;</code>\uff0c\u5e76\u4e14\u5982\u679c\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a <code>Result</code> \u662f\u9519\u8bef\u7684\uff0c\u6574\u4e2a\u64cd\u4f5c\u5c31\u5931\u8d25\uff1a</p> <pre><code>#[derive(Debug)]\nstruct Error {\n    message: String,\n}\n\nfn main() {\n    // \u6a21\u62df\u5305\u542b Result \u7c7b\u578b\u7684\u8fed\u4ee3\u5668\n    let data: Vec&lt;Result&lt;i32, Error&gt;&gt; = vec![Ok(1), Ok(2), Err(Error { message: \"Error 1\".to_string() }), Ok(3)];\n\n    // \u4f7f\u7528 collect \u5c06 Result \u8fed\u4ee3\u5668\u8f6c\u6362\u4e3a Result&lt;Vec&lt;i32&gt;, Error&gt;\n    let result: Result&lt;Vec&lt;i32&gt;, Error&gt; = data.into_iter().collect();\n\n    // \u5904\u7406\u7ed3\u679c\n    match result {\n        Ok(numbers) =&gt; {\n            println!(\"Valid numbers: {:?}\", numbers);\n        }\n        Err(err) =&gt; {\n            println!(\"Error occurred: {:?}\", err);\n        }\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>data</code> \u662f\u4e00\u4e2a\u5305\u542b <code>Result</code> \u7c7b\u578b\u7684\u8fed\u4ee3\u5668\uff0c\u5176\u4e2d\u4e00\u4e2a <code>Result</code> \u662f\u4e00\u4e2a\u9519\u8bef\u3002\u901a\u8fc7\u4f7f\u7528 <code>collect</code> \u65b9\u6cd5\uff0c\u6211\u4eec\u8bd5\u56fe\u5c06\u8fd9\u4e9b <code>Result</code> \u6536\u96c6\u5230\u4e00\u4e2a <code>Result&lt;Vec&lt;i32&gt;, Error&gt;</code> \u4e2d\u3002\u7531\u4e8e\u6709\u4e00\u4e2a\u9519\u8bef\u7684 <code>Result</code>\uff0c\u6574\u4e2a\u64cd\u4f5c\u5931\u8d25\uff0c\u6700\u7ec8\u7ed3\u679c\u662f\u4e00\u4e2a <code>Result::Err</code>\uff0c\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u6355\u83b7\u548c\u5904\u7406\u9519\u8bef\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#collect","title":"\u601d\u8003\uff1acollect\u65b9\u6cd5\u5728\u91d1\u878d\u9886\u57df\u6709\u54ea\u4e9b\u7528\uff1f","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u8fd9\u79cd\u4f7f\u7528 <code>Result</code> \u548c <code>collect</code> \u7684\u65b9\u6cd5\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e00\u7cfb\u5217\u6570\u636e\u5206\u6790\u3001\u7b56\u7565\u6267\u884c\u6216\u4ea4\u6613\u64cd\u4f5c\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u53ef\u80fd\u7684\u5e94\u7528\u573a\u666f\uff1a</p> <ol> <li> <p>\u6570\u636e\u6e05\u6d17\u548c\u9884\u5904\u7406\uff1a\u5728\u91cf\u5316\u91d1\u878d\u4e2d\uff0c\u9700\u8981\u5904\u7406\u5927\u91cf\u7684\u91d1\u878d\u6570\u636e\uff0c\u5305\u62ec\u5e02\u573a\u4ef7\u683c\u3001\u8d22\u52a1\u62a5\u544a\u7b49\u3002\u8fd9\u4e9b\u6570\u636e\u53ef\u80fd\u5305\u542b\u9519\u8bef\u6216\u7f3a\u5931\u503c\u3002\u4f7f\u7528 <code>Result</code> \u548c <code>collect</code> \u53ef\u4ee5\u9010\u884c\u5904\u7406\u6570\u636e\uff0c\u5c06\u6bcf\u4e2a\u6570\u636e\u70b9\u7684\u5904\u7406\u7ed3\u679c\uff08\u53ef\u80fd\u662f\u6210\u529f\u7684 <code>Result</code> \u6216\u5931\u8d25\u7684 <code>Result</code>\uff09\u6536\u96c6\u5230\u4e00\u4e2a\u7ed3\u679c\u5411\u91cf\u4e2d\u3002\u5982\u679c\u6709\u4efb\u4f55\u9519\u8bef\u53d1\u751f\uff0c\u6574\u4e2a\u6570\u636e\u9884\u5904\u7406\u64cd\u4f5c\u53ef\u4ee5\u88ab\u6807\u8bb0\u4e3a\u5931\u8d25\uff0c\u786e\u4fdd\u4e0d\u4f1a\u4f7f\u7528\u4e0d\u53ef\u9760\u7684\u6570\u636e\u8fdb\u884c\u540e\u7eed\u5206\u6790\u6216\u4ea4\u6613\u3002</p> </li> <li> <p>\u7b56\u7565\u6267\u884c\uff1a\u5728\u91cf\u5316\u4ea4\u6613\u4e2d\uff0c\u9700\u8981\u6267\u884c\u4e00\u7cfb\u5217\u4ea4\u6613\u7b56\u7565\u3002\u6bcf\u4e2a\u7b56\u7565\u7684\u6267\u884c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6210\u529f\u6216\u5931\u8d25\u7684\u4ea4\u6613\u3002\u4f7f\u7528 <code>Result</code> \u548c <code>collect</code> \u53ef\u4ee5\u786e\u4fdd\u53ea\u6709\u5f53\u6240\u6709\u7b56\u7565\u90fd\u6210\u529f\u6267\u884c\u65f6\uff0c\u624d\u4f1a\u6267\u884c\u540e\u7eed\u64cd\u4f5c\uff0c\u4f8b\u5982\u8ba2\u5355\u63d0\u4ea4\u3002\u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u7b56\u7565\u6267\u884c\u5931\u8d25\uff0c\u6574\u4e2a\u7b56\u7565\u7ec4\u5408\u53ef\u4ee5\u88ab\u6807\u8bb0\u4e3a\u5931\u8d25\uff0c\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u98ce\u9669\u3002</p> </li> <li> <p>\u8ba2\u5355\u5904\u7406\uff1a\u5728\u91d1\u878d\u4ea4\u6613\u4e2d\uff0c\u8ba2\u5355\u901a\u5e38\u9700\u8981\u7ecf\u5386\u591a\u4e2a\u6b65\u9aa4\uff0c\u5305\u62ec\u6821\u9a8c\u3001\u62c6\u5206\u3001\u8def\u7531\u3001\u6267\u884c\u7b49\u3002\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u53ef\u80fd\u5931\u8d25\u3002\u4f7f\u7528 <code>Result</code> \u548c <code>collect</code> \u53ef\u4ee5\u786e\u4fdd\u53ea\u6709\u5f53\u6240\u6709\u8ba2\u5355\u7684\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u6210\u529f\u5b8c\u6210\u65f6\uff0c\u6574\u4e2a\u6279\u91cf\u8ba2\u5355\u5904\u7406\u64cd\u4f5c\u624d\u4f1a\u7ee7\u7eed\u8fdb\u884c\u3002\u8fd9\u6709\u52a9\u4e8e\u907f\u514d\u4e0d\u5b8c\u6574\u6216\u9519\u8bef\u7684\u8ba2\u5355\u88ab\u63d0\u4ea4\u5230\u5e02\u573a\u3002</p> </li> <li> <p>\u98ce\u9669\u7ba1\u7406\uff1a\u91cf\u5316\u91d1\u878d\u516c\u53f8\u9700\u8981\u4e0d\u65ad\u76d1\u63a7\u548c\u7ba1\u7406\u5176\u98ce\u9669\u66dd\u9732\u3002\u5982\u679c\u67d0\u4e2a\u98ce\u9669\u5206\u6790\u6216\u76d1\u63a7\u64cd\u4f5c\u5931\u8d25\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5bf9\u98ce\u9669\u7684\u4e0d\u6b63\u786e\u4f30\u8ba1\u3002\u4f7f\u7528 <code>Result</code> \u548c <code>collect</code> \u53ef\u4ee5\u786e\u4fdd\u53ea\u6709\u5728\u6240\u6709\u98ce\u9669\u64cd\u4f5c\u90fd\u6210\u529f\u5b8c\u6210\u65f6\uff0c\u98ce\u9669\u7ba1\u7406\u7cfb\u7edf\u624d\u4f1a\u751f\u6210\u53ef\u9760\u7684\u62a5\u544a\u3002</p> </li> </ol> <p>\u603b\u4e4b\uff0c<code>Result</code> \u548c <code>collect</code> \u7684\u7ec4\u5408\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u53ef\u4ee5\u7528\u4e8e\u786e\u4fdd\u6570\u636e\u7684\u53ef\u9760\u6027\u3001\u7b56\u7565\u7684\u6b63\u786e\u6267\u884c\u4ee5\u53ca\u98ce\u9669\u7684\u6709\u6548\u7ba1\u7406\u3002\u8fd9\u6709\u52a9\u4e8e\u7ef4\u62a4\u91d1\u878d\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\uff0c\u964d\u4f4e\u64cd\u4f5c\u9519\u8bef\u7684\u98ce\u9669\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2016%20-%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E8%BF%9B%E9%98%B6%28Advanced%20Error%20handling%29/#_2","title":"\u6848\u4f8b\uff1a\u201c\u4e0e\u95e8\u201d\u903b\u8f91\u7684\u7b56\u7565\u94fe\u6761","text":"<p>\"\u4e0e\u95e8\"\uff08AND gate\uff09\u662f\u6570\u5b57\u903b\u8f91\u7535\u8def\u4e2d\u7684\u4e00\u79cd\u57fa\u672c\u95e8\u7535\u8def\uff0c\u7528\u4e8e\u5b9e\u73b0\u903b\u8f91\u8fd0\u7b97\u3002\u4e0e\u95e8\u7684\u8fd0\u7b97\u89c4\u5219\u5982\u4e0b\uff1a</p> <ul> <li>\u5f53\u6240\u6709\u8f93\u5165\u90fd\u662f\u903b\u8f91 \"1\" \u65f6\uff0c\u8f93\u51fa\u4e3a\u903b\u8f91 \"1\"\u3002</li> <li>\u53ea\u8981\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8f93\u5165\u4e3a\u903b\u8f91 \"0\"\uff0c\u8f93\u51fa\u4e3a\u903b\u8f91 \"0\"\u3002</li> </ul> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>Result</code> \u548c <code>collect</code> \u6765\u6267\u884c\u201c\u4e0e\u95e8\u201d\u903b\u8f91\u7684\u7b56\u7565\u94fe\u6761\uff0c\u5e76\u786e\u4fdd\u53ea\u6709\u5f53\u6240\u6709\u7b56\u7565\u6210\u529f\u6267\u884c\u65f6\uff0c\u624d\u4f1a\u63d0\u4ea4\u8ba2\u5355\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e09\u4e2a\u4ea4\u6613\u7b56\u7565\uff0c\u6bcf\u4e2a\u7b56\u7565\u90fd\u6709\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a <code>Result</code>\uff0c\u5176\u4e2d <code>Ok</code> \u8868\u793a\u7b56\u7565\u6210\u529f\u6267\u884c\uff0c<code>Err</code> \u8868\u793a\u7b56\u7565\u6267\u884c\u5931\u8d25\u3002\u6211\u4eec\u5e0c\u671b\u53ea\u6709\u5f53\u6240\u6709\u7b56\u7565\u90fd\u6210\u529f\u65f6\u624d\u6267\u884c\u540e\u7eed\u64cd\u4f5c\u3002</p> <pre><code>// \u5b9a\u4e49\u4ea4\u6613\u7b56\u7565\u548c\u5176\u6267\u884c\u51fd\u6570\nfn strategy_1() -&gt; Result&lt;(), &amp;'static str&gt; {\n    // \u6a21\u62df\u7b56\u7565\u6267\u884c\u6210\u529f\n    Ok(())\n}\n\nfn strategy_2() -&gt; Result&lt;(), &amp;'static str&gt; {\n    // \u6a21\u62df\u7b56\u7565\u6267\u884c\u5931\u8d25\n    Err(\"Strategy 2 failed\")\n}\n\nfn strategy_3() -&gt; Result&lt;(), &amp;'static str&gt; {\n    // \u6a21\u62df\u7b56\u7565\u6267\u884c\u6210\u529f\n    Ok(())\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u6240\u6709\u7b56\u7565\u7684\u5411\u91cf\n    let strategies = vec![strategy_1, strategy_2, strategy_3];\n\n    // \u4f7f\u7528 `collect` \u5c06\u6240\u6709\u7b56\u7565\u7684\u7ed3\u679c\u6536\u96c6\u5230\u4e00\u4e2a\u5411\u91cf\u4e2d\n    let results: Vec&lt;Result&lt;(), &amp;'static str&gt;&gt; = strategies.into_iter().map(|f| f()).collect();\n\n    // \u68c0\u67e5\u662f\u5426\u5b58\u5728\u5931\u8d25\u7684\u7b56\u7565\n    if results.iter().any(|result| result.is_err()) {\n        println!(\"One or more strategies failed. Aborting!\");\n        return;\n    }\n\n    // \u6240\u6709\u7b56\u7565\u6210\u529f\u6267\u884c\uff0c\u63d0\u4ea4\u8ba2\u5355\u6216\u6267\u884c\u540e\u7eed\u64cd\u4f5c\n    println!(\"All strategies executed successfully. Submitting orders...\");\n}\n</code></pre> <p>\u56e0\u4e3a\u6211\u4eec\u7684\u5176\u4e2d\u4e00\u4e2a\u7b56\u7565\u5931\u8d25\u4e86\uff0c\u6240\u4ee5\u8fd4\u56de\u7684\u662f\uff1a</p> <pre><code>One or more strategies failed. Aborting!\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>collect</code> \u5c06\u7b56\u7565\u51fd\u6570\u7684\u7ed3\u679c\u6536\u96c6\u5230\u4e00\u4e2a\u5411\u91cf\u4e2d\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>iter().any()</code> \u6765\u68c0\u67e5\u5411\u91cf\u4e2d\u662f\u5426\u5b58\u5728\u5931\u8d25\u7684\u7ed3\u679c\u3002\u5982\u679c\u5b58\u5728\u5931\u8d25\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u4e2d\u6b62\u4e00\u5207\u540e\u7eed\u64cd\u4f5c\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u98ce\u9669\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/","title":"Chapter 17 - \u7279\u6027 (trait) \u8be6\u89e3","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#171-dyn","title":"17.1 \u901a\u8fc7dyn\u5173\u952e\u8bcd\u8f7b\u677e\u5b9e\u73b0\u591a\u6001\u6027","text":"<p>\u5728Rust\u4e2d\uff0cdyn \u5173\u952e\u5b57\u5728 Rust \u4e2d\u7528\u4e8e\u8868\u793a\u548c\u5173\u8054\u7279\u5f81\uff08associated trait\uff09\u76f8\u5173\u7684\u65b9\u6cd5\u8c03\u7528\uff0c\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u52a8\u6001\u5206\u53d1\uff08runtime dynamic dispatch\uff09\u3002\u56e0\u6b64<code>dyn</code> \u5173\u952e\u5b57\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u52a8\u6001\u591a\u6001\u6027\uff08\u4e5f\u79f0\u4e3a\u8fd0\u884c\u65f6\u591a\u6001\u6027\uff09\u3002</p> <p>\u901a\u8fc7 <code>dyn</code> \u5173\u952e\u5b57\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u63a5\u53d7\u4e0d\u540c\u7c7b\u578b\u7684\u5b9e\u73b0\u76f8\u540c\u7279\u5f81\uff08trait\uff09\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u5728\u8fd0\u884c\u65f6\u6839\u636e\u5b9e\u9645\u7c7b\u578b\u6765\u8c03\u7528\u6b64\u65b9\u6cd5\u4e0d\u540c\u7684\u5b9e\u73b0\u65b9\u6cd5\uff08\u6bd4\u5982\u732b\u72d7\u90fd\u80fd\u53eb\uff0c\u4f46\u662f\u53eb\u6cd5\u5f53\u7136\u4e0d\u4e00\u6837\uff09\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528 <code>dyn</code> \u5173\u952e\u5b57\u7684\u591a\u6001\u6027\u793a\u4f8b\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u7279\u5f81\uff08trait\uff09\u53eb\u505a Animal\ntrait Animal {\n    fn speak(&amp;self);\n}\n\n// \u5b9e\u73b0 Animal \u7279\u5f81\u7684\u7ed3\u6784\u4f53 Dog\nstruct Dog;\n\nimpl Animal for Dog {\n    fn speak(&amp;self) {\n        println!(\"\u72d7\u5728\u6c6a\u6c6a\u53eb\uff01\");\n    }\n}\n\n// \u5b9e\u73b0 Animal \u7279\u5f81\u7684\u7ed3\u6784\u4f53 Cat\nstruct Cat;\n\nimpl Animal for Cat {\n    fn speak(&amp;self) {\n        println!(\"\u732b\u5728\u55b5\u55b5\u53eb\uff01\");\n    }\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5b58\u653e\u5b9e\u73b0 Animal \u7279\u5f81\u7684\u5bf9\u8c61\u7684\u52a8\u6001\u591a\u6001\u6027\u5bb9\u5668\n    let animals: Vec&lt;Box&lt;dyn Animal&gt;&gt; = vec![Box::new(Dog), Box::new(Cat)];\n\n    // \u8c03\u7528\u52a8\u6001\u591a\u6001\u6027\u5bb9\u5668\u4e2d\u6bcf\u4e2a\u5bf9\u8c61\u7684 speak \u65b9\u6cd5\n    for animal in animals.iter() {\n        animal.speak();\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7279\u5f81 <code>Animal</code>\uff0c\u5e76\u4e3a\u5176\u5b9e\u73b0\u4e86\u4e24\u4e2a\u4e0d\u540c\u7684\u7ed3\u6784\u4f53 <code>Dog</code> \u548c <code>Cat</code>\u3002\u7136\u540e\uff0c\u6211\u4eec\u5728 <code>main</code> \u51fd\u6570\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u5b9e\u73b0 <code>Animal</code> \u7279\u5f81\u7684\u5bf9\u8c61\u7684 <code>Vec</code>\uff0c\u5e76\u4f7f\u7528 <code>Box</code> \u5305\u88c5\u5b83\u4eec\u4ee5\u5b9e\u73b0\u52a8\u6001\u591a\u6001\u6027\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528 <code>for</code> \u5faa\u73af\u8fed\u4ee3\u5bb9\u5668\u4e2d\u7684\u6bcf\u4e2a\u5bf9\u8c61\uff0c\u5e76\u8c03\u7528 <code>speak</code> \u65b9\u6cd5\uff0c\u6839\u636e\u5bf9\u8c61\u7684\u5b9e\u9645\u7c7b\u578b\u5206\u522b\u8f93\u51fa\u4e0d\u540c\u7684\u58f0\u97f3\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#172-derive","title":"17.2 \u6d3e\u751f(#[derive])","text":"<p>\u5728 Rust \u4e2d\uff0c\u901a\u8fc7 <code>#[derive]</code> \u5c5e\u6027\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u81ea\u52a8\u751f\u6210\u67d0\u4e9b traits \u7684\u57fa\u672c\u5b9e\u73b0\uff0c\u8fd9\u4e9b traits \u901a\u5e38\u4e0e Rust \u4e2d\u7684\u5e38\u89c1\u7f16\u7a0b\u6a21\u5f0f\u548c\u529f\u80fd\u76f8\u5173\u3002\u4e0b\u9762\u662f\u5173\u4e8e\u4e0d\u540c trait \u7684\u77ed\u4f8b\u5b50\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#1721-eq-partialeq-trait","title":"17.2.1 <code>Eq</code> \u548c <code>PartialEq</code> Trait","text":"<p><code>Eq</code> \u548c <code>PartialEq</code> \u662f Rust \u4e2d\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49\u7684 trait\u3002\u5b83\u4eec\u901a\u5e38\u7528\u4e8e\u652f\u6301\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u76f8\u7b49\u6027\u6bd4\u8f83\u3002</p> <p><code>Eq</code> \u548c <code>PartialEq</code> \u662f Rust \u4e2d\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49\u7684 trait\u3002\u5b83\u4eec\u901a\u5e38\u7528\u4e8e\u652f\u6301\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u76f8\u7b49\u6027\u6bd4\u8f83\u3002</p> <p><code>Eq</code> Trait:</p> <ul> <li><code>Eq</code> \u662f\u4e00\u4e2a trait\uff0c\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u5b8c\u5168\u76f8\u7b49\u3002</li> <li>\u5b83\u7684\u5b9a\u4e49\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a<code>trait Eq: PartialEq&lt;Self&gt; {}</code>\uff0c\u8fd9\u8868\u793a <code>Eq</code> \u4f9d\u8d56\u4e8e <code>PartialEq</code>\uff0c\u56e0\u6b64\uff0c\u4efb\u4f55\u5b9e\u73b0\u4e86 <code>Eq</code> \u7684\u7c7b\u578b\u4e5f\u5fc5\u987b\u5b9e\u73b0 <code>PartialEq</code>\u3002</li> <li>\u5f53\u4f60\u5e0c\u671b\u4e24\u4e2a\u503c\u5728\u8bed\u4e49\u4e0a\u5b8c\u5168\u76f8\u7b49\u65f6\uff0c\u4f60\u5e94\u8be5\u4e3a\u4f60\u7684\u7c7b\u578b\u5b9e\u73b0 <code>Eq</code>\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u4e24\u4e2a\u503c\u901a\u8fc7 <code>==</code> \u6bd4\u8f83\u8fd4\u56de <code>true</code>\uff0c\u5219\u5b83\u4eec\u4e5f\u5e94\u8be5\u901a\u8fc7 <code>eq</code> \u65b9\u6cd5\u8fd4\u56de <code>true</code>\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cRust \u7684\u5185\u7f6e\u7c7b\u578b\u90fd\u5b9e\u73b0\u4e86 <code>Eq</code>\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u76f8\u7b49\u6027\u6bd4\u8f83\u3002</li> </ul> <p><code>PartialEq</code> Trait:</p> <ul> <li><code>PartialEq</code> \u4e5f\u662f\u4e00\u4e2a trait\uff0c\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u90e8\u5206\u76f8\u7b49\u3002</li> <li>\u5b83\u7684\u5b9a\u4e49\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a<code>trait PartialEq&lt;Rhs&gt; where Rhs: ?Sized {}</code>\uff0c\u8fd9\u8868\u793a <code>PartialEq</code> \u6709\u4e00\u4e2a\u5173\u8054\u7c7b\u578b <code>Rhs</code>\uff0c\u5b83\u8868\u793a\u8981\u4e0e\u81ea\u8eab\u8fdb\u884c\u6bd4\u8f83\u7684\u7c7b\u578b\u3002</li> <li><code>PartialEq</code> \u7684\u4e3b\u8981\u65b9\u6cd5\u662f <code>fn eq(&amp;self, other: &amp;Rhs) -&gt; bool;</code>\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u63a5\u53d7\u53e6\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>Rhs</code> \u7684\u5f15\u7528\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49\u3002</li> <li>\u5f53\u4f60\u5e0c\u671b\u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301\u76f8\u7b49\u6027\u6bd4\u8f83\u65f6\uff0c\u4f60\u5e94\u8be5\u4e3a\u4f60\u7684\u7c7b\u578b\u5b9e\u73b0 <code>PartialEq</code>\u3002\u8fd9\u5141\u8bb8\u4f60\u5b9a\u4e49\u4e24\u4e2a\u503c\u4f55\u65f6\u88ab\u8ba4\u4e3a\u662f\u76f8\u7b49\u7684\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cRust \u7684\u5185\u7f6e\u7c7b\u578b\u4e5f\u5b9e\u73b0\u4e86 <code>PartialEq</code>\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u76f8\u7b49\u6027\u6bd4\u8f83\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4e3a\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\u5b9e\u73b0 <code>Eq</code> \u548c <code>PartialEq</code>\uff1a</p> <pre><code>#[derive(Debug)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nimpl PartialEq for Point {\n    fn eq(&amp;self, other: &amp;Self) -&gt; bool {\n        self.x == other.x &amp;&amp; self.y == other.y\n    }\n}\n\nimpl Eq for Point {}\n\nfn main() {\n    let point1 = Point { x: 1, y: 2 };\n    let point2 = Point { x: 1, y: 2 };\n    let point3 = Point { x: 3, y: 4 };\n\n    println!(\"point1 == point2: {}\", point1 == point2); // true\n    println!(\"point1 == point3: {}\", point1 == point3); // false\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Point</code> \u7684\u7ed3\u6784\u4f53\uff0c\u5e76\u4e3a\u5b83\u5b9e\u73b0\u4e86 <code>PartialEq</code> \u548c <code>Eq</code>\u3002\u5728 <code>PartialEq</code> \u7684 <code>eq</code> \u65b9\u6cd5\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4f55\u65f6\u8ba4\u4e3a\u4e24\u4e2a <code>Point</code> \u5b9e\u4f8b\u662f\u76f8\u7b49\u7684\uff0c\u5373\u5f53\u5b83\u4eec\u7684 <code>x</code> \u548c <code>y</code> \u5750\u6807\u90fd\u76f8\u7b49\u65f6\u3002\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>==</code> \u8fd0\u7b97\u7b26\u6bd4\u8f83\u4e24\u4e2a <code>Point</code> \u5b9e\u4f8b\uff0c\u4ee5\u53ca\u5982\u4f55\u6839\u636e\u6211\u4eec\u7684\u76f8\u7b49\u6027\u5b9a\u4e49\u6765\u5224\u65ad\u5b83\u4eec\u662f\u5426\u76f8\u7b49\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#1722-ord-partialord-traits","title":"17.2.2 <code>Ord</code> \u548c <code>PartialOrd</code> Traits","text":"<p><code>Ord</code> \u548c <code>PartialOrd</code> \u662f Rust \u4e2d\u7528\u4e8e\u6bd4\u8f83\u503c\u7684 trait\uff0c\u5b83\u4eec\u901a\u5e38\u7528\u4e8e\u652f\u6301\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u5927\u5c0f\u6bd4\u8f83\u3002</p> <p><code>Ord</code> Trait:</p> <ul> <li><code>Ord</code> \u662f\u4e00\u4e2a trait\uff0c\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u578b\u7684\u5927\u5c0f\u5173\u7cfb\uff0c\u5373\u5b9a\u4e49\u4e86\u4e00\u79cd\u5168\u5e8f\u5173\u7cfb\uff08total order\uff09\u3002</li> <li>\u5b83\u7684\u5b9a\u4e49\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a<code>trait Ord: Eq + PartialOrd&lt;Self&gt; {}</code>\uff0c\u8fd9\u8868\u793a <code>Ord</code> \u4f9d\u8d56\u4e8e <code>Eq</code> \u548c <code>PartialOrd</code>\uff0c\u56e0\u6b64\uff0c\u4efb\u4f55\u5b9e\u73b0\u4e86 <code>Ord</code> \u7684\u7c7b\u578b\u5fc5\u987b\u5b9e\u73b0 <code>Eq</code> \u548c <code>PartialOrd</code>\u3002</li> <li><code>Ord</code> \u4e3b\u8981\u65b9\u6cd5\u662f <code>fn cmp(&amp;self, other: &amp;Self) -&gt; Ordering;</code>\uff0c\u5b83\u63a5\u53d7\u53e6\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>Self</code> \u7684\u5f15\u7528\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a <code>Ordering</code> \u679a\u4e3e\u503c\uff0c\u8868\u793a\u4e24\u4e2a\u503c\u7684\u5927\u5c0f\u5173\u7cfb\u3002</li> <li><code>Ordering</code> \u679a\u4e3e\u6709\u4e09\u4e2a\u6210\u5458\uff1a<code>Less</code>\u3001<code>Equal</code> \u548c <code>Greater</code>\uff0c\u5206\u522b\u8868\u793a\u5f53\u524d\u503c\u5c0f\u4e8e\u3001\u7b49\u4e8e\u6216\u5927\u4e8e\u53e6\u4e00\u4e2a\u503c\u3002</li> </ul> <p><code>PartialOrd</code> Trait:</p> <ul> <li><code>PartialOrd</code> \u4e5f\u662f\u4e00\u4e2a trait\uff0c\u7528\u4e8e\u5b9a\u4e49\u4e24\u4e2a\u503c\u7684\u90e8\u5206\u5927\u5c0f\u5173\u7cfb\u3002</li> <li>\u5b83\u7684\u5b9a\u4e49\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a<code>trait PartialOrd&lt;Rhs&gt; where Rhs: ?Sized {}</code>\uff0c\u8fd9\u8868\u793a <code>PartialOrd</code> \u6709\u4e00\u4e2a\u5173\u8054\u7c7b\u578b <code>Rhs</code>\uff0c\u5b83\u8868\u793a\u8981\u4e0e\u81ea\u8eab\u8fdb\u884c\u6bd4\u8f83\u7684\u7c7b\u578b\u3002</li> <li><code>PartialOrd</code> \u4e3b\u8981\u65b9\u6cd5\u662f <code>fn partial_cmp(&amp;self, other: &amp;Rhs) -&gt; Option&lt;Ordering&gt;;</code>\uff0c\u5b83\u63a5\u53d7\u53e6\u4e00\u4e2a\u7c7b\u578b\u4e3a <code>Rhs</code> \u7684\u5f15\u7528\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a <code>Option&lt;Ordering&gt;</code>\uff0c\u8868\u793a\u4e24\u4e2a\u503c\u7684\u5927\u5c0f\u5173\u7cfb\u3002</li> <li><code>Option&lt;Ordering&gt;</code> \u53ef\u4ee5\u6709\u4e09\u4e2a\u503c\uff1a<code>Some(Ordering)</code> \u8868\u793a\u6709\u5927\u5c0f\u5173\u7cfb\uff0c<code>None</code> \u8868\u793a\u65e0\u6cd5\u786e\u5b9a\u5927\u5c0f\u5173\u7cfb\u3002</li> </ul> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u9996\u5148\u5b9e\u73b0 <code>PartialOrd</code>\uff0c\u7136\u540e\u57fa\u4e8e <code>PartialOrd</code> \u7684\u5b9e\u73b0\u6765\u5b9e\u73b0 <code>Ord</code>\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u662f\uff0c<code>Ord</code> \u8868\u793a\u5b8c\u5168\u7684\u5927\u5c0f\u5173\u7cfb\uff0c\u800c <code>PartialOrd</code> \u8868\u793a\u90e8\u5206\u7684\u5927\u5c0f\u5173\u7cfb\u3002\u5982\u679c\u4f60\u5b9e\u73b0\u4e86 <code>PartialOrd</code>\uff0c\u90a3\u4e48 Rust \u5c06\u4f1a\u4e3a\u4f60\u81ea\u52a8\u751f\u6210 <code>Ord</code> \u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4e3a\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\u5b9e\u73b0 <code>PartialOrd</code> \u548c <code>Ord</code>\uff1a</p> <pre><code>#[derive(Debug, PartialEq, Eq)]\nstruct Person {\n    name: String,\n    age: u32,\n}\n\nimpl PartialOrd for Person {\n    fn partial_cmp(&amp;self, other: &amp;Self) -&gt; Option&lt;Ordering&gt; {\n        Some(self.age.cmp(&amp;other.age))\n    }\n}\n\nimpl Ord for Person {\n    fn cmp(&amp;self, other: &amp;Self) -&gt; Ordering {\n        self.age.cmp(&amp;other.age)\n    }\n}\n\nuse std::cmp::Ordering;\n\nfn main() {\n    let person1 = Person { name: \"Alice\".to_string(), age: 30 };\n    let person2 = Person { name: \"Bob\".to_string(), age: 25 };\n\n    println!(\"person1 &lt; person2: {}\", person1 &lt; person2); // true\n    println!(\"person1 &gt; person2: {}\", person1 &gt; person2); // false\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>person1 &lt; person2: false\nperson1 &gt; person2: true\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Person</code> \u7684\u7ed3\u6784\u4f53\uff0c\u5e76\u4e3a\u5b83\u5b9e\u73b0\u4e86 <code>PartialOrd</code> \u548c <code>Ord</code>\u3002\u6211\u4eec\u6839\u636e\u5e74\u9f84\u6765\u5b9a\u4e49\u4e86\u4e24\u4e2a <code>Person</code> \u5b9e\u4f8b\u4e4b\u95f4\u7684\u5927\u5c0f\u5173\u7cfb\u3002\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>&lt;</code> \u548c <code>&gt;</code> \u8fd0\u7b97\u7b26\u6765\u6bd4\u8f83\u4e24\u4e2a <code>Person</code> \u5b9e\u4f8b\uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 <code>cmp</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u5b83\u4eec\u7684\u5927\u5c0f\u5173\u7cfb\u3002\u56e0\u4e3a\u6211\u4eec\u5b9e\u73b0\u4e86 <code>PartialOrd</code> \u548c <code>Ord</code>\uff0c\u6240\u4ee5 Rust \u53ef\u4ee5\u4e3a\u6211\u4eec\u751f\u6210\u5b8c\u6574\u7684\u5927\u5c0f\u6bd4\u8f83\u903b\u8f91\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#1723-clone-trait","title":"17.2.3  <code>Clone</code> Trait","text":"<p><code>Clone</code> \u662f Rust \u4e2d\u7684\u4e00\u4e2a trait\uff0c\u7528\u4e8e\u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u7c7b\u578b\u7684\u526f\u672c\uff08\u590d\u5236\uff09\uff0c\u4ece\u800c\u5728\u9700\u8981\u65f6\u590d\u5236\u4e00\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u79fb\u52a8\uff08\u8f6c\u79fb\u6240\u6709\u6743\uff09\u5b83\u3002<code>Clone</code> trait \u5bf9\u4e8e\u67d0\u4e9b\u7c7b\u578b\u7684\u64cd\u4f5c\u975e\u5e38\u6709\u7528\uff0c\u4f8b\u5982\u9700\u8981\u514b\u9686\u5bf9\u8c61\u4ee5\u907f\u514d\u4fee\u6539\u539f\u59cb\u5bf9\u8c61\u65f6\u5f71\u54cd\u5230\u526f\u672c\u7684\u60c5\u51b5\u3002</p> <p>\u4e0b\u9762\u662f\u6709\u5173 <code>Clone</code> trait \u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li><code>Clone</code> Trait \u7684\u5b9a\u4e49\uff1a</li> <li><code>Clone</code> trait \u5b9a\u4e49\u5982\u4e0b\uff1a<code>pub trait Clone { fn clone(&amp;self) -&gt; Self; }</code>\u3002</li> <li> <p>\u5b83\u5305\u542b\u4e00\u4e2a\u65b9\u6cd5 <code>clone</code>\uff0c\u8be5\u65b9\u6cd5\u63a5\u53d7 <code>self</code> \u7684\u4e0d\u53ef\u53d8\u5f15\u7528\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5177\u6709\u76f8\u540c\u503c\u7684\u5bf9\u8c61\u3002</p> </li> <li> <p>\u4e3a\u4f55\u9700\u8981 Clone\uff1a</p> </li> <li>Rust \u4e2d\u7684\u8d4b\u503c\u9ed8\u8ba4\u662f\u79fb\u52a8\u8bed\u4e49\uff0c\u5373\u5c06\u503c\u7684\u6240\u6709\u6743\u4ece\u4e00\u4e2a\u53d8\u91cf\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u53d8\u91cf\u3002\u8fd9\u610f\u5473\u7740\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f60\u5c06\u4e00\u4e2a\u5bf9\u8c61\u5206\u914d\u7ed9\u53e6\u4e00\u4e2a\u53d8\u91cf\uff0c\u539f\u59cb\u5bf9\u8c61\u5c06\u4e0d\u518d\u53ef\u7528\u3002</li> <li> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u7684\u526f\u672c\uff0c\u800c\u4e0d\u662f\u79fb\u52a8\u5b83\uff0c\u4ee5\u4fbf\u4fdd\u7559\u539f\u59cb\u5bf9\u8c61\u7684\u62f7\u8d1d\u3002\u8fd9\u662f <code>Clone</code> trait \u7684\u7528\u6b66\u4e4b\u5730\u3002</p> </li> <li> <p>Clone \u7684\u9ed8\u8ba4\u5b9e\u73b0\uff1a</p> </li> <li>\u5bf9\u4e8e\u5b9e\u73b0\u4e86 <code>Copy</code> trait \u7684\u7c7b\u578b\uff0c\u5b83\u4eec\u4e5f\u81ea\u52a8\u5b9e\u73b0\u4e86 <code>Clone</code> trait\u3002\u8fd9\u662f\u56e0\u4e3a <code>Copy</code> \u8868\u793a\u5177\u6709\u590d\u5236\u8bed\u4e49\uff0c\u5b83\u4eec\u603b\u662f\u53ef\u4ee5\u5b89\u5168\u5730\u8fdb\u884c\u514b\u9686\u3002</li> <li> <p>\u5bf9\u4e8e\u5176\u4ed6\u7c7b\u578b\uff0c\u4f60\u9700\u8981\u624b\u52a8\u5b9e\u73b0 <code>Clone</code> trait\u3002\u901a\u5e38\uff0c\u8fd9\u6d89\u53ca\u5230\u6df1\u5ea6\u590d\u5236\u6240\u6709\u5185\u90e8\u6570\u636e\u3002</p> </li> <li> <p>\u81ea\u5b9a\u4e49 Clone \u5b9e\u73b0\uff1a</p> </li> <li>\u4f60\u53ef\u4ee5\u4e3a\u81ea\u5b9a\u4e49\u7c7b\u578b\u5b9e\u73b0 <code>Clone</code>\uff0c\u5e76\u5728 <code>clone</code> \u65b9\u6cd5\u4e2d\u5b9a\u4e49\u5982\u4f55\u8fdb\u884c\u514b\u9686\u3002\u8fd9\u53ef\u80fd\u6d89\u53ca\u5230\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u5e76\u590d\u5236\u6240\u6709\u5185\u90e8\u6570\u636e\u3002</li> <li>\u6ce8\u610f\uff0c\u5982\u679c\u7c7b\u578b\u5305\u542b\u5f15\u7528\u6216\u5176\u4ed6\u975e <code>Clone</code> \u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u4f60\u9700\u8981\u786e\u4fdd\u6b63\u786e\u5730\u5904\u7406\u5b83\u4eec\u7684\u514b\u9686\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u5982\u4f55\u4e3a\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53\u5b9e\u73b0 <code>Clone</code>\uff1a</p> <pre><code>#[derive(Clone)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let original_point = Point { x: 1, y: 2 };\n    let cloned_point = original_point.clone();\n\n    println!(\"Original Point: {:?}\", original_point);\n    println!(\"Cloned Point: {:?}\", cloned_point);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Point</code> \u7684\u7ed3\u6784\u4f53\uff0c\u5e76\u4f7f\u7528 <code>#[derive(Clone)]</code> \u5c5e\u6027\u81ea\u52a8\u751f\u6210 <code>Clone</code> trait \u7684\u5b9e\u73b0\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a <code>Point</code> \u5b9e\u4f8b\uff0c\u5e76\u4f7f\u7528 <code>clone</code> \u65b9\u6cd5\u6765\u514b\u9686\u5b83\uff0c\u4ece\u800c\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u5177\u6709\u76f8\u540c\u503c\u7684\u5bf9\u8c61\u3002</p> <p>\u603b\u4e4b\uff0c<code>Clone</code> trait \u5141\u8bb8\u4f60\u5728\u9700\u8981\u65f6\u590d\u5236\u5bf9\u8c61\uff0c\u4ee5\u907f\u514d\u79fb\u52a8\u8bed\u4e49\uff0c\u5e76\u786e\u4fdd\u4f60\u6709\u4e00\u4e2a\u539f\u59cb\u5bf9\u8c61\u7684\u526f\u672c\uff0c\u800c\u4e0d\u662f\u5171\u4eab\u540c\u4e00\u4efd\u6570\u636e\u3002\u8fd9\u5bf9\u4e8e\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6570\u636e\u7ba1\u7406\u548c\u5171\u4eab\u975e\u5e38\u6709\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#1724-copy-trait","title":"17.2.4 <code>Copy</code> Trait","text":"<p><code>Copy</code> \u662f Rust \u4e2d\u7684\u4e00\u4e2a\u7279\u6b8a\u7684 trait\uff0c\u7528\u4e8e\u8868\u793a\u7c7b\u578b\u5177\u6709 \"\u590d\u5236\u8bed\u4e49\"\uff08copy semantics\uff09\u3002\u8fd9\u610f\u5473\u7740\u5f53\u5c06\u4e00\u4e2a\u503c\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u4e0d\u4f1a\u53d1\u751f\u6240\u6709\u6743\u8f6c\u79fb\uff0c\u800c\u662f\u4f1a\u521b\u5efa\u503c\u7684\u4e00\u4e2a\u7cbe\u786e\u526f\u672c\u3002\u56e0\u6b64\uff0c\u590d\u5236\u7c7b\u578b\u7684\u53d8\u91cf\u4e4b\u95f4\u7684\u8d4b\u503c\u64cd\u4f5c\u4e0d\u4f1a\u5bfc\u81f4\u539f\u59cb\u503c\u53d8\u5f97\u4e0d\u53ef\u7528\u3002\u4ee5\u4e0b\u662f\u6709\u5173 <code>Copy</code> trait \u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li><code>Copy</code> Trait \u7684\u5b9a\u4e49\uff1a</li> <li><code>Copy</code> trait \u5b9a\u4e49\u5982\u4e0b\uff1a<code>pub trait Copy {}</code>\u3002</li> <li> <p>\u5b83\u6ca1\u6709\u4efb\u4f55\u65b9\u6cd5\uff0c\u53ea\u662f\u4e00\u4e2a\u6807\u8bb0 trait\uff0c\u7528\u4e8e\u8868\u793a\u5b9e\u73b0\u4e86\u8be5 trait \u7684\u7c7b\u578b\u53ef\u4ee5\u8fdb\u884c\u590d\u5236\u64cd\u4f5c\u3002</p> </li> <li> <p>\u590d\u5236\u8bed\u4e49\uff1a</p> </li> <li>\u590d\u5236\u8bed\u4e49\u610f\u5473\u7740\u5f53\u4f60\u5c06\u4e00\u4e2a <code>Copy</code> \u7c7b\u578b\u7684\u503c\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u5bf9\u5185\u5b58\u4e2d\u7684\u539f\u59cb\u6570\u636e\u8fdb\u884c\u4e86\u4e00\u4efd\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u5c06\u6240\u6709\u6743\u4ece\u4e00\u4e2a\u53d8\u91cf\u8f6c\u79fb\u5230\u53e6\u4e00\u4e2a\u53d8\u91cf\u3002</li> <li> <p>\u8fd9\u610f\u5473\u7740\u539f\u59cb\u503c\u548c\u65b0\u53d8\u91cf\u90fd\u62e5\u6709\u76f8\u540c\u7684\u6570\u636e\uff0c\u5b83\u4eec\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u3002\u4fee\u6539\u5176\u4e2d\u4e00\u4e2a\u4e0d\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u3002</p> </li> <li> <p><code>Clone</code> \u4e0e <code>Copy</code> \u7684\u533a\u522b\uff1a</p> </li> <li><code>Clone</code> trait \u5141\u8bb8\u4f60\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u514b\u9686\u903b\u8f91\uff0c\u901a\u5e38\u6d89\u53ca\u6df1\u5ea6\u590d\u5236\u5185\u90e8\u6570\u636e\uff0c\u56e0\u6b64\u5b83\u7684\u64cd\u4f5c\u53ef\u80fd\u4f1a\u66f4\u6602\u8d35\u3002</li> <li> <p><code>Copy</code> trait \u7528\u4e8e\u7c7b\u578b\uff0c\u5176\u4e2d\u514b\u9686\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u4f4d\u62f7\u8d1d\u5b8c\u6210\uff0c\u56e0\u6b64\u66f4\u9ad8\u6548\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6807\u91cf\u7c7b\u578b\uff08\u5982\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c\u7b49\uff09\u548c\u5143\u7ec4\uff08\u5305\u542b\u53ea\u5305\u542b <code>Copy</code> \u7c7b\u578b\u7684\u5143\u7d20\uff09\u90fd\u5b9e\u73b0\u4e86 <code>Copy</code>\u3002</p> </li> <li> <p><code>Copy</code> \u7684\u81ea\u52a8\u5b9e\u73b0\uff1a</p> </li> <li>\u6240\u6709\u6807\u91cf\u7c7b\u578b\uff08\u4f8b\u5982\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c\uff09\u3001\u5143\u7ec4\uff08\u53ea\u5305\u542b <code>Copy</code> \u7c7b\u578b\u7684\u5143\u7d20\uff09\u4ee5\u53ca\u5b9e\u73b0\u4e86 <code>Copy</code> \u7684\u7ed3\u6784\u4f53\u90fd\u81ea\u52a8\u5b9e\u73b0\u4e86 <code>Copy</code>\u3002</li> <li>\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u5982\u679c\u7c7b\u578b\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u5b9e\u73b0\u4e86 <code>Copy</code>\uff0c\u90a3\u4e48\u8be5\u7c7b\u578b\u4e5f\u53ef\u4ee5\u81ea\u52a8\u5b9e\u73b0 <code>Copy</code>\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6f14\u793a\u4e86 <code>Copy</code> \u7c7b\u578b\u7684\u4f7f\u7528\uff1a</p> <pre><code>fn main() {\n    let x = 5;  // \u6574\u6570\u662f Copy \u7c7b\u578b\n    let y = x;  // \u901a\u8fc7\u590d\u5236\u8bed\u4e49\u521b\u5efa y\uff0cx \u4ecd\u7136\u6709\u6548\n\n    println!(\"x: {}\", x);  // \u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee x \u7684\u503c\n    println!(\"y: {}\", y);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6574\u6570\u662f <code>Copy</code> \u7c7b\u578b\uff0c\u56e0\u6b64\u5c06 <code>x</code> \u8d4b\u503c\u7ed9 <code>y</code> \u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u521b\u5efa\u4e86 <code>x</code> \u7684\u4e00\u4e2a\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u5c06 <code>x</code> \u7684\u6240\u6709\u6743\u8f6c\u79fb\u5230 <code>y</code>\u3002\u56e0\u6b64\uff0c<code>x</code> \u548c <code>y</code> \u90fd\u53ef\u4ee5\u72ec\u7acb\u8bbf\u95ee\u5b83\u4eec\u7684\u503c\u3002</p> <p>\u603b\u4e4b\uff0c<code>Copy</code> trait \u8868\u793a\u7c7b\u578b\u5177\u6709\u590d\u5236\u8bed\u4e49\uff0c\u8fd9\u4f7f\u5f97\u5728\u8d4b\u503c\u64cd\u4f5c\u65f6\u4e0d\u4f1a\u53d1\u751f\u6240\u6709\u6743\u8f6c\u79fb\uff0c\u800c\u662f\u521b\u5efa\u4e00\u4e2a\u503c\u7684\u526f\u672c\u3002\u8fd9\u5bf9\u4e8e\u6807\u91cf\u7c7b\u578b\u548c\u67d0\u4e9b\u7ed3\u6784\u4f53\u7c7b\u578b\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u5728\u4e0d\u6d89\u53ca\u6240\u6709\u6743\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u590d\u5236\u3002\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\uff0c\u5982\u679c\u7c7b\u578b\u5305\u542b\u4e0d\u652f\u6301 <code>Copy</code> \u7684\u5b57\u6bb5\uff0c\u90a3\u4e48\u6574\u4e2a\u7c7b\u578b\u4e5f\u65e0\u6cd5\u5b9e\u73b0 <code>Copy</code>\u3002</p> <p>\u4ee5\u4e0b\u662f\u5173\u4e8e <code>Clone</code> \u548c <code>Copy</code> \u7684\u6bd4\u8f83\u8868\u683c\uff0c\u5305\u62ec\u9002\u7528\u573a\u666f\u548c\u9002\u7528\u7684\u7c7b\u578b\uff1a</p> \u7279\u5f81 \u63cf\u8ff0 \u9002\u7528\u573a\u666f \u9002\u7528\u7c7b\u578b <code>Clone</code> \u5141\u8bb8\u521b\u5efa\u4e00\u4e2a\u7c7b\u578b\u7684\u526f\u672c\uff0c\u901a\u5e38\u6d89\u53ca\u6df1\u5ea6\u590d\u5236\u5185\u90e8\u6570\u636e\u3002 \u5f53\u9700\u8981\u5bf9\u7c7b\u578b\u8fdb\u884c\u81ea\u5b9a\u4e49\u7684\u514b\u9686\u64cd\u4f5c\u65f6\uff0c\u6216\u8005\u7c7b\u578b\u5305\u542b\u975e <code>Copy</code> \u5b57\u6bb5\u65f6\u3002 \u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u5305\u62ec\u5177\u6709\u975e <code>Copy</code> \u5b57\u6bb5\u7684\u7c7b\u578b\u3002 <code>Copy</code> \u8868\u793a\u7c7b\u578b\u5177\u6709\u590d\u5236\u8bed\u4e49\uff0c\u590d\u5236\u64cd\u4f5c\u662f\u901a\u8fc7\u7b80\u5355\u7684\u4f4d\u62f7\u8d1d\u5b8c\u6210\u7684\u3002 \u5f53\u53ea\u9700\u8981\u8fdb\u884c\u7b80\u5355\u7684\u503c\u590d\u5236\uff0c\u4e0d\u9700\u8981\u81ea\u5b9a\u4e49\u514b\u9686\u903b\u8f91\u65f6\u3002 \u6807\u91cf\u7c7b\u578b\uff08\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c\u7b49\uff09\u3001\u5143\u7ec4\uff08\u53ea\u5305\u542b <code>Copy</code> \u7c7b\u578b\u7684\u5143\u7d20\uff09\u3001\u5b9e\u73b0\u4e86 <code>Copy</code> \u7684\u7ed3\u6784\u4f53\u3002 <p>\u6ce8\u610f\uff1a</p> <ul> <li>\u5bf9\u4e8e <code>Clone</code>\uff0c\u4f60\u53ef\u4ee5\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u514b\u9686\u903b\u8f91\uff0c\u901a\u5e38\u9700\u8981\u6df1\u5ea6\u590d\u5236\u5185\u90e8\u6570\u636e\uff0c\u56e0\u6b64\u5b83\u7684\u64cd\u4f5c\u53ef\u80fd\u4f1a\u66f4\u6602\u8d35\u3002</li> <li>\u5bf9\u4e8e <code>Copy</code>\uff0c\u590d\u5236\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u4f4d\u62f7\u8d1d\u5b8c\u6210\uff0c\u56e0\u6b64\u66f4\u9ad8\u6548\u3002</li> <li><code>Clone</code> \u548c <code>Copy</code> trait \u4e0d\u662f\u4e92\u65a5\u7684\uff0c\u67d0\u4e9b\u7c7b\u578b\u53ef\u4ee5\u540c\u65f6\u5b9e\u73b0\u5b83\u4eec\uff0c\u4f46\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ea\u9700\u8981\u5b9e\u73b0\u5176\u4e2d\u4e00\u4e2a\u3002</li> <li>\u6807\u91cf\u7c7b\u578b\uff08\u5982\u6574\u6570\u3001\u6d6e\u70b9\u6570\u3001\u5e03\u5c14\u503c\uff09\u901a\u5e38\u662f <code>Copy</code> \u7c7b\u578b\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f4d\u62f7\u8d1d\u590d\u5236\u3002</li> <li>\u81ea\u5b9a\u4e49\u7c7b\u578b\u901a\u5e38\u9700\u8981\u5b9e\u73b0 <code>Clone</code>\uff0c\u9664\u975e\u5b83\u4eec\u5305\u542b\u53ea\u6709 <code>Copy</code> \u7c7b\u578b\u7684\u5b57\u6bb5\u3002</li> </ul> <p>\u6839\u636e\u4f60\u7684\u9700\u6c42\u548c\u7c7b\u578b\u7684\u7279\u6027\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5b9e\u73b0 <code>Clone</code> \u6216\u8ba9\u7c7b\u578b\u81ea\u52a8\u5b9e\u73b0 <code>Copy</code>\uff08\u5982\u679c\u9002\u7528\uff09\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#1725-hash-trait","title":"17.2.5 <code>Hash</code> Trait","text":"<pre><code>use std::collections::hash_map::DefaultHasher;\nuse std::hash::{Hash, Hasher};\n\n#[derive(Debug)]\nstruct User {\n    id: u32,\n    username: String,\n}\n\nimpl Hash for User {\n    fn hash&lt;H: Hasher&gt;(&amp;self, state: &amp;mut H) {\n        self.id.hash(state);\n        self.username.hash(state);\n    }\n}\n\nfn main() {\n    let user = User { id: 1, username: \"user123\".to_string() };\n\n    let mut hasher = DefaultHasher::new();\n    user.hash(&amp;mut hasher);\n\n    println!(\"Hash value: {}\", hasher.finish());\n} // \u6267\u884c\u540e\u4f1a\u8fd4\u56de \"Hash value: 11664658372174354745\"\n</code></pre> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>Hash</code> trait \u6765\u8ba1\u7b97\u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53 <code>User</code> \u7684\u54c8\u5e0c\u503c\u3002</p> <ol> <li><code>Default</code> Trait\uff1a</li> </ol> <pre><code>#[derive(Default)]\nstruct Settings {\n    width: u32,\n    height: u32,\n    title: String,\n}\n\nfn main() {\n    let default_settings = Settings::default();\n    println!(\"{:?}\", default_settings);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>Default</code> trait \u6765\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\u7684\u9ed8\u8ba4\u5b9e\u4f8b\u3002</p> <ol> <li><code>Debug</code> Trait\uff1a</li> </ol> <pre><code>#[derive(Debug)]\nstruct Person {\n    name: String,\n    age: u32,\n}\n\nfn main() {\n    let person = Person { name: \"Alice\".to_string(), age: 30 };\n    println!(\"Person: {:?}\", person);\n}\n</code></pre> <p>\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>Debug</code> trait \u548c <code>{:?}</code> \u683c\u5f0f\u5316\u5668\u6765\u683c\u5f0f\u5316\u4e00\u4e2a\u503c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#173-iterator-trait","title":"17.3 \u8fed\u4ee3\u5668 (Iterator Trait)","text":"<p>\u8fed\u4ee3\u5668\uff08Iterator Trait\uff09\u662f Rust \u4e2d\u7528\u4e8e\u8fed\u4ee3\u96c6\u5408\u5143\u7d20\u7684\u6807\u51c6\u65b9\u6cd5\u3002\u5b83\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u548c\u901a\u7528\u7684\u62bd\u8c61\uff0c\u7528\u4e8e\u5904\u7406\u6570\u7ec4\u3001\u5411\u91cf\u3001\u54c8\u5e0c\u8868\u7b49\u4e0d\u540c\u7c7b\u578b\u7684\u96c6\u5408\u3002\u8fed\u4ee3\u5668\u4f7f\u4f60\u80fd\u591f\u4ee5\u7edf\u4e00\u7684\u65b9\u5f0f\u904d\u5386\u548c\u5904\u7406\u8fd9\u4e9b\u96c6\u5408\u7684\u5143\u7d20\u3002</p> <p>\u6bd4\u5982\u4f5c\u8005\u4e61\u4e0b\u7684\u5bb6\u4e2d\u517b\u4e8618\u6761\u5c0f\u72d7\uff0c\u9700\u8981\u5411\u5ba2\u4eba\u6328\u4e2a\u4ecb\u7ecd\uff0c\u4f5c\u8005\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fed\u4ee3\u5668\u6765\u904d\u5386\u548c\u5904\u7406\u72d7\u7684\u96c6\u5408\uff0c\u5c31\u50cf\u4e0b\u9762\u7684\u793a\u4f8b\u4e00\u6837\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u72d7\u7684\u7ed3\u6784\u4f53\nstruct Dog {\n    name: String,\n    breed: String,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u72d7\u7684\u96c6\u5408\uff0c\u4f7f\u7528\u5341\u516b\u7f57\u6c49\u7684\u540d\u5b57\u547d\u540d\n    let dogs = vec![\n        Dog { name: \"\u5f20\u98de\".to_string(), breed: \"\u5409\u5a03\u5a03\".to_string() },\n        Dog { name: \"\u5173\u7fbd\".to_string(), breed: \"\u8d35\u5bbe\u72ac\".to_string() },\n        Dog { name: \"\u5218\u5907\".to_string(), breed: \"\u67f4\u72ac\".to_string() },\n        Dog { name: \"\u8d75\u4e91\".to_string(), breed: \"\u8fb9\u5883\u7267\u7f8a\u72ac\".to_string() },\n        Dog { name: \"\u9a6c\u8d85\".to_string(), breed: \"\u6bd4\u718a\u72ac\".to_string() },\n        Dog { name: \"\u9ec4\u5fe0\".to_string(), breed: \"\u62c9\u5e03\u62c9\u591a\".to_string() },\n        Dog { name: \"\u5415\u5e03\".to_string(), breed: \"\u675c\u5bbe\u72ac\".to_string() },\n        Dog { name: \"\u8c82\u8749\".to_string(), breed: \"\u6770\u514b\u7f57\u7d20\u6897\".to_string() },\n        Dog { name: \"\u738b\u5f02\".to_string(), breed: \"\u96ea\u7eb3\u745e\".to_string() },\n        Dog { name: \"\u8bf8\u845b\u4eae\".to_string(), breed: \"\u6bd4\u683c\u72ac\".to_string() },\n        Dog { name: \"\u5e9e\u7edf\".to_string(), breed: \"\u6ce2\u58eb\u987f\u6897\".to_string() },\n        Dog { name: \"\u6cd5\u6b63\".to_string(), breed: \"\u897f\u9ad8\u5730\u767d\u6897\".to_string() },\n        Dog { name: \"\u5b59\u5c1a\u9999\".to_string(), breed: \"\u82cf\u683c\u5170\u6897\".to_string() },\n        Dog { name: \"\u5468\u745c\".to_string(), breed: \"\u6597\u725b\u72ac\".to_string() },\n        Dog { name: \"\u5927\u4e54\".to_string(), breed: \"\u5fb7\u56fd\u7267\u7f8a\u72ac\".to_string() },\n        Dog { name: \"\u5c0f\u4e54\".to_string(), breed: \"\u8fb9\u5883\u7267\u7f8a\u72ac\".to_string() },\n        Dog { name: \"\u9ec4\u6708\u82f1\".to_string(), breed: \"\u897f\u65bd\u72ac\".to_string() },\n        Dog { name: \"\u5b5f\u83b7\".to_string(), breed: \"\u6bd4\u683c\u72ac\".to_string() },\n    ];\n\n    // \u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u7528\u4e8e\u904d\u5386\u72d7\u7684\u96c6\u5408\n    let mut dog_iterator = dogs.iter();\n\n    // \u4f7f\u7528 for \u5faa\u73af\u904d\u5386\u8fed\u4ee3\u5668\u5e76\u6253\u5370\u6bcf\u53ea\u72d7\u7684\u4fe1\u606f\n    println!(\"\u904d\u5386\u72d7\u7684\u96c6\u5408\uff1a\");\n    for dog in &amp;dogs {\n        println!(\"\u540d\u5b57: {}, \u54c1\u79cd: {}\", dog.name, dog.breed);\n    }\n\n    // \u4f7f\u7528 take \u65b9\u6cd5\u63d0\u53d6\u524d\u4e24\u53ea\u72d7\u5e76\u6253\u5370\n    println!(\"\\n\u63d0\u53d6\u524d\u4e24\u53ea\u72d7\uff1a\");\n    for dog in dog_iterator.clone().take(2) {\n        println!(\"\u540d\u5b57: {}, \u54c1\u79cd: {}\", dog.name, dog.breed);\n    }\n\n    // \u4f7f\u7528 skip \u65b9\u6cd5\u8df3\u8fc7\u524d\u4e24\u53ea\u72d7\u5e76\u6253\u5370\u5269\u4e0b\u7684\u72d7\u7684\u4fe1\u606f\n    println!(\"\\n\u8df3\u8fc7\u524d\u4e24\u53ea\u72d7\u540e\u7684\u72d7\uff1a\");\n    for dog in dog_iterator.skip(2) {\n        println!(\"\u540d\u5b57: {}, \u54c1\u79cd: {}\", dog.name, dog.breed);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>Dog</code> \u7684\u7ed3\u6784\u4f53\uff0c\u7528\u6765\u8868\u793a\u72d7\u7684\u5c5e\u6027\u3002\u7136\u540e\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u72d7\u5bf9\u8c61\u7684\u5411\u91cf <code>dogs</code>\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4f7f\u7528 <code>iter()</code> \u65b9\u6cd5\u5c06\u5b83\u8f6c\u6362\u6210\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5e76\u4f7f\u7528 <code>for</code> \u5faa\u73af\u904d\u5386\u6574\u4e2a\u8fed\u4ee3\u5668\uff0c\u4f7f\u7528 <code>take</code> \u65b9\u6cd5\u63d0\u53d6\u524d\u4e24\u53ea\u72d7\uff0c\u5e76\u4f7f\u7528 <code>skip</code> \u65b9\u6cd5\u8df3\u8fc7\u524d\u4e24\u53ea\u72d7\u6765\u8fdb\u884c\u8fed\u4ee3\u3002\u4e0e\u4e4b\u524d\u4e00\u6837\uff0c\u6211\u4eec\u5728\u4f7f\u7528 <code>take</code> \u548c <code>skip</code> \u65b9\u6cd5\u540e\uff0c\u4f7f\u7528 <code>clone()</code> \u521b\u5efa\u4e86\u65b0\u7684\u8fed\u4ee3\u5668\u4ee5\u4fbf\u91cd\u65b0\u4f7f\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2017%20-%20%E7%89%B9%E6%80%A7%20%28trait%29%20%E8%AF%A6%E8%A7%A3/#174-super-trait","title":"17.4 \u8d85\u7ea7\u7279\u6027(Super Trait)","text":"<p>Rust \u4e2d\u7684\u8d85\u7ea7\u7279\u6027\uff08Super Trait\uff09\u662f\u4e00\u79cd\u7279\u6b8a\u7684 trait\uff0c\u5b83\u662f\u5176\u4ed6\u591a\u4e2a trait \u7684\u8d85\u96c6\u3002\u5b83\u53ef\u4ee5\u7528\u6765\u8868\u793a\u4e00\u4e2a trait \u5305\u542b\u6216\u7ee7\u627f\u4e86\u5176\u4ed6\u591a\u4e2a trait \u7684\u6240\u6709\u529f\u80fd\uff0c\u4ece\u800c\u5141\u8bb8\u4f60\u4ee5\u66f4\u62bd\u8c61\u7684\u65b9\u5f0f\u6765\u5904\u7406\u591a\u4e2a trait \u7684\u5b9e\u73b0\u3002\u8d85\u7ea7\u7279\u6027\u4f7f\u5f97\u4ee3\u7801\u66f4\u52a0\u6a21\u5757\u5316\u3001\u53ef\u590d\u7528\u548c\u62bd\u8c61\u5316\u3002</p> <p>\u8d85\u7ea7\u7279\u6027\u7684\u8bed\u6cd5\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u5728 trait \u5b9a\u4e49\u4e2d\u4f7f\u7528 <code>+</code> \u8fd0\u7b97\u7b26\u6765\u5217\u51fa\u8be5 trait \u7ee7\u627f\u7684\u5176\u4ed6 trait \u5373\u53ef\u3002\u4f8b\u5982\uff1a</p> <pre><code>trait SuperTrait: Trait1 + Trait2 + Trait3 {\n    // trait \u7684\u65b9\u6cd5\u5b9a\u4e49\n}\n</code></pre> <p>\u8fd9\u91cc\uff0c<code>SuperTrait</code> \u662f\u4e00\u4e2a\u8d85\u7ea7\u7279\u6027\uff0c\u5b83\u7ee7\u627f\u4e86 <code>Trait1</code>\u3001<code>Trait2</code> \u548c <code>Trait3</code> \u8fd9\u4e09\u4e2a trait \u7684\u6240\u6709\u65b9\u6cd5\u548c\u529f\u80fd\u3002</p> <p>\u597d\u7684\uff0c\u8ba9\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u793a\u4f8b\u6784\u5efa\u4e3a\u67d0\u5c01\u795e\u9898\u6750\u6e38\u620f\u7684\u89d2\u8272\uff0c\u4e00\u4e2a\u80fd\u591f\u4e0a\u5929\u5165\u5730\u7684\u89d2\u8272\uff0c\u54ea\u5412\u4e09\u592a\u5b50\uff1a</p> <pre><code>// \u5b9a\u4e49\u4e09\u4e2a trait\uff1aFlight\u3001Submersion \u548c Superpower\ntrait Flight {\n    fn fly(&amp;self);\n}\n\ntrait Submersion {\n    fn submerge(&amp;self);\n}\n\ntrait Superpower {\n    fn use_superpower(&amp;self);\n}\n\n// \u5b9a\u4e49\u4e00\u4e2a\u8d85\u7ea7\u7279\u6027 Nezha\uff0c\u7ee7\u627f\u4e86 Flight\u3001Submersion \u548c Superpower \u8fd9\u4e09\u4e2a trait\ntrait Nezha: Flight + Submersion + Superpower {\n    fn introduce(&amp;self) {\n        println!(\"\u6211\u662f\u54ea\u5412\u4e09\u592a\u5b50\uff01\");\n    }\n\n    fn describe_weapon(&amp;self);\n}\n\n// \u5b9e\u73b0 Flight\u3001Submersion \u548c Superpower trait\nstruct NezhaCharacter;\nimpl Flight for NezhaCharacter {\n    fn fly(&amp;self) {\n        println!(\"\u54ea\u5412\u5728\u5929\u7a7a\u7ff1\u7fd4\uff0c\u9a7e\u9a6d\u98ce\u706b\u8f6e\u98de\u884c\u3002\");\n    }\n}\n\nimpl Submersion for NezhaCharacter {\n    fn submerge(&amp;self) {\n        println!(\"\u54ea\u5412\u53ef\u4ee5\u6f5c\u5165\u6c34\u4e2d\uff0c\u4ee5\u83b2\u82b1\u6839\u548c\u5b9d\u83b2\u706f\u4e3a\u52a9\u529b\u3002\");\n    }\n}\n\nimpl Superpower for NezhaCharacter {\n    fn use_superpower(&amp;self) {\n        println!(\"\u54ea\u5412\u62e5\u6709\u706b\u5c16\u67aa\u3001\u98ce\u706b\u8f6e\u548c\u5b9d\u83b2\u706f\u7b49\u795e\u5668\uff0c\u53ef\u4ee5\u64cd\u63a7\u706b\u7130\u548c\u98ce\uff0c\u6218\u80dc\u5996\u9b54\u3002\");\n    }\n}\n\n// \u5b9e\u73b0 Nezha trait\nimpl Nezha for NezhaCharacter {\n    fn describe_weapon(&amp;self) {\n        println!(\"\u54ea\u5412\u7684\u6cd5\u5b9d\u5305\u62ec\u706b\u5c16\u67aa\u3001\u98ce\u706b\u8f6e\u548c\u5b9d\u83b2\u706f\u3002\");\n    }\n}\n\nfn main() {\n    let nezha = NezhaCharacter;\n    nezha.introduce();\n    nezha.fly();\n    nezha.submerge();\n    nezha.use_superpower();\n    nezha.describe_weapon();\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>\u6211\u662f\u54ea\u5412\u4e09\u592a\u5b50\uff01\n\u54ea\u5412\u5728\u5929\u7a7a\u7ff1\u7fd4\uff0c\u9a7e\u9a6d\u98ce\u706b\u8f6e\u98de\u884c\u3002\n\u54ea\u5412\u53ef\u4ee5\u6f5c\u5165\u6c34\u4e2d\uff0c\u4ee5\u83b2\u82b1\u6839\u548c\u5b9d\u83b2\u706f\u4e3a\u52a9\u529b\u3002\n\u54ea\u5412\u62e5\u6709\u706b\u5c16\u67aa\u3001\u98ce\u706b\u8f6e\u548c\u5b9d\u83b2\u706f\u7b49\u795e\u5668\uff0c\u53ef\u4ee5\u64cd\u63a7\u706b\u7130\u548c\u98ce\uff0c\u6218\u80dc\u5996\u9b54\u3002\n\u54ea\u5412\u7684\u6cd5\u5b9d\u5305\u62ec\u706b\u5c16\u67aa\u3001\u98ce\u706b\u8f6e\u548c\u5b9d\u83b2\u706f\u3002\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4e3b\u9898\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e09\u4e2a trait\uff1a<code>Flight</code>\u3001<code>Submersion</code> \u548c <code>Superpower</code>\uff0c\u7136\u540e\u5b9a\u4e49\u4e86\u4e00\u4e2a\u8d85\u7ea7\u7279\u6027 <code>Nezha</code>\uff0c\u5b83\u7ee7\u627f\u4e86\u8fd9\u4e09\u4e2a trait\u3002\u6700\u540e\uff0c\u6211\u4eec\u4e3a <code>NezhaCharacter</code> \u7ed3\u6784\u4f53\u5b9e\u73b0\u4e86\u8fd9\u4e09\u4e2a trait\uff0c\u5e76\u4e14\u8fd8\u5b9e\u73b0\u4e86 <code>Nezha</code> trait\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u80fd\u591f\u4e0a\u5929\u5165\u5730\u5e76\u62e5\u6709\u8d85\u80fd\u529b\u7684\u89d2\u8272\uff0c\u5373\u54ea\u5412\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2018%20-%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%8F/","title":"Chapter 18 - \u521b\u5efa\u81ea\u5b9a\u4e49\u5b8f","text":"<p>\u5728\u8ba1\u7b97\u673a\u7f16\u7a0b\u4e2d\uff0c\u5b8f\uff08Macro\uff09\u662f\u4e00\u79cd\u5143\u7f16\u7a0b\u6280\u672f\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u5458\u7f16\u5199\u7528\u4e8e\u751f\u6210\u4ee3\u7801\u7684\u4ee3\u7801\u3002\u5b8f\u901a\u5e38\u88ab\u7528\u4e8e\u7b80\u5316\u91cd\u590d\u6027\u9ad8\u7684\u4efb\u52a1\uff0c\u81ea\u52a8\u751f\u6210\u4ee3\u7801\u7247\u6bb5\uff0c\u6216\u8005\u521b\u5efa\u9886\u57df\u7279\u5b9a\u8bed\u8a00\uff08DSL\uff09\u7684\u6269\u5c55\uff0c\u4ee5\u7b80\u5316\u7279\u5b9a\u4efb\u52a1\u7684\u7f16\u7a0b\u3002</p> <p>\u5728Rust\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u7528<code>macro_rules!</code>\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u5b8f\u3002\u81ea\u5b9a\u4e49\u5b8f\u5141\u8bb8\u4f60\u7f16\u5199\u81ea\u5df1\u7684\u4ee3\u7801\u751f\u6210\u5668\uff0c\u4ee5\u5728\u7f16\u8bd1\u65f6\u751f\u6210\u4ee3\u7801\u3002\u4ee5\u4e0b\u662f<code>macro_rules!</code>\u7684\u57fa\u672c\u8bed\u6cd5\u548c\u4e00\u4e9b\u8be6\u89e3\uff1a</p> <pre><code>macro_rules! my_macro {\n    // \u89c4\u52191\n    ($arg1:expr, $arg2:expr) =&gt; {\n        // \u5b8f\u5c55\u5f00\u65f6\u6267\u884c\u7684\u4ee3\u7801\n        println!(\"Argument 1: {:?}\", $arg1);\n        println!(\"Argument 2: {:?}\", $arg2);\n    };\n    // \u89c4\u52192\n    ($arg:expr) =&gt; {\n        // \u5355\u4e2a\u53c2\u6570\u7684\u60c5\u51b5\n        println!(\"Only one argument: {:?}\", $arg);\n    };\n    // \u9ed8\u8ba4\u89c4\u5219\n    () =&gt; {\n        println!(\"No arguments provided.\");\n    };\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>my_macro</code>\u7684\u5b8f\uff0c\u5b83\u6709\u4e09\u4e2a\u4e0d\u540c\u7684\u89c4\u5219\u3002\u6bcf\u4e2a\u89c4\u5219\u7531<code>=&gt;</code>\u5206\u9694\uff0c\u89c4\u5219\u672c\u8eab\u4ee5\u6a21\u5f0f\uff08pattern\uff09\u548c\u5c55\u5f00\u4ee3\u7801\uff08expansion code\uff09\u7ec4\u6210\u3002\u4e0b\u9762\u662f\u5bf9\u8fd9\u4e9b\u89c4\u5219\u7684\u89e3\u91ca\uff1a</p> <ol> <li>\u7b2c\u4e00\u4e2a\u89c4\u5219\uff1a<code>($arg1:expr, $arg2:expr) =&gt; { ... }</code></li> <li> <p>\u8fd9\u4e2a\u89c4\u5219\u5339\u914d\u4e24\u4e2a\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c06\u5b83\u4eec\u6253\u5370\u51fa\u6765\u3002</p> </li> <li> <p>\u7b2c\u4e8c\u4e2a\u89c4\u5219\uff1a<code>($arg:expr) =&gt; { ... }</code></p> </li> <li> <p>\u8fd9\u4e2a\u89c4\u5219\u5339\u914d\u5355\u4e2a\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c06\u5b83\u6253\u5370\u51fa\u6765\u3002</p> </li> <li> <p>\u7b2c\u4e09\u4e2a\u89c4\u5219\uff1a<code>() =&gt; { ... }</code></p> </li> <li>\u8fd9\u662f\u4e00\u4e2a\u9ed8\u8ba4\u89c4\u5219\uff0c\u5982\u679c\u6ca1\u6709\u5176\u4ed6\u89c4\u5219\u5339\u914d\uff0c\u5b83\u5c06\u88ab\u7528\u4e8e\u5c55\u5f00\u3002</li> </ol> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u5b8f\uff1a</p> <pre><code>fn main() {\n    my_macro!(42); // \u8c03\u7528\u7b2c\u4e8c\u4e2a\u89c4\u5219\uff0c\u6253\u5370 \"Only one argument: 42\"\n\n    my_macro!(10, \"Hello\"); // \u8c03\u7528\u7b2c\u4e00\u4e2a\u89c4\u5219\uff0c\u6253\u5370 \"Argument 1: 10\" \u548c \"Argument 2: \"Hello\"\n\n    my_macro!(); // \u8c03\u7528\u9ed8\u8ba4\u89c4\u5219\uff0c\u6253\u5370 \"No arguments provided.\"\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7<code>my_macro!</code>\u6765\u8c03\u7528\u81ea\u5b9a\u4e49\u5b8f\uff0c\u6839\u636e\u4f20\u9012\u7684\u53c2\u6570\u6570\u91cf\u548c\u7c7b\u578b\uff0c\u5b8f\u4f1a\u9009\u62e9\u5339\u914d\u7684\u89c4\u5219\u6765\u5c55\u5f00\u5e76\u6267\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c<code>macro_rules!</code>\u53ef\u4ee5\u7528\u4e8e\u521b\u5efa\u81ea\u5b9a\u4e49\u5b8f\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49**\u591a\u4e2a\u89c4\u5219\u6765\u5339\u914d\u4e0d\u540c\u7684\u8f93\u5165\u6a21\u5f0f**\uff0c\u5e76\u5728\u5c55\u5f00\u65f6\u6267\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u3002\u8fd9\u4f7f\u5f97Rust\u4e2d\u7684\u5b8f\u975e\u5e38\u5f3a\u5927\uff0c\u53ef\u4ee5\u7528\u4e8e**\u4ee3\u7801\u590d\u7528**(Code reuse)\u548c**\u5143\u7f16\u7a0b**(Metaprogramming)\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2018%20-%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%8F/#metaprogramming","title":"\u8865\u5145\u5b66\u4e60\uff1a\u5143\u7f16\u7a0b(Metaprogramming)","text":"<p>\u5143\u7f16\u7a0b\uff0c\u53c8\u79f0\u8d85\u7f16\u7a0b\uff0c\u662f\u4e00\u79cd\u8ba1\u7b97\u673a\u7f16\u7a0b\u7684\u65b9\u6cd5\uff0c\u5b83\u5141\u8bb8\u7a0b\u5e8f\u64cd\u4f5c\u6216\u751f\u6210\u5176\u4ed6\u7a0b\u5e8f\uff0c\u6216\u8005\u5728\u7f16\u8bd1\u65f6\u6267\u884c\u4e00\u4e9b\u901a\u5e38\u5728\u8fd0\u884c\u65f6\u5b8c\u6210\u7684\u5de5\u4f5c\u3002\u8fd9\u79cd\u7f16\u7a0b\u65b9\u6cd5\u53ef\u4ee5\u63d0\u9ad8\u7f16\u7a0b\u6548\u7387\u548c\u7a0b\u5e8f\u7684\u7075\u6d3b\u6027\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u7a0b\u5e8f**\u52a8\u6001\u5730\u751f\u6210\u548c\u4fee\u6539\u4ee3\u7801**\uff0c\u800c\u65e0\u9700\u624b\u52a8\u7f16\u5199\u6bcf\u4e00\u884c\u4ee3\u7801\u3002\u5982\u5728Unix Shell\u4e2d\uff1a</p> <ol> <li>\u4ee3\u7801\u751f\u6210\uff1a \u5728\u5143\u7f16\u7a0b\u4e2d\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u751f\u6210\u4ee3\u7801\u7247\u6bb5\u6216\u6574\u4e2a\u7a0b\u5e8f\u3002\u8fd9\u5bf9\u4e8e\u81ea\u52a8\u751f\u6210\u91cd\u590d\u6027\u9ad8\u7684\u4ee3\u7801\u975e\u5e38\u6709\u7528\u3002\u4f8b\u5982\uff0c\u5728Shell\u811a\u672c\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5faa\u73af\u6765\u751f\u6210\u4e00\u7cfb\u5217\u547d\u4ee4\uff0c\u800c\u4e0d\u5fc5\u624b\u52a8\u7f16\u5199\u6bcf\u4e2a\u547d\u4ee4\u3002</li> </ol> <pre><code>for i in {1..10}; do\n  echo \"This is iteration $i\"\ndone\n</code></pre> <ol> <li>\u6a21\u677f\u5f15\u64ce\uff1a \u5143\u7f16\u7a0b\u8fd8\u53ef\u7528\u4e8e\u521b\u5efa\u901a\u7528\u6a21\u677f\uff0c\u6839\u636e\u4e0d\u540c\u7684\u8f93\u5165\u6570\u636e\u81ea\u52a8\u751f\u6210\u7279\u5b9a\u7684\u4ee3\u7801\u6216\u6587\u6863\u3002\u8fd9\u5bf9\u4e8e\u52a8\u6001\u751f\u6210\u7f51\u9875\u5185\u5bb9\u6216\u914d\u7f6e\u6587\u4ef6\u975e\u5e38\u6709\u7528\u3002</li> </ol> <pre><code>#!/bin/bash\ncat &lt;&lt;EOF &gt; config.txt\nServerName $server_name\nPort $port\nEOF\n</code></pre> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528Rust\u7684\u5143\u7f16\u7a0b\u5de5\u5177\u6765\u6267\u884c\u8fd9\u7c7b\u4efb\u52a1\u3002Rust\u6709\u4e00\u4e2a\u5f3a\u5927\u7684\u5b8f\u7cfb\u7edf\uff0c\u53ef\u4ee5\u7528\u4e8e\u751f\u6210\u4ee3\u7801\u548c\u8fdb\u884c\u5143\u7f16\u7a0b\u3002\u4ee5\u4e0b\u662f\u4e0e\u4e4b\u524d\u7684Shell\u793a\u4f8b\u76f8\u5bf9\u5e94\u7684Rust\u793a\u4f8b\uff1a</p> <ol> <li>\u4ee3\u7801\u751f\u6210\uff1a \u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b8f\u6765\u751f\u6210\u4ee3\u7801\u7247\u6bb5\u3002</li> </ol> <pre><code>macro_rules! generate_code {\n    ($count:expr) =&gt; {\n        for i in 1..=$count {\n            println!(\"This is iteration {}\", i);\n        }\n    };\n}\n\nfn main() {\n    generate_code!(10);\n}\n</code></pre> <ol> <li>\u6a21\u677f\u5f15\u64ce\uff1a \u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b8f\u6765\u751f\u6210\u914d\u7f6e\u6587\u4ef6\u6216\u5176\u4ed6\u6587\u6863\u3002</li> </ol> <pre><code>macro_rules! generate_config {\n    ($server_name:expr, $port:expr) =&gt; {\n        format!(\"ServerName {}\\nPort {}\", $server_name, $port)\n    };\n}\n\nfn main() {\n    let server_name = \"example.com\";\n    let port = 8080;\n    let config = generate_config!(server_name, port);\n    println!(\"{}\", config);\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2018%20-%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%8F/#_1","title":"\u6848\u4f8b\uff1a\u7528\u5b8f\u6765\u8ba1\u7b97\u4e00\u7ec4\u91d1\u878d\u65f6\u95f4\u5e8f\u5217\u7684\u5e73\u5747\u503c","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u8fdb\u5165\u5b9e\u6218\u6f14\u7ec3\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u7528\u4e8e\u91cf\u5316\u91d1\u878d\u7684\u7b80\u5355Rust\u5b8f\u7684\u793a\u4f8b\u3002\u8fd9\u4e2a\u5b8f\u7528\u4e8e\u8ba1\u7b97\u4e00\u7ec4\u91d1\u878d\u65f6\u95f4\u5e8f\u5217\u7684\u5e73\u5747\u503c\uff0c\u5e76\u5c06\u5176\u7528\u4e8e\u7b80\u5355\u7684\u5747\u7ebf\u7b56\u7565\u3002</p> <p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u91d1\u878d\u65f6\u95f4\u5e8f\u5217\u7684\u7ed3\u6784\u4f53\uff1a</p> <pre><code>struct TimeSeries {\n    data: Vec&lt;f64&gt;,\n}\n\nimpl TimeSeries {\n    fn new(data: Vec&lt;f64&gt;) -&gt; Self {\n        TimeSeries { data }\n    }\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5b8f\uff0c\u7528\u4e8e\u8ba1\u7b97\u5e73\u5747\u503c\u5e76\u6267\u884c\u5747\u7ebf\u7b56\u7565\uff1a</p> <pre><code>macro_rules! calculate_average {\n    ($ts:expr) =&gt; {\n        {\n            let sum: f64 = $ts.data.iter().sum();\n            let count = $ts.data.len() as f64;\n            sum / count\n        }\n    };\n}\n\nmacro_rules! simple_moving_average_strategy {\n    ($ts:expr, $period:expr) =&gt; {\n        {\n            let avg = calculate_average!($ts);\n            let current_value = $ts.data.last().unwrap();\n\n            if *current_value &gt; avg {\n                \"Buy\"\n            } else {\n                \"Sell\"\n            }\n        }\n    };\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e24\u4e2a\u5b8f\uff1a</p> <ol> <li> <p><code>calculate_average!($ts:expr)</code>\uff1a\u8fd9\u4e2a\u5b8f\u8ba1\u7b97\u7ed9\u5b9a\u65f6\u95f4\u5e8f\u5217<code>$ts</code>\u7684\u5e73\u5747\u503c\u3002</p> </li> <li> <p><code>simple_moving_average_strategy!($ts:expr, $period:expr)</code>\uff1a\u8fd9\u4e2a\u5b8f\u4f7f\u7528<code>calculate_average!</code>\u5b8f\u8ba1\u7b97\u5e73\u5747\u503c\uff0c\u5e76\u6839\u636e\u5f53\u524d\u503c\u4e0e\u5e73\u5747\u503c\u7684\u6bd4\u8f83\u751f\u6210\u7b80\u5355\u7684\"Buy\"\u6216\"Sell\"\u7b56\u7565\u4fe1\u53f7\u3002</p> </li> </ol> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u5b8f\uff1a</p> <pre><code>fn main() {\n    let prices = vec![100.0, 110.0, 120.0, 130.0, 125.0];\n    let time_series = TimeSeries::new(prices);\n\n    let period = 3;\n\n    let signal = simple_moving_average_strategy!(time_series, period);\n\n    println!(\"Signal: {}\", signal);\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u4ef7\u683c\u6570\u636e\u7684\u65f6\u95f4\u5e8f\u5217<code>time_series</code>\uff0c\u5e76\u4f7f\u7528<code>simple_moving_average_strategy!</code>\u5b8f\u6765\u751f\u6210\u4ea4\u6613\u4fe1\u53f7\u3002\u5982\u679c\u6700\u540e\u4e00\u4e2a\u4ef7\u683c\u9ad8\u4e8e\u5e73\u5747\u503c\uff0c\u5219\u5b8f\u5c06\u751f\u6210\"Buy\"\u4fe1\u53f7\uff0c\u5426\u5219\u751f\u6210\"Sell\"\u4fe1\u53f7\u3002</p> <p>\u8fd9\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u5b8f\u6765\u7b80\u5316\u91cf\u5316\u91d1\u878d\u7b56\u7565\u7684\u5b9e\u73b0\u3002\u5728\u5b9e\u9645\u7684\u91d1\u878d\u5e94\u7528\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u66f4\u590d\u6742\u7684\u6570\u636e\u5904\u7406\u548c\u7b56\u7565\u89c4\u5219\u3002\u4f46\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528Rust\u7684\u5b8f\u7cfb\u7edf\u6765\u589e\u5f3a\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2019%20-%20%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/","title":"Chapter 19 - \u65f6\u95f4\u5904\u7406","text":"<p>\u5728Rust\u4e2d\u8fdb\u884c\u65f6\u95f4\u5904\u7406\u901a\u5e38\u6d89\u53ca\u4f7f\u7528\u6807\u51c6\u5e93\u4e2d\u7684<code>std::time</code>\u6a21\u5757\u3002\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7ed3\u6784\u4f53\u548c\u51fd\u6570\uff0c\u7528\u4e8e\u83b7\u53d6\u3001\u8868\u793a\u548c\u64cd\u4f5c\u65f6\u95f4\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5173\u4e8e\u5728Rust\u4e2d\u8fdb\u884c\u65f6\u95f4\u5904\u7406\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2019%20-%20%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/#191","title":"19.1 \u7cfb\u7edf\u65f6\u95f4\u4ea4\u4e92","text":"<p>\u8981\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528<code>std::time::SystemTime</code>\u7ed3\u6784\u4f53\u548c<code>SystemTime::now()</code>\u51fd\u6570\u3002</p> <pre><code>use std::time::{SystemTime};\n\nfn main() {\n    let current_time = SystemTime::now();\n    println!(\"Current time: {:?}\", current_time);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Current time: SystemTime { tv_sec: 1694870535, tv_nsec: 559362022 }\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2019%20-%20%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/#192","title":"19.2 \u65f6\u95f4\u95f4\u9694\u548c\u65f6\u95f4\u8fd0\u7b97","text":"<p>\u5728Rust\u4e2d\uff0c\u65f6\u95f4\u95f4\u9694\u901a\u5e38\u7531<code>std::time::Duration</code>\u7ed3\u6784\u4f53\u8868\u793a\uff0c\u5b83\u7528\u4e8e\u8868\u793a\u4e00\u6bb5\u65f6\u95f4\u7684\u957f\u5ea6\u3002</p> <pre><code>use std::time::Duration;\n\nfn main() {\n    let duration = Duration::new(5, 0); // 5\u79d2\n    println!(\"Duration: {:?}\", duration);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Duration: 5s\n</code></pre> <p>\u65f6\u95f4\u95f4\u9694\u662f\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u8fd0\u7b97\u7684\uff0crust\u652f\u6301\u4f8b\u5982\u6dfb\u52a0\u6216\u51cf\u53bb\u65f6\u95f4\u95f4\u9694\uff0c\u4ee5\u83b7\u53d6\u65b0\u7684\u65f6\u95f4\u70b9\u3002</p> <pre><code>use std::time::{SystemTime, Duration};\n\nfn main() {\n    let current_time = SystemTime::now();\n    let five_seconds = Duration::new(5, 0);\n\n    let new_time = current_time + five_seconds;\n    println!(\"New time: {:?}\", new_time);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>New time: SystemTime { tv_sec: 1694870769, tv_nsec: 705158112 }\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2019%20-%20%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/#193","title":"19.3 \u683c\u5f0f\u5316\u65f6\u95f4","text":"<p>\u82e5\u8981\u5c06\u65f6\u95f4\u4ee5\u7279\u5b9a\u683c\u5f0f\u663e\u793a\u4e3a\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u4f7f\u7528<code>chrono</code>\u5e93\u3002</p> <pre><code>use chrono::{DateTime, Utc, Duration, Datelike};\n\nfn main() {\n    // \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\n    let now = Utc::now();\n\n    // \u5c06\u65f6\u95f4\u683c\u5f0f\u5316\u4e3a\u5b57\u7b26\u4e32\n    let formatted_time = now.format(\"%Y-%m-%d %H:%M:%S\").to_string();\n    println!(\"Formatted Time: {}\", formatted_time);\n\n    // \u89e3\u6790\u5b57\u7b26\u4e32\u4e3a\u65f6\u95f4\n    let datetime_str = \"1983 Apr 13 12:09:14.274 +0800\"; //\u6ce8\u610frust\u6700\u8fd1\u66f4\u65b0\u540e\uff0c\u8fd9\u4e2a\u8f93\u5165string\u9700\u8981\u5e26\u65f6\u533a\u4fe1\u606f\u3002\u6b64\u5904\u4e3a+800\u4ee3\u8868\u4e1c\u516b\u533a\u3002\n    let format_str = \"%Y %b %d %H:%M:%S%.3f %z\";\n    let dt = DateTime::parse_from_str(datetime_str, format_str).unwrap();\n     println!(\"Parsed DateTime: {}\", dt);\n\n    // \u8fdb\u884c\u65e5\u671f\u548c\u65f6\u95f4\u7684\u8ba1\u7b97\n    let two_hours_from_now = now + Duration::hours(2);\n    println!(\"Two Hours from Now: {}\", two_hours_from_now);\n\n    // \u83b7\u53d6\u65e5\u671f\u7684\u90e8\u5206\n    let date = now.date_naive();\n    println!(\"Date: {}\", date);\n\n    // \u83b7\u53d6\u65f6\u95f4\u7684\u90e8\u5206\n    let time = now.time();\n    println!(\"Time: {}\", time);\n\n    // \u83b7\u53d6\u661f\u671f\u51e0\n    let weekday = now.weekday();\n    println!(\"Weekday: {:?}\", weekday);\n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Formatted Time: 2023-09-16 13:47:10\nParsed DateTime: 1983-04-13 12:09:14.274 +08:00\nTwo Hours from Now: 2023-09-16 15:47:10.882155748 UTC\nDate: 2023-09-16\nTime: 13:47:10.882155748\nWeekday: Sat\n</code></pre> <p>\u8fd9\u4e9b\u662fRust\u4e2d\u8fdb\u884c\u65f6\u95f4\u5904\u7406\u7684\u57fa\u672c\u793a\u4f8b\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u9700\u6c42\u4f7f\u7528\u8fd9\u4e9b\u529f\u80fd\u6765\u6267\u884c\u66f4\u9ad8\u7ea7\u7684\u65f6\u95f4\u64cd\u4f5c\uff0c\u4f8b\u5982\u8ba1\u7b97\u65f6\u95f4\u5dee\u3001\u5b9a\u65f6\u4efb\u52a1\u3001\u5904\u7406\u65f6\u95f4\u6233\u7b49\u7b49\u3002\u8981\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u65f6\u95f4\u5904\u7406\u7684\u7ec6\u8282\uff0c\u8bf7\u67e5\u9605Rust\u5b98\u65b9\u6587\u6863\u4ee5\u53ca<code>chrono</code>\u5e93\u7684\u6587\u6863\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2019%20-%20%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/#194","title":"19.4 \u65f6\u5dee\u5904\u7406","text":"<p><code>chrono</code> \u662f Rust \u4e2d\u7528\u4e8e\u5904\u7406\u65e5\u671f\u548c\u65f6\u95f4\u7684\u5e93\u3002\u5b83\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u65e5\u671f\u65f6\u95f4\u5904\u7406\u529f\u80fd\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u6267\u884c\u5404\u79cd\u65e5\u671f\u548c\u65f6\u95f4\u64cd\u4f5c\uff0c\u5305\u62ec\u65f6\u5dee\u7684\u5904\u7406\u3002\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u5982\u4f55\u4f7f\u7528 <code>chrono</code> \u6765\u5904\u7406\u65f6\u5dee\u3002</p> <p>\u9996\u5148\uff0c\u4f60\u9700\u8981\u5728 Rust \u9879\u76ee\u4e2d\u6dfb\u52a0 <code>chrono</code> \u5e93\u7684\u4f9d\u8d56\u3002\u5728 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>[dependencies]\nchrono = \"0.4\"\nchrono-tz = \"0.8.3\"\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u4ece\u4e00\u4e9b\u5e38\u89c1\u7684\u65e5\u671f\u548c\u65f6\u95f4\u64cd\u4f5c\u5f00\u59cb\uff0c\u4ee5\u53ca\u5982\u4f55\u5904\u7406\u65f6\u5dee\uff1a</p> <pre><code>use chrono::{DateTime, Utc, TimeZone};  \nuse chrono_tz::{Tz, Europe::Berlin, America::New_York};  \n\nfn main() {  \n    // \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff0c\u4f7f\u7528UTC\u65f6\u533a  \n    let now_utc = Utc::now();  \n    println!(\"Current UTC Time: {}\", now_utc);  \n\n    // \u4f7f\u7528\u7279\u5b9a\u65f6\u533a\u83b7\u53d6\u5f53\u524d\u65f6\u95f4  \n    let now_berlin: DateTime&lt;Tz&gt; = Utc::now().with_timezone(&amp;Berlin);  \n    println!(\"Current Berlin Time: {}\", now_berlin);  \n\n    let now_new_york: DateTime&lt;Tz&gt; = Utc::now().with_timezone(&amp;New_York);  \n    println!(\"Current New York Time: {}\", now_new_york);  \n\n    // \u65f6\u533a\u4e4b\u95f4\u7684\u65f6\u95f4\u8f6c\u6362  \n    let berlin_time = now_utc.with_timezone(&amp;Berlin);  \n    let new_york_time = berlin_time.with_timezone(&amp;New_York);  \n    println!(\"Berlin Time in New York: {}\", new_york_time);  \n\n    // \u83b7\u53d6\u65f6\u533a\u4fe1\u606f  \n    let berlin_offset = Berlin.offset_from_utc_datetime(&amp;now_utc.naive_utc());  \n    println!(\"Berlin Offset: {:?}\", berlin_offset);  \n\n    let new_york_offset = New_York.offset_from_utc_datetime(&amp;now_utc.naive_utc());  \n    println!(\"New York Offset: {:?}\", new_york_offset);  \n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a</p> <pre><code>Current UTC Time: 2023-09-17 01:15:56.812663350 UTC\nCurrent Berlin Time: 2023-09-17 03:15:56.812673617 CEST\nCurrent New York Time: 2023-09-16 21:15:56.812679483 EDT\nBerlin Time in New York: 2023-09-16 21:15:56.812663350 EDT\nBerlin Offset: CEST\nNew York Offset: EDT\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2019%20-%20%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86/#with_timezone","title":"\u8865\u5145\u5b66\u4e60\uff1a <code>with_timezone</code> \u65b9\u6cd5","text":"<p>\u5728 <code>chrono</code> \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>with_timezone</code> \u65b9\u6cd5\u5c06\u65e5\u671f\u65f6\u95f4\u5bf9\u8c61\u8f6c\u6362\u4e3a\u5e38\u89c1\u7684\u65f6\u533a\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u65f6\u533a\u53ca\u5176\u5728 <code>chrono</code> \u4e2d\u7684\u8868\u793a\u548c\u7528\u6cd5\uff1a</p> <ol> <li>UTC\uff08\u534f\u8c03\u4e16\u754c\u65f6\uff09\uff1a</li> </ol> <pre><code>use chrono::{DateTime, Utc};\n\nlet utc: DateTime&lt;Utc&gt; = Utc::now();\n</code></pre> <p>\u5728 <code>chrono</code> \u4e2d\uff0c<code>Utc</code> \u662f\u7528\u4e8e\u8868\u793a\u534f\u8c03\u4e16\u754c\u65f6\u7684\u7c7b\u578b\u3002</p> <ol> <li>\u672c\u5730\u65f6\u533a\uff1a</li> </ol> <p><code>chrono</code> \u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u672c\u5730\u65f6\u533a\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>Local</code> \u6765\u8868\u793a\u672c\u5730\u65f6\u533a\u3002</p> <pre><code>use chrono::{DateTime, Local};\n\nlet local: DateTime&lt;Local&gt; = Local::now();\n</code></pre> <ol> <li>\u5176\u4ed6\u65f6\u533a\uff1a</li> </ol> <p>\u5982\u679c\u4f60\u9700\u8981\u8868\u793a\u5176\u4ed6\u65f6\u533a\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>chrono-tz</code> \u5e93\u3002\u8fd9\u4e2a\u5e93\u6269\u5c55\u4e86 <code>chrono</code>\uff0c\u4f7f\u5176\u652f\u6301\u66f4\u591a\u7684\u65f6\u533a\u3002</p> <p>\u9996\u5148\uff0c\u4f60\u9700\u8981\u5c06 <code>chrono-tz</code> \u6dfb\u52a0\u5230\u4f60\u7684 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\uff1a</p> <pre><code>[dependencies]\nchrono-tz = \"0.8\"\n</code></pre> <p>\u521b\u9020\u4e00\u4e2adatetime\uff0c\u7136\u540e\u628a\u5b83\u8f6c\u5316\u6210\u4e00\u4e2a\u5e26\u65f6\u533a\u4fe1\u606f\u7684datetime\uff1a</p> <pre><code>use chrono::{TimeZone, NaiveDate};\nuse chrono_tz::Africa::Johannesburg;\n\nlet naive_dt = NaiveDate::from_ymd(2038, 1, 19).and_hms(3, 14, 08);\nlet tz_aware = Johannesburg.from_local_datetime(&amp;naive_dt).unwrap();\nassert_eq!(tz_aware.to_string(), \"2038-01-19 03:14:08 SAST\");\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c<code>chrono-tz</code> \u53ef\u4ee5\u8ba9\u6211\u4eec\u8868\u793a\u66f4\u591a\u7684\u65f6\u533a\uff0c\u4f46\u4e5f\u4f1a\u589e\u52a0\u9879\u76ee\u7684\u4f9d\u8d56\u548c\u590d\u6742\u6027\u3002\u6839\u636e\u4f60\u7684\u9700\u6c42\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 <code>Utc</code>\u3001<code>Local</code> \u8fd8\u662f <code>chrono-tz</code> \u4e2d\u7684\u7279\u5b9a\u65f6\u533a\u7c7b\u578b\u3002</p> <p>\u5982\u679c\u53ea\u9700\u5904\u7406\u5e38\u89c1\u7684 UTC \u548c\u672c\u5730\u65f6\u533a\uff0c\u90a3\u4e48 <code>Utc</code> \u548c <code>Local</code> \u5c31\u8db3\u591f\u4e86\u3002\u5982\u679c\u9700\u8981\u66f4\u591a\u7684\u65f6\u533a\u652f\u6301\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 <code>chrono-tz</code>\uff0c[chrono-tz\u5b98\u65b9\u6587\u6863] \u4e2d\u8be6\u7ec6\u5217\u6709\u53ef\u7528\u7684\u65f6\u533a\u7684\u6a21\u5757\u548c\u5e38\u91cf\uff0c\u6709\u9700\u8981\u53ef\u4ee5\u79fb\u6b65\u67e5\u8be2\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/","title":"Chapter 20 - Redis\u3001\u722c\u866b\u3001\u4ea4\u6613\u65e5\u5e93","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#201-redis","title":"20.1 Redis\u5165\u95e8\u3001\u5b89\u88c5\u548c\u914d\u7f6e","text":"<p>Redis\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5185\u5b58\u5185(In-Memory)\u6570\u636e\u5e93\uff0c\u5b83\u53ef\u4ee5\u7528\u4e8e\u5b58\u50a8\u548c\u7ba1\u7406\u6570\u636e\uff0c\u901a\u5e38\u7528\u4f5c\u7f13\u5b58\u3001\u6d88\u606f\u961f\u5217\u3001\u4f1a\u8bdd\u5b58\u50a8\u7b49\u7528\u9014\u3002Redis\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u5305\u62ec\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u96c6\u5408\u3001\u6709\u5e8f\u96c6\u5408\u548c\u54c8\u5e0c\u8868\u3002\u5b83\u4ee5\u5176\u9ad8\u6027\u80fd\u3001\u4f4e\u5ef6\u8fdf\u548c\u6301\u4e45\u6027\u5b58\u50a8\u7279\u6027\u800c\u95fb\u540d\uff0c\u9002\u7528\u4e8e\u8bb8\u591a\u5e94\u7528\u573a\u666f\u3002</p> <p>\u5927\u591a\u6570\u4e3b\u6d41\u7684Linux\u53d1\u884c\u7248\u90fd\u63d0\u4f9b\u4e86Redis\u7684\u8f6f\u4ef6\u5305\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#ubuntudebian","title":"\u5728Ubuntu/Debian\u4e0a\u5b89\u88c5","text":"<p>\u4f60\u53ef\u4ee5\u4ece\u5b98\u65b9\u7684<code>packages.redis.io</code> APT\u5b58\u50a8\u5e93\u5b89\u88c5\u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\u7684Redis\u3002</p> <p>\u5148\u51b3\u6761\u4ef6</p> <p>\u5982\u679c\u4f60\u6b63\u5728\u8fd0\u884c\u4e00\u4e2a\u975e\u5e38\u7cbe\u7b80\u7684\u53d1\u884c\u7248\uff08\u6bd4\u5982Docker\u5bb9\u5668\uff09\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u9996\u5148\u5b89\u88c5<code>lsb-release</code>\u3001<code>curl</code>\u548c<code>gpg</code>\u3002</p> <pre><code>sudo apt install lsb-release curl gpg\n</code></pre> <p>\u5c06\u8be5\u5b58\u50a8\u5e93\u6dfb\u52a0\u5230<code>apt</code>\u7d22\u5f15\u4e2d\uff0c\u7136\u540e\u66f4\u65b0\u7d22\u5f15\uff0c\u6700\u540e\u8fdb\u884c\u5b89\u88c5\uff1a</p> <pre><code>curl -fsSL https://packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg\n\necho \"deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/redis.list\n\nsudo apt-get update\nsudo apt-get install redis\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#manjaroarchlinux","title":"\u5728Manjaro/Archlinux\u4e0a\u5b89\u88c5","text":"<pre><code>sudo pacman -S redis\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#_1","title":"\u7528\u6237\u754c\u9762","text":"<p>\u9664\u4e86\u4f20\u7edf\u7684CLI\u4ee5\u5916\uff0cRedis\u8fd8\u63d0\u4f9b\u4e86\u56fe\u5f62\u5316\u524d\u7aef RedisInsight \u65b9\u4fbf\u76f4\u89c2\u67e5\u770b\uff1a</p> <p></p> <p>\u4e0b\u9762\u572820.3\u5c0f\u8282\u6211\u4eec\u4f1a\u6f14\u793a\u5982\u4f55\u4e3a\u901a\u8fc7Rust\u548cRedis\u7684Rust\u5ba2\u6237\u7aef\u6765\u63d2\u5165\u56fe\u793a\u7684\u8fd9\u5bf9\u952e\u503c\u5bf9\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#202-redis","title":"20.2 \u5e38\u89c1Redis\u6570\u636e\u7ed3\u6784\u7c7b\u578b","text":"<p>\u4e3a\u4e86\u5c06Redis\u7684\u4e0d\u540c\u6570\u636e\u7ed3\u6784\u7c7b\u578b\u4e0e\u76f8\u5e94\u7684\u547d\u4ee4\u8be6\u7ec6\u53d9\u8ff0\u5e76\u521b\u5efa\u4e00\u4e2a\u793a\u4f8b\u8868\u683c\uff0c\u6211\u5c06\u6309\u7167\u4ee5\u4e0b\u683c\u5f0f\u4e3a\u4f60\u5c55\u793a\uff1a</p> <p>\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff1a\u63cf\u8ff0\u8be5\u6570\u636e\u7ed3\u6784\u7c7b\u578b\u7684\u7279\u70b9\u548c\u7528\u9014\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff1a\u5217\u51fa\u8be5\u6570\u636e\u7ed3\u6784\u7c7b\u578b\u7684\u4e00\u4e9b\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff0c\u5305\u62ec\u547d\u4ee4\u548c\u7528\u9014\u3002</p> <p>\u793a\u4f8b\u8868\u683c\uff1a\u521b\u5efa\u4e00\u4e2a\u793a\u4f8b\u8868\u683c\uff0c\u5305\u542b\u6570\u636e\u7ed3\u6784\u7c7b\u578b\u3001\u547d\u4ee4\u793a\u4f8b\u4ee5\u53ca\u793a\u4f8b\u503c\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u5f00\u59cb\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#strings","title":"\u5b57\u7b26\u4e32\uff08Strings\uff09","text":"<p>\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff1a \u5b57\u7b26\u4e32\u662fRedis\u4e2d\u6700\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u4ee5\u5b58\u50a8\u6587\u672c\u3001\u4e8c\u8fdb\u5236\u6570\u636e\u7b49\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff1a</p> <ul> <li>\u8bbe\u7f6e\u5b57\u7b26\u4e32\u503c\uff1a<code>SET key value</code></li> <li>\u83b7\u53d6\u5b57\u7b26\u4e32\u503c\uff1a<code>GET key</code></li> </ul> <p>\u793a\u4f8b\u8868\u683c\uff1a</p> \u6570\u636e\u7ed3\u6784\u7c7b\u578b \u547d\u4ee4\u793a\u4f8b \u793a\u4f8b\u503c \u5b57\u7b26\u4e32 <code>SET username \"Alice\"</code> Key: username, Value: \"Alice\" \u5b57\u7b26\u4e32 <code>GET username</code> \u8fd4\u56de\u503c: \"Alice\""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#hashes","title":"\u54c8\u5e0c\u8868\uff08Hashes\uff09","text":"<p>\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff1a \u54c8\u5e0c\u8868\u662f\u4e00\u4e2a\u952e\u503c\u5bf9\u7684\u96c6\u5408\uff0c\u9002\u7528\u4e8e\u5b58\u50a8\u591a\u4e2a\u5b57\u6bb5\u548c\u5bf9\u5e94\u7684\u503c\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff1a</p> <ul> <li>\u8bbe\u7f6e\u54c8\u5e0c\u8868\u5b57\u6bb5\uff1a<code>HSET key field value</code></li> <li>\u83b7\u53d6\u54c8\u5e0c\u8868\u5b57\u6bb5\u503c\uff1a<code>HGET key field</code></li> </ul> <p>\u793a\u4f8b\u8868\u683c\uff1a</p> \u6570\u636e\u7ed3\u6784\u7c7b\u578b \u547d\u4ee4\u793a\u4f8b \u793a\u4f8b\u503c \u54c8\u5e0c\u8868 <code>HSET user:id name \"Bob\"</code> Key: user:id, Field: name, Value: \"Bob\" \u54c8\u5e0c\u8868 <code>HGET user:id name</code> \u8fd4\u56de\u503c: \"Bob\""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#lists","title":"\u5217\u8868\uff08Lists\uff09","text":"<p>\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff1a \u5217\u8868\u662f\u4e00\u4e2a\u6709\u5e8f\u7684\u5b57\u7b26\u4e32\u5143\u7d20\u96c6\u5408\uff0c\u53ef\u7528\u4e8e\u5b9e\u73b0\u961f\u5217\u6216\u6808\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff1a</p> <ul> <li>\u4ece\u5217\u8868\u5de6\u4fa7\u63d2\u5165\u5143\u7d20\uff1a<code>LPUSH key value1 value2 ...</code></li> <li>\u83b7\u53d6\u5217\u8868\u8303\u56f4\u5185\u7684\u5143\u7d20\uff1a<code>LRANGE key start stop</code></li> </ul> <p>\u793a\u4f8b\u8868\u683c\uff1a</p> \u6570\u636e\u7ed3\u6784\u7c7b\u578b \u547d\u4ee4\u793a\u4f8b \u793a\u4f8b\u503c \u5217\u8868 <code>LPUSH queue \"item1\"</code> Key: queue, Values: \"item1\" \u5217\u8868 <code>LRANGE queue 0 -1</code> \u8fd4\u56de\u503c: [\"item1\"]"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#sets","title":"\u96c6\u5408\uff08Sets\uff09","text":"<p>\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff1a \u96c6\u5408\u662f\u4e00\u4e2a\u65e0\u5e8f\u7684\u5b57\u7b26\u4e32\u5143\u7d20\u96c6\u5408\uff0c\u53ef\u7528\u4e8e\u5b58\u50a8\u552f\u4e00\u503c\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff1a</p> <ul> <li>\u6dfb\u52a0\u5143\u7d20\u5230\u96c6\u5408\uff1a<code>SADD key member1 member2 ...</code></li> <li>\u83b7\u53d6\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5143\u7d20\uff1a<code>SMEMBERS key</code></li> </ul> <p>\u793a\u4f8b\u8868\u683c\uff1a</p> \u6570\u636e\u7ed3\u6784\u7c7b\u578b \u547d\u4ee4\u793a\u4f8b \u793a\u4f8b\u503c \u96c6\u5408 <code>SADD employees \"Alice\" \"Bob\"</code> Key: employees, Members: [\"Alice\", \"Bob\"] \u96c6\u5408 <code>SMEMBERS employees</code> \u8fd4\u56de\u503c: [\"Alice\", \"Bob\"]"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#sorted-sets","title":"\u6709\u5e8f\u96c6\u5408\uff08Sorted Sets\uff09","text":"<p>\u6570\u636e\u7ed3\u6784\u7c7b\u578b\uff1a \u6709\u5e8f\u96c6\u5408\u7c7b\u4f3c\u4e8e\u96c6\u5408\uff0c\u4f46\u6bcf\u4e2a\u5143\u7d20\u90fd\u5173\u8054\u4e00\u4e2a\u5206\u6570\uff0c\u7528\u4e8e\u6392\u5e8f\u5143\u7d20\u3002</p> <p>\u5e38\u7528\u547d\u4ee4\u793a\u4f8b\uff1a</p> <ul> <li>\u6dfb\u52a0\u5143\u7d20\u5230\u6709\u5e8f\u96c6\u5408\uff1a<code>ZADD key score1 member1 score2 member2 ...</code></li> <li>\u83b7\u53d6\u6709\u5e8f\u96c6\u5408\u8303\u56f4\u5185\u7684\u5143\u7d20\uff1a<code>ZRANGE key start stop</code></li> </ul> <p>\u793a\u4f8b\u8868\u683c\uff1a</p> \u6570\u636e\u7ed3\u6784\u7c7b\u578b \u547d\u4ee4\u793a\u4f8b \u793a\u4f8b\u503c \u6709\u5e8f\u96c6\u5408 <code>ZADD leaderboard 100 \"Alice\"</code> Key: leaderboard, Score: 100, Member: \"Alice\" \u6709\u5e8f\u96c6\u5408 <code>ZRANGE leaderboard 0 -1</code> \u8fd4\u56de\u503c: [\"Alice\"] <p>\u8fd9\u4e9b\u793a\u4f8b\u5c55\u793a\u4e86\u4e0d\u540c\u7c7b\u578b\u7684Redis\u6570\u636e\u7ed3\u6784\u4ee5\u53ca\u5e38\u7528\u7684\u547d\u4ee4\u793a\u4f8b\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u5177\u4f53\u9700\u6c42\u548c\u5e94\u7528\u573a\u666f\u4f7f\u7528\u9002\u5f53\u7684\u6570\u636e\u7ed3\u6784\u548c\u547d\u4ee4\u6765\u6784\u5efa\u4f60\u7684Redis\u6570\u636e\u5e93\u3002\u572820.3\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f1a\u7528\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u4f8b\u5b50\u6765\u505a\u793a\u8303\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#203-rustredis","title":"20.3 \u5728Rust\u4e2d\u4f7f\u7528Redis\u5ba2\u6237\u7aef","text":"<p>\u5c06Redis\u4e0eRust\u7ed3\u5408\u4f7f\u7528\u53ef\u4ee5\u63d0\u4f9b\u9ad8\u6027\u80fd\u548c\u5b89\u5168\u7684\u6570\u636e\u5b58\u50a8\u548c\u5904\u7406\u80fd\u529b\u3002\u4e0b\u9762\u8be6\u7ec6\u8bf4\u660e\u5982\u4f55\u5c06Redis\u4e0eRust\u914d\u5408\u4f7f\u7528\uff1a</p> <ol> <li>\u5b89\u88c5Redis\u5ba2\u6237\u7aef\u5e93\uff1a    \u9996\u5148\uff0c\u4f60\u9700\u8981\u5728Rust\u9879\u76ee\u4e2d\u5f15\u5165Redis\u5ba2\u6237\u7aef\u5e93\uff0c\u6700\u5e38\u7528\u7684\u5e93\u662f<code>redis-rs</code>\uff0c\u53ef\u4ee5\u5728Cargo.toml\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4f9d\u8d56\u9879\uff1a</li> </ol> <pre><code>[dependencies]\nredis = \"0.23\"\ntokio = { version = \"1.29.1\", features = [\"full\"] }\n</code></pre> <p>\u7136\u540e\u8fd0\u884c<code>cargo build</code>\u4ee5\u5b89\u88c5\u5e93\u3002</p> <ol> <li>\u521b\u5efaRedis\u8fde\u63a5    \u4f7f\u7528Redis\u5ba2\u6237\u7aef\u5e93\u8fde\u63a5\u5230Redis\u670d\u52a1\u5668\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</li> </ol> <pre><code>use redis::Commands;\n\n#[tokio::main]\nasync fn main() -&gt; redis::RedisResult&lt;()&gt; {\n    let redis_url = \"redis://:@127.0.0.1:6379/0\";\n    let client = redis::Client::open(redis_url)?;\n    let mut con = client.get_connection()?;\n\n    // \u6267\u884cRedis\u547d\u4ee4\n    let _: () = con.set(\"my_key\", \"my_value\")?;\n    let result: String = con.get(\"my_key\")?;\n\n    println!(\"Got value: {}\", result);\n\n    Ok(())\n}\n</code></pre> <p>\u8fd9\u4e2a\u793a\u4f8b\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2aRedis\u5ba2\u6237\u7aef\uff0c\u7136\u540e\u4e0e\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff0c\u5e76\u6267\u884c\u4e86\u4e00\u4e9b\u57fa\u672c\u7684\u64cd\u4f5c\u3002</p> <p>\u8be6\u7ec6\u89e3\u91ca\u4e00\u4e0bRedis\u94fe\u63a5\u7684\u6784\u6210\uff1a</p> <ol> <li> <p><code>redis://</code>\uff1a\u8fd9\u90e8\u5206\u6307\u793a\u4e86\u4f7f\u7528\u7684\u534f\u8bae\uff0c\u901a\u5e38\u662f <code>redis://</code> \u6216 <code>rediss://</code>\uff08\u5982\u679c\u4f60\u4f7f\u7528\u4e86\u52a0\u5bc6\u8fde\u63a5\uff09\u3002</p> </li> <li> <p><code>:@</code>\uff1a\u8fd9\u90e8\u5206\u8868\u793a\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u4f46\u5728\u4f60\u7684\u793a\u4f8b\u4e2d\u662f\u7a7a\u767d\u7684\uff0c\u56e0\u6b64\u6ca1\u6709\u63d0\u4f9b\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\u5982\u679c\u9700\u8981\u5bc6\u7801\u9a8c\u8bc1\uff0c\u4f60\u53ef\u4ee5\u5728 <code>:</code> \u540e\u9762\u63d0\u4f9b\u5bc6\u7801\uff0c\u4f8b\u5982\uff1a<code>redis://password@127.0.0.1:6379/0</code>\u3002</p> </li> <li> <p><code>127.0.0.1</code>\uff1a\u8fd9\u90e8\u5206\u662f Redis \u670d\u52a1\u5668\u7684\u4e3b\u673a\u5730\u5740\uff0c\u6307\u5b9a\u4e86 Redis \u670d\u52a1\u5668\u6240\u5728\u7684\u673a\u5668\u7684 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002\u5728\u793a\u4f8b\u4e2d\uff0c\u8fd9\u662f\u672c\u5730\u4e3b\u673a\u7684 IP \u5730\u5740\uff0c\u4e5f\u5c31\u662f <code>127.0.0.1</code>\uff0c\u8868\u793a\u8fde\u63a5\u5230\u672c\u5730\u7684 Redis \u670d\u52a1\u5668\u3002</p> </li> <li> <p><code>6379</code>\uff1a\u8fd9\u90e8\u5206\u662f Redis \u670d\u52a1\u5668\u7684\u7aef\u53e3\u53f7\uff0c\u6307\u5b9a\u4e86\u8fde\u63a5\u5230 Redis \u670d\u52a1\u5668\u7684\u7aef\u53e3\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cRedis \u4f7f\u7528 <code>6379</code> \u7aef\u53e3\u3002</p> </li> <li> <p><code>/0</code>\uff1a\u8fd9\u90e8\u5206\u662f Redis \u6570\u636e\u5e93\u7684\u7d22\u5f15\uff0cRedis \u652f\u6301\u591a\u4e2a\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6709 16 \u4e2a\u6570\u636e\u5e93\uff0c\u7d22\u5f15\u4ece <code>0</code> \u5230 <code>15</code>\u3002\u5728\u793a\u4f8b\u4e2d\uff0c\u7d22\u5f15\u4e3a <code>0</code>\uff0c\u8868\u793a\u8fde\u63a5\u5230\u6570\u636e\u5e93\u7d22\u5f15\u4e3a 0 \u7684\u6570\u636e\u5e93\u3002</p> </li> </ol> <p>\u7efc\u5408\u8d77\u6765\uff0c\u4f60\u7684\u793a\u4f8b Redis \u8fde\u63a5\u5b57\u7b26\u4e32\u8868\u793a\u8fde\u63a5\u5230\u672c\u5730 Redis \u670d\u52a1\u5668\uff08<code>127.0.0.1</code>\uff09\u7684\u9ed8\u8ba4\u7aef\u53e3\uff08<code>6379</code>\uff09\uff0c\u5e76\u9009\u62e9\u7d22\u5f15\u4e3a 0 \u7684\u6570\u636e\u5e93\uff0c\u6ca1\u6709\u63d0\u4f9b\u7528\u6237\u540d\u548c\u5bc6\u7801\u8fdb\u884c\u8ba4\u8bc1\u3002\u5982\u679c\u4f60\u7684 Redis \u670d\u52a1\u5668\u6709\u5bc6\u7801\u4fdd\u62a4\uff0c\u4f60\u9700\u8981\u63d0\u4f9b\u76f8\u5e94\u7684\u5bc6\u7801\u6765\u8fdb\u884c\u8fde\u63a5\u3002</p> <ol> <li> <p>\u5904\u7406\u9519\u8bef\uff1a    \u5728Rust\u4e2d\uff0c\u5904\u7406\u9519\u8bef\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u6b64\u9700\u8981\u8003\u8651\u5982\u4f55\u5904\u7406Redis\u64cd\u4f5c\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86RedisResult\u6765\u5305\u88f9\u8fd4\u56de\u7ed3\u679c\uff0c\u7136\u540e\u7528<code>?</code>\u6765\u5904\u7406Redis\u64cd\u4f5c\u53ef\u80fd\u5f15\u53d1\u7684\u9519\u8bef\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u6c42\u6765\u5904\u7406\u8fd9\u4e9b\u9519\u8bef\uff0c\u4f8b\u5982\uff0c\u8bb0\u5f55\u65e5\u5fd7\u6216\u91c7\u53d6\u5176\u4ed6\u9002\u5f53\u7684\u63aa\u65bd\u3002</p> </li> <li> <p>\u4f7f\u7528\u5f02\u6b65\u7f16\u7a0b\uff1a    \u5982\u679c\u4f60\u9700\u8981\u5904\u7406\u5927\u91cf\u7684\u5e76\u53d1\u64cd\u4f5c\u6216\u9700\u8981\u9ad8\u6027\u80fd\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528Rust\u7684\u5f02\u6b65\u7f16\u7a0b\u5e93\uff0c\u5982Tokio\uff0c\u4e0e\u5f02\u6b65Redis\u5ba2\u6237\u7aef\u5e93\u914d\u5408\u4f7f\u7528\u3002\u8fd9\u5c06\u5141\u8bb8\u4f60\u4ee5\u975e\u963b\u585e\u7684\u65b9\u5f0f\u6267\u884cRedis\u64cd\u4f5c\uff0c\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</p> </li> <li> <p>\u5b9a\u671f\u6e05\u7406\u8fc7\u671f\u6570\u636e\uff1a    Redis\u652f\u6301\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\uff0c\u4f60\u53ef\u4ee5\u5728\u5c06\u6570\u636e\u5b58\u50a8\u5230Redis\u4e2d\u65f6\u4e3a\u5176\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002\u5728Rust\u4e2d\uff0c\u4f60\u53ef\u4ee5\u7f16\u5199\u5b9a\u671f\u4efb\u52a1\u6765\u6e05\u7406\u8fc7\u671f\u6570\u636e\uff0c\u4ee5\u786e\u4fddRedis\u4e2d\u7684\u6570\u636e\u4e0d\u4f1a\u65e0\u9650\u589e\u957f\u3002</p> </li> </ol> <p>\u603b\u4e4b\uff0c\u5c06Redis\u4e0eRust\u914d\u5408\u4f7f\u7528\u53ef\u4ee5\u4e3a\u4f60\u63d0\u4f9b\u9ad8\u6027\u80fd\u3001\u5b89\u5168\u7684\u6570\u636e\u5b58\u50a8\u548c\u5904\u7406\u89e3\u51b3\u65b9\u6848\u3002\u901a\u8fc7\u4f7f\u7528Rust\u7684\u5f3a\u7c7b\u578b\u548c\u5185\u5b58\u5b89\u5168\u6027\uff0c\u4ee5\u53caRedis\u7684\u901f\u5ea6\u548c\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u6784\u5efa\u53ef\u9760\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u8fd8\u9700\u8981\u8003\u8651\u66f4\u591a\u590d\u6742\u7684\u7ec6\u8282\uff0c\u5982\u8fde\u63a5\u6c60\u7ba1\u7406\u3001\u6027\u80fd\u4f18\u5316\u548c\u9519\u8bef\u5904\u7406\u7b56\u7565\uff0c\u4ee5\u786e\u4fdd\u5e94\u7528\u7a0b\u5e8f\u7684\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#204","title":"20.4 \u722c\u866b","text":"<p>Rust \u662f\u4e00\u79cd\u56fe\u7075\u5b8c\u5907\u7684\u7cfb\u7edf\u7ea7\u7f16\u7a0b\u8bed\u8a00\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528\u4e8e\u7f16\u5199\u7f51\u7edc\u722c\u866b\u3002Rust \u5177\u6709\u51fa\u8272\u7684\u6027\u80fd\u3001\u5185\u5b58\u5b89\u5168\u6027\u548c\u5e76\u53d1\u6027\uff0c\u8fd9\u4e9b\u7279\u6027\u4f7f\u5176\u6210\u4e3a\u7f16\u5199\u9ad8\u6548\u4e14\u53ef\u9760\u7684\u722c\u866b\u7684\u7406\u60f3\u9009\u62e9\u3002\u4ee5\u4e0b\u662f Rust \u722c\u866b\u7684\u7b80\u8981\u4ecb\u7ecd\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#2041","title":"20.4.1 \u722c\u866b\u7684\u57fa\u672c\u539f\u7406","text":"<p>\u722c\u866b\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u7a0b\u5e8f\uff0c\u7528\u4e8e\u4ece\u4e92\u8054\u7f51\u4e0a\u7684\u7f51\u9875\u4e2d\u63d0\u53d6\u6570\u636e\u3002\u722c\u866b\u7684\u57fa\u672c\u5de5\u4f5c\u6d41\u7a0b\u901a\u5e38\u5305\u62ec\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u53d1\u9001 HTTP \u8bf7\u6c42\uff1a\u722c\u866b\u4f1a\u5411\u76ee\u6807\u7f51\u7ad9\u53d1\u9001 HTTP \u8bf7\u6c42\uff0c\u4ee5\u83b7\u53d6\u7f51\u9875\u7684\u5185\u5bb9\u3002</p> </li> <li> <p>\u89e3\u6790 HTML\uff1a\u722c\u866b\u4f1a\u89e3\u6790 HTML \u6587\u6863\uff0c\u4ece\u4e2d\u63d0\u53d6\u6709\u7528\u7684\u4fe1\u606f\uff0c\u5982\u94fe\u63a5\u3001\u6587\u672c\u5185\u5bb9\u7b49\u3002</p> </li> <li> <p>\u5b58\u50a8\u6570\u636e\uff1a\u722c\u866b\u5c06\u63d0\u53d6\u7684\u6570\u636e\u5b58\u50a8\u5728\u672c\u5730\u6570\u636e\u5e93\u3001\u6587\u4ef6\u6216\u5185\u5b58\u4e2d\uff0c\u4ee5\u4f9b\u540e\u7eed\u5206\u6790\u548c\u4f7f\u7528\u3002</p> </li> <li> <p>\u904d\u5386\u94fe\u63a5\uff1a\u722c\u866b\u53ef\u80fd\u4f1a\u4ece\u5f53\u524d\u9875\u9762\u4e2d\u63d0\u53d6\u94fe\u63a5\uff0c\u5e76\u9012\u5f52\u5730\u8bbf\u95ee\u8fd9\u4e9b\u94fe\u63a5\uff0c\u4ee5\u83b7\u53d6\u66f4\u591a\u7684\u6570\u636e\u3002</p> </li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#2042-rust","title":"20.4.2. Rust \u7528\u4e8e\u722c\u866b\u7684\u4f18\u52bf","text":"<p>Rust \u5728\u7f16\u5199\u722c\u866b\u65f6\u5177\u6709\u4ee5\u4e0b\u4f18\u52bf\uff1a</p> <ul> <li> <p>\u5185\u5b58\u5b89\u5168\u6027\uff1aRust \u7684\u501f\u7528\u68c0\u67e5\u5668\u548c\u6240\u6709\u6743\u7cfb\u7edf\u53ef\u4ee5\u9632\u6b62\u5e38\u89c1\u7684\u5185\u5b58\u9519\u8bef\uff0c\u5982\u7a7a\u6307\u9488\u548c\u6570\u636e\u7ade\u4e89\u3002\u8fd9\u6709\u52a9\u4e8e\u51cf\u5c11\u722c\u866b\u7a0b\u5e8f\u4e2d\u7684\u9519\u8bef\u548c\u6f0f\u6d1e\u3002</p> </li> <li> <p>\u5e76\u53d1\u6027\uff1aRust \u5185\u7f6e\u4e86\u5e76\u53d1\u6027\u652f\u6301\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u521b\u5efa\u591a\u7ebf\u7a0b\u548c\u5f02\u6b65\u4efb\u52a1\uff0c\u4ece\u800c\u63d0\u9ad8\u722c\u866b\u7684\u6548\u7387\u3002</p> </li> <li> <p>\u6027\u80fd\uff1aRust \u7684\u6027\u80fd\u975e\u5e38\u51fa\u8272\uff0c\u53ef\u4ee5\u5feb\u901f\u5730\u4e0b\u8f7d\u548c\u5904\u7406\u5927\u91cf\u6570\u636e\u3002</p> </li> <li> <p>\u751f\u6001\u7cfb\u7edf\uff1aRust \u751f\u6001\u7cfb\u7edf\u4e2d\u6709\u4e30\u5bcc\u7684\u5e93\u548c\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u5904\u7406 HTTP \u8bf7\u6c42\u3001HTML \u89e3\u6790\u3001\u6570\u636e\u5e93\u8bbf\u95ee\u7b49\u4efb\u52a1\u3002</p> </li> <li> <p>\u8de8\u5e73\u53f0\uff1aRust \u53ef\u4ee5\u7f16\u5199\u8de8\u5e73\u53f0\u7684\u722c\u866b\uff0c\u8fd0\u884c\u5728\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u3002</p> </li> </ul>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#2043-rust","title":"20.4.3. Rust \u4e2d\u7528\u4e8e\u722c\u866b\u7684\u5e93\u548c\u5de5\u5177","text":"<p>\u5728 Rust \u4e2d\uff0c\u6709\u4e00\u4e9b\u5e93\u548c\u5de5\u5177\u53ef\u7528\u4e8e\u7f16\u5199\u722c\u866b\uff0c\u5176\u4e2d\u4e00\u4e9b\u5305\u62ec\uff1a</p> <ul> <li> <p>reqwest\uff1a\u7528\u4e8e\u53d1\u9001 HTTP \u8bf7\u6c42\u548c\u5904\u7406\u54cd\u5e94\u7684\u5e93\u3002</p> </li> <li> <p>scraper\uff1a\u7528\u4e8e\u89e3\u6790\u548c\u63d0\u53d6 HTML \u6570\u636e\u7684\u5e93\u3002</p> </li> <li> <p>tokio\uff1a\u7528\u4e8e\u5f02\u6b65\u7f16\u7a0b\u7684\u5e93\uff0c\u9002\u7528\u4e8e\u9ad8\u6027\u80fd\u722c\u866b\u3002</p> </li> <li> <p>serde\uff1a\u7528\u4e8e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u6570\u636e\u7684\u5e93\uff0c\u6709\u52a9\u4e8e\u5904\u7406\u4ece\u7f51\u9875\u4e2d\u63d0\u53d6\u7684\u7ed3\u6784\u5316\u6570\u636e\u3002</p> </li> <li> <p>rusqlite \u6216 diesel\uff1a\u7528\u4e8e\u6570\u636e\u5e93\u5b58\u50a8\u7684\u5e93\uff0c\u53ef\u7528\u4e8e\u5b58\u50a8\u722c\u53d6\u7684\u6570\u636e\u3002</p> </li> <li> <p>regex\uff1a\u7528\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u6709\u65f6\u53ef\u7528\u4e8e\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u6570\u636e\u3002</p> </li> </ul>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#2044","title":"20.4.4. \u722c\u866b\u7684\u4f26\u7406\u548c\u6cd5\u5f8b\u8003\u8651","text":"<p>\u5728\u7f16\u5199\u722c\u866b\u65f6\uff0c\u52a1\u5fc5\u9075\u5b88\u7f51\u7ad9\u7684 <code>robots.txt</code> \u6587\u4ef6\u548c\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u3002\u722c\u866b\u5e94\u8be5\u5c0a\u91cd\u7f51\u7ad9\u7684\u9690\u79c1\u653f\u7b56\u548c\u4f7f\u7528\u6761\u6b3e\uff0c\u5e76\u907f\u514d\u5bf9\u7f51\u7ad9\u9020\u6210\u4e0d\u5fc5\u8981\u7684\u8d1f\u62c5\u3002\u722c\u866b\u4e0d\u5e94\u6ee5\u7528\u7f51\u7ad9\u8d44\u6e90\u6216\u8fdb\u884c\u672a\u7ecf\u6388\u6743\u7684\u6570\u636e\u6536\u96c6\u3002</p> <p>\u603b\u4e4b\uff0cRust \u662f\u4e00\u79cd\u5f3a\u5927\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u53ef\u7528\u4e8e\u7f16\u5199\u9ad8\u6027\u80fd\u3001\u53ef\u9760\u548c\u5b89\u5168\u7684\u7f51\u7edc\u722c\u866b\u3002\u5728\u7f16\u5199\u722c\u866b\u7a0b\u5e8f\u65f6\uff0c\u59cb\u7ec8\u8981\u9075\u5faa\u6700\u4f73\u5b9e\u8df5\u548c\u4f26\u7406\u51c6\u5219\uff0c\u4ee5\u786e\u4fdd\u5408\u6cd5\u6027\u548c\u9053\u5fb7\u6027\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#_2","title":"\u8865\u5145\u5b66\u4e60\uff1a\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316","text":"<p>\u5728Rust\u4e2d\uff0cJSON\uff08JavaScript Object Notation\uff09\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u6570\u636e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u683c\u5f0f\uff0c\u901a\u5e38\u7528\u4e8e\u5728\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u4e4b\u95f4\u4ea4\u6362\u6570\u636e\u3002Rust\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5e93\u6765\u5904\u7406JSON\u6570\u636e\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff0c\u5176\u4e2d\u6700\u5e38\u7528\u7684\u662f<code>serde</code>\u5e93\u3002</p> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u5728Rust\u4e2d\u8fdb\u884cJSON\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7684\u7b80\u8981\u4ecb\u7ecd\uff1a</p> <ol> <li>\u6dfb\u52a0serde\u5e93\u4f9d\u8d56\uff1a \u9996\u5148\uff0c\u4f60\u9700\u8981\u5728\u9879\u76ee\u7684<code>Cargo.toml</code>\u6587\u4ef6\u4e2d\u6dfb\u52a0<code>serde</code>\u548c<code>serde_json</code>\u4f9d\u8d56\uff0c\u56e0\u4e3a<code>serde_json</code>\u662fserde\u7684JSON\u652f\u6301\u5e93\u3002\u5728<code>Cargo.toml</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4f9d\u8d56\uff1a</li> </ol> <pre><code>[dependencies]\nserde = { version = \"1.0.188\", features = [\"derive\"] }\nserde_json = \"1.0\"\n</code></pre> <p>\u7136\u540e\uff0c\u5728\u4f60\u7684Rust\u4ee3\u7801\u4e2d\u5bfc\u5165<code>serde</code>\u548c<code>serde_json</code>\uff1a</p> <pre><code>use serde::{Serialize, Deserialize};\n</code></pre> <ol> <li>\u5b9a\u4e49\u7ed3\u6784\u4f53\uff1a \u5982\u679c\u4f60\u8981\u5c06\u81ea\u5b9a\u4e49\u7c7b\u578b\u5e8f\u5217\u5316\u4e3aJSON\uff0c\u4f60\u9700\u8981\u5728\u7ed3\u6784\u4f53\u4e0a\u5b9e\u73b0<code>Serialize</code>\u548c<code>Deserialize</code> trait\u3002\u4f8b\u5982\uff1a</li> </ol> <pre><code>#[derive(Serialize, Deserialize)]\nstruct Person {\n    name: String,\n    age: u32,\n}\n</code></pre> <ol> <li>\u5e8f\u5217\u5316\u4e3aJSON\uff1a \u4f7f\u7528<code>serde_json::to_string</code>\u5c06Rust\u6570\u636e\u7ed3\u6784\u5e8f\u5217\u5316\u4e3aJSON\u5b57\u7b26\u4e32\uff1a</li> </ol> <pre><code>fn main() {\n    let person = Person {\n        name: \"Alice\".to_string(),\n        age: 30,\n    };\n\n    let json_string = serde_json::to_string(&amp;person).unwrap();\n    println!(\"{}\", json_string);\n}\n</code></pre> <ol> <li>\u53cd\u5e8f\u5217\u5316\uff1a \u4f7f\u7528<code>serde_json::from_str</code>\u5c06JSON\u5b57\u7b26\u4e32\u53cd\u5e8f\u5217\u5316\u4e3aRust\u6570\u636e\u7ed3\u6784\uff1a</li> </ol> <pre><code>fn main() {\n    let json_string = r#\"{\"name\":\"Bob\",\"age\":25}\"#;\n\n    let person: Person = serde_json::from_str(json_string).unwrap();\n    println!(\"Name: {}, Age: {}\", person.name, person.age);\n}\n</code></pre> <p>\u8fd9\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u7684\u9700\u6c42\u8fdb\u4e00\u6b65\u63a2\u7d22<code>serde</code>\u548c<code>serde_json</code>\u5e93\u7684\u529f\u80fd\uff0c\u4ee5\u53ca\u5982\u4f55\u5904\u7406\u66f4\u590d\u6742\u7684JSON\u6570\u636e\u7ed3\u6784\u548c\u573a\u666f\u3002\u8fd9\u4e9b\u5e93\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u4f7f\u5f97\u5728Rust\u4e2d\u8fdb\u884cJSON\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u53d8\u5f97\u975e\u5e38\u65b9\u4fbf\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2020%20-%20Redis%E3%80%81%E7%88%AC%E8%99%AB%E3%80%81%E4%BA%A4%E6%98%93%E6%97%A5%E5%BA%93/#redis","title":"\u6848\u4f8b\uff1a\u5728Redis\u4e2d\u6784\u5efa\u4e2d\u56fd\u5927\u9646\u4ea4\u6613\u65e5\u5e93","text":"<p>\u8fd9\u4e2a\u6848\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 Rust \u7f16\u5199\u4e00\u4e2a\u7b80\u5355\u7684\u722c\u866b\uff0c\u4ece\u6307\u5b9a\u7684\u7f51\u5740\u83b7\u53d6\u4e2d\u56fd\u5927\u9646\u7684\u8282\u5047\u65e5\u6570\u636e\uff0c\u7136\u540e\u5c06\u6570\u636e\u5b58\u50a8\u5230 Redis \u6570\u636e\u5e93\u4e2d\u3002\u8fd9\u4e2a\u6848\u4f8b\u6db5\u76d6\u4e86\u8bb8\u591a Rust \u7684\u6838\u5fc3\u6982\u5ff5\uff0c\u5305\u62ec\u5f02\u6b65\u7f16\u7a0b\u3001HTTP \u8bf7\u6c42\u3001JSON \u89e3\u6790\u3001\u9519\u8bef\u5904\u7406\u4ee5\u53ca\u4e0e Redis \u4ea4\u4e92\u7b49\u3002</p> <pre><code>use anyhow::{anyhow, Error as AnyError}; // \u5bfc\u5165`anyhow`\u5e93\u4e2d\u7684`anyhow`\u548c`Error`\u522b\u540d\u4e3a`AnyError`\nuse redis::{Commands}; // \u5bfc\u5165`redis`\u5e93\u4e2d\u7684`Commands`\nuse reqwest::Client as ReqwestClient; // \u5bfc\u5165`reqwest`\u5e93\u4e2d\u7684`Client`\u522b\u540d\u4e3a`ReqwestClient`\nuse serde::{Deserialize, Serialize}; // \u5bfc\u5165`serde`\u5e93\u4e2d\u7684`Deserialize`\u548c`Serialize`\nuse std::error::Error; // \u5bfc\u5165\u6807\u51c6\u5e93\u4e2d\u7684`Error`\n\n#[derive(Debug, Serialize, Deserialize)]\nstruct DayType {\n    date: i32, // \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53`DayType`\uff0c\u7528\u4e8e\u8868\u793a\u65e5\u671f\n}\n\n#[derive(Debug, Serialize, Deserialize)]\nstruct HolidaysType {\n    cn: Vec&lt;DayType&gt;, // \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53`HolidaysType`\uff0c\u5305\u542b\u4e00\u4e2a\u65e5\u671f\u5217\u8868\n}\n\n#[derive(Debug, Serialize, Deserialize)]\nstruct CalendarBody {\n    holidays: Option&lt;HolidaysType&gt;, // \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53`CalendarBody`\uff0c\u5305\u542b\u4e00\u4e2a\u53ef\u9009\u7684`HolidaysType`\u5b57\u6bb5\n}\n\n// \u5f02\u6b65\u51fd\u6570\uff0c\u7528\u4e8e\u83b7\u53d6API\u6570\u636e\u5e76\u5b58\u50a8\u5230Redis\nasync fn store_calendar_to_redis() -&gt; Result&lt;(), AnyError&gt; {\n    let url = \"http://pc.suishenyun.net/peacock/api/h5/festival\"; // API\u7684URL\n    let client = ReqwestClient::new(); // \u521b\u5efa\u4e00\u4e2aReqwest HTTP\u5ba2\u6237\u7aef\n    let response = client.get(url).send().await?; // \u53d1\u9001HTTP GET\u8bf7\u6c42\u5e76\u7b49\u5f85\u54cd\u5e94\n    let body_s = response.text().await?; // \u8bfb\u53d6\u54cd\u5e94\u4f53\u7684\u6587\u672c\u6570\u636e\n\n    // \u5c06API\u54cd\u5e94\u7684JSON\u5b57\u7b26\u4e32\u89e3\u6790\u4e3aCalendarBody\u7ed3\u6784\u4f53\n    let cb: CalendarBody = match serde_json::from_str(&amp;body_s) {\n        Ok(cb) =&gt; cb, // \u89e3\u6790\u6210\u529f\uff0c\u5f97\u5230CalendarBody\u7ed3\u6784\u4f53\n        Err(e) =&gt; return Err(anyhow!(\"Failed to parse JSON string: {}\", e)), // \u89e3\u6790\u5931\u8d25\uff0c\u8fd4\u56de\u9519\u8bef\n    };\n\n    if let Some(holidays) = cb.holidays { // \u5982\u679c\u5b58\u5728\u8282\u5047\u65e5\u6570\u636e\n        let days = holidays.cn; // \u83b7\u53d6\u65e5\u671f\u5217\u8868\n        let mut dates = Vec::new(); // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u65e5\u671f\u5411\u91cf\n\n        for day in days {\n            dates.push(day.date as u32); // \u5c06\u65e5\u671f\u6dfb\u52a0\u5230\u5411\u91cf\u4e2d\uff0c\u8f6c\u6362\u4e3au32\u7c7b\u578b\n        }\n\n        let redis_url = \"redis://:@127.0.0.1:6379/0\"; // Redis\u670d\u52a1\u5668\u7684\u8fde\u63a5URL\n        let client = redis::Client::open(redis_url)?; // \u6253\u5f00Redis\u8fde\u63a5\n        let mut con = client.get_connection()?; // \u83b7\u53d6Redis\u8fde\u63a5\n\n        // \u5c06\u6bcf\u4e2a\u65e5\u671f\u6dfb\u52a0\u5230Redis\u96c6\u5408\u4e2d\n        for date in &amp;dates {\n            let _: usize = con.sadd(\"holidays_set\", date.to_string()).unwrap(); // \u6dfb\u52a0\u65e5\u671f\u5230Redis\u96c6\u5408\n        }\n\n        Ok(()) // \u64cd\u4f5c\u6210\u529f\uff0c\u8fd4\u56deOk(())\n    } else {\n        Err(anyhow!(\"No holiday data found.\")) // \u6ca1\u6709\u8282\u5047\u65e5\u6570\u636e\uff0c\u8fd4\u56de\u9519\u8bef\n    }\n}\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {\n    // \u8c03\u7528\u5b58\u50a8\u6570\u636e\u5230Redis\u7684\u51fd\u6570\n    if let Err(err) = store_calendar_to_redis().await {\n        eprintln!(\"Error: {}\", err); // \u6253\u5370\u9519\u8bef\u4fe1\u606f\n    } else {\n        println!(\"Holiday data stored in Redis successfully.\"); // \u6253\u5370\u6210\u529f\u6d88\u606f\n    }\n\n    Ok(()) // \u8fd4\u56deOk(())\n}\n</code></pre> <p>\u6848\u4f8b\u8981\u70b9\uff1a</p> <ol> <li>\u4f9d\u8d56\u5e93\u5f15\u5165\uff1a \u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u6848\u4f8b\uff0c\u9996\u5148\u5f15\u5165\u4e86\u4e00\u7cfb\u5217 Rust \u7684\u5916\u90e8\u4f9d\u8d56\u5e93\uff0c\u5305\u62ec <code>reqwest</code> \u7528\u4e8e\u53d1\u9001 HTTP \u8bf7\u6c42\u3001<code>serde</code> \u7528\u4e8e JSON \u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3001<code>redis</code> \u7528\u4e8e\u4e0e Redis \u4ea4\u4e92\u7b49\u7b49\u3002\u8fd9\u4e9b\u5e93\u63d0\u4f9b\u4e86\u5fc5\u8981\u7684\u5de5\u5177\u548c\u529f\u80fd\uff0c\u4ee5\u4fbf\u4ece\u7f51\u7ad9\u83b7\u53d6\u6570\u636e\u5e76\u5c06\u5176\u5b58\u50a8\u5230 Redis \u4e2d\u3002</li> <li>\u6570\u636e\u7ed3\u6784\u5b9a\u4e49\uff1a \u5728\u6848\u4f8b\u4e2d\u5b9a\u4e49\u4e86\u4e09\u4e2a\u7ed3\u6784\u4f53\uff0c<code>DayType</code>\u3001<code>HolidaysType</code> \u548c <code>CalendarBody</code>\uff0c\u7528\u4e8e\u5c06 JSON \u6570\u636e\u89e3\u6790\u4e3a Rust \u6570\u636e\u7ed3\u6784\u3002\u8fd9\u4e9b\u7ed3\u6784\u4f53\u7684\u5b57\u6bb5\u5bf9\u5e94\u4e8e JSON \u6570\u636e\u4e2d\u7684\u5b57\u6bb5\uff0c\u7528\u4e8e\u5b58\u50a8\u4ece\u7f51\u7ad9\u83b7\u53d6\u7684\u6570\u636e\u3002</li> <li>\u5f02\u6b65\u51fd\u6570\u548c\u9519\u8bef\u5904\u7406\uff1a \u4f7f\u7528 <code>async</code> \u5173\u952e\u5b57\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570 <code>store_calendar_to_redis</code>\uff0c\u8be5\u51fd\u6570\u8d1f\u8d23\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</li> <li>\u53d1\u9001 HTTP \u8bf7\u6c42\u4ee5\u83b7\u53d6\u8282\u5047\u65e5\u6570\u636e\u3002</li> <li>\u89e3\u6790 JSON \u6570\u636e\u3002</li> <li>\u5c06\u6570\u636e\u5b58\u50a8\u5230 Redis \u6570\u636e\u5e93\u4e2d\u3002 \u8fd9\u4e2a\u51fd\u6570\u8fd8\u6f14\u793a\u4e86 Rust \u4e2d\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\uff0c\u4f7f\u7528 <code>Result</code> \u8fd4\u56de\u53ef\u80fd\u7684\u9519\u8bef\uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 <code>anyhow</code> \u5e93\u6765\u521b\u5efa\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\u3002</li> <li>Redis \u6570\u636e\u5b58\u50a8\uff1a \u4f7f\u7528 <code>redis</code> \u5e93\u8fde\u63a5\u5230 Redis \u6570\u636e\u5e93\uff0c\u5e76\u4f7f\u7528 <code>sadd</code> \u547d\u4ee4\u5c06\u8282\u5047\u65e5\u6570\u636e\u5b58\u50a8\u5230\u540d\u4e3a <code>holidays_set</code> \u7684 Redis \u96c6\u5408\u4e2d\u3002</li> <li>main\u51fd\u6570\uff1a <code>main</code> \u51fd\u6570\u662f\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002\u5b83\u4f7f\u7528 <code>tokio</code> \u6846\u67b6\u7684 <code>#[tokio::main]</code> \u5c5e\u6027\u5b8f\u6765\u652f\u6301\u5f02\u6b65\u64cd\u4f5c\u3002\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u8c03\u7528\u4e86 <code>store_calendar_to_redis</code> \u51fd\u6570\u6765\u6267\u884c\u8282\u5047\u65e5\u6570\u636e\u7684\u5b58\u50a8\u64cd\u4f5c\u3002\u5982\u679c\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef\uff0c\u9519\u8bef\u4fe1\u606f\u5c06\u88ab\u6253\u5370\u5230\u6807\u51c6\u9519\u8bef\u6d41\u4e2d\uff1b\u5426\u5219\uff0c\u5c06\u6253\u5370\u6210\u529f\u6d88\u606f\u3002</li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2021%20-%20%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%AE%A1%E9%81%93/","title":"Chapter 21 - \u7ebf\u7a0b\u548c\u7ba1\u9053","text":"<p>\u5728 Rust \u4e2d\uff0c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u901a\u5e38\u901a\u8fc7\u7ba1\u9053\uff08channel\uff09\u6765\u5b9e\u73b0\u3002\u7ba1\u9053\u63d0\u4f9b\u4e86\u4e00\u79cd\u5b89\u5168\u4e14\u9ad8\u6548\u7684\u65b9\u5f0f\uff0c\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u3002\u4e0b\u9762\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528\u7ebf\u7a0b\u548c\u7ba1\u9053\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u9996\u5148\uff0c\u4f60\u9700\u8981\u5728\u4f60\u7684 <code>Cargo.toml</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0 <code>std</code> \u5e93\u7684\u4f9d\u8d56\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u548c\u7ba1\u9053\u662f\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\u3002</p> <pre><code>[dependencies]\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u9010\u6b65\u4ecb\u7ecd\u7ebf\u7a0b\u548c\u7ba1\u9053\u901a\u4fe1\u7684\u8fc7\u7a0b\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2021%20-%20%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%AE%A1%E9%81%93/#_1","title":"\u521b\u5efa\u7ebf\u7a0b\u548c\u7ba1\u9053","text":"<p>\u9996\u5148\uff0c\u5bfc\u5165\u5fc5\u8981\u7684\u6a21\u5757\uff1a</p> <pre><code>use std::thread;\nuse std::sync::mpsc;\n</code></pre> <p>\u7136\u540e\uff0c\u521b\u5efa\u4e00\u4e2a\u7ba1\u9053\uff0c\u5176\u4e2d\u4e00\u4e2a\u7ebf\u7a0b\u7528\u4e8e\u53d1\u9001\u6570\u636e\uff0c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u7528\u4e8e\u63a5\u6536\u6570\u636e\uff1a</p> <pre><code>fn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u7ba1\u9053\uff0csender \u53d1\u9001\u8005\uff0creceiver \u63a5\u6536\u8005\n    let (sender, receiver) = mpsc::channel();\n\n    // \u542f\u52a8\u4e00\u4e2a\u65b0\u7ebf\u7a0b\uff0c\u7528\u4e8e\u53d1\u9001\u6570\u636e\n    thread::spawn(move || {\n        let data = \"Hello, from another thread!\";\n        sender.send(data).unwrap();\n    });\n\n    // \u4e3b\u7ebf\u7a0b\u63a5\u6536\u6765\u81ea\u7ba1\u9053\u7684\u6570\u636e\n    let received_data = receiver.recv().unwrap();\n    println!(\"Received: {}\", received_data);\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2021%20-%20%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%AE%A1%E9%81%93/#_2","title":"\u7ebf\u7a0b\u95f4\u6570\u636e\u4f20\u9012","text":"<p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u7ba1\u9053\uff0c\u7136\u540e\u5728\u65b0\u7ebf\u7a0b\u4e2d\u53d1\u9001\u6570\u636e\u5230\u7ba1\u9053\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u63a5\u6536\u6570\u636e\u3002\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li> <p><code>mpsc::channel()</code> \u521b\u5efa\u4e86\u4e00\u4e2a\u591a\u751f\u4ea7\u8005\u3001\u5355\u6d88\u8d39\u8005\u7ba1\u9053\uff08multiple-producer, single-consumer\uff09\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e2d\u53d1\u9001\u6570\u636e\u5230\u540c\u4e00\u4e2a\u7ba1\u9053\uff0c\u4f46\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u63a5\u6536\u6570\u636e\u3002</p> </li> <li> <p><code>thread::spawn()</code> \u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b\u3002<code>move</code> \u5173\u952e\u5b57\u7528\u4e8e\u5c06\u6240\u6709\u6743\u8f6c\u79fb\u7ed9\u65b0\u7ebf\u7a0b\uff0c\u4ee5\u4fbf\u5728\u95ed\u5305\u4e2d\u4f7f\u7528 <code>sender</code>\u3002</p> </li> <li> <p><code>sender.send(data).unwrap();</code> \u7528\u4e8e\u5c06\u6570\u636e\u53d1\u9001\u5230\u7ba1\u9053\u4e2d\u3002<code>unwrap()</code> \u7528\u4e8e\u5904\u7406\u53d1\u9001\u5931\u8d25\u7684\u60c5\u51b5\u3002</p> </li> <li> <p><code>receiver.recv().unwrap();</code> \u7528\u4e8e\u63a5\u6536\u6765\u81ea\u7ba1\u9053\u7684\u6570\u636e\u3002\u8fd9\u662f\u4e00\u4e2a\u963b\u585e\u64cd\u4f5c\uff0c\u5982\u679c\u6ca1\u6709\u6570\u636e\u53ef\u7528\uff0c\u5b83\u5c06\u7b49\u5f85\u76f4\u5230\u6709\u6570\u636e\u3002</p> </li> </ul>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2021%20-%20%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%AE%A1%E9%81%93/#_3","title":"\u9519\u8bef\u5904\u7406","text":"<p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f60\u5e94\u8be5\u5bf9\u7ebf\u7a0b\u548c\u7ba1\u9053\u901a\u4fe1\u7684\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u8fdb\u884c\u9002\u5f53\u7684\u5904\u7406\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u4f7f\u7528 <code>unwrap()</code>\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>Result</code> \u7c7b\u578b\u6765\u5904\u7406\u9519\u8bef\uff0c\u4ee5\u786e\u4fdd\u7a0b\u5e8f\u7684\u5065\u58ee\u6027\u3002</p> <p>\u8fd9\u5c31\u662f\u5728 Rust \u4e2d\u4f7f\u7528\u7ebf\u7a0b\u548c\u7ba1\u9053\u8fdb\u884c\u901a\u4fe1\u7684\u57fa\u672c\u793a\u4f8b\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4f60\u53ef\u4ee5\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5b89\u5168\u5730\u4f20\u9012\u6570\u636e\uff0c\u8fd9\u5bf9\u4e8e\u5e76\u53d1\u7f16\u7a0b\u975e\u5e38\u91cd\u8981\u3002\u8bf7\u6839\u636e\u4f60\u7684\u5e94\u7528\u573a\u666f\u8fdb\u884c\u9002\u5f53\u7684\u6269\u5c55\u548c\u9519\u8bef\u5904\u7406\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2021%20-%20%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%AE%A1%E9%81%93/#-","title":"\u6848\u4f8b\uff1a\u591a\u4ea4\u6613\u5458-\u5355\u4e00\u5e02\u573a\u4ea4\u4e92","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5316\u7684\u91cf\u5316\u91d1\u878d\u591a\u7ebf\u7a0b\u901a\u4fe1\u7684\u6700\u5c0f\u53ef\u884c\u793a\u4f8b\uff08MWE\uff09\u3002\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u6a21\u62df\u4e00\u4e2a\u7b80\u5355\u7684\u80a1\u7968\u4ea4\u6613\u7cfb\u7edf\uff0c\u5176\u4e2d\u591a\u4e2a\u7ebf\u7a0b\u4ee3\u8868\u4e0d\u540c\u7684\u4ea4\u6613\u5458\u5e76\u4e0e\u5e02\u573a\u4ea4\u4e92\u3002\u7ebf\u7a0b\u4e4b\u95f4\u4f7f\u7528\u7ba1\u9053\u8fdb\u884c\u901a\u4fe1\uff0c\u4ee5\u6a21\u62df\u8ba2\u5355\u7684\u53d1\u9001\u548c\u4ea4\u6613\u7684\u786e\u8ba4\u3002</p> <pre><code>use std::sync::mpsc;\nuse std::thread;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u8ba2\u5355\u7ed3\u6784\nstruct Order {\n    trader_id: u32,\n    symbol: String,\n    quantity: u32,\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5e02\u573a\u548c\u4ea4\u6613\u5458\u4e4b\u95f4\u7684\u7ba1\u9053\n    let (market_tx, trader_rx) = mpsc::channel();\n\n    // \u542f\u52a8\u591a\u4e2a\u4ea4\u6613\u5458\u7ebf\u7a0b\n    let num_traders = 3;\n    for trader_id in 0..num_traders {\n        let market_tx_clone = market_tx.clone();\n        thread::spawn(move || {\n            // \u6a21\u62df\u4ea4\u6613\u5458\u521b\u5efa\u5e76\u53d1\u9001\u8ba2\u5355\n            let order = Order {\n                trader_id,\n                symbol: format!(\"STK{}\", trader_id),\n                quantity: (trader_id + 1) * 100,\n            };\n            market_tx_clone.send(order).unwrap();\n        });\n    }\n\n    // \u4e3b\u7ebf\u7a0b\u6a21\u62df\u5e02\u573a\u63a5\u6536\u548c\u5904\u7406\u8ba2\u5355\n    for _ in 0..num_traders {\n        let received_order = trader_rx.recv().unwrap();\n        println!(\n            \"Received order: Trader {}, Symbol {}, Quantity {}\",\n            received_order.trader_id, received_order.symbol, received_order.quantity\n        );\n\n        // \u6a21\u62df\u5e02\u573a\u6267\u884c\u4ea4\u6613\u5e76\u53d1\u9001\u786e\u8ba4\n        let confirmation = format!(\n            \"Order for Trader {} successfully executed\",\n            received_order.trader_id\n        );\n        println!(\"Market: {}\", confirmation);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff1a</p> <ol> <li> <p>\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7b80\u5355\u7684 <code>Order</code> \u7ed3\u6784\u6765\u8868\u793a\u8ba2\u5355\uff0c\u5305\u62ec\u4ea4\u6613\u5458 ID\u3001\u80a1\u7968\u4ee3\u7801\u548c\u6570\u91cf\u3002</p> </li> <li> <p>\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u5e02\u573a\u548c\u4ea4\u6613\u5458\u4e4b\u95f4\u7684\u7ba1\u9053\uff0c\u5e02\u573a\u901a\u8fc7 <code>market_tx</code> \u5411\u4ea4\u6613\u5458\u53d1\u9001\u8ba2\u5355\uff0c\u4ea4\u6613\u5458\u901a\u8fc7 <code>trader_rx</code> \u63a5\u6536\u5e02\u573a\u7684\u786e\u8ba4\u3002</p> </li> <li> <p>\u6211\u4eec\u542f\u52a8\u4e86\u591a\u4e2a\u4ea4\u6613\u5458\u7ebf\u7a0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u6a21\u62df\u4e00\u4e2a\u4ea4\u6613\u5458\u521b\u5efa\u8ba2\u5355\u5e76\u5c06\u5176\u53d1\u9001\u5230\u5e02\u573a\u3002</p> </li> <li> <p>\u4e3b\u7ebf\u7a0b\u6a21\u62df\u5e02\u573a\u63a5\u6536\u8ba2\u5355\u3001\u6267\u884c\u4ea4\u6613\u548c\u53d1\u9001\u786e\u8ba4\u3002</p> </li> </ol> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5316\u7684\u793a\u4f8b\uff0c\u5b9e\u9645\u7684\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u8981\u590d\u6742\u5f97\u591a\u3002\u5728\u771f\u5b9e\u7684\u5e94\u7528\u4e2d\uff0c\u4f60\u9700\u8981\u66f4\u590d\u6742\u7684\u8ba2\u5355\u5904\u7406\u903b\u8f91\u3001\u9519\u8bef\u5904\u7406\u548c\u7ebf\u7a0b\u5b89\u5168\u6027\u4fdd\u8bc1\u3002\u6b64\u793a\u4f8b\u4ec5\u7528\u4e8e\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u591a\u7ebf\u7a0b\u548c\u7ba1\u9053\u8fdb\u884c\u901a\u4fe1\u4ee5\u6a21\u62df\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u4e2d\u7684\u4ea4\u6613\u6d41\u7a0b\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/","title":"Chapter 22 -  \u6587\u4ef6\u5904\u7406","text":"<p>\u5728 Rust \u4e2d\u8fdb\u884c\u6587\u4ef6\u5904\u7406\u6d89\u53ca\u5230\u591a\u4e2a\u6807\u51c6\u5e93\u6a21\u5757\u548c\u65b9\u6cd5\uff0c\u4e3b\u8981\u5305\u62ec <code>std::fs</code>\u3001<code>std::io</code> \u548c <code>std::path</code>\u3002\u4e0b\u9762\u8be6\u7ec6\u89e3\u91ca\u5982\u4f55\u5728 Rust \u4e2d\u8fdb\u884c\u6587\u4ef6\u7684\u521b\u5efa\u3001\u8bfb\u53d6\u3001\u5199\u5165\u548c\u5220\u9664\u7b49\u64cd\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#221","title":"22.1 \u57fa\u7840\u64cd\u4f5c","text":""},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#2211","title":"22.1.1 \u6253\u5f00\u548c\u521b\u5efa\u6587\u4ef6","text":"<p>\u8981\u5728 Rust \u4e2d\u6253\u5f00\u6216\u521b\u5efa\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>std::fs</code> \u6a21\u5757\u4e2d\u7684\u65b9\u6cd5\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u7528\u7684\u65b9\u6cd5\uff1a</p> <ol> <li>\u6253\u5f00\u6587\u4ef6\u4ee5\u8bfb\u53d6\u5185\u5bb9\uff1a</li> </ol> <pre><code>use std::fs::File;\nuse std::io::Read;\n\nfn main() -&gt; std::io::Result&lt;()&gt; {\n    let mut file = File::open(\"file.txt\")?;\n    let mut contents = String::new();\n    file.read_to_string(&amp;mut contents)?;\n    println!(\"File contents: {}\", contents);\n    Ok(())\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>File::open</code> \u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u5176\u5185\u5bb9\u3002</p> <ol> <li>\u521b\u5efa\u65b0\u6587\u4ef6\u5e76\u5199\u5165\u5185\u5bb9\uff1a</li> </ol> <pre><code>use std::fs::File;\nuse std::io::Write;\n\nfn main() -&gt; std::io::Result&lt;()&gt; {\n    let mut file = File::create(\"new_file.txt\")?;\n    file.write_all(b\"Hello, Rust!\")?;\n    Ok(())\n}\n</code></pre> <p>\u8fd9\u91cc\uff0c\u6211\u4eec\u4f7f\u7528 <code>File::create</code> \u521b\u5efa\u4e00\u4e2a\u65b0\u6587\u4ef6\u5e76\u5199\u5165\u5185\u5bb9\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#2212","title":"22.1.2 \u6587\u4ef6\u8def\u5f84\u64cd\u4f5c","text":"<p>\u5728\u8fdb\u884c\u6587\u4ef6\u5904\u7406\u65f6\uff0c\u901a\u5e38\u9700\u8981\u5904\u7406\u6587\u4ef6\u8def\u5f84\u3002<code>std::path</code> \u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5b9e\u7528\u65b9\u6cd5\u6765\u64cd\u4f5c\u6587\u4ef6\u8def\u5f84\uff0c\u4f8b\u5982\u8fde\u63a5\u8def\u5f84\u3001\u83b7\u53d6\u6587\u4ef6\u540d\u7b49\u3002</p> <pre><code>use std::path::Path;\n\nfn main() {\n    let path = Path::new(\"folder/subfolder/file.txt\");\n\n    // \u83b7\u53d6\u6587\u4ef6\u540d\n    let file_name = path.file_name().unwrap().to_str().unwrap();\n    println!(\"File name: {}\", file_name);\n\n    // \u83b7\u53d6\u6587\u4ef6\u7684\u7236\u76ee\u5f55\n    let parent_dir = path.parent().unwrap().to_str().unwrap();\n    println!(\"Parent directory: {}\", parent_dir);\n\n    // \u8fde\u63a5\u8def\u5f84\n    let new_path = path.join(\"another_file.txt\");\n    println!(\"New path: {:?}\", new_path);\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#2213","title":"22.1.3 \u5220\u9664\u6587\u4ef6","text":"<p>\u8981\u5220\u9664\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>std::fs::remove_file</code> \u65b9\u6cd5\u3002</p> <pre><code>use std::fs;\n\nfn main() -&gt; std::io::Result&lt;()&gt; {\n    fs::remove_file(\"file_to_delete.txt\")?;\n    Ok(())\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#2214","title":"22.1.4 \u590d\u5236\u548c\u79fb\u52a8\u6587\u4ef6","text":"<p>\u8981\u590d\u5236\u548c\u79fb\u52a8\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>std::fs::copy</code> \u548c <code>std::fs::rename</code> \u65b9\u6cd5\u3002</p> <pre><code>use std::fs;\n\nfn main() -&gt; std::io::Result&lt;()&gt; {\n    // \u590d\u5236\u6587\u4ef6\n    fs::copy(\"source.txt\", \"destination.txt\")?;\n\n    // \u79fb\u52a8\u6587\u4ef6\n    fs::rename(\"old_name.txt\", \"new_name.txt\")?;\n\n    Ok(())\n}\n</code></pre>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#2215","title":"22.1.5 \u76ee\u5f55\u64cd\u4f5c","text":"<p>\u8981\u5904\u7406\u76ee\u5f55\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>std::fs</code> \u6a21\u5757\u4e2d\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\u8981\u5217\u51fa\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u548c\u5b50\u76ee\u5f55\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>std::fs::read_dir</code>\u3002</p> <pre><code>use std::fs;\n\nfn main() -&gt; std::io::Result&lt;()&gt; {\n    for entry in fs::read_dir(\"directory\")? {\n        let entry = entry?;\n        let path = entry.path();\n        println!(\"{}\", path.display());\n    }\n\n    Ok(())\n}\n</code></pre> <p>\u4ee5\u4e0a\u662f Rust \u4e2d\u5e38\u89c1\u7684\u6587\u4ef6\u5904\u7406\u64cd\u4f5c\u7684\u793a\u4f8b\u3002\u8981\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u8fdb\u884c\u6587\u4ef6\u5904\u7406\uff0c\u8bf7\u786e\u4fdd\u9002\u5f53\u5730\u5904\u7406\u53ef\u80fd\u53d1\u751f\u7684\u9519\u8bef\uff0c\u4ee5\u4fdd\u8bc1\u4ee3\u7801\u7684\u5065\u58ee\u6027\u3002\u6587\u4ef6\u5904\u7406\u901a\u5e38\u9700\u8981\u5904\u7406\u6587\u4ef6\u6253\u5f00\u3001\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5173\u95ed\u4ee5\u53ca\u9519\u8bef\u5904\u7406\u7b49\u60c5\u51b5\u3002 Rust \u63d0\u4f9b\u4e86\u5f3a\u5927\u800c\u7075\u6d3b\u7684\u6807\u51c6\u5e93\u6765\u652f\u6301\u8fd9\u4e9b\u64cd\u4f5c\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#_1","title":"\u6848\u4f8b\uff1a\u9012\u5f52\u5220\u9664\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u6587\u4ef6\u5939","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u6848\u4f8b\uff0c\u73b0\u5728\u6211\u6709\u4e00\u5806\u4ee5\u671f\u8d27\u4ee3\u7801\u6240\u5199\u4e3a\u540d\u7684\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u5305\u542b\u7740\u671f\u8d27\u516c\u53f8\u4e3a\u6211\u63d0\u4f9b\u7684\u5927\u91cf\u7684csv\u683c\u5f0f\u7684\u539f\u59cb\u6570\u636e\uff0830 TB\u5de6\u53f3\uff09\uff0c \u5982\u679c\u6211\u53ea\u60f3\u4ece\u4e2d\u9074\u9009\u51fa\u67d0\u51e0\u4e2a\u6211\u9700\u8981\u7684\u54c1\u79cd\u7684\u6587\u4ef6\u5939\uff0c\u5269\u4e0b\u7684\u6240\u6709\u7684\u6587\u4ef6\u90fd\u5220\u9664\u6389\uff0c\u6211\u8be5\u600e\u4e48\u529e\u5462\uff1f\u3002\u73b0\u5728\u6765\u4e00\u8d77\u770b\u4e00\u4e0b\u8fd9\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff1a</p> <pre><code>// \u5f15\u5165\u9700\u8981\u7684\u5916\u90e8\u5e93\nuse rayon::iter::ParallelBridge;\nuse rayon::iter::ParallelIterator;\nuse regex::Regex;\nuse std::sync::{Arc};\nuse std::fs;\n\n// \u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u5220\u9664\u6587\u4ef6\u5939\u4e2d\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u6587\u4ef6\u5939\nfn delete_folders_with_regex(\n    top_folder: &amp;str,         // \u9876\u5c42\u6587\u4ef6\u5939\u7684\u8def\u5f84\n    keep_folders: Vec&lt;&amp;str&gt;, // \u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868\n    name_regex: Arc&lt;Regex&gt;,  // \u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u8c61\uff0c\u7528\u4e8e\u5339\u914d\u6587\u4ef6\u5939\u540d\u79f0\n) {\n    // \u5185\u90e8\u51fd\u6570\uff1a\u9012\u5f52\u5220\u9664\u6587\u4ef6\u5939\n    fn delete_folders_recursive(\n        folder: &amp;str,               // \u5f53\u524d\u6587\u4ef6\u5939\u7684\u8def\u5f84\n        keep_folders: Arc&lt;Vec&lt;&amp;str&gt;&gt;, // \u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868\uff08\u539f\u5b50\u5f15\u7528\u8ba1\u6570\u6307\u9488\uff09\n        name_regex: Arc&lt;Regex&gt;,    // \u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u8c61\uff08\u539f\u5b50\u5f15\u7528\u8ba1\u6570\u6307\u9488\uff09\n    ) {\n        // \u4f7f\u7528fs::read_dir\u8bfb\u53d6\u6587\u4ef6\u5939\u5185\u5bb9\uff0c\u8fd4\u56de\u4e00\u4e2aResult\n        if let Ok(entries) = fs::read_dir(folder) {\n            // \u4f7f\u7528Rayon\u5e93\u7684\u5e76\u884c\u8fed\u4ee3\u5668\u5904\u7406\u6587\u4ef6\u5939\u5185\u5bb9\n            entries.par_bridge().for_each(|entry| {\n                if let Ok(entry) = entry {\n                    let path = entry.path();\n                    if path.is_dir() {\n                        if let Some(folder_name) = path.file_name() {\n                            if let Some(folder_name_str) = folder_name.to_str() {\n                                let name_regex_ref = &amp;*name_regex;\n                                // \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u68c0\u67e5\u6587\u4ef6\u5939\u540d\u79f0\u662f\u5426\u5339\u914d\n                                if name_regex_ref.is_match(folder_name_str) {\n                                    if !keep_folders.contains(&amp;folder_name_str) {\n                                        println!(\"\u5220\u9664\u6587\u4ef6\u5939: {:?}\", path);\n                                        // \u9012\u5f52\u5730\u5220\u9664\u6587\u4ef6\u5939\u53ca\u5176\u5185\u5bb9\n                                        fs::remove_dir_all(&amp;path)\n                                            .expect(\"Failed to delete folder\");\n                                    } else {\n                                        println!(\"\u4fdd\u7559\u6587\u4ef6\u5939: {:?}\", path);\n                                    }\n                                } else {\n                                    println!(\"\u5ffd\u7565\u975e\u5b57\u6bcd\u6587\u4ef6\u5939: {:?}\", path);\n                                }\n                            }\n                        }\n                        // \u9012\u5f52\u8fdb\u5165\u5b50\u6587\u4ef6\u5939\n                        delete_folders_recursive(\n                            &amp;path.display().to_string(),\n                            keep_folders.clone(),\n                            name_regex.clone()\n                        );\n                    }\n                }\n            });\n        }\n    }\n\n    // \u4f7f\u7528fs::metadata\u68c0\u67e5\u9876\u5c42\u6587\u4ef6\u5939\u7684\u5143\u6570\u636e\u4fe1\u606f\n    if let Ok(metadata) = fs::metadata(top_folder) {\n        if metadata.is_dir() {\n            println!(\"\u5f00\u59cb\u5904\u7406\u6587\u4ef6\u5939: {:?}\", top_folder);\n            // \u5c06\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868\u5305\u88c5\u5728Arc\u4e2d\uff0c\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u8bbf\u95ee\n            let keep_folders = Arc::new(keep_folders);\n            // \u8c03\u7528\u9012\u5f52\u51fd\u6570\u5f00\u59cb\u5220\u9664\u64cd\u4f5c\n            delete_folders_recursive(top_folder, keep_folders.clone(), name_regex);\n        } else {\n            println!(\"\u9876\u5c42\u6587\u4ef6\u5939\u4e0d\u662f\u4e00\u4e2a\u76ee\u5f55: {:?}\", top_folder);\n        }\n    } else {\n        println!(\"\u9876\u5c42\u6587\u4ef6\u5939\u4e0d\u5b58\u5728: {:?}\", top_folder);\n    }\n}\n\n// \u5b9a\u4e49\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868\u3002\u6b64\u5904\u4f7f\u7528\u4e86static\u58f0\u660e\uff0c\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5217\u8868\u5728\u6574\u4e2a\u7a0b\u5e8f\u7684\u8fd0\u884c\u65f6\u90fd\u662f\u4e0d\u53d8\u7684\u3002\nstatic KEEP_FOLDERS: [&amp;str; 11] = [\"SR\", \"CF\", \"OI\", \"TA\", \"M\", \"P\", \"AG\", \"CU\", \"AL\", \"ZN\", \"RU\"];\n\nfn main() {\n    let top_folder = \"/opt/sample\"; // \u6307\u5b9a\u9876\u5c42\u6587\u4ef6\u5939\u7684\u8def\u5f84\n    // \u5c06\u9759\u6001\u6570\u7ec4\u8f6c\u6362\u4e3a\u53ef\u53d8Vec\u4ee5\u4f20\u9012\u7ed9\u51fd\u6570\n    let keep_folders: Vec&lt;&amp;str&gt; = KEEP_FOLDERS.iter().map(|s| *s).collect();\n    // \u521b\u5efa\u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u8c61\uff0c\u7528\u4e8e\u5339\u914d\u6587\u4ef6\u5939\u540d\u79f0\n    let name_regex = Regex::new(\"^[a-zA-Z]+$\").expect(\"Invalid regex pattern\");\n    // \u5c06\u6b63\u5219\u8868\u8fbe\u5f0f\u5305\u88c5\u5728Arc\u4e2d\u4ee5\u8fdb\u884c\u591a\u7ebf\u7a0b\u8bbf\u95ee\n    let name_regex = Arc::new(name_regex);\n\n    // \u8c03\u7528\u4e3b\u8981\u51fd\u6570\u4ee5\u542f\u52a8\u6587\u4ef6\u5939\u5220\u9664\u64cd\u4f5c\n    delete_folders_with_regex(top_folder, keep_folders, name_regex);\n}\n</code></pre> <p>\u8ba9\u6211\u4eec\u8be6\u7ec6\u8bb2\u89e3\u8fd9\u4e2a\u811a\u672c\u7684\u5404\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u9996\u5148\u5bfc\u5165\u6240\u9700\u7684\u5e93\uff1a</li> </ol> <pre><code>use rayon::iter::ParallelBridge;\nuse rayon::iter::ParallelIterator;\nuse regex::Regex;\nuse std::sync::Arc;\nuse std::fs;\n</code></pre> <p>\u9996\u5148\uff0c\u6211\u4eec\u5bfc\u5165\u4e86\u6240\u9700\u7684\u5916\u90e8\u5e93\u3002<code>rayon</code> \u7528\u4e8e\u5e76\u53d1\u8fed\u4ee3\uff0c<code>regex</code> \u7528\u4e8e\u5904\u7406\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c<code>std::sync::Arc</code> \u7528\u4e8e\u521b\u5efa\u539f\u5b50\u5f15\u7528\u8ba1\u6570\u6307\u9488\u3002</p> <ol> <li>\u521b\u5efa <code>delete_folders_with_regex</code> \u51fd\u6570\uff1a</li> </ol> <pre><code>fn delete_folders_with_regex(\n    top_folder: &amp;str,\n    keep_folders: Vec&lt;&amp;str&gt;,\n    name_regex: Arc&lt;Regex&gt;,\n) -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {\n</code></pre> <p>\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>delete_folders_with_regex</code> \u7684\u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u9876\u5c42\u6587\u4ef6\u5939\u8def\u5f84 <code>top_folder</code>\u3001\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868 <code>keep_folders</code> \u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u8c61 <code>name_regex</code> \u4f5c\u4e3a\u53c2\u6570\u3002\u8be5\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a <code>Result</code>\uff0c\u4ee5\u5904\u7406\u6f5c\u5728\u7684\u9519\u8bef\u3002</p> <ol> <li>\u521b\u5efa <code>delete_folders_recursive</code> \u51fd\u6570\uff1a</li> </ol> <pre><code>fn delete_folders_recursive(\n    folder: &amp;str,\n    keep_folders: &amp;Arc&lt;Vec&lt;&amp;str&gt;&gt;,\n    name_regex: &amp;Arc&lt;Regex&gt;,\n) -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {\n</code></pre> <p>\u5728 <code>delete_folders_with_regex</code> \u51fd\u6570\u5185\u90e8\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code>delete_folders_recursive</code> \u7684\u5185\u90e8\u51fd\u6570\uff0c\u7528\u4e8e\u9012\u5f52\u5730\u5220\u9664\u6587\u4ef6\u5939\u3002\u5b83\u63a5\u53d7\u5f53\u524d\u6587\u4ef6\u5939\u8def\u5f84 <code>folder</code>\u3001\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868 <code>keep_folders</code> \u548c\u6b63\u5219\u8868\u8fbe\u5f0f\u5bf9\u8c61 <code>name_regex</code> \u4f5c\u4e3a\u53c2\u6570\u3002\u540c\u6837\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a <code>Result</code>\u3002</p> <ol> <li>\u4f7f\u7528 <code>fs::read_dir</code> \u8bfb\u53d6\u6587\u4ef6\u5939\u5185\u5bb9\uff1a</li> </ol> <pre><code>for entry in fs::read_dir(folder)? {\n</code></pre> <p>\u6211\u4eec\u4f7f\u7528 <code>fs::read_dir</code> \u51fd\u6570\u8bfb\u53d6\u4e86\u5f53\u524d\u6587\u4ef6\u5939 <code>folder</code> \u4e2d\u7684\u5185\u5bb9\uff0c\u5e76\u901a\u8fc7 <code>for</code> \u5faa\u73af\u8fed\u4ee3\u6bcf\u4e2a\u6761\u76ee <code>entry</code>\u3002</p> <ol> <li>\u68c0\u67e5\u6761\u76ee\u662f\u5426\u662f\u6587\u4ef6\u5939\uff1a</li> </ol> <pre><code>let entry = entry?;\nlet path = entry.path();\nif path.is_dir() {\n</code></pre> <p>\u6211\u4eec\u9996\u5148\u68c0\u67e5 <code>entry</code> \u662f\u5426\u662f\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u56e0\u4e3a\u53ea\u6709\u6587\u4ef6\u5939\u624d\u9700\u8981\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u6587\u4ef6\u662f\u4f1a\u88ab\u5ffd\u7565\u7684\u3002</p> <ol> <li>\u83b7\u53d6\u6587\u4ef6\u5939\u540d\u79f0\u5e76\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a</li> </ol> <pre><code>if let Some(folder_name) = path.file_name() {\n    if let Some(folder_name_str) = folder_name.to_str() {\n        if name_regex.is_match(folder_name_str) {\n</code></pre> <p>\u6211\u4eec\u83b7\u53d6\u4e86\u6587\u4ef6\u5939\u7684\u540d\u79f0\uff0c\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f <code>name_regex</code> \u6765\u68c0\u67e5\u6587\u4ef6\u5939\u540d\u79f0\u662f\u5426\u4e0e\u8981\u6c42\u5339\u914d\u3002</p> <ol> <li>\u6839\u636e\u5339\u914d\u7ed3\u679c\u6267\u884c\u64cd\u4f5c\uff1a</li> </ol> <pre><code>if !keep_folders.contains(&amp;folder_name_str) {\n    println!(\"\u5220\u9664\u6587\u4ef6\u5939: {:?}\", path);\n    fs::remove_dir_all(&amp;path)?;\n} else {\n    println!(\"\u4fdd\u7559\u6587\u4ef6\u5939: {:?}\", path);\n}\n</code></pre> <p>\u5982\u679c\u6587\u4ef6\u5939\u540d\u79f0\u5339\u914d\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5e76\u4e14\u4e0d\u5728\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u5217\u8868\u4e2d\uff0c\u6211\u4eec\u4f1a\u5220\u9664\u8be5\u6587\u4ef6\u5939\u53ca\u5176\u5185\u5bb9\u3002\u5426\u5219\uff0c\u6211\u4eec\u53ea\u662f\u8f93\u51fa\u4e00\u6761\u4fe1\u606f\u544a\u8bc9\u7528\u6237\uff0c\u5728\u547d\u4ee4\u884c\u58f0\u660e\u8be5\u6587\u4ef6\u5939\u5c06\u88ab\u4fdd\u7559\u3002</p> <ol> <li>\u9012\u5f52\u8fdb\u5165\u5b50\u6587\u4ef6\u5939\uff1a</li> </ol> <pre><code>delete_folders_recursive(\n    &amp;path.join(&amp;folder_name_str),\n    keep_folders,\n    name_regex\n)?;\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u9012\u5f52\u5730\u8c03\u7528 <code>delete_folders_recursive</code> \u51fd\u6570\uff0c\u8fdb\u5165\u5b50\u6587\u4ef6\u5939\u8fdb\u884c\u76f8\u540c\u7684\u5904\u7406\u3002</p> <ol> <li>\u5904\u7406\u9876\u5c42\u6587\u4ef6\u5939\uff1a</li> </ol> <pre><code>let metadata = fs::metadata(top_folder)?;\nif metadata.is_dir() {\n    println!(\"\u5f00\u59cb\u5904\u7406\u6587\u4ef6\u5939: {:?}\", top_folder);\n    let keep_folders = Arc::new(keep_folders);\n    delete_folders_recursive(top_folder, &amp;keep_folders, &amp;name_regex)?;\n} else {\n    println!(\"\u9876\u5c42\u6587\u4ef6\u5939\u4e0d\u662f\u4e00\u4e2a\u76ee\u5f55: {:?}\", top_folder);\n}\n</code></pre> <p>\u5728 <code>main</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u68c0\u67e5\u9876\u5c42\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\uff0c\u5c31\u8c03\u7528 <code>delete_folders_recursive</code> \u51fd\u6570\u5f00\u59cb\u5904\u7406\u3002\u6211\u4eec\u8fd8\u4f7f\u7528 <code>Arc</code> \u5305\u88c5\u4e86\u8981\u4fdd\u7559\u7684\u6587\u4ef6\u5939\u540d\u79f0\u5217\u8868\uff0c\u4ee5\u4fbf\u591a\u7ebf\u7a0b\u8bbf\u95ee\u3002</p> <ol> <li> <p>\u5b8c\u6210\u5904\u7406\u5e76\u8fd4\u56de <code>Result</code>\uff1a</p> <pre><code>Ok(())\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u8fd4\u56de <code>Ok(())</code> \u8868\u793a\u64cd\u4f5c\u6210\u529f\u5b8c\u6210\u3002</p> </li> </ol>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#_2","title":"\u8865\u5145\u5b66\u4e60\uff1a\u5143\u6570\u636e","text":"<p>\u5143\u6570\u636e\u53ef\u4ee5\u7406\u89e3\u4e3a\u6709\u5173\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5c31\u50cf\u4e00\u4e2a\u6587\u4ef6\u7684\"\u8eab\u4efd\u8bc1\"\u4e00\u6837\u3002\u8fd9\u4e9b\u4fe1\u606f\u5305\u62ec\u6587\u4ef6\u7684\u5927\u5c0f\u3001\u521b\u5efa\u65f6\u95f4\u3001\u4fee\u6539\u65f6\u95f4\u4ee5\u53ca\u6587\u4ef6\u662f\u4e0d\u662f\u6587\u4ef6\u5939\u7b49\u3002\u6bd4\u5982\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5143\u6570\u636e\u77e5\u9053\u4e00\u4e2a\u6587\u4ef6\u6709\u591a\u5927\uff0c\u662f\u4ec0\u4e48\u65f6\u5019\u521b\u5efa\u7684\uff0c\u662f\u4ec0\u4e48\u65f6\u5019\u4fee\u6539\u7684\uff0c\u8fd8\u80fd\u77e5\u9053\u8fd9\u4e2a\u4e1c\u897f\u662f\u4e0d\u662f\u4e00\u4e2a\u6587\u4ef6\u5939\u3002</p> <p>\u5728Rust\u4e2d\uff0c\u5143\u6570\u636e\uff08metadata\uff09\u901a\u5e38\u4e0d\u5305\u62ec\u5b9e\u9645\u7684\u6570\u636e\u5185\u5bb9\u3002\u5143\u6570\u636e\u63d0\u4f9b\u4e86\u5173\u4e8e\u6587\u4ef6\u6216\u5b9e\u4f53\u7684\u5c5e\u6027\u548c\u7279\u5f81\u7684\u4fe1\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>std::fs::metadata</code> \u51fd\u6570\u6765\u83b7\u53d6\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u5143\u6570\u636e\u3002</p> <pre><code>use std::fs;\n\nfn main() -&gt; Result&lt;(), std::io::Error&gt; {\n    let file_path = \"example.txt\"; \n\n    // \u83b7\u53d6\u6587\u4ef6\u7684\u5143\u6570\u636e\n    let metadata = fs::metadata(file_path)?;\n\n    // \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\n    let file_size = metadata.len();\n    println!(\"\u6587\u4ef6\u5927\u5c0f: {} \u5b57\u8282\", file_size);\n\n    // \u83b7\u53d6\u6587\u4ef6\u521b\u5efa\u65f6\u95f4\u548c\u4fee\u6539\u65f6\u95f4\n    let created = metadata.created()?;\n    let modified = metadata.modified()?;\n\n    println!(\"\u521b\u5efa\u65f6\u95f4: {:?}\", created);\n    println!(\"\u4fee\u6539\u65f6\u95f4: {:?}\", modified);\n\n    // \u68c0\u67e5\u6587\u4ef6\u7c7b\u578b\n    if metadata.is_file() {\n        println!(\"\u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6\u3002\");\n    } else if metadata.is_dir() {\n        println!(\"\u8fd9\u662f\u4e00\u4e2a\u76ee\u5f55\u3002\");\n    } else {\n        println!(\"\u672a\u77e5\u6587\u4ef6\u7c7b\u578b\u3002\");\n    }\n\n    Ok(())\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u4f7f\u7528 <code>fs::metadata</code> \u83b7\u53d6\u6587\u4ef6 \"example.txt\" \u7684\u5143\u6570\u636e\uff0c\u7136\u540e\u4ece\u5143\u6570\u636e\u4e2d\u63d0\u53d6\u6587\u4ef6\u5927\u5c0f\u3001\u521b\u5efa\u65f6\u95f4\u3001\u4fee\u6539\u65f6\u95f4\u4ee5\u53ca\u6587\u4ef6\u7c7b\u578b\u4fe1\u606f\u3002</p> <p>\u4e00\u822c\u64cd\u4f5c\u6587\u4ef6\u7cfb\u7edf\u7684\u51fd\u6570\u53ef\u80fd\u4f1a\u8fd4\u56de <code>Result</code> \u7c7b\u578b\uff0c\u6240\u4ee5\u4f60\u9700\u8981\u5904\u7406\u6f5c\u5728\u7684\u9519\u8bef\u3002\u5728\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 <code>?</code> \u8fd0\u7b97\u7b26\u6765\u4f20\u64ad\u9519\u8bef\uff0c\u4f46\u4f60\u4e5f\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u7b49\u5176\u4ed6\u65b9\u5f0f\u6765\u81ea\u5b9a\u4e49\u5730\u5904\u7406\u9519\u8bef\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#_3","title":"\u8865\u5145\u5b66\u4e60\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>\u73b0\u5728\u6211\u4eec\u518d\u6765\u5b66\u4e00\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u4e00\u79cd\u5f3a\u5927\u7684\u6587\u672c\u6a21\u5f0f\u5339\u914d\u5de5\u5177\uff0c\u5b83\u5141\u8bb8\u4f60\u4ee5\u975e\u5e38\u7075\u6d3b\u7684\u65b9\u5f0f\u641c\u7d22\u3001\u5339\u914d\u548c\u64cd\u4f5c\u6587\u672c\u6570\u636e\u3002\u4f7f\u7528\u524d\u6211\u4eec\u6709\u4e00\u4e9b\u57fa\u7840\u7684\u6982\u5ff5\u548c\u8bed\u6cd5\u9700\u8981\u4e86\u89e3\u3002\u4e0b\u9762\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4e00\u4e9b\u57fa\u7840\u77e5\u8bc6\uff1a</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#1","title":"1. \u5b57\u9762\u91cf\u5b57\u7b26\u5339\u914d","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u6700\u57fa\u672c\u529f\u80fd\u662f\u5339\u914d\u5b57\u9762\u91cf\u5b57\u7b26\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u7cbe\u786e\u5339\u914d\u8f93\u5165\u6587\u672c\u4e2d\u7684\u7279\u5b9a\u5b57\u7b26\u3002\u4f8b\u5982\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f <code>cat</code> \u5f53\u7136\u4f1a\u5339\u914d\u8f93\u5165\u6587\u672c\u4e2d\u7684 \"cat\"\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#2","title":"2. \u5143\u5b57\u7b26","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u65f6\u4e2d\u7684\u5143\u5b57\u7b26\u662f\u5177\u6709\u7279\u6b8a\u542b\u4e49\u7684\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u5143\u5b57\u7b26\u4ee5\u53ca\u5b83\u4eec\u7684\u8bf4\u660e\u548c\u793a\u4f8b\uff1a</p> <ol> <li> <p><code>.</code>\uff08\u70b9\u53f7\uff09\uff1a\u5339\u914d\u9664\u6362\u884c\u7b26\u5916\u7684\u4efb\u610f\u5b57\u7b26\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>c.t</code> \u5339\u914d \"cat\"\u3001\"cut\"\u3001\"cot\" \u7b49\u3002</p> </li> <li> <p><code>*</code>\uff08\u661f\u53f7\uff09\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20\u96f6\u6b21\u6216\u591a\u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>ab*c</code> \u5339\u914d \"ac\"\u3001\"abc\"\u3001\"abbc\" \u7b49\u3002</p> </li> <li> <p><code>+</code>\uff08\u52a0\u53f7\uff09\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20\u4e00\u6b21\u6216\u591a\u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>ca+t</code> \u5339\u914d \"cat\"\u3001\"caat\"\u3001\"caaat\" \u7b49\u3002</p> </li> <li> <p><code>?</code>\uff08\u95ee\u53f7\uff09\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20\u96f6\u6b21\u6216\u4e00\u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>colou?r</code> \u5339\u914d \"color\" \u6216 \"colour\"\u3002</p> </li> <li> <p><code>|</code>\uff08\u7ad6\u7ebf\uff09\uff1a\u8868\u793a\u6216\uff0c\u7528\u4e8e\u5728\u591a\u4e2a\u6a21\u5f0f\u4e4b\u95f4\u9009\u62e9\u4e00\u4e2a\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>apple|banana</code> \u5339\u914d \"apple\" \u6216 \"banana\"\u3002</p> </li> <li> <p><code>[]</code>\uff08\u5b57\u7b26\u7c7b\uff09\uff1a\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u96c6\u5408\uff0c\u5339\u914d\u65b9\u62ec\u53f7\u5185\u7684\u4efb\u4f55\u4e00\u4e2a\u5b57\u7b26\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>[aeiou]</code> \u5339\u914d\u4efb\u4f55\u4e00\u4e2a\u5143\u97f3\u5b57\u6bcd\u3002</p> </li> <li> <p><code>()</code>\uff08\u5206\u7ec4\uff09\uff1a\u7528\u4e8e\u5c06\u591a\u4e2a\u6a21\u5f0f\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u4ee5\u4fbf\u5bf9\u5b83\u4eec\u5e94\u7528\u91cf\u8bcd\u6216\u5176\u4ed6\u64cd\u4f5c\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>(ab)+</code> \u5339\u914d \"ab\"\u3001\"abab\"\u3001\"ababab\" \u7b49\u3002</p> </li> </ol> <p>\u8fd9\u4e9b\u5143\u5b57\u7b26\u5141\u8bb8\u4f60\u521b\u5efa\u66f4\u590d\u6742\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\uff0c\u4ee5\u4fbf\u66f4\u7075\u6d3b\u5730\u5339\u914d\u6587\u672c\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u7ec4\u5408\u5b83\u4eec\u6765\u6784\u5efa\u5404\u79cd\u4e0d\u540c\u7684\u5339\u914d\u89c4\u5219\uff0c\u7528\u4e8e\u89e3\u51b3\u6587\u672c\u5904\u7406\u4e2d\u7684\u5404\u79cd\u4efb\u52a1\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#3","title":"3. \u5b57\u7b26\u7c7b","text":"<p>\u5b57\u7b26\u7c7b\u7528\u4e8e\u5339\u914d\u4e00\u4e2a\u5b57\u7b26\u96c6\u5408\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5b57\u7b26\u3002\u4f8b\u5982\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f <code>[aeiou]</code> \u4f1a\u5339\u914d\u4efb\u4f55\u4e00\u4e2a\u5143\u97f3\u5b57\u6bcd\uff08a\u3001e\u3001i\u3001o \u6216 u\uff09\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#4","title":"4. \u91cf\u8bcd","text":"<p>\u91cf\u8bcd\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7528\u4e8e\u6307\u5b9a\u6a21\u5f0f\u91cd\u590d\u6b21\u6570\u7684\u91cd\u8981\u5143\u7d20\u3002\u5b83\u4eec\u5141\u8bb8\u4f60\u5b9a\u4e49\u5339\u914d\u91cd\u590d\u51fa\u73b0\u7684\u5b57\u7b26\u6216\u5b50\u6a21\u5f0f\u7684\u89c4\u5219\u3002\u4ee5\u4e0b\u662f\u5e38\u89c1\u7684\u91cf\u8bcd\u4ee5\u53ca\u5b83\u4eec\u7684\u8bf4\u660e\u548c\u793a\u4f8b\uff1a</p> <ol> <li> <p><code>*</code>\uff08\u661f\u53f7\uff09\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20\u96f6\u6b21\u6216\u591a\u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>ab*c</code> \u5339\u914d \"ac\"\u3001\"abc\"\u3001\"abbc\" \u7b49\u3002\u56e0\u4e3a <code>*</code> \u8868\u793a\u96f6\u6b21\u6216\u591a\u6b21\uff0c\u6240\u4ee5\u5b83\u5141\u8bb8\u524d\u4e00\u4e2a\u5b57\u7b26 <code>b</code> \u91cd\u590d\u51fa\u73b0\u6216\u5b8c\u5168\u7f3a\u5931\u3002</p> </li> <li> <p><code>+</code>\uff08\u52a0\u53f7\uff09\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20\u4e00\u6b21\u6216\u591a\u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>ca+t</code> \u5339\u914d \"cat\"\u3001\"caat\"\u3001\"caaat\" \u7b49\u3002\u56e0\u4e3a <code>+</code> \u8868\u793a\u4e00\u6b21\u6216\u591a\u6b21\uff0c\u6240\u4ee5\u5b83\u8981\u6c42\u524d\u4e00\u4e2a\u5b57\u7b26 <code>a</code> \u81f3\u5c11\u51fa\u73b0\u4e00\u6b21\u3002</p> </li> <li> <p><code>?</code>\uff08\u95ee\u53f7\uff09\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20\u96f6\u6b21\u6216\u4e00\u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>colou?r</code> \u5339\u914d \"color\" \u6216 \"colour\"\u3002\u56e0\u4e3a <code>?</code> \u8868\u793a\u96f6\u6b21\u6216\u4e00\u6b21\uff0c\u6240\u4ee5\u5b83\u5141\u8bb8\u524d\u4e00\u4e2a\u5b57\u7b26 <code>u</code> \u7684\u5b58\u5728\u662f\u53ef\u9009\u7684\u3002</p> </li> <li> <p><code>{n}</code>\uff1a\u7cbe\u786e\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20 n \u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>x{3}</code> \u5339\u914d \"xxx\"\u3002\u5b83\u8981\u6c42\u524d\u4e00\u4e2a\u5b57\u7b26 <code>x</code> \u51fa\u73b0\u7cbe\u786e\u4e09\u6b21\u3002</p> </li> <li> <p><code>{n,}</code>\uff1a\u81f3\u5c11\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20 n \u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>d{2,}</code> \u5339\u914d \"dd\"\u3001\"ddd\"\u3001\"dddd\" \u7b49\u3002\u5b83\u8981\u6c42\u524d\u4e00\u4e2a\u5b57\u7b26 <code>d</code> \u81f3\u5c11\u51fa\u73b0\u4e24\u6b21\u3002</p> </li> <li> <p><code>{n,m}</code>\uff1a\u5339\u914d\u524d\u4e00\u4e2a\u5143\u7d20 n \u5230 m \u6b21\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>[0-9]{2,4}</code> \u5339\u914d \"123\"\u3001\"4567\"\u3001\"89\" \u7b49\u3002\u5b83\u8981\u6c42\u524d\u4e00\u4e2a\u5143\u7d20\u662f\u6570\u5b57\uff0c\u4e14\u51fa\u73b0\u7684\u6b21\u6570\u5728 2 \u5230 4 \u6b21\u4e4b\u95f4\u3002</p> </li> </ol> <p>\u8fd9\u4e9b\u91cf\u8bcd\u4f7f\u4f60\u80fd\u591f\u5b9a\u4e49\u66f4\u7075\u6d3b\u7684\u5339\u914d\u89c4\u5219\uff0c\u4ee5\u9002\u5e94\u4e0d\u540c\u7684\u6587\u672c\u6a21\u5f0f\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#5","title":"5. \u951a\u70b9","text":"<p>\u951a\u70b9\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7528\u4e8e\u6307\u5b9a\u5339\u914d\u53d1\u751f\u7684\u4f4d\u7f6e\u7684\u7279\u6b8a\u5b57\u7b26\u3002\u5b83\u4eec\u4e0d\u5339\u914d\u5b57\u7b26\u672c\u8eab\uff0c\u800c\u662f\u5339\u914d\u8f93\u5165\u6587\u672c\u7684\u7279\u5b9a\u4f4d\u7f6e\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u951a\u70b9\u4ee5\u53ca\u5b83\u4eec\u7684\u8bf4\u660e\u548c\u793a\u4f8b\uff1a</p> <ol> <li> <p><code>^</code>\uff08\u8131\u5b57\u7b26\uff09\uff1a\u5339\u914d\u8f93\u5165\u6587\u672c\u7684\u5f00\u5934\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>^Hello</code> \u5339\u914d\u4ee5 \"Hello\" \u5f00\u5934\u7684\u6587\u672c\u3002\u4f8b\u5982\uff0c\u5b83\u5339\u914d \"Hello, world!\" \u4e2d\u7684 \"Hello\"\uff0c\u4f46\u4e0d\u5339\u914d \"Hi, Hello\" \u4e2d\u7684 \"Hello\"\uff0c\u56e0\u4e3a\u540e\u8005\u4e0d\u5728\u6587\u672c\u5f00\u5934\u3002</p> </li> <li> <p><code>$</code>\uff08\u7f8e\u5143\u7b26\u53f7\uff09\uff1a\u5339\u914d\u8f93\u5165\u6587\u672c\u7684\u7ed3\u5c3e\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>world!$</code> \u5339\u914d\u4ee5 \"world!\" \u7ed3\u5c3e\u7684\u6587\u672c\u3002\u4f8b\u5982\uff0c\u5b83\u5339\u914d \"Hello, world!\" \u4e2d\u7684 \"world!\"\uff0c\u4f46\u4e0d\u5339\u914d \"world! Hi\" \u4e2d\u7684 \"world!\"\uff0c\u56e0\u4e3a\u540e\u8005\u4e0d\u5728\u6587\u672c\u7ed3\u5c3e\u3002</p> </li> <li> <p><code>\\b</code>\uff08\u5355\u8bcd\u8fb9\u754c\uff09\uff1a\u5339\u914d\u5355\u8bcd\u7684\u8fb9\u754c\uff0c\u901a\u5e38\u7528\u4e8e\u786e\u4fdd\u5339\u914d\u7684**\u5355\u8bcd\u5b8c\u6574**\u800c\u4e0d\u662f**\u90e8\u5206\u5339\u914d**\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>\\bapple\\b</code> \u5339\u914d \"apple\" \u8fd9\u4e2a\u5b8c\u6574\u7684\u5355\u8bcd\u3002\u5b83\u5339\u914d \"I have an apple.\" \u4e2d\u7684 \"apple\"\uff0c\u4f46\u4e0d\u5339\u914d \"apples\" \u4e2d\u7684 \"apple\"\u3002</p> </li> <li> <p><code>\\B</code>\uff08\u975e\u5355\u8bcd\u8fb9\u754c\uff09\uff1a\u5339\u914d\u975e\u5355\u8bcd\u8fb9\u754c\u7684\u4f4d\u7f6e\u3002</p> </li> <li> <p>\u793a\u4f8b\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f <code>\\Bcat\\B</code> \u5339\u914d \"The cat sat on the cat.\" \u4e2d\u7684\u7b2c\u4e8c\u4e2a \"cat\"\uff0c\u56e0\u4e3a\u5b83\u4f4d\u4e8e\u4e24\u4e2a\u975e\u5355\u8bcd\u8fb9\u754c\u4e4b\u95f4\uff0c\u800c\u4e0d\u662f\u5355\u8bcd \"cat\" \u7684\u4e00\u90e8\u5206\u3002</p> </li> </ol> <p>\u8fd9\u4e9b\u951a\u70b9\u5141\u8bb8\u4f60\u7cbe\u786e\u5b9a\u4f4d\u5339\u914d\u53d1\u751f\u7684\u4f4d\u7f6e\uff0c\u5728\u5904\u7406\u6587\u672c\u4e2d\u7684\u5355\u8bcd\u3001\u884c\u9996\u3001\u884c\u5c3e\u7b49\u60c5\u51b5\u65f6\u975e\u5e38\u6709\u7528\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#6","title":"6. \u8f6c\u4e49\u5b57\u7b26","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u5339\u914d\u5143\u5b57\u7b26\u672c\u8eab\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760 <code>\\</code> \u8fdb\u884c\u8f6c\u4e49\u3002\u4f8b\u5982\uff0c\u8981\u5339\u914d <code>.</code>\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>\\.</code>\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#7","title":"7. \u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u793a\u4f8b\uff1a</p> <ul> <li>\u5339\u914d\u4e00\u4e2a\u90ae\u7bb1\u5730\u5740\uff1a<code>[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}</code></li> <li>\u5339\u914d\u4e00\u4e2a\u65e5\u671f\uff08\u4f8b\u5982\uff0cYYYY-MM-DD\uff09\uff1a<code>[0-9]{4}-[0-9]{2}-[0-9]{2}</code></li> <li>\u5339\u914d\u4e00\u4e2aURL\uff1a<code>https?://[^\\s/$.?#].[^\\s]*</code></li> </ul>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#8","title":"8. \u5de5\u5177\u548c\u8d44\u6e90","text":"<p>\u4e3a\u4e86\u5b66\u4e60\u548c\u6d4b\u8bd5\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5728\u7ebf\u5de5\u5177\u6216\u672c\u5730\u5f00\u53d1\u5de5\u5177\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>regex101.com: \u4e00\u4e2a\u5728\u7ebf\u6b63\u5219\u8868\u8fbe\u5f0f\u6d4b\u8bd5\u548c\u5b66\u4e60\u5de5\u5177\uff0c\u63d0\u4f9b\u53ef\u89c6\u5316\u89e3\u91ca\u548c\u6d4b\u8bd5\u529f\u80fd\u3002</li> <li>Rust \u7684 regex \u5e93\u6587\u6863\uff1aRust \u7684 regex \u5e93\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u652f\u6301\uff0c\u4f60\u53ef\u4ee5\u67e5\u9605\u5176\u6587\u6863\u4ee5\u5b66\u4e60\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</li> </ul> <p>\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u6587\u672c\u5904\u7406\u5de5\u5177\uff0c\u5b83\u53ef\u4ee5\u5728\u6587\u672c\u4e2d\u67e5\u627e\u3001\u5339\u914d\u548c\u64cd\u4f5c\u590d\u6742\u7684\u6a21\u5f0f\u3002\u638c\u63e1\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5904\u7406\u5404\u79cd\u6587\u672c\u548c\u6587\u4ef6\u5904\u7406\u4efb\u52a1\u3002</p>"},{"location":"PART%20I%20%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/Chapter%2022%20-%20%20%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/#_4","title":"Chapter 22 - \u6587\u4ef6\u5904\u7406","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/","title":"Chapter 23 \u7528Polars\u5b9e\u73b0\u5e76\u52a0\u901f\u6570\u636e\u6846\u67b6\u5904\u7406","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#231-rustpolars","title":"23.1 Rust\u4e0e\u6570\u636e\u6846\u67b6\u5904\u7406\u5de5\u5177Polars","text":"<p>\u7ecf\u8fc7\u4ee5\u4e0a\u7684\u5b66\u4e60\uff0c\u6211\u4eec\u5f88\u81ea\u7136\u5730\u77e5\u9053\uff0cRust \u7684\u7f16\u8bd1\u5668\u901a\u8fc7\u4e25\u683c\u7684\u7f16\u8bd1\u68c0\u67e5\u548c\u4f18\u5316\uff0c\u80fd\u591f\u751f\u6210\u63a5\u8fd1\u4e8e\u624b\u5199\u6c47\u7f16\u7684\u9ad8\u6548\u4ee3\u7801\u3002\u5b83\u7684\u96f6\u6210\u672c\u62bd\u8c61\u7279\u6027\u786e\u4fdd\u4e86\u9ad8\u6548\u7684\u8fd0\u884c\u65f6\u6027\u80fd\uff0c\u975e\u5e38\u9002\u5408\u5904\u7406\u5927\u91cf\u6570\u636e\u548c\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u540c\u65f6\uff0cRust \u63d0\u4f9b\u4e86\u72ec\u7279\u7684\u6240\u6709\u6743\u7cfb\u7edf\u548c\u501f\u7528\u68c0\u67e5\u5668\uff0c\u80fd\u591f\u9632\u6b62\u6570\u636e\u7ade\u4e89\u548c\u5185\u5b58\u6cc4\u6f0f\u3002\u8fd9\u4e9b\u7279\u6027\u4f7f\u5f97\u5f00\u53d1\u8005\u53ef\u4ee5\u7f16\u5199\u66f4\u5b89\u5168\u7684\u591a\u7ebf\u7a0b\u6570\u636e\u5904\u7406\u4ee3\u7801\uff0c\u51cf\u5c11\u5e76\u53d1\u9519\u8bef\u7684\u53d1\u751f\u3002\u53e6\u5916\uff0cRust \u7684\u5e76\u53d1\u6a21\u578b\u4f7f\u5f97\u7f16\u5199\u9ad8\u6548\u7684\u5e76\u884c\u4ee3\u7801\u53d8\u5f97\u66f4\u52a0\u7b80\u5355\u548c\u5b89\u5168\u3002\u901a\u8fc7\u4f7f\u7528 <code>Tokio</code> \u7b49\u5f02\u6b65\u7f16\u7a0b\u6846\u67b6\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u9ad8\u6548\u5730\u5904\u7406\u5927\u91cf\u5e76\u53d1\u4efb\u52a1\uff0c\u63d0\u5347\u6570\u636e\u5904\u7406\u7684\u541e\u5410\u91cf\u3002\u6240\u4ee5\u4f7f\u7528 Rust \u8fdb\u884c\u6570\u636e\u5904\u7406\uff0c\u7ed3\u5408\u5176\u6027\u80fd\u3001\u5b89\u5168\u6027\u3001\u5e76\u53d1\u652f\u6301\u548c\u8de8\u5e73\u53f0\u517c\u5bb9\u6027\uff0c\u6211\u4eec\u80fd\u591f\u6784\u5efa\u51fa\u9ad8\u6548\u3001\u53ef\u9760\u548c\u7075\u6d3b\u7684\u6570\u636e\u5904\u7406\u5de5\u5177\uff0c\u6ee1\u8db3\u73b0\u4ee3\u6570\u636e\u5bc6\u96c6\u578b\u5e94\u7528\u7684\u9700\u6c42\u3002\u672c\u8282\u5c06\u4ee5Poars\u4e3a\u4f8b\u6559\u8bfb\u8005\u5982\u4f55\u5b9e\u73b0\u5e76\u52a0\u901f\u6570\u636e\u6846\u67b6\u5904\u7406\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#polars","title":"Polars \u7b80\u4ecb","text":"<p>Polars \u8d77\u521d\u662f\u4e00\u4e2a\u57282020\u5e74\u4f5c\u4e3a\u7231\u597d\u9879\u76ee\u5f00\u59cb\u7684\u5f00\u6e90\u5e93\uff0c\u4f46\u5f88\u5feb\u5728\u5f00\u6e90\u793e\u533a\u4e2d\u83b7\u5f97\u4e86\u5e7f\u6cdb\u5173\u6ce8\u3002\u8bb8\u591a\u5f00\u53d1\u8005\u4e00\u76f4\u5728\u5bfb\u627e\u4e00\u4e2a\u65e2\u6613\u7528\u53c8\u9ad8\u6027\u80fd\u7684 DataFrame \u5e93\uff0cPolars \u6b63\u662f\u4e3a\u4e86\u586b\u8865\u8fd9\u4e00\u7a7a\u7f3a\u800c\u51fa\u73b0\u7684\u3002\u968f\u7740\u8d8a\u6765\u8d8a\u591a\u6765\u81ea\u4e0d\u540c\u80cc\u666f\u548c\u7f16\u7a0b\u8bed\u8a00\u7684\u8d21\u732e\u8005\u52a0\u5165\uff0cPolars \u793e\u533a\u8fc5\u901f\u58ee\u5927\u3002\u7531\u4e8e\u793e\u533a\u7684\u5de8\u5927\u52aa\u529b\uff0cPolars \u73b0\u5728\u6b63\u5f0f\u652f\u6301\u4e09\u79cd\u8bed\u8a00\uff08Rust\u3001Python\u3001JS\uff09\uff0c\u5e76\u8ba1\u5212\u652f\u6301\u4e24\u79cd\u65b0\u7684\u8bed\u8a00\uff08R\u3001Ruby\uff09\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_1","title":"\u54f2\u5b66\u7406\u5ff5","text":"<p>Polars \u7684\u76ee\u6807\u662f\u63d0\u4f9b\u4e00\u4e2a\u6781\u901f\u7684 DataFrame \u5e93\uff0c\u5176\u7279\u70b9\u5305\u62ec\uff1a</p> <ul> <li>\u5229\u7528\u673a\u5668\u4e0a\u7684\u6240\u6709\u53ef\u7528\u6838\u5fc3\u3002</li> <li>\u4f18\u5316\u67e5\u8be2\u4ee5\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u5de5\u4f5c\u548c\u5185\u5b58\u5206\u914d\u3002</li> <li>\u5904\u7406\u6bd4\u53ef\u7528\u5185\u5b58\u66f4\u5927\u7684\u6570\u636e\u96c6\u3002</li> <li>\u63d0\u4f9b\u4e00\u81f4\u4e14\u53ef\u9884\u6d4b\u7684 API\u3002</li> <li>\u9075\u5faa\u4e25\u683c\u7684\u6a21\u5f0f\uff08\u5728\u8fd0\u884c\u67e5\u8be2\u524d\u5e94\u5df2\u77e5\u6570\u636e\u7c7b\u578b\uff09\u3002</li> </ul> <p>Polars \u4f7f\u7528 Rust \u7f16\u5199\uff0c\u5177\u6709 C/C++ \u7684\u6027\u80fd\uff0c\u5e76\u80fd\u5b8c\u5168\u63a7\u5236\u67e5\u8be2\u5f15\u64ce\u4e2d\u6027\u80fd\u5173\u952e\u7684\u90e8\u5206\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_2","title":"\u4e3b\u8981\u529f\u80fd","text":"<ul> <li>\u5feb\u901f\uff1a\u4ece\u5934\u5f00\u59cb\u7528 Rust \u7f16\u5199\uff0c\u8bbe\u8ba1\u7d27\u8d34\u673a\u5668\u4e14\u65e0\u5916\u90e8\u4f9d\u8d56\u3002</li> <li>I/O \u652f\u6301\uff1a\u5bf9\u672c\u5730\u3001\u4e91\u5b58\u50a8\u548c\u6570\u636e\u5e93\u7684\u6240\u6709\u5e38\u89c1\u6570\u636e\u5b58\u50a8\u5c42\u63d0\u4f9b\u4e00\u6d41\u652f\u6301\u3002</li> <li>\u76f4\u89c2\u7684 API\uff1a\u4ee5\u81ea\u7136\u7684\u65b9\u5f0f\u7f16\u5199\u67e5\u8be2\uff0cPolars \u5185\u90e8\u4f1a\u901a\u8fc7\u67e5\u8be2\u4f18\u5316\u5668\u786e\u5b9a\u6700\u6709\u6548\u7684\u6267\u884c\u65b9\u5f0f\u3002</li> <li>Out of Core\uff1a\u6d41\u5f0f API \u5141\u8bb8\u5904\u7406\u7ed3\u679c\u65f6\u4e0d\u9700\u8981\u5c06\u6240\u6709\u6570\u636e\u540c\u65f6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002</li> <li>\u5e76\u884c\u5904\u7406\uff1a\u5229\u7528\u591a\u6838 CPU\uff0c\u65e0\u9700\u989d\u5916\u914d\u7f6e\u5373\u53ef\u5206\u914d\u5de5\u4f5c\u8d1f\u8f7d\u3002</li> <li>\u5411\u91cf\u5316\u67e5\u8be2\u5f15\u64ce\uff1a\u4f7f\u7528 Apache Arrow \u5217\u5f0f\u6570\u636e\u683c\u5f0f\uff0c\u4ee5\u5411\u91cf\u5316\u65b9\u5f0f\u5904\u7406\u67e5\u8be2\uff0c\u4f18\u5316 CPU \u4f7f\u7528\u3002</li> <li>LazyMode\uff1a\u652f\u6301\u5ef6\u8fdf\u8ba1\u7b97\u6a21\u5f0f\uff0c\u901a\u8fc7\u94fe\u5f0f\u8c03\u7528\u4f18\u5316\u6027\u80fd\u548c\u8d44\u6e90\u4f7f\u7528\u3002</li> <li>PyO3 \u652f\u6301\uff1a\u901a\u8fc7 PyO3 \u63d0\u4f9b\u5bf9 Python \u7684\u5f3a\u5927\u652f\u6301\uff0c\u4f7f\u7814\u7a76\u4eba\u5458\u53ef\u4ee5\u65b9\u4fbf\u5730\u4f7f\u7528 Python \u8fdb\u884c\u6570\u636e\u5206\u6790\u3002</li> </ul> <p>\u5728\u63a5\u4e0b\u6765\u7684\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u4f1a\u9891\u7e41\u63a5\u89e6\u5230\u8fd9\u4e9bPolars\u5148\u8fdb\u7684\u7279\u6027\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust","title":"Rust \u4e2d\u7684\u6570\u636e\u5904\u7406\u6846\u67b6","text":"<ol> <li>DataFusion\uff1aDataFusion \u662f\u4e00\u4e2a\u7528\u4e8e\u67e5\u8be2\u548c\u6570\u636e\u5904\u7406\u7684\u9ad8\u6027\u80fd\u67e5\u8be2\u5f15\u64ce\uff0c\u652f\u6301 SQL \u67e5\u8be2\u8bed\u6cd5\uff0c\u5e76\u80fd\u591f\u4e0e Arrow \u683c\u5f0f\u7684\u6570\u636e\u65e0\u7f1d\u96c6\u6210\uff0c\u9002\u7528\u4e8e\u5927\u89c4\u6a21\u6570\u636e\u5904\u7406\u548c\u5206\u6790\u3002</li> <li>Arrow\uff1aApache Arrow \u662f\u4e00\u4e2a\u8de8\u8bed\u8a00\u7684\u5f00\u53d1\u5e73\u53f0\uff0c\u65e8\u5728\u5b9e\u73b0\u9ad8\u6027\u80fd\u7684\u5217\u5f0f\u5185\u5b58\u683c\u5f0f\uff0c\u652f\u6301\u9ad8\u6548\u7684\u6570\u636e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff0c\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5927\u6570\u636e\u5904\u7406\u548c\u6570\u636e\u5206\u6790\u9886\u57df\u3002</li> </ol> <p>\u8fd9\u4e9b\u5176\u4ed6\u4e5f\u6846\u67b6\u5404\u6709\u7279\u70b9\uff0c\u4e3a Rust \u5f00\u53d1\u8005\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u6570\u636e\u5904\u7406\u548c\u5206\u6790\u5de5\u5177\uff0c\u80fd\u591f\u6ee1\u8db3\u4e0d\u540c\u7684\u5e94\u7528\u9700\u6c42\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#232-polars","title":"23.2 \u5f00\u59cb\u4f7f\u7528Polars","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2321-polars","title":"23.2.1 \u4e3a\u9879\u76ee\u52a0\u5165polars\u5e93","text":"<p>\u672c\u7ae0\u8282\u65e8\u5728\u5e2e\u52a9\u60a8\u5f00\u59cb\u4f7f\u7528 Polars\u3002\u5b83\u6db5\u76d6\u4e86\u8be5\u5e93\u7684\u6240\u6709\u57fa\u672c\u529f\u80fd\u548c\u7279\u6027\uff0c\u4f7f\u65b0\u7528\u6237\u80fd\u591f\u8f7b\u677e\u719f\u6089\u4ece\u521d\u59cb\u5b89\u88c5\u548c\u8bbe\u7f6e\u5230\u6838\u5fc3\u529f\u80fd\u7684\u57fa\u7840\u77e5\u8bc6\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u662f\u9ad8\u7ea7\u7528\u6237\u6216\u719f\u6089 DataFrame\uff0c\u60a8\u53ef\u4ee5\u8df3\u8fc7\u672c\u7ae0\u8282\uff0c\u76f4\u63a5\u8fdb\u5165\u4e0b\u4e00\u4e2a\u7ae0\u8282\u4e86\u89e3\u5b89\u88c5\u9009\u9879\u3002</p> <pre><code># \u4e3a\u9879\u76ee\u52a0\u5165polars\u5e93\u5e76\u4e14\u6253\u5f00 'lazy' flag\ncargo add polars -F lazy\n\n# Or Cargo.toml\n[dependencies]\npolars = { version = \"x\", features = [\"lazy\", ...]}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2322","title":"23.2.2 \u8bfb\u53d6\u4e0e\u5199\u5165","text":"<p>Polars \u652f\u6301\u8bfb\u53d6\u548c\u5199\u5165\u5e38\u89c1\u6587\u4ef6\u683c\u5f0f\uff08\u5982 csv\u3001json\u3001parquet\uff09\u3001\u4e91\u5b58\u50a8\uff08S3\u3001Azure Blob\u3001BigQuery\uff09\u548c\u6570\u636e\u5e93\uff08\u5982 postgres\u3001mysql\uff09\u3002\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5728\u78c1\u76d8\u4e0a\u8bfb\u53d6\u548c\u5199\u5165\u7684\u6982\u5ff5\u3002</p> <pre><code>use std::fs::File; // \u5bfc\u5165\u6587\u4ef6\u7cfb\u7edf\u6a21\u5757\nuse chrono::prelude::*; // \u5bfc\u5165 Chrono \u65f6\u95f4\u5e93\nuse polars::prelude::*; // \u5bfc\u5165 Polars \u5e93\n\n// \u521b\u5efa\u4e00\u4e2a DataFrame\uff0c\u5305\u542b\u56db\u5217\u6570\u636e\uff1a\u6574\u6570\u3001\u65e5\u671f\u3001\u6d6e\u70b9\u6570\u548c\u5b57\u7b26\u4e32\nlet mut df: DataFrame = df!(\n    \"integer\" =&gt; &amp;[1, 2, 3], // \u6574\u6570\u5217\n    \"date\" =&gt; &amp;[ // \u65e5\u671f\u5217\n        NaiveDate::from_ymd_opt(2025, 1, 1).unwrap().and_hms_opt(0, 0, 0).unwrap(), // \u7b2c\u4e00\u5929\n        NaiveDate::from_ymd_opt(2025, 1, 2).unwrap().and_hms_opt(0, 0, 0).unwrap(), // \u7b2c\u4e8c\u5929\n        NaiveDate::from_ymd_opt(2025, 1, 3).unwrap().and_hms_opt(0, 0, 0).unwrap(), // \u7b2c\u4e09\u5929\n    ],\n    \"float\" =&gt; &amp;[4.0, 5.0, 6.0], // \u6d6e\u70b9\u6570\u5217\n    \"string\" =&gt; &amp;[\"a\", \"b\", \"c\"], // \u5b57\u7b26\u4e32\u5217\n)\n.unwrap(); // \u521b\u5efa DataFrame \u6210\u529f\u540e\uff0c\u89e3\u9664 Result \u5305\u88c5\n\n// \u6253\u5370 DataFrame \u7684\u5185\u5bb9\nprintln!(\"{}\", df);\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 Polars \u5728 Rust \u4e2d\u521b\u5efa\u4e00\u4e2a DataFrame \u5e76\u6253\u5370\u5176\u5185\u5bb9\u3002DataFrame \u5305\u542b\u56db\u5217\u6570\u636e\uff0c\u5206\u522b\u662f\u6574\u6570\u3001\u65e5\u671f\u3001\u6d6e\u70b9\u6570\u548c\u5b57\u7b26\u4e32\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u65b9\u4fbf\u5730\u5904\u7406\u548c\u5206\u6790\u6570\u636e\u3002</p> <pre><code>shape: (3, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 integer \u2506 date                \u2506 float \u2506 string \u2502\n\u2502 ---     \u2506 ---                 \u2506 ---   \u2506 ---    \u2502\n\u2502 i64     \u2506 datetime[\u03bcs]        \u2506 f64   \u2506 str    \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1       \u2506 2025-01-01 00:00:00 \u2506 4.0   \u2506 a      \u2502\n\u2502 2       \u2506 2025-01-02 00:00:00 \u2506 5.0   \u2506 b      \u2502\n\u2502 3       \u2506 2025-01-03 00:00:00 \u2506 6.0   \u2506 c      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2323-polars","title":"23.2.3 Polars \u8868\u8fbe\u5f0f","text":"<p>Polars \u7684\u8868\u8fbe\u5f0f\u662f\u5176\u6838\u5fc3\u4f18\u52bf\u4e4b\u4e00\uff0c\u63d0\u4f9b\u4e86\u6a21\u5757\u5316\u7ed3\u6784\uff0c\u4f7f\u5f97\u7b80\u5355\u6982\u5ff5\u53ef\u4ee5\u7ec4\u5408\u6210\u590d\u6742\u67e5\u8be2\u3002\u4ee5\u4e0b\u662f\u6784\u5efa\u6240\u6709\u67e5\u8be2\u7684\u57fa\u672c\u7ec4\u4ef6\uff1a</p> <ul> <li><code>select</code></li> <li><code>filter</code></li> <li><code>with_columns</code></li> <li><code>group_by</code></li> </ul> <p>\u8981\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u8868\u8fbe\u5f0f\u548c\u5b83\u4eec\u64cd\u4f5c\u7684\u4e0a\u4e0b\u6587\uff0c\u8bf7\u53c2\u9605\u7528\u6237\u6307\u5357\u4e2d\u7684\u4e0a\u4e0b\u6587\u548c\u8868\u8fbe\u5f0f\u90e8\u5206\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23231-select","title":"23.2.3.1 \u9009\u62e9\uff08Select\uff09","text":"<p>\u9009\u62e9\u4e00\u5217\u6570\u636e\u9700\u8981\u505a\u4e24\u4ef6\u4e8b\uff1a</p> <ol> <li>\u5b9a\u4e49\u6211\u4eec\u8981\u83b7\u53d6\u6570\u636e\u7684 DataFrame\u3002</li> <li>\u9009\u62e9\u6240\u9700\u7684\u6570\u636e\u3002</li> </ol> <p>\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u9009\u62e9 <code>col('*')</code>\uff0c\u661f\u53f7\u4ee3\u8868\u6240\u6709\u5217\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust_1","title":"Rust \u793a\u4f8b\u4ee3\u7801","text":"<pre><code>use polars::prelude::*;\n\n// \u5047\u8bbe df \u662f\u5df2\u521b\u5efa\u7684 DataFrame\nlet out = df.clone().lazy().select([col(\"*\")]).collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 c                   \u2506 d     \u2502\n\u2502 --- \u2506 ---      \u2506 ---                 \u2506 ---   \u2502\n\u2502 i64 \u2506 f64      \u2506 datetime[\u03bcs]        \u2506 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.10666  \u2506 2025-12-01 00:00:00 \u2506 1.0   \u2502\n\u2502 1   \u2506 0.596863 \u2506 2025-12-02 00:00:00 \u2506 2.0   \u2502\n\u2502 2   \u2506 0.691304 \u2506 2025-12-03 00:00:00 \u2506 NaN   \u2502\n\u2502 3   \u2506 0.906636 \u2506 2025-12-04 00:00:00 \u2506 -42.0 \u2502\n\u2502 4   \u2506 0.101216 \u2506 2025-12-05 00:00:00 \u2506 null  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8981\u8fd4\u56de\u7684\u7279\u5b9a\u5217\uff0c\u4ee5\u4e0b\u662f\u4f20\u9012\u5217\u540d\u7684\u65b9\u5f0f\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust_2","title":"Rust \u793a\u4f8b\u4ee3\u7801","text":"<pre><code>use polars::prelude::*;\n\nlet out = df.clone().lazy().select([col(\"a\"), col(\"b\")]).collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2502\n\u2502 --- \u2506 ---      \u2502\n\u2502 i64 \u2506 f64      \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.10666  \u2502\n\u2502 1   \u2506 0.596863 \u2502\n\u2502 2   \u2506 0.691304 \u2502\n\u2502 3   \u2506 0.906636 \u2502\n\u2502 4   \u2506 0.101216 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23232-filter","title":"23.2.3.2 \u8fc7\u6ee4\uff08Filter\uff09","text":"<p>\u8fc7\u6ee4\u9009\u9879\u5141\u8bb8\u6211\u4eec\u521b\u5efa DataFrame \u7684\u5b50\u96c6\u3002\u6211\u4eec\u4f7f\u7528\u4e4b\u524d\u7684 DataFrame\uff0c\u5e76\u5728\u4e24\u4e2a\u6307\u5b9a\u65e5\u671f\u4e4b\u95f4\u8fdb\u884c\u8fc7\u6ee4\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust_3","title":"Rust \u793a\u4f8b\u4ee3\u7801","text":"<p>\u4e0b\u9762\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 Polars \u548c Rust \u8fdb\u884c\u6570\u636e\u8fc7\u6ee4\u64cd\u4f5c\u3002\u6211\u4eec\u5c06\u57fa\u4e8e\u4e24\u4e2a\u6307\u5b9a\u65e5\u671f\u5bf9 DataFrame \u8fdb\u884c\u8fc7\u6ee4\u3002</p> <pre><code>use polars::prelude::*;\nuse chrono::NaiveDate;\n\nlet start_date = NaiveDate::from_ymd(2025, 12, 2).and_hms(0, 0, 0); // \u5b9a\u4e49\u5f00\u59cb\u65e5\u671f\nlet end_date = NaiveDate::from_ymd(2025, 12, 3).and_hms(0, 0, 0);   // \u5b9a\u4e49\u7ed3\u675f\u65e5\u671f\n\nlet out = df.clone().lazy().filter( // \u521b\u5efa DataFrame \u7684\u4e00\u4e2a\u526f\u672c\uff0c\u5e76\u8fdb\u5165\u60f0\u6027\u8ba1\u7b97\u6a21\u5f0f\n    col(\"c\").gt_eq(lit(start_date)) // \u8fc7\u6ee4\u6761\u4ef6\uff1a\u5217 \"c\" \u7684\u503c\u5927\u4e8e\u7b49\u4e8e\u5f00\u59cb\u65e5\u671f\n    .and(col(\"c\").lt_eq(lit(end_date))) // \u8fc7\u6ee4\u6761\u4ef6\uff1a\u5217 \"c\" \u7684\u503c\u5c0f\u4e8e\u7b49\u4e8e\u7ed3\u675f\u65e5\u671f\n).collect()?; // \u6536\u96c6\u7ed3\u679c\u5e76\u6267\u884c\u8ba1\u7b97\n\nprintln!(\"{}\", out); // \u6253\u5370\u8fc7\u6ee4\u540e\u7684 DataFrame\n</code></pre> <p>**\u6ce8\u610f\u3002**\u5728\u8fd9\u91cc<code>lit()</code> \u5168\u79f0\u662f <code>literal</code>\u3002\u5728 Polars \u4e2d\uff0c<code>lit()</code> \u51fd\u6570\u7528\u4e8e\u5c06\u4e00\u4e2a\u5e38\u91cf\u503c\u8f6c\u6362\u4e3a Polars \u8868\u8fbe\u5f0f\uff0c\u4f7f\u5176\u53ef\u4ee5\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u3002</p> <p>\u793a\u4f8b\u4ee3\u7801\u7684\u8f93\u51fa\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>shape: (2, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 c                   \u2506 d   \u2502\n\u2502 --- \u2506 ---      \u2506 ---                 \u2506 --- \u2502\n\u2502 i64 \u2506 f64      \u2506 datetime[\u03bcs]        \u2506 f64 \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1   \u2506 0.596863 \u2506 2025-12-02 00:00:00 \u2506 2.0 \u2502\n\u2502 2   \u2506 0.691304 \u2506 2025-12-03 00:00:00 \u2506 NaN \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u4f60\u8fd8\u53ef\u4ee5\u521b\u5efa\u5305\u542b\u591a\u4e2a\u5217\u7684\u66f4\u590d\u6742\u7684\u8fc7\u6ee4\u5668\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust_4","title":"Rust \u793a\u4f8b\u4ee3\u7801","text":"<p>\u4e0b\u9762\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 Polars \u548c Rust \u8fdb\u884c\u6570\u636e\u8fc7\u6ee4\u64cd\u4f5c\u3002\u6211\u4eec\u5c06\u57fa\u4e8e\u4e00\u4e2a\u6761\u4ef6\u5bf9 DataFrame \u8fdb\u884c\u8fc7\u6ee4\u3002</p> <pre><code>use polars::prelude::*;\n\nlet out = df.clone().lazy().filter(\n    col(\"a\").lt_eq(3) // \u8fc7\u6ee4\u6761\u4ef6\uff1a\u5217 \"a\" \u7684\u503c\u5c0f\u4e8e\u6216\u7b49\u4e8e 3\n    .and(col(\"d\").is_not_null()) // \u8fc7\u6ee4\u6761\u4ef6\uff1a\u5217 \"d\" \u7684\u503c\u4e0d\u662f\u7a7a\u503c\n).collect()?; // \u6536\u96c6\u7ed3\u679c\u5e76\u6267\u884c\u8ba1\u7b97\n\nprintln!(\"{}\", out); // \u6253\u5370\u8fc7\u6ee4\u540e\u7684 DataFrame\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (3, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 c                   \u2506 d     \u2502\n\u2502 --- \u2506 ---      \u2506 ---                 \u2506 ---   \u2502\n\u2502 i64 \u2506 f64      \u2506 datetime[\u03bcs]        \u2506 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.10666  \u2506 2025-12-01 00:00:00 \u2506 1.0   \u2502\n\u2502 1   \u2506 0.596863 \u2506 2025-12-02 00:00:00 \u2506 2.0   \u2502\n\u2502 3   \u2506 0.906636 \u2506 2025-12-04 00:00:00 \u2506 -42.0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23233-add-columns","title":"23.2.3.3 \u6dfb\u52a0\u5217\uff08Add Columns\uff09","text":"<p><code>with_columns</code> \u5141\u8bb8\u4f60\u4e3a\u5206\u6790\u521b\u5efa\u65b0\u5217\u3002\u6211\u4eec\u5c06\u521b\u5efa\u4e24\u4e2a\u65b0\u5217 <code>e</code> \u548c <code>b+42</code>\u3002\u9996\u5148\uff0c\u6211\u4eec\u5c06\u5217 <code>b</code> \u7684\u6240\u6709\u503c\u6c42\u548c\u5e76\u5b58\u50a8\u5728\u65b0\u5217 <code>e</code> \u4e2d\u3002\u7136\u540e\u6211\u4eec\u5c06\u5217 <code>b</code> \u7684\u503c\u52a0\u4e0a 42\uff0c\u5e76\u5c06\u7ed3\u679c\u5b58\u50a8\u5728\u65b0\u5217 <code>b+42</code> \u4e2d\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust_5","title":"Rust \u793a\u4f8b\u4ee3\u7801","text":"<pre><code>use polars::prelude::*;\n\n// \u521b\u5efa\u65b0\u7684\u5217\nlet out = df\n    .clone() // \u514b\u9686 DataFrame\n    .lazy() // \u8fdb\u5165\u60f0\u6027\u8ba1\u7b97\u6a21\u5f0f\n    .with_columns([\n        col(\"b\").sum().alias(\"e\"), // \u65b0\u5217 e\uff1a\u5217 b \u7684\u6240\u6709\u503c\u6c42\u548c\n        (col(\"b\") + lit(42)).alias(\"b+42\"), // \u65b0\u5217 b+42\uff1a\u5217 b \u7684\u503c\u52a0 42\n    ])\n    .collect()?; // \u6536\u96c6\u7ed3\u679c\u5e76\u6267\u884c\u8ba1\u7b97\n\nprintln!(\"{}\", out); // \u6253\u5370\u7ed3\u679c\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5, 6)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 c                   \u2506 d     \u2506 e        \u2506 b+42      \u2502\n\u2502 --- \u2506 ---      \u2506 ---                 \u2506 ---   \u2506 ---      \u2506 ---       \u2502\n\u2502 i64 \u2506 f64      \u2506 datetime[\u03bcs]        \u2506 f64   \u2506 f64      \u2506 f64       \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.10666  \u2506 2025-12-01 00:00:00 \u2506 1.0   \u2506 2.402679 \u2506 42.10666  \u2502\n\u2502 1   \u2506 0.596863 \u2506 2025-12-02 00:00:00 \u2506 2.0   \u2506 2.402679 \u2506 42.596863 \u2502\n\u2502 2   \u2506 0.691304 \u2506 2025-12-03 00:00:00 \u2506 NaN   \u2506 2.402679 \u2506 42.691304 \u2502\n\u2502 3   \u2506 0.906636 \u2506 2025-12-04 00:00:00 \u2506 -42.0 \u2506 2.402679 \u2506 42.906636 \u2502\n\u2502 4   \u2506 0.101216 \u2506 2025-12-05 00:00:00 \u2506 null  \u2506 2.402679 \u2506 42.101216 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23234-group-by","title":"23.2.3.4 \u5206\u7ec4\uff08Group by\uff09","text":"<p>\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 DataFrame \u6765\u6f14\u793a\u5206\u7ec4\u529f\u80fd\u3002\u8fd9\u4e2a\u65b0\u7684 DataFrame \u5305\u542b\u591a\u4e2a\u201c\u7ec4\u201d\uff0c\u6211\u4eec\u5c06\u6309\u8fd9\u4e9b\u7ec4\u8fdb\u884c\u5206\u7ec4\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#dataframe","title":"\u521b\u5efa DataFrame","text":"<pre><code>use polars::prelude::*;\n\n// \u521b\u5efa DataFrame\nlet df2: DataFrame = df!(\"x\" =&gt; 0..8, \"y\"=&gt; &amp;[\"A\", \"A\", \"A\", \"B\", \"B\", \"C\", \"X\", \"X\"]).expect(\"should not fail\");\nprintln!(\"{}\", df2);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (8, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 x   \u2506 y   \u2502\n\u2502 --- \u2506 --- \u2502\n\u2502 i64 \u2506 str \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 A   \u2502\n\u2502 1   \u2506 A   \u2502\n\u2502 2   \u2506 A   \u2502\n\u2502 3   \u2506 B   \u2502\n\u2502 4   \u2506 B   \u2502\n\u2502 5   \u2506 C   \u2502\n\u2502 6   \u2506 X   \u2502\n\u2502 7   \u2506 X   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_3","title":"\u5206\u7ec4\u5e76\u805a\u5408","text":"<pre><code>use polars::prelude::*;\n\n// \u6309\u5217 \"y\" \u8fdb\u884c\u5206\u7ec4\uff0c\u5e76\u805a\u5408\nlet out = df2.clone().lazy().group_by([\"y\"]).agg([len()]).collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (4, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 y   \u2506 len \u2502\n\u2502 --- \u2506 --- \u2502\n\u2502 str \u2506 u32 \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 A   \u2506 3   \u2502\n\u2502 B   \u2506 2   \u2502\n\u2502 C   \u2506 1   \u2502\n\u2502 X   \u2506 2   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <pre><code>use polars::prelude::*;\n\n// \u6309\u5217 \"y\" \u8fdb\u884c\u5206\u7ec4\uff0c\u5e76\u805a\u5408\u591a\u4e2a\u7edf\u8ba1\u91cf\nlet out = df2\n    .clone()\n    .lazy()\n    .group_by([\"y\"])\n    .agg([col(\"*\").count().alias(\"count\"), col(\"*\").sum().alias(\"sum\")])\n    .collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (4, 3)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 y   \u2506 count \u2506 sum \u2502\n\u2502 --- \u2506 ---   \u2506 --- \u2502\n\u2502 str \u2506 u32   \u2506 i64 \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 A   \u2506 3     \u2506 3   \u2502\n\u2502 B   \u2506 2     \u2506 7   \u2502\n\u2502 C   \u2506 1     \u2506 5   \u2502\n\u2502 X   \u2506 2     \u2506 13  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23235","title":"23.2.3.5 \u7ec4\u5408\u64cd\u4f5c","text":"<p>\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u7ec4\u5408\u64cd\u4f5c\u6765\u521b\u5efa\u6240\u9700\u7684 DataFrame\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#cd","title":"\u521b\u5efa\u5e76\u9009\u62e9\u5217\uff08\u6392\u9664c\u3001d\u5217\uff09","text":"<pre><code>use polars::prelude::*;\n\n// \u521b\u5efa\u65b0\u5217\u5e76\u9009\u62e9\nlet out = df\n    .clone()\n    .lazy()\n    .with_columns([(col(\"a\") * col(\"b\")).alias(\"a * b\")])\n    .select([col(\"*\").exclude([\"c\", \"d\"])])\n    .collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5, 3)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 a * b    \u2502\n\u2502 --- \u2506 ---      \u2506 ---      \u2502\n\u2502 i64 \u2506 f64      \u2506 f64      \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.10666  \u2506 0.0      \u2502\n\u2502 1   \u2506 0.596863 \u2506 0.596863 \u2502\n\u2502 2   \u2506 0.691304 \u2506 1.382607 \u2502\n\u2502 3   \u2506 0.906636 \u2506 2.719909 \u2502\n\u2502 4   \u2506 0.101216 \u2506 0.404864 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#d","title":"\u521b\u5efa\u5e76\u9009\u62e9\u5217\uff08\u6392\u9664d\u5217\uff09","text":"<pre><code>use polars::prelude::*;\n\n// \u521b\u5efa\u65b0\u5217\u5e76\u9009\u62e9\nlet out = df\n    .clone()\n    .lazy()\n    .with_columns([(col(\"a\") * col(\"b\")).alias(\"a * b\")])\n    .select([col(\"*\").exclude([\"d\"])])\n    .collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 c                   \u2506 a * b    \u2502\n\u2502 --- \u2506 ---      \u2506 ---                 \u2506 ---      \u2502\n\u2502 i64 \u2506 f64      \u2506 datetime[\u03bcs]        \u2506 f64      \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.10666  \u2506 2025-12-01 00:00:00 \u2506 0.0      \u2502\n\u2502 1   \u2506 0.596863 \u2506 2025-12-02 00:00:00 \u2506 0.596863 \u2502\n\u2502 2   \u2506 0.691304 \u2506 2025-12-03 00:00:00 \u2506 1.382607 \u2502\n\u2502 3   \u2506 0.906636 \u2506 2025-12-04 00:00:00 \u2506 2.719909 \u2502\n\u2502 4   \u2506 0.101216 \u2506 2025-12-05 00:00:00 \u2506 0.404864 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2324-dataframes","title":"23.2.4 \u5408\u5e76 DataFrames","text":"<p>\u6839\u636e\u4f7f\u7528\u60c5\u51b5\uff0cDataFrames \u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u5408\u5e76\uff1a<code>join</code> \u548c <code>concat</code>\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23241-join","title":"23.2.4.1 \u8fde\u63a5\uff08Join\uff09","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_4","title":"\u6570\u636e\u8868\u8fde\u63a5\u7c7b\u578b\u8be6\u89e3","text":"<p>\u5728\u6570\u636e\u5206\u6790\u4e2d\uff0c\u8fde\u63a5\uff08Join\uff09\u64cd\u4f5c\u7528\u4e8e\u5c06\u4e24\u4e2a DataFrames \u5408\u5e76\u3002Polars \u652f\u6301\u591a\u79cd\u8fde\u63a5\u7c7b\u578b\uff0c\u5305\u62ec\u5de6\u8fde\u63a5\uff08Left Join\uff09\u3001\u53f3\u8fde\u63a5\uff08Right Join\uff09\u3001\u5185\u8fde\u63a5\uff08Inner Join\uff09\u548c\u5916\u8fde\u63a5\uff08Outer Join\uff09\u3002\u4ee5\u4e0b\u662f\u6bcf\u79cd\u8fde\u63a5\u7c7b\u578b\u7684\u8be6\u7ec6\u4ecb\u7ecd\u548c\u793a\u4f8b\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#left-join","title":"\u5de6\u8fde\u63a5\uff08Left Join\uff09","text":"<p>\u5de6\u8fde\u63a5\u8fd4\u56de\u5de6\u8868\u4e2d\u7684\u6240\u6709\u884c\u4ee5\u53ca\u4e0e\u53f3\u8868\u4e2d\u5339\u914d\u7684\u884c\u3002\u5982\u679c\u53f3\u8868\u4e2d\u6ca1\u6709\u5339\u914d\u7684\u884c\uff0c\u5219\u7ed3\u679c\u4e2d\u7684\u76f8\u5e94\u5217\u4e3a NULL\u3002</p> <pre><code>use polars::prelude::*;\nuse rand::Rng;\n\nlet mut rng = rand::thread_rng();\n\nlet df1: DataFrame = df!(\n    \"a\" =&gt; 0..8,\n    \"b\" =&gt; (0..8).map(|_| rng.gen::&lt;f64&gt;()).collect::&lt;Vec&lt;f64&gt;&gt;()\n).unwrap();\n\nlet df2: DataFrame = df!(\n    \"x\" =&gt; 0..8,\n    \"y\" =&gt; &amp;[\"A\", \"A\", \"A\", \"B\", \"B\", \"C\", \"X\", \"X\"]\n).unwrap();\n\nlet joined = df1.join(&amp;df2, [\"a\"], [\"x\"], JoinType::Left.into())?;\nprintln!(\"{}\", joined);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (8, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 x     \u2506 y   \u2502\n\u2502 --- \u2506 ---      \u2506 ---   \u2506 --- \u2502\n\u2502 i64 \u2506 f64      \u2506 i64   \u2506 str \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.495791 \u2506 0     \u2506 A   \u2502\n\u2502 1   \u2506 0.786293 \u2506 1     \u2506 A   \u2502\n\u2502 2   \u2506 0.847485 \u2506 2     \u2506 A   \u2502\n\u2502 3   \u2506 0.839398 \u2506 3     \u2506 B   \u2502\n\u2502 4   \u2506 0.060646 \u2506 4     \u2506 B   \u2502\n\u2502 5   \u2506 0.251472 \u2506 5     \u2506 C   \u2502\n\u2502 6   \u2506 0.13899  \u2506 6     \u2506 X   \u2502\n\u2502 7   \u2506 0.676241 \u2506 7     \u2506 X   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#right-join","title":"\u53f3\u8fde\u63a5\uff08Right Join\uff09","text":"<p>\u53f3\u8fde\u63a5\u8fd4\u56de\u53f3\u8868\u4e2d\u7684\u6240\u6709\u884c\u4ee5\u53ca\u4e0e\u5de6\u8868\u4e2d\u5339\u914d\u7684\u884c\u3002\u5982\u679c\u5de6\u8868\u4e2d\u6ca1\u6709\u5339\u914d\u7684\u884c\uff0c\u5219\u7ed3\u679c\u4e2d\u7684\u76f8\u5e94\u5217\u4e3a NULL\u3002</p> <pre><code>let joined = df1.join(&amp;df2, [\"a\"], [\"x\"], JoinType::Right.into())?;\nprintln!(\"{}\", joined);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#inner-join","title":"\u5185\u8fde\u63a5\uff08Inner Join\uff09","text":"<p>\u5185\u8fde\u63a5\u4ec5\u8fd4\u56de\u4e24\u4e2a\u8868\u4e2d\u5339\u914d\u7684\u884c\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\u7684\u884c\uff0c\u5219\u8be5\u884c\u4e0d\u51fa\u73b0\u5728\u7ed3\u679c\u4e2d\u3002</p> <pre><code>let joined = df1.join(&amp;df2, [\"a\"], [\"x\"], JoinType::Inner.into())?;\nprintln!(\"{}\", joined);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#outer-join","title":"\u5916\u8fde\u63a5\uff08Outer Join\uff09","text":"<p>\u5916\u8fde\u63a5\u8fd4\u56de\u4e24\u4e2a\u8868\u4e2d\u7684\u6240\u6709\u884c\u3002\u5982\u679c\u4e00\u5f20\u8868\u4e2d\u6ca1\u6709\u5339\u914d\u7684\u884c\uff0c\u5219\u7ed3\u679c\u4e2d\u7684\u76f8\u5e94\u5217\u4e3a NULL\u3002</p> <pre><code>let joined = df1.join(&amp;df2, [\"a\"], [\"x\"], JoinType::Outer.into())?;\nprintln!(\"{}\", joined);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_5","title":"\u793a\u4f8b\u4ee3\u7801\u89e3\u91ca","text":"<ol> <li>\u6570\u636e\u751f\u6210\uff1a</li> </ol> <pre><code>let df1: DataFrame = df!(\n    \"a\" =&gt; 0..8,\n    \"b\" =&gt; (0..8).map(|_| rng.gen::&lt;f64&gt;()).collect::&lt;Vec&lt;f64&gt;&gt;()\n).unwrap();\n\nlet df2: DataFrame = df!(\n    \"x\" =&gt; 0..8,\n    \"y\" =&gt; &amp;[\"A\", \"A\", \"A\", \"B\", \"B\", \"C\", \"X\", \"X\"]\n).unwrap();\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u521b\u5efa\u4e86\u4e24\u4e2a DataFrames\uff0c<code>df1</code> \u5305\u542b\u5217 <code>a</code> \u548c <code>b</code>\uff0c<code>df2</code> \u5305\u542b\u5217 <code>x</code> \u548c <code>y</code>\u3002</p> <ol> <li>\u8fde\u63a5\u64cd\u4f5c\uff1a</li> </ol> <pre><code>let joined = df1.join(&amp;df2, [\"a\"], [\"x\"], JoinType::Left.into())?;\nprintln!(\"{}\", joined);\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u6267\u884c\u4e86\u5de6\u8fde\u63a5\uff0c\u7ed3\u679c\u5305\u542b <code>df1</code> \u4e2d\u7684\u6240\u6709\u884c\u4ee5\u53ca <code>df2</code> \u4e2d\u5339\u914d\u7684\u884c\u3002</p> <p>\u901a\u8fc7\u8fd9\u4e9b\u793a\u4f8b\uff0c\u4f60\u53ef\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528 Polars \u8fdb\u884c\u4e0d\u540c\u7c7b\u578b\u7684\u8fde\u63a5\u64cd\u4f5c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#23242-concat","title":"23.2.4.2 \u7c98\u8fde\uff08Concat\uff09","text":"<p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u7c98\u8fde\u4e24\u4e2a DataFrames\u3002\u5782\u76f4\u7c98\u8fde\u4f1a\u4f7f DataFrame \u53d8\u957f\uff0c\u6c34\u5e73\u7c98\u8fde\u4f1a\u4f7f DataFrame \u53d8\u5bbd\u3002\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u6c34\u5e73\u7c98\u8fde\u4e24\u4e2a DataFrames \u7684\u7ed3\u679c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#rust_6","title":"Rust \u793a\u4f8b\u4ee3\u7801","text":"<pre><code>use polars::prelude::*;\n\n// \u6c34\u5e73\u8fde\u63a5\u4e24\u4e2a DataFrames\nlet stacked = df.hstack(df2.get_columns())?;\nprintln!(\"{}\", stacked); // \u6253\u5370\u8fde\u63a5\u540e\u7684 DataFrame\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (8, 5)\n\u250c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 a   \u2506 b        \u2506 d     \u2506 x   \u2506 y   \u2502\n\u2502 --- \u2506 ---      \u2506 ---   \u2506 --- \u2506 --- \u2502\n\u2502 i64 \u2506 f64      \u2506 f64   \u2506 i64 \u2506 str \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 0   \u2506 0.495791 \u2506 1.0   \u2506 0   \u2506 A   \u2502\n\u2502 1   \u2506 0.786293 \u2506 2.0   \u2506 1   \u2506 A   \u2502\n\u2502 2   \u2506 0.847485 \u2506 NaN   \u2506 2   \u2506 A   \u2502\n\u2502 3   \u2506 0.839398 \u2506 NaN   \u2506 3   \u2506 B   \u2502\n\u2502 4   \u2506 0.060646 \u2506 0.0   \u2506 4   \u2506 B   \u2502\n\u2502 5   \u2506 0.251472 \u2506 -5.0  \u2506 5   \u2506 C   \u2502\n\u2502 6   \u2506 0.13899  \u2506 -42.0 \u2506 6   \u2506 X   \u2502\n\u2502 7   \u2506 0.676241 \u2506 null  \u2506 7   \u2506 X   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u901a\u8fc7\u4e0a\u8ff0\u5b66\u4e60\uff0c\u4f60\u53ef\u4ee5\u5728 Rust \u4e2d\u4f7f\u7528 Polars \u65b9\u4fbf\u5730\u8fdb\u884c DataFrame \u7684\u8fde\u63a5\u548c\u7c98\u8fde\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2325","title":"23.2.5 \u57fa\u672c\u6570\u636e\u7c7b\u578b","text":"<p>Polars \u5b8c\u5168\u57fa\u4e8e Arrow \u6570\u636e\u7c7b\u578b\uff0c\u5e76\u7531 Arrow \u5185\u5b58\u6570\u7ec4\u652f\u6301\u3002\u8fd9\u4f7f\u5f97\u6570\u636e\u5904\u7406\u7f13\u5b58\u6548\u7387\u9ad8\uff0c\u5e76\u4e14\u652f\u6301\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002\u5927\u591a\u6570\u6570\u636e\u7c7b\u578b\u5b8c\u5168\u9075\u5faa Arrow \u7684\u5b9e\u73b0\uff0c\u9664\u4e86 String\uff08\u5b9e\u9645\u4e0a\u662f LargeUtf8\uff09\u3001Categorical \u548c Object\uff08\u652f\u6301\u6709\u9650\uff09\u3002\u6570\u636e\u7c7b\u578b\u5982\u4e0b\uff1a</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_6","title":"\u6570\u503c\u7c7b\u578b","text":"<ul> <li>Int8\uff1a8 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u3002</li> <li>Int16\uff1a16 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u3002</li> <li>Int32\uff1a32 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u3002</li> <li>Int64\uff1a64 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u3002</li> <li>UInt8\uff1a8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li>UInt16\uff1a16 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li>UInt32\uff1a32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li>UInt64\uff1a64 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li>Float32\uff1a32 \u4f4d\u6d6e\u70b9\u6570\u3002</li> <li>Float64\uff1a64 \u4f4d\u6d6e\u70b9\u6570\u3002</li> </ul>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_7","title":"\u5d4c\u5957\u7c7b\u578b","text":"<ul> <li>Struct\uff1a\u7ed3\u6784\u4f53\u6570\u7ec4\uff0c\u8868\u793a\u4e3a <code>Vec&lt;Series&gt;</code>\uff0c\u7528\u4e8e\u5728\u5355\u5217\u4e2d\u6253\u5305\u591a\u4e2a/\u5f02\u8d28\u503c\u3002</li> <li>List\uff1a\u5217\u8868\u6570\u7ec4\uff0c\u5305\u542b\u4e00\u4e2a\u5b50\u6570\u7ec4\u548c\u4e00\u4e2a\u504f\u79fb\u6570\u7ec4\uff08\u5b9e\u9645\u4e0a\u662f Arrow LargeList\uff09\u3002</li> </ul>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_8","title":"\u65f6\u95f4\u7c7b\u578b","text":"<ul> <li>Date\uff1a\u65e5\u671f\u8868\u793a\uff0c\u5185\u90e8\u8868\u793a\u4e3a\u81ea UNIX \u7eaa\u5143\u4ee5\u6765\u7684\u5929\u6570\uff0c\u7f16\u7801\u4e3a 32 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u3002</li> <li>Datetime\uff1a\u65e5\u671f\u65f6\u95f4\u8868\u793a\uff0c\u5185\u90e8\u8868\u793a\u4e3a\u81ea UNIX \u7eaa\u5143\u4ee5\u6765\u7684\u5fae\u79d2\u6570\uff0c\u7f16\u7801\u4e3a 64 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\u3002</li> <li>Duration\uff1a\u65f6\u95f4\u95f4\u9694\u7c7b\u578b\uff0c\u5185\u90e8\u8868\u793a\u4e3a\u5fae\u79d2\u3002\u7531 Date/Datetime \u76f8\u51cf\u751f\u6210\u3002</li> <li>Time\uff1a\u65f6\u95f4\u8868\u793a\uff0c\u5185\u90e8\u8868\u793a\u4e3a\u81ea\u5348\u591c\u4ee5\u6765\u7684\u7eb3\u79d2\u6570\u3002</li> </ul>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_9","title":"\u5176\u4ed6\u7c7b\u578b","text":"<ul> <li>Boolean\uff1a\u5e03\u5c14\u7c7b\u578b\uff0c\u6709\u6548\u4f4d\u6253\u5305\u3002</li> <li>String\uff1a\u5b57\u7b26\u4e32\u6570\u636e\uff08\u5b9e\u9645\u4e0a\u662f Arrow LargeUtf8\uff09\u3002</li> <li>Binary\uff1a\u5b58\u50a8\u4e3a\u5b57\u8282\u7684\u6570\u636e\u3002</li> <li>Object\uff1a\u6709\u9650\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55\u503c\u3002</li> <li>Categorical\uff1a\u5b57\u7b26\u4e32\u96c6\u5408\u7684\u5206\u7c7b\u7f16\u7801\u3002</li> <li>Enum\uff1a\u5b57\u7b26\u4e32\u96c6\u5408\u7684\u56fa\u5b9a\u5206\u7c7b\u7f16\u7801\u3002</li> </ul>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_10","title":"\u6d6e\u70b9\u6570","text":"<p>Polars \u901a\u5e38\u9075\u5faa IEEE 754 \u6d6e\u70b9\u6807\u51c6\u7528\u4e8e Float32 \u548c Float64\uff0c\u4f46\u6709\u4e00\u4e9b\u4f8b\u5916\uff1a</p> <ul> <li>\u4efb\u4f55 NaN \u4e0e\u4efb\u4f55\u5176\u4ed6 NaN \u6bd4\u8f83\u65f6\u76f8\u7b49\uff0c\u5e76\u4e14\u5927\u4e8e\u4efb\u4f55\u975e NaN \u503c\u3002</li> <li>\u64cd\u4f5c\u4e0d\u4fdd\u8bc1\u96f6\u6216 NaN \u7684\u7b26\u53f7\uff0c\u4e5f\u4e0d\u4fdd\u8bc1 NaN \u503c\u7684\u6709\u6548\u8d1f\u8f7d\u3002\u8fd9\u4e0d\u4ec5\u9650\u4e8e\u7b97\u672f\u8fd0\u7b97\uff0c\u4f8b\u5982\u6392\u5e8f\u6216\u5206\u7ec4\u64cd\u4f5c\u53ef\u80fd\u5c06\u6240\u6709\u96f6\u89c4\u8303\u5316\u4e3a +0\uff0c\u5c06\u6240\u6709 NaNs \u89c4\u8303\u5316\u4e3a\u6ca1\u6709\u8d1f\u8f7d\u7684\u6b63 NaN\uff0c\u4ee5\u4fbf\u9ad8\u6548\u7684\u76f8\u7b49\u6027\u68c0\u67e5\u3002</li> </ul> <p>Polars \u59cb\u7ec8\u5c1d\u8bd5\u63d0\u4f9b\u5408\u7406\u51c6\u786e\u7684\u6d6e\u70b9\u8ba1\u7b97\u7ed3\u679c\uff0c\u4f46\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u4e0d\u4fdd\u8bc1\u8bef\u5dee\u3002\u901a\u5e38 100% \u51c6\u786e\u7684\u7ed3\u679c\u83b7\u53d6\u4ee3\u4ef7\u9ad8\u6602\uff08\u9700\u8981\u6bd4 64 \u4f4d\u6d6e\u70b9\u6570\u66f4\u5927\u7684\u5185\u90e8\u8868\u793a\uff09\uff0c\u56e0\u6b64\u603b\u4f1a\u5b58\u5728\u4e00\u4e9b\u8bef\u5dee\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_11","title":"\u793a\u4f8b","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_12","title":"\u6570\u503c\u7c7b\u578b\u793a\u4f8b","text":"<pre><code>use polars::prelude::*;\n\nlet df = df! {\n    \"int8_col\" =&gt; &amp;[1i8, 2, 3],\n    \"int16_col\" =&gt; &amp;[100i16, 200, 300],\n    \"int32_col\" =&gt; &amp;[1000i32, 2000, 3000],\n    \"float64_col\" =&gt; &amp;[1.1f64, 2.2, 3.3],\n}.unwrap();\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_13","title":"\u5d4c\u5957\u7c7b\u578b\u793a\u4f8b","text":"<pre><code>use polars::prelude::*;\n\nlet df = df! {\n    \"list_col\" =&gt; &amp;[vec![1, 2, 3], vec![4, 5, 6]],\n}.unwrap();\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_14","title":"\u65f6\u95f4\u7c7b\u578b\u793a\u4f8b","text":"<pre><code>use polars::prelude::*;\nuse chrono::NaiveDate;\n\nlet df = df! {\n    \"date_col\" =&gt; &amp;[NaiveDate::from_ymd(2021, 1, 1), NaiveDate::from_ymd(2021, 1, 2)],\n}.unwrap();\n\nprintln!(\"{}\", df);\n</code></pre> <p>\u901a\u8fc7\u8fd9\u4e9b\u793a\u4f8b\uff0c\u4f60\u53ef\u4ee5\u4e86\u89e3\u5982\u4f55\u5728 Rust \u4e2d\u4f7f\u7528 Polars \u5904\u7406\u5404\u79cd\u6570\u636e\u7c7b\u578b\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2326","title":"23.2.6 \u6570\u636e\u7ed3\u6784","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_15","title":"\u6570\u636e\u7ed3\u6784","text":"<p>Polars \u63d0\u4f9b\u7684\u6838\u5fc3\u6570\u636e\u7ed3\u6784\u662f Series \u548c DataFrame\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#series","title":"Series","text":"<p>Series \u662f\u4e00\u7ef4\u6570\u636e\u7ed3\u6784\uff0c\u5176\u4e2d\u6240\u6709\u5143\u7d20\u5177\u6709\u76f8\u540c\u7684\u6570\u636e\u7c7b\u578b\u3002\u4ee5\u4e0b\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 Series \u5bf9\u8c61\uff1a</p> <pre><code>use polars::prelude::*;\n\n// \u521b\u5efa\u540d\u4e3a \"a\" \u7684 Series \u5bf9\u8c61\nlet s = Series::new(\"a\", &amp;[1, 2, 3, 4, 5]);\n\n// \u6253\u5370 Series \u5bf9\u8c61\nprintln!(\"{}\", s);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5,)\nSeries: 'a' [i64]\n[\n    1\n    2\n    3\n    4\n    5\n]\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#dataframe_1","title":"DataFrame","text":"<p>DataFrame \u662f\u7531 Series \u652f\u6301\u7684\u4e8c\u7ef4\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u7cfb\u5217 Series \u7684\u62bd\u8c61\u96c6\u5408\u3002\u53ef\u4ee5\u5bf9 DataFrame \u6267\u884c\u7c7b\u4f3c SQL \u67e5\u8be2\u7684\u64cd\u4f5c\uff0c\u5982 GROUP BY\u3001JOIN\u3001PIVOT \u7b49\uff0c\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49\u51fd\u6570\u3002</p> <pre><code>use chrono::NaiveDate;\nuse polars::prelude::*;\n\n// \u521b\u5efa\u4e00\u4e2a DataFrame \u5bf9\u8c61\nlet df: DataFrame = df!(\n    \"integer\" =&gt; &amp;[1, 2, 3, 4, 5],\n    \"date\" =&gt; &amp;[\n        NaiveDate::from_ymd_opt(2025, 1, 1).unwrap().and_hms_opt(0, 0, 0).unwrap(),\n        NaiveDate::from_ymd_opt(2025, 1, 2).unwrap().and_hms_opt(0, 0, 0).unwrap(),\n        NaiveDate::from_ymd_opt(2025, 1, 3).unwrap().and_hms_opt(0, 0, 0).unwrap(),\n        NaiveDate::from_ymd_opt(2025, 1, 4).unwrap().and_hms_opt(0, 0, 0).unwrap(),\n        NaiveDate::from_ymd_opt(2025, 1, 5).unwrap().and_hms_opt(0, 0, 0).unwrap(),\n    ],\n    \"float\" =&gt; &amp;[4.0, 5.0, 6.0, 7.0, 8.0]\n)\n.unwrap();\n\n// \u6253\u5370 DataFrame \u5bf9\u8c61\nprintln!(\"{}\", df);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (5, 3)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 integer \u2506 date                \u2506 float \u2502\n\u2502 ---     \u2506 ---                 \u2506 ---   \u2502\n\u2502 i64     \u2506 datetime[\u03bcs]        \u2506 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1       \u2506 2022-01-01 00:00:00 \u2506 4.0   \u2502\n\u2502 2       \u2506 2022-01-02 00:00:00 \u2506 5.0   \u2502\n\u2502 3       \u2506 2022-01-03 00:00:00 \u2506 6.0   \u2502\n\u2502 4       \u2506 2022-01-04 00:00:00 \u2506 7.0   \u2502\n\u2502 5       \u2506 2022-01-05 00:00:00 \u2506 8.0   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_16","title":"\u67e5\u770b\u6570\u636e","text":"<p>\u4ee5\u4e0b\u90e8\u5206\u5c06\u4ecb\u7ecd\u5982\u4f55\u67e5\u770b DataFrame \u4e2d\u7684\u6570\u636e\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u524d\u9762\u7684 DataFrame \u4f5c\u4e3a\u793a\u4f8b\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#head","title":"Head","text":"<p><code>head</code> \u51fd\u6570\u9ed8\u8ba4\u663e\u793a DataFrame \u7684\u524d 5 \u884c\u3002\u4f60\u53ef\u4ee5\u6307\u5b9a\u8981\u67e5\u770b\u7684\u884c\u6570\uff08\u4f8b\u5982 <code>df.head(10)</code>\uff09\u3002</p> <pre><code>let df_head = df.head(Some(3));\n\n// \u6253\u5370\u524d 3 \u884c\u6570\u636e\nprintln!(\"{}\", df_head);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (3, 3)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 integer \u2506 date                \u2506 float \u2502\n\u2502 ---     \u2506 ---                 \u2506 ---   \u2502\n\u2502 i64     \u2506 datetime[\u03bcs]        \u2506 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1       \u2506 2022-01-01 00:00:00 \u2506 4.0   \u2502\n\u2502 2       \u2506 2022-01-02 00:00:00 \u2506 5.0   \u2502\n\u2502 3       \u2506 2022-01-03 00:00:00 \u2506 6.0   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#tail","title":"Tail","text":"<p><code>tail</code> \u51fd\u6570\u663e\u793a DataFrame \u7684\u6700\u540e 5 \u884c\u3002\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8981\u67e5\u770b\u7684\u884c\u6570\uff0c\u7c7b\u4f3c\u4e8e <code>head</code>\u3002</p> <pre><code>let df_tail = df.tail(Some(3));\n\n// \u6253\u5370\u540e 3 \u884c\u6570\u636e\nprintln!(\"{}\", df_tail);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (3, 3)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 integer \u2506 date                \u2506 float \u2502\n\u2502 ---     \u2506 ---                 \u2506 ---   \u2502\n\u2502 i64     \u2506 datetime[\u03bcs]        \u2506 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 3       \u2506 2022-01-03 00:00:00 \u2506 6.0   \u2502\n\u2502 4       \u2506 2022-01-04 00:00:00 \u2506 7.0   \u2502\n\u2502 5       \u2506 2022-01-05 00:00:00 \u2506 8.0   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#sample","title":"Sample","text":"<p>\u5982\u679c\u4f60\u60f3\u968f\u673a\u67e5\u770b DataFrame \u4e2d\u7684\u4e00\u4e9b\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>sample</code>\u3002<code>sample</code> \u53ef\u4ee5\u4ece DataFrame \u4e2d\u83b7\u53d6 n \u884c\u968f\u673a\u884c\u3002</p> <pre><code>use polars::prelude::*;\n\nlet n = Series::new(\"\", &amp;[2]);\nlet sampled_df = df.sample_n(&amp;n, false, false, None).unwrap();\n\n// \u6253\u5370\u968f\u673a\u62bd\u6837\u7684\u6570\u636e\nprintln!(\"{}\", sampled_df);\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>shape: (2, 3)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 integer \u2506 date                \u2506 float \u2502\n\u2502 ---     \u2506 ---                 \u2506 ---   \u2502\n\u2502 i64     \u2506 datetime[\u03bcs]        \u2506 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 3       \u2506 2022-01-03 00:00:00 \u2506 6.0   \u2502\n\u2502 2       \u2506 2022-01-02 00:00:00 \u2506 5.0   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#describe","title":"\u63cf\u8ff0\uff08Describe\uff09","text":"<p><code>describe</code> \u8fd4\u56de DataFrame \u7684\u6458\u8981\u7edf\u8ba1\u4fe1\u606f\u3002\u5982\u679c\u53ef\u80fd\uff0c\u5b83\u5c06\u63d0\u4f9b\u4e00\u4e9b\u5feb\u901f\u7edf\u8ba1\u4fe1\u606f\u3002</p> <p>\u6ce8\u610f\uff0c\u5f88\u9057\u61be\uff0c\u5728 Rust \u4e2d\uff0c\u8fd9\u4e2a\u529f\u80fd\u76ee\u524d\u4e0d\u53ef\u7528\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#233-polars","title":"23.3 Polars\u8fdb\u9636\u5b66\u4e60","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2331-aggregation","title":"23.3.1 \u805a\u5408\u64cd\u4f5c Aggregation","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_17","title":"\u805a\u5408\u64cd\u4f5c\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u5e94\u7528","text":"<p>Polars \u5b9e\u73b0\u4e86\u5f3a\u5927\u7684\u8bed\u6cd5\uff0c\u65e2\u53ef\u4ee5\u5728\u60f0\u6027 API \u4e2d\u5b9a\u4e49\uff0c\u4e5f\u53ef\u4ee5\u5728\u6025\u6027 API \u4e2d\u5b9a\u4e49\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u8fd9\u610f\u5473\u7740\u4ec0\u4e48\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u4ece\u4e00\u4e2a\u7b80\u5355\u7684\u671f\u8d27\u548c\u671f\u6743\u4ea4\u6613\u6570\u636e\u96c6\u5f00\u59cb\u3002</p> <pre><code>use std::io::Cursor;\nuse reqwest::blocking::Client;\nuse polars::prelude::*;\n\nlet url = \"https://example.com/financial-data.csv\";\n\nlet mut schema = Schema::new();\nschema.with_column(\n    \"symbol\".into(),\n    DataType::Categorical(None, Default::default()),\n);\nschema.with_column(\n    \"type\".into(),\n    DataType::Categorical(None, Default::default()),\n);\nschema.with_column(\n    \"trade_date\".into(),\n    DataType::Date,\n);\nschema.with_column(\n    \"open\".into(),\n    DataType::Float64,\n);\nschema.with_column(\n    \"close\".into(),\n    DataType::Float64,\n);\nschema.with_column(\n    \"volume\".into(),\n    DataType::Float64,\n);\n\nlet data: Vec&lt;u8&gt; = Client::new().get(url).send()?.text()?.bytes().collect();\n\nlet dataset = CsvReadOptions::default()\n    .with_has_header(true)\n    .with_schema(Some(Arc::new(schema)))\n    .map_parse_options(|parse_options| parse_options.with_try_parse_dates(true))\n    .into_reader_with_file_handle(Cursor::new(data))\n    .finish()?;\n\nprintln!(\"{}\", &amp;dataset);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_18","title":"\u57fa\u672c\u805a\u5408","text":"<p>\u6211\u4eec\u53ef\u4ee5\u6309 <code>symbol</code> \u548c <code>type</code> \u5206\u7ec4\uff0c\u5e76\u8ba1\u7b97\u6bcf\u7ec4\u7684\u6210\u4ea4\u91cf\u603b\u548c\u3001\u5f00\u76d8\u4ef7\u548c\u6536\u76d8\u4ef7\u7684\u5e73\u5747\u503c\u3002</p> <pre><code>let df = dataset\n    .clone()\n    .lazy()\n    .group_by([\"symbol\", \"type\"])\n    .agg([\n        sum(\"volume\").alias(\"total_volume\"),\n        mean(\"open\").alias(\"avg_open\"),\n        mean(\"close\").alias(\"avg_close\"),\n    ])\n    .sort(\n        [\"total_volume\"],\n        SortMultipleOptions::default()\n            .with_order_descending(true)\n            .with_nulls_last(true),\n    )\n    .limit(5)\n    .collect()?;\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_19","title":"\u6761\u4ef6\u805a\u5408","text":"<p>\u6211\u4eec\u60f3\u77e5\u9053\u6bcf\u4e2a\u4ea4\u6613\u65e5\u4e2d\u6da8\u5e45\u8d85\u8fc75%\u7684\u4ea4\u6613\u8bb0\u5f55\u6570\u3002\u53ef\u4ee5\u76f4\u63a5\u5728\u805a\u5408\u4e2d\u67e5\u8be2\uff1a</p> <pre><code>let df = dataset\n    .clone()\n    .lazy()\n    .group_by([\"trade_date\"])\n    .agg([\n        (col(\"close\") - col(\"open\")).gt(lit(0.05)).sum().alias(\"gains_over_5pct\"),\n    ])\n    .sort(\n        [\"gains_over_5pct\"],\n        SortMultipleOptions::default().with_order_descending(true),\n    )\n    .limit(5)\n    .collect()?;\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_20","title":"\u5d4c\u5957\u5206\u7ec4","text":"<p>\u5728\u5d4c\u5957\u5206\u7ec4\u4e2d\uff0c\u8868\u8fbe\u5f0f\u5728\u7ec4\u5185\u5de5\u4f5c\uff0c\u56e0\u6b64\u53ef\u4ee5\u751f\u6210\u4efb\u610f\u957f\u5ea6\u7684\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u60f3\u6309 <code>symbol</code> \u548c <code>type</code> \u5206\u7ec4\uff0c\u5e76\u8ba1\u7b97\u6bcf\u7ec4\u7684\u4ea4\u6613\u91cf\u603b\u548c\u548c\u8bb0\u5f55\u6570\uff1a</p> <pre><code>let df = dataset\n    .clone()\n    .lazy()\n    .group_by([\"symbol\", \"type\"])\n    .agg([\n        col(\"volume\").sum().alias(\"total_volume\"),\n        col(\"symbol\").count().alias(\"record_count\"),\n    ])\n    .sort(\n        [\"total_volume\"],\n        SortMultipleOptions::default()\n            .with_order_descending(true)\n            .with_nulls_last(true),\n    )\n    .limit(5)\n    .collect()?;\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_21","title":"\u8fc7\u6ee4\u7ec4\u5185\u6570\u636e","text":"<p>\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u6bcf\u4e2a\u4ea4\u6613\u65e5\u7684\u5e73\u5747\u6da8\u5e45\uff0c\u4f46\u4e0d\u5305\u542b\u6210\u4ea4\u91cf\u4f4e\u4e8e 1000 \u7684\u4ea4\u6613\u8bb0\u5f55\uff1a</p> <pre><code>fn compute_change() -&gt; Expr {\n    (col(\"close\") - col(\"open\")) / col(\"open\") * lit(100)\n}\n\nfn avg_change_with_volume_filter() -&gt; Expr {\n    compute_change()\n        .filter(col(\"volume\").gt(lit(1000)))\n        .mean()\n        .alias(\"avg_change_filtered\")\n}\n\nlet df = dataset\n    .clone()\n    .lazy()\n    .group_by([\"trade_date\"])\n    .agg([\n        avg_change_with_volume_filter(),\n        col(\"volume\").sum().alias(\"total_volume\"),\n    ])\n    .limit(5)\n    .collect()?;\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_22","title":"\u6392\u5e8f","text":"<p>\u6211\u4eec\u53ef\u4ee5\u6309\u4ea4\u6613\u65e5\u671f\u6392\u5e8f\uff0c\u5e76\u6309 <code>symbol</code> \u5206\u7ec4\u4ee5\u83b7\u5f97\u6bcf\u4e2a <code>symbol</code> \u7684\u6700\u9ad8\u548c\u6700\u4f4e\u6536\u76d8\u4ef7\uff1a</p> <pre><code>fn get_price_range() -&gt; Expr {\n    col(\"close\")\n}\n\nlet df = dataset\n    .clone()\n    .lazy()\n    .sort(\n        [\"trade_date\"],\n        SortMultipleOptions::default()\n            .with_order_descending(true)\n            .with_nulls_last(true),\n    )\n    .group_by([\"symbol\"])\n    .agg([\n        get_price_range().max().alias(\"max_close\"),\n        get_price_range().min().alias(\"min_close\"),\n    ])\n    .limit(5)\n    .collect()?;\n\nprintln!(\"{}\", df);\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728 <code>group_by</code> \u4e0a\u4e0b\u6587\u4e2d\u6309\u53e6\u4e00\u5217\u6392\u5e8f\uff1a</p> <pre><code>let df = dataset\n    .clone()\n    .lazy()\n    .sort(\n        [\"trade_date\"],\n        SortMultipleOptions::default()\n            .with_order_descending(true)\n            .with_nulls_last(true),\n    )\n    .group_by([\"symbol\"])\n    .agg([\n        get_price_range().max().alias(\"max_close\"),\n        get_price_range().min().alias(\"min_close\"),\n        col(\"type\")\n            .sort_by([\"symbol\"], SortMultipleOptions::default())\n            .first()\n            .alias(\"first_type\"),\n    ])\n    .sort([\"symbol\"], SortMultipleOptions::default())\n    .limit(5)\n    .collect()?;\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2332-folds","title":"23.3.2 Folds","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#folds","title":"Folds","text":"<p>Polars \u63d0\u4f9b\u4e86\u4e00\u4e9b\u7528\u4e8e\u6a2a\u5411\u805a\u5408\u7684\u8868\u8fbe\u5f0f\u548c\u65b9\u6cd5\uff0c\u5982 sum\u3001min\u3001mean \u7b49\u3002\u7136\u800c\uff0c\u5f53\u4f60\u9700\u8981\u66f4\u590d\u6742\u7684\u805a\u5408\u65f6\uff0cPolars \u9ed8\u8ba4\u7684\u65b9\u6cd5\u53ef\u80fd\u4e0d\u591f\u7528\u3002\u8fd9\u65f6\uff0c\u6298\u53e0\uff08fold\uff09\u64cd\u4f5c\u5c31\u6d3e\u4e0a\u7528\u573a\u4e86\u3002</p> <p>\u6298\u53e0\u8868\u8fbe\u5f0f\u5728\u5217\u4e0a\u64cd\u4f5c\uff0c\u6700\u5927\u9650\u5ea6\u5730\u63d0\u9ad8\u4e86\u901f\u5ea6\u3002\u5b83\u975e\u5e38\u9ad8\u6548\u5730\u5229\u7528\u6570\u636e\u5e03\u5c40\uff0c\u5e76\u4e14\u901a\u5e38\u5177\u6709\u5411\u91cf\u5316\u6267\u884c\u7684\u7279\u70b9\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_23","title":"\u624b\u52a8\u6c42\u548c","text":"<p>\u6211\u4eec\u4ece\u4e00\u4e2a\u793a\u4f8b\u5f00\u59cb\uff0c\u901a\u8fc7\u6298\u53e0\u5b9e\u73b0\u6c42\u548c\u64cd\u4f5c\u3002</p> <pre><code>use polars::prelude::*;\n\nlet df = df!(\n    \"price\" =&gt; &amp;[100, 200, 300],\n    \"quantity\" =&gt; &amp;[2, 3, 4],\n)?;\n\nlet out = df\n    .lazy()\n    .select([fold_exprs(lit(0), |acc, x| (acc + x).map(Some), [col(\"*\")]).alias(\"sum\")])\n    .collect()?;\nprintln!(\"{}\", out);\n\nshape: (3, 1)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 sum \u2502\n\u2502 --- \u2502\n\u2502 i64 \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 102 \u2502\n\u2502 203 \u2502\n\u2502 304 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u9012\u5f52\u5730\u5c06\u51fd\u6570 <code>f(acc, x) -&gt; acc</code> \u5e94\u7528\u5230\u7d2f\u52a0\u5668 <code>acc</code> \u548c\u65b0\u5217 <code>x</code> \u4e0a\u3002\u8fd9\u4e2a\u51fd\u6570\u5355\u72ec\u5728\u5217\u4e0a\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5229\u7528\u7f13\u5b58\u6548\u7387\u548c\u5411\u91cf\u5316\u6267\u884c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_24","title":"\u6761\u4ef6\u805a\u5408","text":"<p>\u5982\u679c\u4f60\u60f3\u5bf9 DataFrame \u4e2d\u7684\u6240\u6709\u5217\u5e94\u7528\u6761\u4ef6\u6216\u8c13\u8bcd\uff0c\u6298\u53e0\u64cd\u4f5c\u53ef\u4ee5\u975e\u5e38\u7b80\u6d01\u5730\u8868\u8fbe\u8fd9\u79cd\u9700\u6c42\u3002</p> <pre><code>let df = df!(\n    \"price\" =&gt; &amp;[100, 200, 300],\n    \"quantity\" =&gt; &amp;[2, 3, 4],\n)?;\n\nlet out = df\n    .lazy()\n    .filter(fold_exprs(\n        lit(true),\n        |acc, x| acc.bitand(&amp;x).map(Some),\n        [col(\"*\").gt(150)],\n    ))\n    .collect()?;\nprintln!(\"{}\", out);\n\nshape: (1, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 price \u2506 quantity\u2502\n\u2502 ----- \u2506 ------- \u2502\n\u2502 i64   \u2506 i64     \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 300   \u2506 4       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u5728\u4e0a\u8ff0\u4ee3\u7801\u7247\u6bb5\u4e2d\uff0c\u6211\u4eec\u8fc7\u6ee4\u51fa\u6240\u6709\u5217\u503c\u5927\u4e8e 150 \u7684\u884c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_25","title":"\u6298\u53e0\u548c\u5b57\u7b26\u4e32\u6570\u636e","text":"<p>\u6298\u53e0\u53ef\u4ee5\u7528\u6765\u8fde\u63a5\u5b57\u7b26\u4e32\u6570\u636e\u3002\u7136\u800c\uff0c\u7531\u4e8e\u4e2d\u95f4\u5217\u7684\u7269\u5316\uff0c\u8fd9\u79cd\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\u4f1a\u5448\u5e73\u65b9\u7ea7\u589e\u957f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <code>concat_str</code> \u8868\u8fbe\u5f0f\u6765\u5b8c\u6210\u8fd9\u7c7b\u64cd\u4f5c\u3002</p> <pre><code>use polars::prelude::*;\n\nlet df = df!(\n    \"symbol\" =&gt; &amp;[\"AAPL\", \"GOOGL\", \"AMZN\"],\n    \"price\" =&gt; &amp;[150, 2800, 3400],\n)?;\n\nlet out = df\n    .lazy()\n    .select([concat_str([col(\"symbol\"), col(\"price\")], \"\", false).alias(\"combined\")])\n    .collect()?;\nprintln!(\"{:?}\", out);\n\nshape: (3, 1)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 combined  \u2502\n\u2502 ---       \u2502\n\u2502 str       \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 AAPL150   \u2502\n\u2502 GOOGL2800 \u2502\n\u2502 AMZN3400  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u901a\u8fc7\u4f7f\u7528 <code>concat_str</code> \u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u9ad8\u6548\u5730\u8fde\u63a5\u5b57\u7b26\u4e32\u6570\u636e\uff0c\u907f\u514d\u4e86\u590d\u6742\u7684\u64cd\u4f5c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2333-csv-input","title":"23.3.3 CSV input","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv","title":"CSV","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_26","title":"\u8bfb\u53d6\u4e0e\u5199\u5165","text":"<p>\u8bfb\u53d6CSV\u6587\u4ef6\u7684\u65b9\u5f0f\u5f88\u5e38\u89c1\uff1a <pre><code>use polars::prelude::*;\n\nlet df = CsvReadOptions::default()\n    .try_into_reader_with_file_path(Some(\"docs/data/path.csv\".into()))\n    .unwrap()\n    .finish()\n    .unwrap();\n</code></pre> \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528<code>CsvReadOptions</code>\u6765\u8bbe\u7f6eCSV\u8bfb\u53d6\u9009\u9879\uff0c\u7136\u540e\u5c06\u6587\u4ef6\u8def\u5f84\u4f20\u9012\u7ed9<code>try_into_reader_with_file_path</code>\u65b9\u6cd5\uff0c\u6700\u7ec8\u901a\u8fc7<code>finish</code>\u65b9\u6cd5\u5b8c\u6210\u8bfb\u53d6\u5e76\u83b7\u53d6DataFrame\u3002</p> <p>\u5199\u5165CSV\u6587\u4ef6\u4f7f\u7528<code>write_csv</code>\u51fd\u6570\uff1a <pre><code>use polars::prelude::*;\n\nlet mut df = df!(\n    \"foo\" =&gt; &amp;[1, 2, 3],\n    \"bar\" =&gt; &amp;[None, Some(\"bak\"), Some(\"baz\")],\n).unwrap();\n\nlet mut file = std::fs::File::create(\"docs/data/path.csv\").unwrap();\nCsvWriter::new(&amp;mut file).finish(&amp;mut df).unwrap();\n</code></pre> \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2aDataFrame\u5e76\u5c06\u5176\u5199\u5165\u6307\u5b9a\u8def\u5f84\u7684CSV\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_1","title":"\u626b\u63cfCSV","text":"<p>Polars\u5141\u8bb8\u4f60\u626b\u63cfCSV\u8f93\u5165\u3002\u626b\u63cf\u5ef6\u8fdf\u4e86\u6587\u4ef6\u7684\u5b9e\u9645\u89e3\u6790\uff0c\u8fd4\u56de\u4e00\u4e2a\u540d\u4e3aLazyFrame\u7684\u60f0\u6027\u8ba1\u7b97\u6301\u6709\u8005\u3002 <pre><code>use polars::prelude::*;\n\nlet lf = LazyCsvReader::new(\"./test.csv\").finish().unwrap();\n</code></pre> \u4f7f\u7528<code>LazyCsvReader</code>\uff0c\u53ef\u4ee5\u5728\u4e0d\u7acb\u5373\u89e3\u6790\u6587\u4ef6\u7684\u60c5\u51b5\u4e0b\u5904\u7406CSV\u8f93\u5165\uff0c\u8fd9\u5bf9\u4f18\u5316\u6027\u80fd\u6709\u5f88\u5927\u5e2e\u52a9\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_27","title":"\u6559\u7a0b\u603b\u7ed3","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_2","title":"\u8bfb\u53d6CSV\u6587\u4ef6","text":"<ol> <li>\u5bfc\u5165Polars\u5e93\u3002</li> <li>\u4f7f\u7528<code>CsvReadOptions</code>\u914d\u7f6eCSV\u8bfb\u53d6\u9009\u9879\u3002</li> <li>\u8c03\u7528<code>try_into_reader_with_file_path</code>\u65b9\u6cd5\u4f20\u5165\u6587\u4ef6\u8def\u5f84\u3002</li> <li>\u4f7f\u7528<code>finish</code>\u65b9\u6cd5\u5b8c\u6210\u8bfb\u53d6\u5e76\u83b7\u53d6DataFrame\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_3","title":"\u5199\u5165CSV\u6587\u4ef6","text":"<ol> <li>\u521b\u5efa\u4e00\u4e2aDataFrame\u5bf9\u8c61\u3002</li> <li>\u4f7f\u7528<code>std::fs::File::create</code>\u521b\u5efa\u6587\u4ef6\u3002</li> <li>\u4f7f\u7528<code>CsvWriter</code>\u5c06DataFrame\u5199\u5165CSV\u6587\u4ef6\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_4","title":"\u626b\u63cfCSV\u6587\u4ef6","text":"<ol> <li>\u4f7f\u7528<code>LazyCsvReader</code>\u5ef6\u8fdf\u89e3\u6790CSV\u6587\u4ef6\u3002</li> <li>\u4f7f\u7528<code>finish</code>\u65b9\u6cd5\u83b7\u53d6LazyFrame\u3002</li> </ol> <p>\u901a\u8fc7\u4ee5\u4e0a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u9ad8\u6548\u5730\u8bfb\u53d6\u3001\u5199\u5165\u548c\u626b\u63cfCSV\u6587\u4ef6\uff0c\u6781\u5927\u5730\u63d0\u5347\u6570\u636e\u5904\u7406\u7684\u6027\u80fd\u548c\u7075\u6d3b\u6027\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_28","title":"\u53c2\u8003\u4ee3\u7801\u793a\u4f8b","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_5","title":"\u8bfb\u53d6CSV\u6587\u4ef6","text":"<pre><code>use polars::prelude::*;\n\nlet df = CsvReadOptions::default()\n    .try_into_reader_with_file_path(Some(\"docs/data/path.csv\".into()))\n    .unwrap()\n    .finish()\n    .unwrap();\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_6","title":"\u5199\u5165CSV\u6587\u4ef6","text":"<pre><code>use polars::prelude::*;\n\nlet mut df = df!(\n    \"foo\" =&gt; &amp;[1, 2, 3],\n    \"bar\" =&gt; &amp;[None, Some(\"bak\"), Some(\"baz\")],\n).unwrap();\n\nlet mut file = std::fs::File::create(\"docs/data/path.csv\").unwrap();\nCsvWriter::new(&amp;mut file).finish(&amp;mut df).unwrap();\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#csv_7","title":"\u626b\u63cfCSV\u6587\u4ef6","text":"<pre><code>use polars::prelude::*;\n\nlet lf = LazyCsvReader::new(\"./test.csv\").finish().unwrap();\nprintln!(\"{:?}\", lf);\n</code></pre> <p>\u901a\u8fc7\u4e0a\u8ff0\u6b65\u9aa4\uff0c\u7528\u6237\u53ef\u4ee5\u8f7b\u677e\u638c\u63e1\u5728Rust\u4e2d\u4f7f\u7528Polars\u5904\u7406CSV\u6587\u4ef6\u7684\u57fa\u672c\u65b9\u6cd5\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2334-json-input","title":"23.3.4 JSON input","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#json","title":"JSON \u6587\u4ef6","text":"<p>Polars \u53ef\u4ee5\u8bfb\u53d6\u548c\u5199\u5165\u6807\u51c6 JSON \u548c\u6362\u884c\u5206\u9694\u7684 JSON (NDJSON)\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_29","title":"\u8bfb\u53d6","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#json_1","title":"\u6807\u51c6 JSON","text":"<p>\u8bfb\u53d6 JSON \u6587\u4ef6\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a <pre><code>use polars::prelude::*;\nlet mut file = std::fs::File::open(\"docs/data/path.json\").unwrap();\nlet df = JsonReader::new(&amp;mut file).finish().unwrap();\n</code></pre></p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#json_2","title":"\u6362\u884c\u5206\u9694\u7684 JSON","text":"<p>Polars \u53ef\u4ee5\u66f4\u9ad8\u6548\u5730\u8bfb\u53d6 NDJSON \u6587\u4ef6\uff1a <pre><code>use polars::prelude::*;\nlet mut file = std::fs::File::open(\"docs/data/path.json\").unwrap();\nlet df = JsonLineReader::new(&amp;mut file).finish().unwrap();\n</code></pre></p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_30","title":"\u5199\u5165","text":"<p>\u5c06 DataFrame \u5199\u5165 JSON \u6587\u4ef6\uff1a <pre><code>use polars::prelude::*;\nlet mut df = df!(\n    \"foo\" =&gt; &amp;[1, 2, 3],\n    \"bar\" =&gt; &amp;[None, Some(\"bak\"), Some(\"baz\")],\n).unwrap();\nlet mut file = std::fs::File::create(\"docs/data/path.json\").unwrap();\n\n// \u5199\u5165\u6807\u51c6 JSON\nJsonWriter::new(&amp;mut file)\n    .with_json_format(JsonFormat::Json)\n    .finish(&amp;mut df)\n    .unwrap();\n\n// \u5199\u5165 NDJSON\nJsonWriter::new(&amp;mut file)\n    .with_json_format(JsonFormat::JsonLines)\n    .finish(&amp;mut df)\n    .unwrap();\n</code></pre></p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_31","title":"\u626b\u63cf","text":"<p>Polars \u5141\u8bb8\u4ec5\u626b\u63cf\u6362\u884c\u5206\u9694\u7684 JSON \u8f93\u5165\u3002\u626b\u63cf\u5ef6\u8fdf\u4e86\u6587\u4ef6\u7684\u5b9e\u9645\u89e3\u6790\uff0c\u8fd4\u56de\u4e00\u4e2a\u540d\u4e3a LazyFrame \u7684\u60f0\u6027\u8ba1\u7b97\u6301\u6709\u8005\u3002 <pre><code>use polars::prelude::*;\nlet lf = LazyJsonLineReader::new(\"docs/data/path.json\")\n    .finish()\n    .unwrap();\n</code></pre></p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2335-polars-lazy-eager-api","title":"23.3.5 Polars\u7684\u6025\u6027\u548c\u60f0\u6027\u6a21\u5f0f (Lazy / Eager API)","text":"<p>Polars \u63d0\u4f9b\u4e86\u4e24\u79cd\u64cd\u4f5c\u6a21\u5f0f\uff1a\u6025\u6027\uff08Eager\uff09\u548c\u60f0\u6027\uff08Lazy\uff09\u3002\u6025\u6027\u6a21\u5f0f\u4e0b\uff0c\u67e5\u8be2\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u60f0\u6027\u6a21\u5f0f\u4e0b\uff0c\u67e5\u8be2\u4f1a\u5728\u201c\u9700\u8981\u201d\u65f6\u624d\u8bc4\u4f30\u3002\u63a8\u8fdf\u6267\u884c\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u6027\u80fd\uff0c\u56e0\u6b64\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f18\u5148\u4f7f\u7528\u60f0\u6027 API\u3002\u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\u8fdb\u884c\u8bf4\u660e\uff1a</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_32","title":"\u6025\u6027\u6a21\u5f0f\u793a\u4f8b","text":"<p><pre><code>use polars::prelude::*;\n\nlet df = CsvReadOptions::default()\n    .try_into_reader_with_file_path(Some(\"docs/data/iris.csv\".into()))\n    .unwrap()\n    .finish()\n    .unwrap();\nlet mask = df.column(\"sepal_length\")?.f64()?.gt(5.0);\nlet df_small = df.filter(&amp;mask)?;\n#[allow(deprecated)]\nlet df_agg = df_small\n    .group_by([\"species\"])?\n    .select([\"sepal_width\"])\n    .mean()?;\nprintln!(\"{}\", df_agg);\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u6025\u6027 API\uff1a 1. \u8bfb\u53d6\u9e22\u5c3e\u82b1\u6570\u636e\u96c6\u3002 2. \u6839\u636e\u843c\u7247\u957f\u5ea6\u8fc7\u6ee4\u6570\u636e\u96c6\u3002 3. \u8ba1\u7b97\u6bcf\u4e2a\u7269\u79cd\u7684\u843c\u7247\u5bbd\u5ea6\u5e73\u5747\u503c\u3002</p> <p>\u6bcf\u4e00\u6b65\u90fd\u7acb\u5373\u6267\u884c\u5e76\u8fd4\u56de\u4e2d\u95f4\u7ed3\u679c\u3002\u8fd9\u53ef\u80fd\u4f1a\u6d6a\u8d39\u8d44\u6e90\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u4f1a\u6267\u884c\u4e0d\u5fc5\u8981\u7684\u5de5\u4f5c\u6216\u52a0\u8f7d\u672a\u4f7f\u7528\u7684\u6570\u636e\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_33","title":"\u60f0\u6027\u6a21\u5f0f\u793a\u4f8b","text":"<p><pre><code>use polars::prelude::*;\n\nlet q = LazyCsvReader::new(\"docs/data/iris.csv\")\n    .with_has_header(true)\n    .finish()?\n    .filter(col(\"sepal_length\").gt(lit(5)))\n    .group_by(vec![col(\"species\")])\n    .agg([col(\"sepal_width\").mean()]);\nlet df = q.collect()?;\nprintln!(\"{}\", df);\n</code></pre> \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u4f7f\u7528\u60f0\u6027 API \u53ef\u4ee5\u8fdb\u884c\u4ee5\u4e0b\u4f18\u5316\uff1a 1. \u8c13\u8bcd\u4e0b\u63a8\uff08Predicate pushdown\uff09\uff1a\u5728\u8bfb\u53d6\u6570\u636e\u96c6\u65f6\u5c3d\u65e9\u5e94\u7528\u8fc7\u6ee4\u5668\uff0c\u4ec5\u8bfb\u53d6\u843c\u7247\u957f\u5ea6\u5927\u4e8e 5 \u7684\u884c\u3002 2. \u6295\u5f71\u4e0b\u63a8\uff08Projection pushdown\uff09\uff1a\u5728\u8bfb\u53d6\u6570\u636e\u96c6\u65f6\u53ea\u9009\u62e9\u6240\u9700\u7684\u5217\uff0c\u4ece\u800c\u4e0d\u9700\u8981\u52a0\u8f7d\u989d\u5916\u7684\u5217\uff08\u5982\u82b1\u74e3\u957f\u5ea6\u548c\u82b1\u74e3\u5bbd\u5ea6\uff09\u3002</p> <p>\u8fd9\u4e9b\u4f18\u5316\u663e\u8457\u964d\u4f4e\u4e86\u5185\u5b58\u548c CPU \u7684\u8d1f\u8f7d\uff0c\u4ece\u800c\u5141\u8bb8\u5728\u5185\u5b58\u4e2d\u5904\u7406\u66f4\u5927\u7684\u6570\u636e\u96c6\u5e76\u52a0\u5feb\u5904\u7406\u901f\u5ea6\u3002\u4e00\u65e6\u5b9a\u4e49\u4e86\u67e5\u8be2\uff0c\u901a\u8fc7\u8c03\u7528 <code>collect</code> \u6765\u6267\u884c\u5b83\u3002\u5728 Lazy API \u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u8ba8\u8bba\u5176\u5b9e\u73b0\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#api","title":"\u6025\u6027 API","text":"<p>\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u6025\u6027 API \u5b9e\u9645\u4e0a\u662f\u5728\u5e95\u5c42\u8c03\u7528\u60f0\u6027 API\uff0c\u5e76\u7acb\u5373\u6536\u96c6\u7ed3\u679c\u3002\u8fd9\u5177\u6709\u5728\u67e5\u8be2\u5185\u90e8\u4ecd\u7136\u53ef\u4ee5\u8fdb\u884c\u67e5\u8be2\u8ba1\u5212\u4f18\u5316\u7684\u597d\u5904\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_34","title":"\u4f55\u65f6\u4f7f\u7528\u54ea\u79cd\u6a21\u5f0f","text":"<p>\u901a\u5e38\u5e94\u4f18\u5148\u4f7f\u7528\u60f0\u6027 API\uff0c\u9664\u975e\u60a8\u5bf9\u4e2d\u95f4\u7ed3\u679c\u611f\u5174\u8da3\u6216\u6b63\u5728\u8fdb\u884c\u63a2\u7d22\u6027\u5de5\u4f5c\uff0c\u5e76\u4e14\u5c1a\u4e0d\u786e\u5b9a\u67e5\u8be2\u7684\u6700\u7ec8\u5f62\u6001\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_35","title":"\u91cf\u5316\u91d1\u878d\u6848\u4f8b","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#sma","title":"\u6025\u6027\u6a21\u5f0f\u793a\u4f8b\uff1a\u8ba1\u7b97\u80a1\u7968\u7684\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\uff08SMA\uff09","text":"<pre><code>use polars::prelude::*;\nuse chrono::NaiveDate;\n\nlet df = df!(\n    \"date\" =&gt; &amp;[\n        NaiveDate::from_ymd(2023, 1, 1),\n        NaiveDate::from_ymd(2023, 1, 2),\n        NaiveDate::from_ymd(2023, 1, 3),\n        NaiveDate::from_ymd(2023, 1, 4),\n        NaiveDate::from_ymd(2023, 1, 5),\n    ],\n    \"price\" =&gt; &amp;[100.0, 101.0, 102.0, 103.0, 104.0],\n)?;\n\nlet sma = df\n    .clone()\n    .select([col(\"price\").rolling_mean(3, None, false, false).alias(\"SMA\")])\n    .collect()?;\n\nprintln!(\"{}\", sma);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#wma","title":"\u60f0\u6027\u6a21\u5f0f\u793a\u4f8b\uff1a\u8ba1\u7b97\u80a1\u7968\u7684\u52a0\u6743\u79fb\u52a8\u5e73\u5747\u7ebf\uff08WMA\uff09","text":"<pre><code>let df = df!(\n    \"date\" =&gt; &amp;[\n        NaiveDate::from_ymd(2023, 1, 1),\n        NaiveDate::from_ymd(2023, 1, 2),\n        NaiveDate::from_ymd(2023, 1, 3),\n        NaiveDate::from_ymd(2023, 1, 4),\n        NaiveDate::from_ymd(2023, 1, 5),\n    ],\n    \"price\" =&gt; &amp;[100.0, 101.0, 102.0, 103.0, 104.0],\n)?;\n\nlet weights = vec![0.5, 0.3, 0.2];\n\nlet wma = df\n    .lazy()\n    .with_column(\n        col(\"price\")\n            .rolling_apply(\n                |s| {\n                    let weighted_sum: f64 = s\n                        .f64()\n                        .unwrap()\n                        .into_iter()\n                        .zip(&amp;weights)\n                        .map(|(x, &amp;w)| x.unwrap() * w)\n                        .sum();\n                    Some(weighted_sum)\n                },\n                3,\n                polars::prelude::RollingOptions::default()\n                    .min_periods(1)\n                    .center(false)\n                    .window_size(3)\n            )\n            .alias(\"WMA\")\n    )\n    .collect()?;\n\nprintln!(\"{}\", wma);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2336-streaming-mode","title":"23.3.6 \u6d41\u6a21\u5f0f (Streaming Mode)","text":"<p>Polars \u5f15\u5165\u4e86\u4e00\u4e2a\u5f3a\u5927\u7684\u529f\u80fd\u53eb\u505a\u6d41\u6a21\u5f0f\uff08Streaming Mode\uff09\uff0c\u8bbe\u8ba1\u7528\u4e8e\u901a\u8fc7\u5206\u5757\u5904\u7406\u6570\u636e\u6765\u9ad8\u6548\u5904\u7406\u5927\u578b\u6570\u636e\u96c6\u3002\u8be5\u6a21\u5f0f\u663e\u8457\u63d0\u9ad8\u4e86\u6570\u636e\u5904\u7406\u4efb\u52a1\u7684\u6027\u80fd\uff0c\u7279\u522b\u662f\u5728\u5904\u7406\u65e0\u6cd5\u5168\u90e8\u88c5\u5165\u5185\u5b58\u7684\u6d77\u91cf\u6570\u636e\u96c6\u65f6\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_36","title":"\u6d41\u6a21\u5f0f\u7684\u5173\u952e\u7279\u6027\uff1a","text":"<ol> <li>\u57fa\u4e8e\u5757\u7684\u5904\u7406\uff1aPolars \u4ee5\u5757\u7684\u5f62\u5f0f\u5904\u7406\u6570\u636e\uff0c\u51cf\u5c11\u5185\u5b58\u4f7f\u7528\uff0c\u4f7f\u5176\u80fd\u591f\u9ad8\u6548\u5904\u7406\u5927\u578b\u6570\u636e\u96c6\u3002</li> <li>\u81ea\u52a8\u4f18\u5316\uff1a\u6d41\u6a21\u5f0f\u5305\u542b\u8bf8\u5982\u8c13\u8bcd\u4e0b\u63a8\uff08predicate pushdown\uff09\u548c\u6295\u5f71\u4e0b\u63a8\uff08projection pushdown\uff09\u7b49\u4f18\u5316\uff0c\u4ee5\u6700\u5c0f\u5316\u5904\u7406\u548c\u8bfb\u53d6\u7684\u6570\u636e\u91cf\u3002</li> <li>\u5e76\u884c\u6267\u884c\uff1aPolars \u5229\u7528\u6240\u6709\u53ef\u7528\u7684 CPU \u6838\u5fc3\uff0c\u901a\u8fc7\u5212\u5206\u5de5\u4f5c\u8d1f\u8f7d\u6765\u52a0\u5feb\u6570\u636e\u5904\u7406\u901f\u5ea6\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_37","title":"\u91cf\u5316\u91d1\u878d\u6848\u4f8b","text":"<p>\u8003\u8651\u4e00\u4e2a\u9700\u8981\u5904\u7406\u5927\u578b\u80a1\u7968\u4ea4\u6613\u6570\u636e\u96c6\u7684\u573a\u666f\u3002\u4f7f\u7528 Polars \u6d41\u6a21\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u9ad8\u6548\u5730\u4ece\u5305\u542b\u6570\u767e\u4e07\u4ea4\u6613\u8bb0\u5f55\u7684 CSV \u6587\u4ef6\u4e2d\u8ba1\u7b97\u6bcf\u4e2a\u80a1\u7968\u4ee3\u7801\u7684\u5e73\u5747\u4ea4\u6613\u4ef7\u683c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#api_1","title":"\u6025\u6027 API \u793a\u4f8b","text":"<p>\u4f7f\u7528\u6025\u6027 API \u65f6\uff0c\u64cd\u4f5c\u4f1a\u7acb\u5373\u6267\u884c\uff1a</p> <pre><code>use polars::prelude::*;\n\nlet df = CsvReadOptions::default()\n    .try_into_reader_with_file_path(Some(\"docs/data/stock_trades.csv\".into()))\n    .unwrap()\n    .finish()\n    .unwrap();\n\nlet mask = df.column(\"trade_price\")?.f64()?.gt(100.0);\nlet df_filtered = df.filter(&amp;mask)?;\n#[allow(deprecated)]\nlet df_agg = df_filtered\n    .group_by([\"stock_symbol\"])?\n    .select([\"trade_price\"])\n    .mean()?;\nprintln!(\"{}\", df_agg);\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff1a 1. \u8bfb\u53d6\u6570\u636e\u96c6\u3002 2. \u57fa\u4e8e\u4ea4\u6613\u4ef7\u683c\u8fc7\u6ee4\u6570\u636e\u96c6\u3002 3. \u8ba1\u7b97\u6bcf\u4e2a\u80a1\u7968\u4ee3\u7801\u7684\u5e73\u5747\u4ea4\u6613\u4ef7\u683c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#api_2","title":"\u60f0\u6027 API \u793a\u4f8b\uff08\u5e26\u6d41\u6a21\u5f0f\uff09","text":"<p>\u4f7f\u7528\u60f0\u6027 API \u5e76\u542f\u7528\u6d41\u6a21\u5f0f\u53ef\u4ee5\u5ef6\u8fdf\u6267\u884c\u548c\u4f18\u5316\uff1a</p> <pre><code>use polars::prelude::*;\n\nlet q = LazyCsvReader::new(\"docs/data/stock_trades.csv\")\n    .with_has_header(true)\n    .finish()?\n    .filter(col(\"trade_price\").gt(lit(100)))\n    .group_by(vec![col(\"stock_symbol\")])\n    .agg([col(\"trade_price\").mean()]);\nlet df = q.collect()?;\nprintln!(\"{}\", df);\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff1a 1. \u5b9a\u4e49\u67e5\u8be2\u4f46\u4e0d\u7acb\u5373\u6267\u884c\u3002 2. \u67e5\u8be2\u8ba1\u5212\u5668\u5728\u6570\u636e\u626b\u63cf\u671f\u95f4\u5e94\u7528\u4f18\u5316\uff0c\u5982\u8fc7\u6ee4\u548c\u9009\u62e9\u5217\u3002 3. \u67e5\u8be2\u4ee5\u5757\u7684\u5f62\u5f0f\u6267\u884c\uff0c\u51cf\u5c11\u5185\u5b58\u4f7f\u7528\u5e76\u63d0\u9ad8\u6027\u80fd\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_38","title":"\u914d\u7f6e\u5757\u5927\u5c0f","text":"<p>\u9ed8\u8ba4\u5757\u5927\u5c0f\u7531\u5217\u6570\u548c\u53ef\u7528\u7ebf\u7a0b\u6570\u51b3\u5b9a\uff0c\u4f46\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u4ee5\u8fdb\u4e00\u6b65\u4f18\u5316\u6027\u80fd\uff1a</p> <pre><code>use polars::prelude::*;\n\npl::Config::set_streaming_chunk_size(50000);\n\nlet q = LazyCsvReader::new(\"docs/data/stock_trades.csv\")\n    .with_has_header(true)\n    .finish()?\n    .filter(col(\"trade_price\").gt(lit(100)))\n    .group_by(vec![col(\"stock_symbol\")])\n    .agg([col(\"trade_price\").mean()]);\nlet df = q.collect()?;\nprintln!(\"{}\", df);\n</code></pre> <p>\u8bbe\u7f6e\u5757\u5927\u5c0f\u6709\u52a9\u4e8e\u6839\u636e\u5177\u4f53\u9700\u6c42\u548c\u786c\u4ef6\u80fd\u529b\u5e73\u8861\u5185\u5b58\u4f7f\u7528\u548c\u5904\u7406\u901f\u5ea6\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_39","title":"\u6d41\u6a21\u5f0f\u7684\u4f18\u52bf","text":"<ol> <li>\u5185\u5b58\u6548\u7387\uff1a\u901a\u8fc7\u5206\u5757\u5904\u7406\u6570\u636e\uff0c\u663e\u8457\u51cf\u5c11\u5185\u5b58\u4f7f\u7528\u3002</li> <li>\u901f\u5ea6\uff1a\u5e76\u884c\u6267\u884c\u548c\u67e5\u8be2\u4f18\u5316\u52a0\u5feb\u4e86\u6570\u636e\u5904\u7406\u901f\u5ea6\u3002</li> <li>\u53ef\u6269\u5c55\u6027\uff1a\u901a\u8fc7\u4ece\u78c1\u76d8\u4e2d\u5206\u5757\u6d41\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5904\u7406\u8d85\u8fc7\u5185\u5b58\u9650\u5236\u7684\u5927\u578b\u6570\u636e\u96c6\u3002</li> </ol> <p>Polars \u6d41\u6a21\u5f0f\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u5c24\u5176\u6709\u7528\uff0c\u56e0\u4e3a\u5927\u91cf\u6570\u636e\u96c6\u5f88\u5e38\u89c1\uff0c\u9ad8\u6548\u7684\u6570\u636e\u5904\u7406\u5bf9\u4e8e\u53ca\u65f6\u5206\u6790\u548c\u51b3\u7b56\u81f3\u5173\u91cd\u8981\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_40","title":"\u4f7f\u7528\u6d41\u6a21\u5f0f\u6267\u884c\u67e5\u8be2","text":"<p>Polars \u652f\u6301\u901a\u8fc7\u4f20\u9012 <code>streaming=True</code> \u53c2\u6570\u5230 <code>collect</code> \u65b9\u6cd5\uff0c\u4ee5\u6d41\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\u3002</p> <pre><code>use polars::prelude::*;\n\nlet q1 = LazyCsvReader::new(\"docs/data/iris.csv\")\n    .with_has_header(true)\n    .finish()?\n    .filter(col(\"sepal_length\").gt(lit(5)))\n    .group_by(vec![col(\"species\")])\n    .agg([col(\"sepal_width\").mean()]);\n\nlet df = q1.clone().with_streaming(true).collect()?;\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_41","title":"\u4f55\u65f6\u53ef\u7528\u6d41\u6a21\u5f0f\uff1f","text":"<p>\u6d41\u6a21\u5f0f\u4ecd\u5728\u5f00\u53d1\u4e2d\u3002\u6211\u4eec\u53ef\u4ee5\u8bf7\u6c42 Polars \u4ee5\u6d41\u6a21\u5f0f\u6267\u884c\u4efb\u4f55\u60f0\u6027\u67e5\u8be2\uff0c\u4f46\u5e76\u975e\u6240\u6709\u60f0\u6027\u64cd\u4f5c\u90fd\u652f\u6301\u6d41\u6a21\u5f0f\u3002\u5982\u679c\u67d0\u4e2a\u64cd\u4f5c\u4e0d\u652f\u6301\u6d41\u6a21\u5f0f\uff0cPolars \u5c06\u5728\u975e\u6d41\u6a21\u5f0f\u4e0b\u8fd0\u884c\u67e5\u8be2\u3002</p> <p>\u6d41\u6a21\u5f0f\u652f\u6301\u8bb8\u591a\u64cd\u4f5c\uff0c\u5305\u62ec\uff1a - \u8fc7\u6ee4\u3001\u5207\u7247\u3001\u5934\u3001\u5c3e - with_columns\u3001select - group_by - \u8fde\u63a5 - \u552f\u4e00 - \u6392\u5e8f - \u7206\u70b8\u3001\u53cd\u900f\u89c6 - scan_csv\u3001scan_parquet\u3001scan_ipc</p> <p>\u8fd9\u4e2a\u5217\u8868\u5e76\u4e0d\u8be6\u5c3d\u3002Polars \u6b63\u5728\u79ef\u6781\u5f00\u53d1\u4e2d\uff0c\u66f4\u591a\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5728\u6ca1\u6709\u660e\u786e\u901a\u77e5\u7684\u60c5\u51b5\u4e0b\u6dfb\u52a0\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_42","title":"\u793a\u4f8b\uff08\u5e26\u652f\u6301\u64cd\u4f5c\uff09","text":"<p>\u8981\u786e\u5b9a\u67e5\u8be2\u7684\u54ea\u4e9b\u90e8\u5206\u662f\u6d41\u5f0f\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>explain</code> \u65b9\u6cd5\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u6f14\u793a\u5982\u4f55\u68c0\u67e5\u67e5\u8be2\u8ba1\u5212\u7684\u793a\u4f8b\uff1a</p> <pre><code>use polars::prelude::*;\n\nlet query_plan = q1.with_streaming(true).explain(true)?;\nprintln!(\"{}\", query_plan);\n\nSTREAMING:\n  AGGREGATE\n    [col(\"sepal_width\").mean()] BY [col(\"species\")] FROM\n    Csv SCAN [docs/data/iris.csv]\n    PROJECT 3/5 COLUMNS\n    SELECTION: [(col(\"sepal_length\")) &gt; (5.0)]\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_43","title":"\u793a\u4f8b\uff08\u5e26\u975e\u6d41\u5f0f\u64cd\u4f5c\uff09","text":"<pre><code>use polars::prelude::*;\n\nlet q2 = LazyCsvReader::new(\"docs/data/iris.csv\")\n    .finish()?\n    .with_columns(vec![col(\"sepal_length\")\n        .mean()\n        .over(vec![col(\"species\")])\n        .alias(\"sepal_length_mean\")]);\n\nlet query_plan = q2.with_streaming(true).explain(true)?;\nprintln!(\"{}\", query_plan);\n\nWITH_COLUMNS:\n[col(\"sepal_length\").mean().over([col(\"species\")])] \nSTREAMING:\nCsv SCAN [docs/data/iris.csv]\nPROJECT */5 COLUMNS\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2337-missihg-values","title":"23.3.7 \u7f3a\u5931\u503c\u5904\u7406 Missihg Values","text":"<p>\u672c\u9875\u9762\u4ecb\u7ecd\u4e86\u5728 Polars \u4e2d\u5982\u4f55\u8868\u793a\u7f3a\u5931\u6570\u636e\u4ee5\u53ca\u5982\u4f55\u586b\u5145\u7f3a\u5931\u6570\u636e\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#null-nan","title":"null \u548c NaN \u503c","text":"<p>\u5728 Polars \u4e2d\uff0c\u6bcf\u4e2a DataFrame\uff08\u6216 Series\uff09\u4e2d\u7684\u5217\u90fd\u662f\u4e00\u4e2a Arrow \u6570\u7ec4\u6216\u57fa\u4e8e Apache Arrow \u89c4\u8303\u7684 Arrow \u6570\u7ec4\u96c6\u5408\u3002\u7f3a\u5931\u6570\u636e\u5728 Arrow \u548c Polars \u4e2d\u7528 null \u503c\u8868\u793a\u3002\u8fd9\u79cd null \u7f3a\u5931\u503c\u9002\u7528\u4e8e\u6240\u6709\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec\u6570\u503c\u578b\u6570\u636e\u3002</p> <p>\u6b64\u5916\uff0cPolars \u8fd8\u5141\u8bb8\u5728\u6d6e\u70b9\u6570\u5217\u4e2d\u4f7f\u7528 NaN\uff08\u975e\u6570\u503c\uff09\u503c\u3002NaN \u503c\u88ab\u89c6\u4e3a\u6d6e\u70b9\u6570\u636e\u7c7b\u578b\u7684\u4e00\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u7f3a\u5931\u6570\u636e\u3002\u6211\u4eec\u5c06\u5728\u4e0b\u9762\u5355\u72ec\u8ba8\u8bba NaN \u503c\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 Rust \u4e2d\u7684 <code>None</code> \u503c\u624b\u52a8\u5b9a\u4e49\u7f3a\u5931\u503c\uff1a</p> <pre><code>use polars::prelude::*;\n\nlet df = df!(\n    \"value\" =&gt; &amp;[Some(1), None],\n)?;\n\nprintln!(\"{}\", &amp;df);\n\nshape: (2, 1)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value \u2502\n\u2502 ---   \u2502\n\u2502 i64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1     \u2502\n\u2502 null  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_44","title":"\u7f3a\u5931\u6570\u636e\u5143\u6570\u636e","text":"<p>\u6bcf\u4e2a\u7531 Polars \u4f7f\u7528\u7684 Arrow \u6570\u7ec4\u90fd\u5b58\u50a8\u4e86\u4e0e\u7f3a\u5931\u6570\u636e\u76f8\u5173\u7684\u4e24\u79cd\u5143\u6570\u636e\u3002\u8fd9\u4e9b\u5143\u6570\u636e\u5141\u8bb8 Polars \u5feb\u901f\u663e\u793a\u6709\u591a\u5c11\u7f3a\u5931\u503c\u4ee5\u53ca\u54ea\u4e9b\u503c\u662f\u7f3a\u5931\u7684\u3002</p> <p>\u7b2c\u4e00\u79cd\u5143\u6570\u636e\u662f <code>null_count</code>\uff0c\u5373\u5217\u4e2d null \u503c\u7684\u884c\u6570\uff1a</p> <pre><code>let null_count_df = df.null_count();\nprintln!(\"{}\", &amp;null_count_df);\n\nshape: (1, 1)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value \u2502\n\u2502 ---   \u2502\n\u2502 u32   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u5143\u6570\u636e\u662f\u4e00\u4e2a\u53eb\u505a\u6709\u6548\u6027\u4f4d\u56fe\uff08validity bitmap\uff09\u7684\u6570\u7ec4\uff0c\u6307\u793a\u6bcf\u4e2a\u6570\u636e\u503c\u662f\u6709\u6548\u7684\u8fd8\u662f\u7f3a\u5931\u7684\u3002\u6709\u6548\u6027\u4f4d\u56fe\u5728\u5185\u5b58\u4e2d\u662f\u9ad8\u6548\u7684\uff0c\u56e0\u4e3a\u5b83\u662f\u6309\u4f4d\u7f16\u7801\u7684 - \u6bcf\u4e2a\u503c\u8981\u4e48\u662f 0 \u8981\u4e48\u662f 1\u3002\u8fd9\u79cd\u6309\u4f4d\u7f16\u7801\u610f\u5473\u7740\u6bcf\u4e2a\u6570\u7ec4\u7684\u5185\u5b58\u5f00\u9500\u4ec5\u4e3a\uff08\u6570\u7ec4\u957f\u5ea6 / 8\uff09\u5b57\u8282\u3002\u6709\u6548\u6027\u4f4d\u56fe\u7531 Polars \u7684 <code>is_null</code> \u65b9\u6cd5\u4f7f\u7528\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528 <code>is_null</code> \u65b9\u6cd5\u8fd4\u56de\u57fa\u4e8e\u6709\u6548\u6027\u4f4d\u56fe\u7684 Series\uff1a</p> <pre><code>let is_null_series = df\n    .clone()\n    .lazy()\n    .select([col(\"value\").is_null()])\n    .collect()?;\nprintln!(\"{}\", &amp;is_null_series);\n\nshape: (2, 1)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value \u2502\n\u2502 ---   \u2502\n\u2502 bool  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 false \u2502\n\u2502 true  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_45","title":"\u586b\u5145\u7f3a\u5931\u6570\u636e","text":"<p>\u53ef\u4ee5\u4f7f\u7528 <code>fill_null</code> \u65b9\u6cd5\u586b\u5145 Series \u4e2d\u7684\u7f3a\u5931\u6570\u636e\u3002\u60a8\u9700\u8981\u6307\u5b9a\u5e0c\u671b <code>fill_null</code> \u65b9\u6cd5\u5982\u4f55\u586b\u5145\u7f3a\u5931\u6570\u636e\u3002\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li>\u4f7f\u7528\u5b57\u9762\u503c\uff0c\u4f8b\u5982 0 \u6216 \"0\"</li> <li>\u4f7f\u7528\u7b56\u7565\uff0c\u4f8b\u5982\u524d\u5411\u586b\u5145</li> <li>\u4f7f\u7528\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982\u7528\u53e6\u4e00\u5217\u7684\u503c\u66ff\u6362</li> <li>\u63d2\u503c</li> </ol> <p>\u6211\u4eec\u901a\u8fc7\u5b9a\u4e49\u4e00\u4e2a\u7b80\u5355\u7684 DataFrame\uff0c\u5176\u4e2d col2 \u6709\u4e00\u4e2a\u7f3a\u5931\u503c\uff0c\u6765\u8bf4\u660e\u6bcf\u79cd\u586b\u5145\u7f3a\u5931\u503c\u7684\u65b9\u6cd5\uff1a</p> <pre><code>let df = df!(\n    \"col1\" =&gt; &amp;[Some(1), Some(2), Some(3)],\n    \"col2\" =&gt; &amp;[Some(1), None, Some(3)],\n)?;\nprintln!(\"{}\", &amp;df);\n\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 col1 \u2506 col2 \u2502\n\u2502 ---  \u2506 ---  \u2502\n\u2502 i64  \u2506 i64  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1    \u2506 1    \u2502\n\u2502 2    \u2506 null \u2502\n\u2502 3    \u2506 3    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_46","title":"\u4f7f\u7528\u6307\u5b9a\u5b57\u9762\u503c\u586b\u5145","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u6307\u5b9a\u7684\u5b57\u9762\u503c\u586b\u5145\u7f3a\u5931\u6570\u636e\uff1a</p> <pre><code>let fill_literal_df = df\n    .clone()\n    .lazy()\n    .with_columns([col(\"col2\").fill_null(lit(2))])\n    .collect()?;\nprintln!(\"{}\", &amp;fill_literal_df);\n\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 col1 \u2506 col2 \u2502\n\u2502 ---  \u2506 ---  \u2502\n\u2502 i64  \u2506 i64  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1    \u2506 1    \u2502\n\u2502 2    \u2506 2    \u2502\n\u2502 3    \u2506 3    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_47","title":"\u4f7f\u7528\u7b56\u7565\u586b\u5145","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u79cd\u7b56\u7565\u6765\u586b\u5145\u7f3a\u5931\u6570\u636e\uff0c\u4f8b\u5982\u524d\u5411\u586b\u5145\uff1a</p> <pre><code>let fill_forward_df = df\n    .clone()\n    .lazy()\n    .with_columns([col(\"col2\").forward_fill(None)])\n    .collect()?;\nprintln!(\"{}\", &amp;fill_forward_df);\n\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 col1 \u2506 col2 \u2502\n\u2502 ---  \u2506 ---  \u2502\n\u2502 i64  \u2506 i64  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1    \u2506 1    \u2502\n\u2502 2    \u2506 1    \u2502\n\u2502 3    \u2506 3    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_48","title":"\u4f7f\u7528\u8868\u8fbe\u5f0f\u586b\u5145","text":"<p>\u4e3a\u4e86\u66f4\u7075\u6d3b\u5730\u586b\u5145\u7f3a\u5931\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982\uff0c\u7528\u8be5\u5217\u7684\u4e2d\u4f4d\u6570\u586b\u5145 null \u503c\uff1a</p> <pre><code>let fill_median_df = df\n    .clone()\n    .lazy()\n    .with_columns([col(\"col2\").fill_null(median(\"col2\"))])\n    .collect()?;\nprintln!(\"{}\", &amp;fill_median_df);\n\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 col1 \u2506 col2 \u2502\n\u2502 ---  \u2506 ---  \u2502\n\u2502 i64  \u2506 f64  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1    \u2506 1.0  \u2502\n\u2502 2    \u2506 2.0  \u2502\n\u2502 3    \u2506 3.0  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7531\u4e8e\u4e2d\u4f4d\u6570\u662f\u6d6e\u70b9\u6570\u7edf\u8ba1\u6570\u636e\uff0c\u5217\u4ece\u6574\u6570\u7c7b\u578b\u8f6c\u6362\u4e3a\u6d6e\u70b9\u7c7b\u578b\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_49","title":"\u4f7f\u7528\u63d2\u503c\u586b\u5145","text":"<p>\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u63d2\u503c\uff08\u4e0d\u4f7f\u7528 <code>fill_null</code> \u51fd\u6570\uff09\u6765\u586b\u5145 null \u503c\uff1a</p> <pre><code>let fill_interpolation_df = df\n    .clone()\n    .lazy()\n    .with_columns([col(\"col2\").interpolate(InterpolationMethod::Linear)])\n    .collect()?;\nprintln!(\"{}\", &amp;fill_interpolation_df);\n\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 col1 \u2506 col2 \u2502\n\u2502 ---  \u2506 ---  \u2502\n\u2502 i64  \u2506 f64  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1    \u2506 1.0  \u2502\n\u2502 2    \u2506 2.0  \u2502\n\u2502 3    \u2506 3.0  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#nan","title":"NaN \u503c","text":"<p>Series \u4e2d\u7684\u7f3a\u5931\u6570\u636e\u6709\u4e00\u4e2a null \u503c\u3002\u7136\u800c\uff0c\u60a8\u53ef\u4ee5\u5728\u6d6e\u70b9\u6570\u6570\u636e\u7c7b\u578b\u7684\u5217\u4e2d\u4f7f\u7528 NaN \u503c\u3002\u8fd9\u4e9b NaN \u503c\u53ef\u4ee5\u7531 Numpy \u7684 <code>np.nan</code> \u6216\u539f\u751f\u7684 <code>float('nan')</code> \u521b\u5efa\uff1a</p> <pre><code>let nan_df = df!(\n    \"value\" =&gt; [1.0, f64::NAN, f64::NAN, 3.0],\n)?;\nprintln!(\"{}\", &amp;nan_df);\n\nshape: (4, 1)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value \u2502\n\u2502 ---   \u2502\n\u2502 f64   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 1.0   \u2502\n\u2502 NaN   \u2502\n\u2502 NaN   \u2502\n\u2502 3.0   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>NaN \u503c\u88ab\u89c6\u4e3a\u6d6e\u70b9\u6570\u636e\u7c7b\u578b\u7684\u4e00\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u7f3a\u5931\u6570\u636e\u3002\u8fd9\u610f\u5473\u7740\uff1a</p> <ul> <li>NaN \u503c\u4e0d\u4f1a\u88ab <code>null_count</code> \u65b9\u6cd5\u8ba1\u6570\u3002</li> <li>\u5f53\u60a8\u4f7f\u7528 <code>fill_nan</code> \u65b9\u6cd5\u65f6\uff0cNaN \u503c\u4f1a\u88ab\u586b\u5145\uff0c\u4f46\u4e0d\u4f1a\u88ab <code>fill_null</code> \u65b9\u6cd5\u586b\u5145\u3002</li> </ul> <p>Polars \u5177\u6709 <code>is_nan</code> \u548c <code>fill_nan</code> \u65b9\u6cd5\uff0c\u7c7b\u4f3c\u4e8e <code>is_null</code> \u548c <code>fill_null</code> \u65b9\u6cd5\u3002\u57fa\u7840 Arrow \u6570\u7ec4\u6ca1\u6709\u9884\u5148\u8ba1\u7b97\u7684 NaN \u503c\u6709\u6548\u4f4d\u56fe\uff0c\u56e0\u6b64 <code>is_nan</code> \u65b9\u6cd5\u5fc5\u987b\u8ba1\u7b97\u8fd9\u4e2a\u4f4d\u56fe\u3002</p> <p>null \u548c NaN \u503c\u4e4b\u95f4\u7684\u53e6\u4e00\u4e2a\u533a\u522b\u662f\uff0c\u8ba1\u7b97\u5305\u542b null \u503c\u7684\u5217\u7684\u5e73\u5747\u503c\u65f6\uff0c\u4f1a\u6392\u9664 null \u503c\uff0c\u800c\u5305\u542b NaN \u503c\u7684\u5217\u7684\u5e73\u5747\u503c\u7ed3\u679c\u4e3a NaN\u3002\u8fd9\u79cd\u884c\u4e3a\u53ef\u4ee5\u901a\u8fc7\u7528 null \u503c\u66ff\u6362 NaN \u503c\u6765\u907f\u514d\uff1a</p> <pre><code>let mean_nan_df = nan_df\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#2338-window-functions","title":"23.3.8 \u7a97\u53e3\u51fd\u6570 Window functions","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_50","title":"\u7a97\u53e3\u51fd\u6570","text":"<p>\u7a97\u53e3\u51fd\u6570\u662f\u5e26\u6709\u8d85\u7ea7\u529f\u80fd\u7684\u8868\u8fbe\u5f0f\u3002\u5b83\u4eec\u5141\u8bb8\u60a8\u5728\u9009\u62e9\u4e0a\u4e0b\u6587\u4e2d\u5bf9\u5206\u7ec4\u8fdb\u884c\u805a\u5408\u3002\u9996\u5148\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u96c6\u3002\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u6bb5\u4e2d\u52a0\u8f7d\u7684\u6570\u636e\u96c6\u5305\u542b\u4e00\u4e9b\u5173\u4e8e\u91d1\u878d\u80a1\u7968\u7684\u4fe1\u606f\uff1a</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_51","title":"\u6570\u636e\u96c6\u793a\u4f8b","text":"<pre><code>use polars::prelude::*;\nuse reqwest::blocking::Client;\n\nlet data: Vec&lt;u8&gt; = Client::new()\n    .get(\"https://example.com/financial_data.csv\")  // \u66ff\u6362\u4e3a\u5b9e\u9645\u7684\u91d1\u878d\u6570\u636e\u94fe\u63a5\n    .send()?\n    .text()?\n    .bytes()\n    .collect();\n\nlet file = std::io::Cursor::new(data);\nlet df = CsvReadOptions::default()\n    .with_has_header(true)\n    .into_reader_with_file_handle(file)\n    .finish()?;\n\nprintln!(\"{}\", df);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_52","title":"\u5728\u9009\u62e9\u4e0a\u4e0b\u6587\u4e2d\u7684\u5206\u7ec4\u805a\u5408","text":"<p>\u4e0b\u9762\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u7a97\u53e3\u51fd\u6570\u5728\u4e0d\u540c\u7684\u5217\u4e0a\u8fdb\u884c\u5206\u7ec4\u5e76\u5bf9\u5b83\u4eec\u8fdb\u884c\u805a\u5408\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5728\u5355\u4e2a\u67e5\u8be2\u4e2d\u4f7f\u7528\u591a\u4e2a\u5e76\u884c\u7684\u5206\u7ec4\u64cd\u4f5c\u3002\u805a\u5408\u7684\u7ed3\u679c\u4f1a\u6295\u5f71\u56de\u539f\u59cb\u884c\uff0c\u56e0\u6b64\u7a97\u53e3\u51fd\u6570\u51e0\u4e4e\u603b\u662f\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u4e0e\u539f\u59cb\u5927\u5c0f\u76f8\u540c\u7684 DataFrame\u3002</p> <pre><code>let out = df\n    .clone()\n    .lazy()\n    .select([\n        col(\"sector\"),\n        col(\"market_cap\"),\n        col(\"price\")\n            .mean()\n            .over([\"sector\"])\n            .alias(\"avg_price_by_sector\"),\n        col(\"volume\")\n            .mean()\n            .over([\"sector\", \"market_cap\"])\n            .alias(\"avg_volume_by_sector_and_market_cap\"),\n        col(\"price\").mean().alias(\"avg_price\"),\n    ])\n    .collect()?;\n\nprintln!(\"{}\", out);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_53","title":"\u6bcf\u4e2a\u5206\u7ec4\u5185\u7684\u64cd\u4f5c","text":"<p>\u7a97\u53e3\u51fd\u6570\u4e0d\u4ec5\u53ef\u4ee5\u7528\u4e8e\u805a\u5408\uff0c\u8fd8\u53ef\u4ee5\u5728\u5206\u7ec4\u5185\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u5bf9\u5206\u7ec4\u5185\u7684\u503c\u8fdb\u884c\u6392\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>col(\"value\").sort().over(\"group\")</code>\u3002</p> <pre><code>let filtered = df\n    .clone()\n    .lazy()\n    .filter(col(\"market_cap\").gt(lit(1000000000)))  // \u8fc7\u6ee4\u5e02\u503c\u5927\u4e8e 10 \u4ebf\u7684\u516c\u53f8\n    .select([col(\"company\"), col(\"sector\"), col(\"price\")])\n    .collect()?;\n\nprintln!(\"{}\", filtered);\n\nlet out = filtered\n    .lazy()\n    .with_columns([cols([\"company\", \"price\"])\n        .sort_by(\n            [\"price\"],\n            SortMultipleOptions::default().with_order_descending(true),\n        )\n        .over([\"sector\"])])\n    .collect()?;\nprintln!(\"{}\", out);\n</code></pre> <p>Polars \u4f1a\u8ddf\u8e2a\u6bcf\u4e2a\u5206\u7ec4\u7684\u4f4d\u7f6e\uff0c\u5e76\u5c06\u8868\u8fbe\u5f0f\u6620\u5c04\u5230\u6b63\u786e\u7684\u884c\u4f4d\u7f6e\u3002\u8fd9\u4e5f\u9002\u7528\u4e8e\u5728\u5355\u4e2a\u9009\u62e9\u4e2d\u5bf9\u4e0d\u540c\u5206\u7ec4\u7684\u64cd\u4f5c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_54","title":"\u7a97\u53e3\u8868\u8fbe\u5f0f\u89c4\u5219","text":"<p>\u5047\u8bbe\u6211\u4eec\u5c06\u5176\u5e94\u7528\u4e8e <code>pl.Int32</code> \u5217\uff0c\u7a97\u53e3\u8868\u8fbe\u5f0f\u7684\u8bc4\u4f30\u5982\u4e0b\uff1a</p> <pre><code>// \u5728\u5206\u7ec4\u5185\u805a\u5408\u5e76\u5e7f\u64ad\nlet _ = sum(\"price\").over([col(\"sector\")]);\n// \u5728\u5206\u7ec4\u5185\u6c42\u548c\u5e76\u4e0e\u5206\u7ec4\u5143\u7d20\u76f8\u4e58\nlet _ = (col(\"volume\").sum() * col(\"price\"))\n    .over([col(\"sector\")])\n    .alias(\"volume_price_sum\");\n// \u5728\u5206\u7ec4\u5185\u6c42\u548c\u5e76\u4e0e\u5206\u7ec4\u5143\u7d20\u76f8\u4e58\u5e76\u5c06\u5206\u7ec4\u805a\u5408\u4e3a\u5217\u8868\nlet _ = (col(\"volume\").sum() * col(\"price\"))\n    .over([col(\"sector\")])\n    .alias(\"volume_price_list\")\n    .flatten();\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#_55","title":"\u66f4\u591a\u793a\u4f8b","text":"<p>\u4e0b\u9762\u662f\u4e00\u4e9b\u7a97\u53e3\u51fd\u6570\u7684\u7ec3\u4e60\u793a\u4f8b\uff1a</p> <ol> <li>\u6309\u884c\u4e1a\u5bf9\u6240\u6709\u516c\u53f8\u8fdb\u884c\u6392\u5e8f\u3002</li> <li>\u9009\u62e9\u6bcf\u4e2a\u884c\u4e1a\u4e2d\u7684\u524d\u4e09\u5bb6\u516c\u53f8\u4f5c\u4e3a \"top_3_in_sector\"\u3002</li> <li>\u6309\u4ef7\u683c\u5bf9\u516c\u53f8\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\uff0c\u5e76\u9009\u62e9\u6bcf\u4e2a\u884c\u4e1a\u4e2d\u7684\u524d\u4e09\u5bb6\u516c\u53f8\u4f5c\u4e3a \"top_3_by_price\"\u3002</li> <li>\u6309\u5e02\u503c\u5bf9\u516c\u53f8\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\uff0c\u5e76\u9009\u62e9\u6bcf\u4e2a\u884c\u4e1a\u4e2d\u7684\u524d\u4e09\u5bb6\u516c\u53f8\u4f5c\u4e3a \"top_3_by_market_cap\"\u3002</li> </ol> <pre><code>let out = df\n    .clone()\n    .lazy()\n    .select([\n        col(\"sector\").head(Some(3)).over([\"sector\"]).flatten(),\n        col(\"company\")\n            .sort_by(\n                [\"price\"],\n                SortMultipleOptions::default().with_order_descending(true),\n            )\n            .head(Some(3))\n            .over([\"sector\"])\n            .flatten()\n            .alias(\"top_3_by_price\"),\n        col(\"company\")\n            .sort_by(\n                [\"market_cap\"],\n                SortMultipleOptions::default().with_order_descending(true),\n            )\n            .head(Some(3))\n            .over([\"sector\"])\n            .flatten()\n            .alias(\"top_3_by_market_cap\"),\n    ])\n    .collect()?;\nprintln!(\"{:?}\", out);\n</code></pre> <p>\u5728\u91cf\u5316\u91d1\u878d\u4e2d\uff0c\u8fd9\u4e9b\u7a97\u53e3\u51fd\u6570\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5bf9\u80a1\u7968\u6570\u636e\u8fdb\u884c\u590d\u6742\u7684\u5206\u6790\u548c\u805a\u5408\u64cd\u4f5c\uff0c\u4f8b\u5982\u8ba1\u7b97\u884c\u4e1a\u5185\u7684\u5e73\u5747\u4ef7\u683c\uff0c\u7b5b\u9009\u51fa\u6bcf\u4e2a\u884c\u4e1a\u4e2d\u4ef7\u683c\u6700\u9ad8\u7684\u516c\u53f8\u7b49\u3002\u901a\u8fc7\u8fd9\u4e9b\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u9ad8\u6548\u5730\u5904\u7406\u548c\u5206\u6790\u5927\u91cf\u7684\u91d1\u878d\u6570\u636e\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2023%20%E7%94%A8Polars%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8A%A0%E9%80%9F%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6%E5%A4%84%E7%90%86/#polarsdataframe","title":"\u6848\u4f8b\uff1a\u5e8f\u5217\u5316 &amp; \u8f6c\u5316\u4e3apolars\u7684dataframe","text":"<p>\u4e3a\u4e86\u7b80\u5355\u8bf4\u660e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u5728polars\u4e2d\u7684\u4f5c\u7528\uff0c\u6211\u5199\u4e86\u8fd9\u6bb5MWE\u4ee3\u7801\u4ee5\u6f14\u793a\u4e86\u5982\u4f55\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u5386\u53f2\u80a1\u7968\u6570\u636e\u7684\u7ed3\u6784\u4f53\uff0c\u5c06\u6570\u636e\u5e8f\u5217\u5316\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u7136\u540e\u4f7f\u7528 Polars \u5e93\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u6846\u67b6\u5e76\u6253\u5370\u51fa\u6765\u3002\u8fd9\u5bf9\u4e8e\u4ecb\u7ecd\u5982\u4f55\u5904\u7406\u91d1\u878d\u6570\u636e\u4ee5\u53ca\u4f7f\u7528 Rust \u8fdb\u884c\u6570\u636e\u5206\u6790\u975e\u5e38\u6709\u7528\u3002</p> <pre><code>// \u5f15\u5165\u6240\u9700\u7684\u5e93\nuse serde::{Serialize, Deserialize}; // \u7528\u4e8e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\nuse serde_json; // \u7528\u4e8e\u5904\u7406 JSON \u6570\u636e\nuse polars::prelude::*; // \u4f7f\u7528 Polars \u5904\u7406\u6570\u636e\nuse std::io::Cursor; // \u7528\u4e8e\u521b\u5efa\u5185\u5b58\u4e2d\u7684\u6570\u636e\u6d41\n\n// \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u4e2d\u56fdA\u80a1\u7684\u5386\u53f2\u80a1\u7968\u6570\u636e\n#[derive(Debug, Serialize, Deserialize)]\nstruct StockZhAHist {\n    date: String,         // \u65e5\u671f\n    open: f64,            // \u5f00\u76d8\u4ef7\n    close: f64,           // \u6536\u76d8\u4ef7\n    high: f64,            // \u6700\u9ad8\u4ef7\n    low: f64,             // \u6700\u4f4e\u4ef7\n    volume: f64,          // \u4ea4\u6613\u91cf\n    turnover: f64,        // \u6210\u4ea4\u989d\n    amplitude: f64,       // \u632f\u5e45\n    change_rate: f64,     // \u6da8\u8dcc\u5e45\n    change_amount: f64,   // \u6da8\u8dcc\u989d\n    turnover_rate: f64,   // \u6362\u624b\u7387\n}\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u5386\u53f2\u80a1\u7968\u6570\u636e\u7684\u5411\u91cf\n    let data = vec![\n        StockZhAHist { date: \"1996-12-16T00:00:00.000\".to_string(), open: 16.86, close: 16.86, high: 16.86, low: 16.86, volume: 62442.0, turnover: 105277000.0, amplitude: 0.0, change_rate: -10.22, change_amount: -1.92, turnover_rate: 0.87 },\n        StockZhAHist { date: \"1996-12-17T00:00:00.000\".to_string(), open: 15.17, close: 15.17, high: 16.79, low: 15.17, volume: 463675.0, turnover: 718902016.0, amplitude: 9.61, change_rate: -10.02, change_amount: -1.69, turnover_rate: 6.49 },\n        StockZhAHist { date: \"1996-12-18T00:00:00.000\".to_string(), open: 15.23, close: 16.69, high: 16.69, low: 15.18, volume: 445380.0, turnover: 719400000.0, amplitude: 9.95, change_rate: 10.02, change_amount: 1.52, turnover_rate: 6.24 },\n        StockZhAHist { date: \"1996-12-19T00:00:00.000\".to_string(), open: 17.01, close: 16.4, high: 17.9, low: 15.99, volume: 572946.0, turnover: 970124992.0, amplitude: 11.44, change_rate: -1.74, change_amount: -0.29, turnover_rate: 8.03 }\n    ];\n\n    // \u5c06\u5386\u53f2\u80a1\u7968\u6570\u636e\u5e8f\u5217\u5316\u4e3a JSON \u5b57\u7b26\u4e32\u5e76\u6253\u5370\u51fa\u6765\n    let json = serde_json::to_string(&amp;data).unwrap();\n    println!(\"{}\", json);\n\n    // \u4ece JSON \u5b57\u7b26\u4e32\u521b\u5efa Polars \u6570\u636e\u6846\u67b6\n    let df = JsonReader::new(Cursor::new(json))\n        .finish().unwrap();\n\n    // \u6253\u5370 Polars \u6570\u636e\u6846\u67b6\n    println!(\"{:#?}\", df);\n}\n</code></pre> <p>\u8fd4\u56de\u7684 Polars Dataframe\u8868\u683c\uff1a</p> date open close high \u2026 amplitude change_rate change_amount turnover_rate str f64 f64 f64 f64 f64 f64 f64 1996-12-16T00 16.86 16.86 16.86 \u2026 0.0 -10.22 -1.92 0.87 0:00:00.000 1996-12-17T00 15.17 15.17 16.79 \u2026 9.61 -10.02 -1.69 6.49 0:00:00.000 1996-12-18T00 15.23 16.69 16.69 \u2026 9.95 10.02 1.52 6.24 0:00:00.000 1996-12-19T00 17.01 16.4 17.9 \u2026 11.44 -1.74 -0.29 8.03 0:00:00.000"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/","title":"Chapter 24 - \u65f6\u5e8f\u6570\u636e\u5e93Clickhouse","text":"<p>ClickHouse \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5217\u5f0f\u65f6\u5e8f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff08DBMS\uff09\uff0c\u4e13\u4e3a\u9ad8\u6027\u80fd\u548c\u4f4e\u5ef6\u8fdf\u7684\u6570\u636e\u5206\u6790\u800c\u8bbe\u8ba1\u3002\u5b83\u6700\u521d\u7531\u4fc4\u7f57\u65af\u7684\u4e92\u8054\u7f51\u516c\u53f8 Yandex \u5f00\u53d1\uff0c\u7528\u4e8e\u5904\u7406\u6d77\u91cf\u7684\u6570\u636e\u5206\u6790\u5de5\u4f5c\u8d1f\u8f7d\u3002\u4ee5\u4e0b\u662f ClickHouse \u7684\u4e3b\u8981\u7279\u70b9\u548c\u4ecb\u7ecd\uff1a</p> <ol> <li> <p>\u5217\u5f0f\u5b58\u50a8\uff1aClickHouse \u91c7\u7528\u5217\u5f0f\u5b58\u50a8\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5c06\u6570\u636e\u6309\u5217\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\uff0c\u800c\u4e0d\u662f\u6309\u884c\u5b58\u50a8\u3002\u8fd9\u79cd\u5b58\u50a8\u65b9\u5f0f\u5bf9\u4e8e\u6570\u636e\u5206\u6790\u975e\u5e38\u9ad8\u6548\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u67e5\u8be2\u53ea\u8bfb\u53d6\u6240\u9700\u7684\u5217\uff0c\u800c\u4e0d\u5fc5\u8bfb\u53d6\u6574\u4e2a\u884c\u3002\u8fd9\u5bfc\u81f4\u4e86\u66f4\u5feb\u7684\u67e5\u8be2\u6027\u80fd\u548c\u66f4\u5c0f\u7684\u5b58\u50a8\u7a7a\u95f4\u5360\u7528\u3002</p> </li> <li> <p>\u5206\u5e03\u5f0f\u67b6\u6784\uff1aClickHouse \u5177\u6709\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u53ef\u4ee5\u8f7b\u677e\u6269\u5c55\u4ee5\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u96c6\u3002\u5b83\u652f\u6301\u6570\u636e\u5206\u7247\u3001\u5206\u5e03\u5f0f\u590d\u5236\u548c\u8d1f\u8f7d\u5747\u8861\uff0c\u4ee5\u786e\u4fdd\u9ad8\u53ef\u7528\u6027\u548c\u5bb9\u9519\u6027\u3002</p> </li> <li> <p>\u652f\u6301 SQL \u67e5\u8be2\uff1aClickHouse \u652f\u6301\u6807\u51c6\u7684 SQL \u67e5\u8be2\u8bed\u8a00\uff0c\u4f7f\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u719f\u6089\u7684\u67e5\u8be2\u8bed\u6cd5\u6267\u884c\u6570\u636e\u5206\u6790\u64cd\u4f5c\u3002\u5b83\u8fd8\u652f\u6301\u590d\u6742\u7684\u67e5\u8be2\uff0c\u5982\u805a\u5408\u3001\u7a97\u53e3\u51fd\u6570\u548c\u5b50\u67e5\u8be2\u3002</p> </li> <li> <p>\u9ad8\u6027\u80fd\uff1aClickHouse \u4ee5\u67e5\u8be2\u6027\u80fd\u548c\u541e\u5410\u91cf\u4e3a\u91cd\u70b9\u8fdb\u884c\u4e86\u4f18\u5316\u3002\u5b83\u4e13\u4e3a\u5feb\u901f\u7684\u6570\u636e\u5206\u6790\u67e5\u8be2\u800c\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u5728\u6beb\u79d2\u7ea7\u522b\u5185\u5904\u7406\u6570\u5341\u4ebf\u884c\u7684\u6570\u636e\u3002</p> </li> <li> <p>\u5b9e\u65f6\u6570\u636e\u6ce8\u5165\uff1aClickHouse \u652f\u6301\u5b9e\u65f6\u6570\u636e\u6ce8\u5165\uff0c\u5141\u8bb8\u5c06\u65b0\u6570\u636e\u8fc5\u901f\u63d2\u5165\u5230\u8868\u4e2d\uff0c\u5e76\u80fd\u591f\u5728\u4e0d\u505c\u673a\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u6570\u636e\u66f4\u65b0\u3002</p> </li> <li> <p>\u652f\u6301\u591a\u79cd\u6570\u636e\u683c\u5f0f\uff1aClickHouse \u53ef\u4ee5\u5904\u7406\u591a\u79cd\u6570\u636e\u683c\u5f0f\uff0c\u5305\u62ec JSON\u3001CSV\u3001Parquet \u7b49\uff0c\u4f7f\u5176\u80fd\u591f\u4e0e\u5404\u79cd\u6570\u636e\u6e90\u65e0\u7f1d\u96c6\u6210\u3002</p> </li> <li> <p>\u53ef\u6269\u5c55\u6027\uff1aClickHouse \u5177\u6709\u53ef\u6269\u5c55\u6027\uff0c\u53ef\u4ee5\u4e0e\u5176\u4ed6\u5de5\u5177\u548c\u6846\u67b6\uff08\u5982 Apache Kafka\u3001Spark\u3001Presto\uff09\u96c6\u6210\uff0c\u4ee5\u6ee1\u8db3\u5404\u79cd\u6570\u636e\u5904\u7406\u9700\u6c42\u3002</p> </li> <li> <p>\u5f00\u6e90\u548c\u6d3b\u8dc3\u7684\u793e\u533a\uff1aClickHouse \u662f\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u62e5\u6709\u6d3b\u8dc3\u7684\u793e\u533a\u652f\u6301\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u514d\u8d39\u83b7\u53d6\u5e76\u4f7f\u7528\u5b83\uff0c\u5e76\u4e14\u6709\u4e00\u4e2a\u5e9e\u5927\u7684\u5f00\u53d1\u8005\u793e\u533a\uff0c\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u6587\u6863\u548c\u8d44\u6e90\u3002</p> </li> </ol> <p>ClickHouse \u5728\u5927\u6570\u636e\u5206\u6790\u3001\u65e5\u5fd7\u5904\u7406\u3001\u4e8b\u4ef6\u8ffd\u8e2a\u3001\u65f6\u5e8f\u6570\u636e\u5206\u6790\u7b49\u573a\u666f\u4e2d\u5f97\u5230\u4e86\u5e7f\u6cdb\u7684\u5e94\u7528\u3002\u5b83\u7684\u9ad8\u6027\u80fd\u3001\u53ef\u6269\u5c55\u6027\u548c\u5f3a\u5927\u7684\u67e5\u8be2\u529f\u80fd\u4f7f\u5176\u6210\u4e3a\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u7684\u7406\u60f3\u9009\u62e9\u3002\u5982\u679c\u4f60\u9700\u8981\u5904\u7406\u5927\u91cf\u65f6\u5e8f\u6570\u636e\u5e76\u8fdb\u884c\u5feb\u901f\u6570\u636e\u5206\u6790\uff0c\u90a3\u4e48 ClickHouse \u53ef\u80fd\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u4ef7\u503c\u7684\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#241-clickhouse","title":"24.1 \u5b89\u88c5\u548c\u914d\u7f6eClickHouse\u6570\u636e\u5e93","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2411","title":"24.1.1 \u5b89\u88c5","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#ubuntuclickhouse","title":"\u5728Ubuntu\u4e0a\u5b89\u88c5ClickHouse\uff1a","text":"<ol> <li>\u6253\u5f00\u7ec8\u7aef\u5e76\u66f4\u65b0\u5305\u5217\u8868\uff1a</li> </ol> <pre><code>sudo apt update\n</code></pre> <ol> <li>\u5b89\u88c5ClickHouse\u7684APT\u5b58\u50a8\u5e93\uff1a</li> </ol> <pre><code>sudo apt install apt-transport-https ca-certificates dirmngr\nsudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv E0C56BD4\necho \"deb https://repo.clickhouse.tech/deb/stable/ main/\" | sudo tee /etc/apt/sources.list.d/clickhouse.list\n</code></pre> <ol> <li>\u518d\u6b21\u66f4\u65b0\u5305\u5217\u8868\u4ee5\u83b7\u53d6ClickHouse\u5305\uff1a</li> </ol> <pre><code>sudo apt update\n</code></pre> <ol> <li>\u5b89\u88c5ClickHouse Server\uff1a</li> </ol> <pre><code>sudo apt install clickhouse-server\n</code></pre> <ol> <li>\u542f\u52a8ClickHouse\u670d\u52a1\uff1a</li> </ol> <pre><code>sudo service clickhouse-server start\n</code></pre> <ol> <li>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5ClickHouse\u670d\u52a1\u5668\u7684\u72b6\u6001\uff1a</li> </ol> <pre><code>sudo service clickhouse-server status\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#manjaro-arch-linuxclickhouse","title":"\u5728Manjaro / Arch Linux\u4e0a\u5b89\u88c5ClickHouse\uff1a","text":"<ol> <li>\u6253\u5f00\u7ec8\u7aef\u5e76\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5ClickHouse\uff1a</li> </ol> <pre><code>sudo pacman -S clickhouse\n</code></pre> <ol> <li>\u542f\u52a8ClickHouse\u670d\u52a1\uff1a</li> </ol> <pre><code>sudo systemctl start clickhouse-server\n</code></pre> <ol> <li>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5ClickHouse\u670d\u52a1\u5668\u7684\u72b6\u6001\uff1a</li> </ol> <pre><code>sudo systemctl status clickhouse-server\n</code></pre> <p>\u8fd9\u6837ClickHouse\u5c31\u5df2\u7ecf\u5b89\u88c5\u5728\u4f60\u7684Ubuntu\u6216Arch Linux\u7cfb\u7edf\u4e0a\u4e86\uff0c\u5e76\u4e14\u670d\u52a1\u5df2\u542f\u52a8\u3002</p> <p>\u6b64\u65f6\u5982\u679c\u6211\u4eec\u5982\u679c\u8bbf\u95ee\u672c\u5730host\u4e0a\u7684\u8fd9\u4e2a\u7f51\u5740\uff1ahttp://localhost:8123 \uff0c\u4f1a\u770b\u5230\u670d\u52a1\u5668\u8fd4\u56de\u4e86\u4e00\u4e2a'Ok'\u7ed9\u6211\u4eec\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2412-clickhouse","title":"24.1.2 \u914d\u7f6eclickhouse\u7684\u5bc6\u7801","text":"<p>\u8fd8\u662f\u4e0d\u8981\u5fd8\u8bb0\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u5b89\u5168\u662f\u81f3\u5173\u91cd\u8981\u7684\uff0c\u5728ClickHouse\u4e2d\u914d\u7f6e\u5bc6\u7801\u9700\u8981\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u521b\u5efa\u7528\u6237\u548c\u8bbe\u7f6e\u5bc6\u7801\uff1a    \u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u767b\u5f55\u5230ClickHouse\u670d\u52a1\u5668\u4e0a\uff0c\u5e76\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528ClickHouse\u5ba2\u6237\u7aef\u6216\u8005\u901a\u8fc7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6267\u884cSQL\u6765\u5b8c\u6210\u8fd9\u4e00\u6b65\u9aa4\u3002</li> </ol> <p>\u4f7f\u7528ClickHouse\u5ba2\u6237\u7aef\uff1a</p> <pre><code>CREATE USER 'your_username' IDENTIFIED BY 'your_password';\n</code></pre> <p>\u8bf7\u5c06 <code>'your_username'</code> \u66ff\u6362\u4e3a\u6211\u4eec\u8981\u521b\u5efa\u7684\u7528\u6237\u540d\uff0c\u5c06 <code>'your_password'</code> \u66ff\u6362\u4e3a\u7528\u6237\u7684\u5bc6\u7801\u3002</p> <ol> <li>\u5206\u914d\u6743\u9650\uff1a    \u521b\u5efa\u7528\u6237\u540e\uff0c\u9700\u8981\u5206\u914d\u76f8\u5e94\u7684\u6743\u9650\u3002\u901a\u5e38\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>GRANT</code>\u8bed\u53e5\u6765\u4e3a\u7528\u6237\u5206\u914d\u6743\u9650\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c06\u5141\u8bb8\u7528\u6237\u5bf9\u7279\u5b9a\u8868\u6267\u884cSELECT\u64cd\u4f5c\uff1a</li> </ol> <pre><code>GRANT SELECT ON database_name.table_name TO 'your_username';\n</code></pre> <p>\u8fd9\u5c06\u6388\u4e88 <code>'your_username'</code> \u7528\u6237\u5bf9 <code>'database_name.table_name'</code> \u8868\u7684SELECT\u6743\u9650\u3002\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4e3a\u7528\u6237\u5206\u914d\u4e0d\u540c\u7684\u6743\u9650\u3002</p> <ol> <li>\u914d\u7f6eClickHouse\u670d\u52a1\uff1a    \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u9700\u8981\u914d\u7f6eClickHouse\u670d\u52a1\u5668\u4ee5\u542f\u7528\u8eab\u4efd\u9a8c\u8bc1\u3002\u5728ClickHouse\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u627e\u5230\u5e76\u7f16\u8f91<code>users.xml</code>\u6587\u4ef6\u3002\u901a\u5e38\uff0c\u8be5\u6587\u4ef6\u7684\u4f4d\u7f6e\u662f<code>/etc/clickhouse-server/users.xml</code>\u3002\u5728\u8be5\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u521a\u521a\u521b\u5efa\u7684\u7528\u6237\u6dfb\u52a0\u76f8\u5e94\u7684\u914d\u7f6e\u3002</li> </ol> <pre><code>&lt;yandex&gt;\n    &lt;profiles&gt;\n        &lt;!-- \u6dfb\u52a0\u7528\u6237\u914d\u7f6e --&gt;\n        &lt;your_username&gt;\n            &lt;password&gt;your_password&lt;/password&gt;\n            &lt;networks&gt;\n                &lt;ip&gt;::/0&lt;/ip&gt; &lt;!-- \u5141\u8bb8\u6240\u6709IP\u8fde\u63a5 --&gt;\n            &lt;/networks&gt;\n        &lt;/your_username&gt;\n    &lt;/profiles&gt;\n&lt;/yandex&gt;\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u793a\u4f8b\u914d\u7f6e\uff0c\u6211\u4eec\u9700\u8981\u5c06 <code>'your_username'</code> \u548c <code>'your_password'</code> \u66ff\u6362\u4e3a\u5b9e\u9645\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\u6b64\u5916\uff0c\u4e0a\u8ff0\u914d\u7f6e\u5141\u8bb8\u6765\u81ea\u6240\u6709IP\u5730\u5740\u7684\u8fde\u63a5\uff0c\u8fd9\u53ef\u80fd\u4e0d\u662f\u6700\u5b89\u5168\u7684\u914d\u7f6e\u3002\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9650\u5236\u8fde\u63a5\u7684IP\u5730\u5740\u8303\u56f4\u3002</p> <ol> <li>\u91cd\u542fClickHouse\u670d\u52a1\uff1a    \u6700\u540e\uff0c\u91cd\u65b0\u542f\u52a8ClickHouse\u670d\u52a1\u5668\u4ee5\u4f7f\u914d\u7f6e\u66f4\u6539\u751f\u6548\uff1a</li> </ol> <pre><code>sudo systemctl restart clickhouse-server\n</code></pre> <p>\u8fd9\u4f1a\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u5e76\u5e94\u7528\u65b0\u7684\u7528\u6237\u548c\u6743\u9650\u8bbe\u7f6e\u3002</p> <p>\u5b8c\u6210\u4e0a\u8ff0\u6b65\u9aa4\u540e\uff0c\u6211\u4eec\u7684ClickHouse\u670d\u52a1\u5668\u5c06\u914d\u7f6e\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\uff0c\u5e76\u4e14\u53ea\u6709\u5177\u6709\u6b63\u786e\u51ed\u636e\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95ee\u76f8\u5e94\u7684\u6570\u636e\u5e93\u548c\u8868\u3002\u8bf7\u786e\u4fdd\u5bc6\u7801\u5f3a\u5ea6\u8db3\u591f\uff0c\u4ee5\u589e\u5f3a\u5b89\u5168\u6027\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#242-clickhouse-for-rust-clickhousers","title":"24.2 ClickHouse for Rust: clickhouse.rs\u5e93","text":"<p><code>clickhouse.rs</code> \u662f\u4e00\u4e2a\u7f51\u53cb Paul Loyd \u5f00\u53d1\u7684\u6bd4\u8f83\u6210\u719f\u7684\u7b2c\u4e09\u65b9 Rust \u5e93\uff0c\u65e8\u5728\u4e0e ClickHouse \u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\uff0c\u63d0\u4f9b\u4e86\u4fbf\u6377\u7684\u67e5\u8be2\u6267\u884c\u3001\u6570\u636e\u5904\u7406\u548c\u8fde\u63a5\u7ba1\u7406\u529f\u80fd\u3002\u4ee5\u4e0b\u662f\u8be5\u5e93\u7684\u4e00\u4e9b\u4e3b\u8981\u7279\u70b9\uff1a</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_1","title":"\u4e3b\u8981\u7279\u70b9","text":"<ol> <li>\u5f02\u6b65\u652f\u6301\uff1a<code>clickhouse.rs</code> \u5229\u7528\u4e86 Rust \u7684\u5f02\u6b65\u7f16\u7a0b\u80fd\u529b\uff0c\u975e\u5e38\u9002\u5408\u9700\u8981\u975e\u963b\u585e\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u9ad8\u6027\u80fd\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u7c7b\u578b\u5316\u63a5\u53e3\uff1a\u8be5\u5e93\u63d0\u4f9b\u4e86\u5f3a\u7c7b\u578b\u63a5\u53e3\uff0c\u4f7f\u6570\u636e\u5e93\u4ea4\u4e92\u66f4\u52a0\u5b89\u5168\u548c\u53ef\u9884\u6d4b\uff0c\u51cf\u5c11\u8fd0\u884c\u65f6\u9519\u8bef\u5e76\u63d0\u9ad8\u4ee3\u7801\u7684\u5065\u58ee\u6027\u3002</li> <li>\u652f\u6301 ClickHouse \u7279\u6027\uff1a\u5e93\u652f\u6301\u591a\u79cd ClickHouse \u7279\u6027\uff0c\u5305\u62ec\u6279\u91cf\u63d2\u5165\u3001\u590d\u6742\u67e5\u8be2\u548c\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u3002</li> <li>\u8fde\u63a5\u6c60\uff1a<code>clickhouse.rs</code> \u5305\u542b\u8fde\u63a5\u6c60\u529f\u80fd\uff0c\u5728\u9ad8\u8d1f\u8f7d\u573a\u666f\u4e0b\u5b9e\u73b0\u9ad8\u6548\u7684\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\u3002</li> <li>\u6613\u7528\u6027\uff1a\u8be5\u5e93\u8bbe\u8ba1\u7b80\u6d01\u660e\u4e86\u7684 API\uff0c\u4f7f\u5404\u7ea7 Rust \u5f00\u53d1\u8005\u90fd\u80fd\u8f7b\u677e\u4e0a\u624b\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_2","title":"\u5b89\u88c5","text":"<p>\u8981\u4f7f\u7528 <code>clickhouse.rs</code>\uff0c\u9700\u8981\u5728 <code>Cargo.toml</code> \u4e2d\u6dfb\u52a0\u4f9d\u8d56\u9879\uff1a</p> <pre><code>[dependencies]\nclickhouse = \"0.11\"  # \u8bf7\u786e\u4fdd\u4f7f\u7528\u6700\u65b0\u7248\u672c\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_3","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u4ee5\u4e0b\u662f\u4f7f\u7528 <code>clickhouse.rs</code> \u8fde\u63a5 ClickHouse \u6570\u636e\u5e93\u5e76\u6267\u884c\u67e5\u8be2\u7684\u7b80\u5355\u793a\u4f8b\uff1a</p> <pre><code>use clickhouse::{Client, Row};\nuse futures::stream::StreamExt;\nuse tokio;\n\n#[tokio::main]\nasync fn main() {\n    // \u521d\u59cb\u5316\u5ba2\u6237\u7aef\n    let client = Client::default()\n        .with_url(\"http://localhost:8123\")\n        .with_database(\"default\");\n\n    // \u6267\u884c\u67e5\u8be2\u793a\u4f8b\n    let mut cursor = client.query(\"SELECT number FROM system.numbers LIMIT 10\").fetch().unwrap();\n    while let Some(row) = cursor.next().await {\n        let number: u64 = row.unwrap().get(\"number\").unwrap();\n        println!(\"{}\", number);\n    }\n}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_4","title":"\u9519\u8bef\u5904\u7406","text":"<p>\u8be5\u5e93\u4f7f\u7528\u6807\u51c6\u7684 Rust \u9519\u8bef\u5904\u7406\u673a\u5236\uff0c\u4f7f\u5f97\u7ba1\u7406\u6f5c\u5728\u95ee\u9898\u53d8\u5f97\u7b80\u5355\u3002\u4ee5\u4e0b\u662f\u5904\u7406\u67e5\u8be2\u6267\u884c\u9519\u8bef\u7684\u793a\u4f8b\uff1a</p> <pre><code>use clickhouse::{Client, Error};\nuse tokio;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;(), Error&gt; {\n    let client = Client::default().with_url(\"http://localhost:8123\");\n\n    let result = client.query(\"SELECT number FROM system.numbers LIMIT 10\")\n        .fetch()\n        .await;\n\n    match result {\n        Ok(mut cursor) =&gt; {\n            while let Some(row) = cursor.next().await {\n                let number: u64 = row.unwrap().get(\"number\").unwrap();\n                println!(\"{}\", number);\n            }\n        }\n        Err(e) =&gt; eprintln!(\"\u67e5\u8be2\u6267\u884c\u9519\u8bef: {:?}\", e),\n    }\n\n    Ok(())\n}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_5","title":"\u9ad8\u7ea7\u7528\u6cd5","text":"<p>\u5bf9\u4e8e\u6279\u91cf\u63d2\u5165\u6216\u5904\u7406\u7279\u5b9a\u6570\u636e\u7c7b\u578b\u7b49\u590d\u6742\u573a\u666f\uff0c\u8bf7\u53c2\u9605\u5e93\u7684\u6587\u6863\u548c\u793a\u4f8b\u3002\u8be5\u5e93\u652f\u6301\u591a\u79cd ClickHouse \u7279\u6027\uff0c\u53ef\u4ee5\u9002\u5e94\u5404\u79cd\u4f7f\u7528\u573a\u666f\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#243-clickhouse","title":"24.3 \u5907\u4efd ClickHouse \u6570\u636e\u5e93\u7684\u6559\u7a0b","text":"<p>\u5907\u4efd ClickHouse \u6570\u636e\u5e93\u5bf9\u4e8e\u6570\u636e\u5b89\u5168\u548c\u4e1a\u52a1\u8fde\u7eed\u6027\u81f3\u5173\u91cd\u8981\u3002\u901a\u8fc7\u5b9a\u671f\u5907\u4efd\uff0c\u53ef\u4ee5\u5728\u6570\u636e\u4e22\u5931\u3001\u786c\u4ef6\u6545\u969c\u6216\u4eba\u4e3a\u9519\u8bef\u65f6\u5feb\u901f\u6062\u590d\uff0c\u786e\u4fdd\u6570\u636e\u5b8c\u6574\u6027\u548c\u53ef\u7528\u6027\u3002\u6b64\u5916\uff0c\u5907\u4efd\u6709\u52a9\u4e8e\u5728\u7cfb\u7edf\u5347\u7ea7\u6216\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u4fdd\u62a4\u6570\u636e\uff0c\u907f\u514d\u610f\u5916\u635f\u5931\u3002\u5907\u4efd\u8fd8\u652f\u6301\u589e\u91cf\u5907\u4efd\u548c\u538b\u7f29\uff0c\u4f18\u5316\u5b58\u50a8\u7a7a\u95f4\u548c\u5907\u4efd\u901f\u5ea6\uff0c\u4e3a\u4f01\u4e1a\u63d0\u4f9b\u7075\u6d3b\u3001\u9ad8\u6548\u7684\u6570\u636e\u7ba1\u7406\u89e3\u51b3\u65b9\u6848\u3002\u901a\u8fc7\u826f\u597d\u7684\u5907\u4efd\u7b56\u7565\uff0c\u53ef\u4ee5\u5927\u5927\u964d\u4f4e\u6570\u636e\u4e22\u5931\u98ce\u9669\uff0c\u4fdd\u969c\u4e1a\u52a1\u7a33\u5b9a\u8fd0\u884c\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_6","title":"\u914d\u7f6e\u5907\u4efd\u76ee\u7684\u5730","text":"<p>\u9996\u5148\uff0c\u5728 <code>/etc/clickhouse-server/config.d/backup_disk.xml</code> \u4e2d\u6dfb\u52a0\u5907\u4efd\u76ee\u7684\u5730\u914d\u7f6e\uff1a</p> <pre><code>&lt;clickhouse&gt;\n    &lt;storage_configuration&gt;\n        &lt;disks&gt;\n            &lt;backups&gt;\n                &lt;type&gt;local&lt;/type&gt;\n                &lt;path&gt;/backups/&lt;/path&gt;\n            &lt;/backups&gt;\n        &lt;/disks&gt;\n    &lt;/storage_configuration&gt;\n    &lt;backups&gt;\n        &lt;allowed_disk&gt;backups&lt;/allowed_disk&gt;\n        &lt;allowed_path&gt;/backups/&lt;/allowed_path&gt;\n    &lt;/backups&gt;\n&lt;/clickhouse&gt;\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_7","title":"\u5907\u4efd\u6574\u4e2a\u6570\u636e\u5e93","text":"<p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u6574\u4e2a\u6570\u636e\u5e93\u5907\u4efd\u5230\u6307\u5b9a\u78c1\u76d8\uff1a</p> <pre><code>BACKUP DATABASE my_database TO Disk('backups', 'database_backup.zip');\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_8","title":"\u6062\u590d\u6574\u4e2a\u6570\u636e\u5e93","text":"<p>\u4ece\u5907\u4efd\u6587\u4ef6\u4e2d\u6062\u590d\u6574\u4e2a\u6570\u636e\u5e93\uff1a</p> <pre><code>RESTORE DATABASE my_database FROM Disk('backups', 'database_backup.zip');\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_9","title":"\u5907\u4efd\u8868","text":"<p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u8868\u5907\u4efd\u5230\u6307\u5b9a\u78c1\u76d8\uff1a</p> <pre><code>BACKUP TABLE my_database.my_table TO Disk('backups', 'table_backup.zip');\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_10","title":"\u6062\u590d\u8868","text":"<p>\u4ece\u5907\u4efd\u6587\u4ef6\u4e2d\u6062\u590d\u8868\uff1a</p> <pre><code>RESTORE TABLE my_database.my_table FROM Disk('backups', 'table_backup.zip');\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_11","title":"\u589e\u91cf\u5907\u4efd","text":"<p>\u6307\u5b9a\u57fa\u7840\u5907\u4efd\u8fdb\u884c\u589e\u91cf\u5907\u4efd\uff1a</p> <pre><code>BACKUP DATABASE my_database TO Disk('backups', 'incremental_backup.zip') SETTINGS base_backup = Disk('backups', 'database_backup.zip');\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_12","title":"\u4f7f\u7528\u5bc6\u7801\u4fdd\u62a4\u5907\u4efd","text":"<p>\u5907\u4efd\u6587\u4ef6\u4f7f\u7528\u5bc6\u7801\u4fdd\u62a4\uff1a</p> <pre><code>BACKUP DATABASE my_database TO Disk('backups', 'protected_backup.zip') SETTINGS password='yourpassword';\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_13","title":"\u538b\u7f29\u8bbe\u7f6e","text":"<p>\u6307\u5b9a\u538b\u7f29\u65b9\u6cd5\u548c\u7ea7\u522b\uff1a</p> <pre><code>BACKUP DATABASE my_database TO Disk('backups', 'compressed_backup.zip') SETTINGS compression_method='lzma', compression_level=3;\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_14","title":"\u6062\u590d\u7279\u5b9a\u5206\u533a","text":"<p>\u4ece\u5907\u4efd\u4e2d\u6062\u590d\u7279\u5b9a\u5206\u533a\uff1a</p> <pre><code>RESTORE TABLE my_database.my_table PARTITIONS 'partition_id' FROM Disk('backups', 'table_backup.zip');\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u8003 ClickHouse \u6587\u6863\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#244-clickhouse","title":"24.4  \u5173\u4e8eClickhouse\u7684\u4f18\u5316","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u5904\u7406\u5927\u91cf\u5b9e\u65f6\u6570\u636e\u81f3\u5173\u91cd\u8981\u3002ClickHouse\u4f5c\u4e3a\u4e00\u6b3e\u9ad8\u6027\u80fd\u5217\u5f0f\u6570\u636e\u5e93\uff0c\u63d0\u4f9b\u4e86\u9ad8\u6548\u7684\u67e5\u8be2\u548c\u5b58\u50a8\u65b9\u6848\u3002\u7136\u800c\uff0c\u4e3a\u4e86\u5145\u5206\u53d1\u6325\u5176\u6027\u80fd\uff0c\u5fc5\u987b\u5bf9\u5176\u8fdb\u884c\u4f18\u5316\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_15","title":"\u786c\u4ef6\u4f18\u5316","text":"<ol> <li>\u5b58\u50a8\u8bbe\u5907\uff1a\u9009\u62e9\u9ad8\u6027\u80fd SSD\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6570\u636e\u8bfb\u53d6\u548c\u5199\u5165\u901f\u5ea6\u3002</li> <li>\u5185\u5b58\uff1a\u589e\u52a0\u5185\u5b58\u5bb9\u91cf\uff0c\u6709\u52a9\u4e8e\u66f4\u5feb\u5730\u5904\u7406\u5927\u91cf\u6570\u636e\u3002</li> <li>\u7f51\u7edc\uff1a\u4f18\u5316\u7f51\u7edc\u5e26\u5bbd\u548c\u5ef6\u8fdf\uff0c\u786e\u4fdd\u5206\u5e03\u5f0f\u96c6\u7fa4\u95f4\u7684\u6570\u636e\u4f20\u8f93\u6548\u7387\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_16","title":"\u914d\u7f6e\u4f18\u5316","text":"<ol> <li>\u8bbe\u7f6e\u5408\u9002\u7684\u5206\u533a\u7b56\u7565\uff1a\u6839\u636e\u65f6\u95f4\u6216\u5176\u4ed6\u5173\u952e\u7ef4\u5ea6\u5206\u533a\uff0c\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002</li> <li>\u5408\u5e76\u8bbe\u7f6e\uff1a\u914d\u7f6e\u5408\u9002\u7684 <code>merge_tree</code> \u8bbe\u7f6e\uff0c\u4f18\u5316\u6570\u636e\u5408\u5e76\u8fc7\u7a0b\uff0c\u51cf\u5c11\u788e\u7247\u3002</li> <li>\u7f13\u5b58\u548c\u5185\u5b58\u8bbe\u7f6e\uff1a\u8c03\u6574 <code>mark_cache_size</code> \u548c <code>max_memory_usage</code> \u7b49\u53c2\u6570\uff0c\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\u548c\u5185\u5b58\u4f7f\u7528\u6548\u7387\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_17","title":"\u67e5\u8be2\u4f18\u5316","text":"<ol> <li>\u7d22\u5f15\uff1a\u5229\u7528\u4e3b\u952e\u548c\u4e8c\u7ea7\u7d22\u5f15\uff0c\u52a0\u901f\u67e5\u8be2\u3002</li> <li>\u5e76\u884c\u67e5\u8be2\uff1a\u542f\u7528 <code>max_threads</code> \u53c2\u6570\uff0c\u5145\u5206\u5229\u7528\u591a\u6838 CPU \u5e76\u884c\u5904\u7406\u67e5\u8be2\u3002</li> <li>\u7269\u5316\u89c6\u56fe\uff1a\u9884\u8ba1\u7b97\u5e38\u7528\u67e5\u8be2\u7ed3\u679c\uff0c\u51cf\u5c11\u5b9e\u65f6\u8ba1\u7b97\u5f00\u9500\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_18","title":"\u6570\u636e\u6a21\u578b\u4f18\u5316","text":"<ol> <li>\u5217\u5b58\u50a8\u8bbe\u8ba1\uff1a\u5c3d\u91cf\u5c06\u9891\u7e41\u67e5\u8be2\u7684\u5217\u5b58\u50a8\u5728\u4e00\u8d77\uff0c\u51cf\u5c11 I/O \u5f00\u9500\u3002</li> <li>\u538b\u7f29\u7b97\u6cd5\uff1a\u9009\u62e9\u5408\u9002\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u5982 <code>LZ4</code> \u6216 <code>ZSTD</code>\uff0c\u5728\u538b\u7f29\u7387\u548c\u6027\u80fd\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_19","title":"\u5b9e\u8df5\u6848\u4f8b","text":"<p>\u4ee5\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u5e02\u573a\u6570\u636e\u5206\u6790\u4e3a\u4f8b\uff0c\u4f18\u5316 ClickHouse \u7684\u5173\u952e\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u5206\u533a\u7b56\u7565\uff1a\u6309\u65e5\u671f\u5206\u533a\uff0c\u4f7f\u67e5\u8be2\u7279\u5b9a\u65f6\u95f4\u6bb5\u6570\u636e\u65f6\u66f4\u9ad8\u6548\u3002</li> <li>\u7269\u5316\u89c6\u56fe\uff1a\u9884\u8ba1\u7b97\u6bcf\u65e5\u4ea4\u6613\u91cf\u3001\u4ef7\u683c\u6ce2\u52a8\u7b49\u5173\u952e\u6307\u6807\uff0c\u51cf\u5c11\u5b9e\u65f6\u8ba1\u7b97\u8d1f\u62c5\u3002</li> <li>\u5e76\u884c\u67e5\u8be2\uff1a\u8c03\u6574 <code>max_threads</code>\uff0c\u786e\u4fdd\u67e5\u8be2\u65f6\u5145\u5206\u5229\u7528\u670d\u52a1\u5668\u591a\u6838\u8d44\u6e90\u3002</li> </ol>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_20","title":"\u76d1\u63a7\u548c\u7ef4\u62a4","text":"<ol> <li>\u76d1\u63a7\u5de5\u5177\uff1a\u4f7f\u7528 ClickHouse \u63d0\u4f9b\u7684 <code>system</code> \u8868\u76d1\u63a7\u7cfb\u7edf\u6027\u80fd\u548c\u67e5\u8be2\u6548\u7387\u3002</li> <li>\u5b9a\u671f\u7ef4\u62a4\uff1a\u5b9a\u671f\u68c0\u67e5\u5e76\u4f18\u5316\u5206\u533a\u548c\u7d22\u5f15\uff0c\u9632\u6b62\u6027\u80fd\u4e0b\u964d\u3002</li> </ol> <p>\u901a\u8fc7\u5408\u7406\u7684\u786c\u4ef6\u914d\u7f6e\u3001\u4f18\u5316\u67e5\u8be2\u548c\u6570\u636e\u6a21\u578b\u8bbe\u8ba1\uff0c\u4ee5\u53ca\u6301\u7eed\u7684\u76d1\u63a7\u548c\u7ef4\u62a4\uff0cClickHouse \u53ef\u4ee5\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u4e2d\u63d0\u4f9b\u5353\u8d8a\u7684\u6027\u80fd\u548c\u53ef\u9760\u6027\uff0c\u652f\u6301\u9ad8\u9891\u4ea4\u6613\u3001\u5b9e\u65f6\u6570\u636e\u5206\u6790\u7b49\u5e94\u7528\u573a\u666f\u3002\u4ee5\u4e0b\u6211\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u4f18\u5316\u5b9e\u4f8b\uff1a</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2441","title":"24.4.1. \u786c\u4ef6\u914d\u7f6e","text":"<pre><code>&lt;clickhouse&gt;\n    &lt;storage_configuration&gt;\n        &lt;disks&gt;\n            &lt;default&gt;\n                &lt;path&gt;/var/lib/clickhouse/&lt;/path&gt;\n            &lt;/default&gt;\n            &lt;ssd&gt;\n                &lt;type&gt;local&lt;/type&gt;\n                &lt;path&gt;/mnt/ssd/&lt;/path&gt;\n            &lt;/ssd&gt;\n        &lt;/disks&gt;\n    &lt;/storage_configuration&gt;\n&lt;/clickhouse&gt;\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2442","title":"24.4.2. \u521b\u5efa\u5206\u533a\u8868","text":"<pre><code>CREATE TABLE market_data (\n    date Date,\n    symbol String,\n    price Float64,\n    volume UInt64\n) ENGINE = MergeTree()\nPARTITION BY toYYYYMM(date)\nORDER BY (symbol, date);\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2443","title":"24.4.3. \u4f7f\u7528\u7269\u5316\u89c6\u56fe","text":"<pre><code>CREATE MATERIALIZED VIEW market_summary\nENGINE = AggregatingMergeTree()\nPARTITION BY toYYYYMM(date)\nORDER BY (symbol, date)\nAS\nSELECT\n    symbol,\n    toYYYYMM(date) as month,\n    avg(price) as avg_price,\n    sum(volume) as total_volume\nFROM market_data\nGROUP BY symbol, month;\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2444","title":"24.4.4. \u5e76\u884c\u67e5\u8be2","text":"<pre><code>SET max_threads = 8;\n\nSELECT\n    symbol,\n    avg(price) as avg_price\nFROM market_data\nWHERE date &gt;= '2023-01-01' AND date &lt;= '2023-12-31'\nGROUP BY symbol;\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2445","title":"24.4.5. \u538b\u7f29\u7b97\u6cd5","text":"<pre><code>CREATE TABLE compressed_data (\n    date Date,\n    symbol String,\n    price Float64,\n    volume UInt64\n) ENGINE = MergeTree()\nPARTITION BY toYYYYMM(date)\nORDER BY (symbol, date)\nSETTINGS index_granularity = 8192,\n    compress_on_write = 1,\n    compression = 'lz4';\n</code></pre> <p>\u901a\u8fc7\u5408\u7406\u7684\u786c\u4ef6\u914d\u7f6e\u3001\u4f18\u5316\u67e5\u8be2\u548c\u6570\u636e\u6a21\u578b\u8bbe\u8ba1\uff0c\u4ee5\u53ca\u6301\u7eed\u7684\u76d1\u63a7\u548c\u7ef4\u62a4\uff0cClickHouse \u53ef\u4ee5\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u4e2d\u63d0\u4f9b\u5353\u8d8a\u7684\u6027\u80fd\u548c\u53ef\u9760\u6027\uff0c\u652f\u6301\u9ad8\u9891\u4ea4\u6613\u3001\u5b9e\u65f6\u6570\u636e\u5206\u6790\u7b49\u5e94\u7528\u573a\u666f\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#1-rustclickhouse","title":"\u6848\u4f8b1 \u901a\u8fc7Rust\u811a\u672c\u5728Clickhouse\u6570\u636e\u5e93\u4e2d\u5efa\u8868\u3001\u5220\u8868\u3001\u67e5\u8be2","text":"<p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u4e2d\uff0c\u4f7f\u7528 Rust \u811a\u672c\u7ba1\u7406 ClickHouse \u6570\u636e\u5e93\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u6548\u7684\u6570\u636e\u5904\u7406\u548c\u7ba1\u7406\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u57fa\u672c\u6848\u4f8b \u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_21","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>\u9996\u5148\uff0c\u786e\u4fdd\u5728\u4f60\u7684 <code>Cargo.toml</code> \u4e2d\u6dfb\u52a0 <code>clickhouse</code> \u4f9d\u8d56\uff1a</p> <pre><code>[dependencies]\nclickhouse = { default-features = false, version = \"0.11.6\" }\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#clickhouse","title":"\u521b\u5efa ClickHouse \u5ba2\u6237\u7aef","text":"<p>\u5b9a\u4e49\u5e76\u521d\u59cb\u5316\u4e00\u4e2a ClickHouse \u5ba2\u6237\u7aef\uff1a</p> <pre><code>use clickhouse::{Client, Row};\nuse lazy_static::lazy_static;\n\nlazy_static! {\n    pub static ref CLICKHOUSE_CLIENT: ClickHouseClient = ClickHouseClient::new();\n}\n\npub struct ClickHouseClient {\n    pub client: Client,\n}\n\nimpl ClickHouseClient {\n    pub fn new() -&gt; Self {\n        let client = Client::default().with_url(\"http://localhost:8123\").with_database(\"default\");\n        ClickHouseClient { client }\n    }\n}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_22","title":"\u521b\u5efa\u8868","text":"<p>\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8868 <code>market_data</code>\uff1a</p> <pre><code>impl ClickHouseClient {\n    pub async fn create_table(&amp;self) -&gt; Result&lt;(), clickhouse::error::Error&gt; {\n        let query = r#\"\n            CREATE TABLE market_data (\n                date Date,\n                symbol String,\n                price Float64,\n                volume UInt64\n            ) ENGINE = MergeTree()\n            PARTITION BY date\n            ORDER BY (symbol, date)\n        \"#;\n\n        self.client.query(query).execute().await\n    }\n}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_23","title":"\u5220\u9664\u8868","text":"<p>\u5220\u9664\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u8868\uff1a</p> <pre><code>impl ClickHouseClient {\n    pub async fn drop_table(&amp;self, table_name: &amp;str) -&gt; Result&lt;(), clickhouse::error::Error&gt; {\n        let query = format!(\"DROP TABLE IF EXISTS {}\", table_name);\n        self.client.query(&amp;query).execute().await\n    }\n}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_24","title":"\u67e5\u8be2\u6570\u636e","text":"<p>\u4ece\u8868\u4e2d\u67e5\u8be2\u6570\u636e\uff1a</p> <pre><code>#[derive(Debug, Serialize, Deserialize, Row)]\npub struct MarketData {\n    pub date: String,\n    pub symbol: String,\n    pub price: f64,\n    pub volume: u64,\n}\n\nimpl ClickHouseClient {\n    pub async fn query_data(&amp;self) -&gt; Result&lt;Vec&lt;MarketData&gt;, clickhouse::error::Error&gt; {\n        let query = \"SELECT * FROM market_data LIMIT 10\";\n        let result = self.client.query(query).fetch_all::&lt;MarketData&gt;().await?;\n        Ok(result)\n    }\n}\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_25","title":"\u793a\u4f8b\u7528\u6cd5","text":"<p>\u5b8c\u6574\u7684\u793a\u4f8b\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u529f\u80fd\uff1a</p> <pre><code>#[tokio::main]\nasync fn main() -&gt; Result&lt;(), clickhouse::error::Error&gt; {\n    let client = ClickHouseClient::new();\n\n    // \u521b\u5efa\u8868\n    client.create_table().await?;\n    println!(\"Table created successfully.\");\n\n    // \u67e5\u8be2\u6570\u636e\n    let data = client.query_data().await?;\n    for row in data {\n        println!(\"{:?}\", row);\n    }\n\n    // \u5220\u9664\u8868\n    client.drop_table(\"market_data\").await?;\n    println!(\"Table dropped successfully.\");\n\n    Ok(())\n}\n</code></pre> <p>\u901a\u8fc7\u8fd9\u4e2a\u57fa\u672c\u6559\u7a0b\uff0c\u4f60\u53ef\u4ee5\u5728 Rust \u811a\u672c\u4e2d\u5b9e\u73b0\u5bf9 ClickHouse \u6570\u636e\u5e93\u7684\u57fa\u672c\u7ba1\u7406\u64cd\u4f5c\u3002\u8fd9\u4e9b\u793a\u4f8b\u4ee3\u7801\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u9700\u6c42\u8fdb\u884c\u6269\u5c55\u548c\u4f18\u5316\uff0c\u4ee5\u6ee1\u8db3\u91cf\u5316\u91d1\u878d\u9886\u57df\u7684\u590d\u6742\u6570\u636e\u5904\u7406\u9700\u6c42\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#2-sql","title":"\u6848\u4f8b2 \u521b\u5efa\u5e03\u6797\u5e26\u8868\u7684 SQL \u811a\u672c\u793a\u4f8b","text":"<p>\u672c\u6848\u4f8b\u5c55\u793a\u5982\u4f55\u5229\u7528 Rust \u811a\u672c\u4e0e ClickHouse \u4ea4\u4e92\uff0c\u8ba1\u7b97\u5e03\u6797\u5e26 (Bollinger Bands) \u548c\u5176\u4ed6\u6280\u672f\u6307\u6807\uff0c\u5e2e\u52a9\u91d1\u878d\u5206\u6790\u5e08\u548c\u91cf\u5316\u4ea4\u6613\u5458\u4f18\u5316\u4ed6\u4eec\u7684\u4ea4\u6613\u7b56\u7565\u3002</p> <pre><code>-- \u521b\u5efa\u540d\u4e3a AG2305_TEST \u7684\u8868\uff0c\u4f7f\u7528 MergeTree \u5f15\u64ce\nCREATE TABLE AG2305_TEST\n    ENGINE = MergeTree()\n        ORDER BY (minute, mean_lastprice) -- \u6309 minute \u548c mean_lastprice \u6392\u5e8f\nAS\n-- \u4ece\u5b50\u67e5\u8be2\u4e2d\u9009\u62e9\u5b57\u6bb5\nSELECT outer_query.minute,\n       CAST(outer_query.mean_lastprice AS Float32) AS mean_lastprice, -- \u5c06 mean_lastprice \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(sma AS Float32)                        AS sma,           -- \u5c06 sma \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(stddev AS Float32)                     AS stddev,        -- \u5c06 stddev \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(upper AS Float32)                      AS upper,         -- \u5c06 upper \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(lower AS Float32)                      AS lower,         -- \u5c06 lower \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(super_upper AS Float32)                AS super_upper,   -- \u5c06 super_upper \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(super_lower AS Float32)                AS super_lower,   -- \u5c06 super_lower \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(ssuper_upper AS Float32)               AS ssuper_upper,  -- \u5c06 ssuper_upper \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CAST(ssuper_lower AS Float32)               AS ssuper_lower,  -- \u5c06 ssuper_lower \u8f6c\u6362\u4e3a Float32 \u7c7b\u578b\n       CASE\n           -- \u6839\u636e\u4ef7\u683c\u7a81\u7834\u7684\u4e0d\u540c\u60c5\u51b5\u8d4b\u503c bollinger_band_status\n           WHEN super_upper &gt; mean_lastprice AND mean_lastprice &gt; upper THEN 1 -- \u5411\u4e0a\u7a81\u78342\u4e2a\u6807\u51c6\u5dee\n           WHEN super_lower &lt; mean_lastprice AND mean_lastprice &lt; lower THEN 2 -- \u5411\u4e0b\u7a81\u78342\u4e2a\u6807\u51c6\u5dee\n           WHEN ssuper_upper &gt; mean_lastprice AND mean_lastprice &gt; super_upper THEN 3 -- \u5411\u4e0a\u7a81\u78344\u4e2a\u6807\u51c6\u5dee\n           WHEN ssuper_lower &lt; mean_lastprice AND mean_lastprice &lt; super_lower THEN 4 -- \u5411\u4e0b\u7a81\u78344\u4e2a\u6807\u51c6\u5dee\n           WHEN mean_lastprice &gt; ssuper_upper THEN 5 -- \u5411\u4e0a\u7a81\u78345\u4e2a\u6807\u51c6\u5dee\n           WHEN mean_lastprice &lt; ssuper_lower AND upper != lower THEN 6 -- \u5411\u4e0b\u7a81\u78345\u4e2a\u6807\u51c6\u5dee\n           ELSE 0 -- \u5728\u5e03\u6797\u5e26\u5185\u53ca\u5176\u4ed6\u60c5\u51b5\n       END AS bollinger_band_status\nFROM (\n    -- \u4ece\u5185\u5c42\u67e5\u8be2\u4e2d\u9009\u62e9\u5b57\u6bb5\n    SELECT subquery.minute,\n           subquery.mean_lastprice,\n           subquery.start_time,\n           -- \u8ba1\u7b97\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf (SMA)\n           avg(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS sma,\n           -- \u8ba1\u7b97\u6807\u51c6\u5dee\n           stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS stddev,\n           -- \u8ba1\u7b97\u5e03\u6797\u5e26\u4e0a\u4e0b\u8f68\n           sma + 1.5 * stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS upper,\n           sma - 1.5 * stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS lower,\n           -- \u8ba1\u7b97\u66f4\u9ad8\u548c\u66f4\u4f4e\u7684\u5e03\u6797\u5e26\u8f68\u9053\n           sma + 3 * stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS super_upper,\n           sma - 3 * stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS super_lower,\n           sma + 4 * stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS ssuper_upper,\n           sma - 4 * stddevPop(subquery.mean_lastprice)\n               OVER (PARTITION BY subquery.start_time ORDER BY subquery.minute ASC) AS ssuper_lower\n    FROM (\n        -- \u6700\u5185\u5c42\u67e5\u8be2\uff0c\u6309\u5206\u949f\u805a\u5408\u6570\u636e\u5e76\u8ba1\u7b97\u5747\u4ef7\n        SELECT toStartOfMinute(datetime) AS minute,\n               AVG(lastprice)            AS mean_lastprice,\n               -- \u8ba1\u7b97\u5f00\u59cb\u65f6\u95f4\uff0c\u6839\u636e datetime \u51b3\u5b9a\u662f\u5f53\u524d\u65e5\u671f\u7684 21 \u70b9\u8fd8\u662f\u524d\u4e00\u5929\u7684 21 \u70b9\n               CASE\n                   WHEN toHour(datetime) &lt; 21 THEN toDate(datetime) - INTERVAL 1 DAY + INTERVAL 21 HOUR\n                   ELSE toDate(datetime) + INTERVAL 21 HOUR\n               END AS start_time\n        FROM futures.AG2305\n        GROUP BY minute, start_time\n    ) subquery\n) outer_query\nORDER BY outer_query.minute;\n</code></pre>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2024%20-%20%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93Clickhouse/#_26","title":"\u811a\u672c\u89e3\u6790","text":"<ol> <li>\u521b\u5efa\u8868\uff1a\u4f7f\u7528 MergeTree \u5f15\u64ce\u521b\u5efa\u8868 <code>AG2305_TEST</code>\uff0c\u5e76\u6309 <code>minute</code> \u548c <code>mean_lastprice</code> \u6392\u5e8f\u3002</li> <li>\u9009\u62e9\u5b57\u6bb5\uff1a\u4ece\u5185\u90e8\u67e5\u8be2\u4e2d\u9009\u62e9\u5b57\u6bb5\u5e76\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u3002</li> <li>\u5e03\u6797\u5e26\u72b6\u6001\uff1a\u6839\u636e\u4ef7\u683c\u4e0e\u5e03\u6797\u5e26\u4e0a\u4e0b\u8f68\u7684\u5173\u7cfb\uff0c\u786e\u5b9a <code>bollinger_band_status</code> \u7684\u503c\u3002</li> <li>\u5185\u90e8\u67e5\u8be2\uff1a</li> <li>\u5b50\u67e5\u8be2\uff1a\u805a\u5408\u6bcf\u5206\u949f\u7684\u5e73\u5747\u4ef7\u683c <code>mean_lastprice</code>\uff0c\u5e76\u8ba1\u7b97\u5f00\u59cb\u65f6\u95f4 <code>start_time</code>\u3002</li> <li>\u5e03\u6797\u5e26\u8ba1\u7b97\uff1a\u8ba1\u7b97\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\uff08SMA\uff09\u548c\u4e0d\u540c\u6807\u51c6\u5dee\u500d\u6570\u7684\u4e0a\u4e0b\u8f68\u3002</li> </ol> <p>\u901a\u8fc7\u8fd9\u4e2a\u9010\u884c\u6ce8\u91ca\u7684 SQL \u811a\u672c\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u5982\u4f55\u5728 ClickHouse \u4e2d\u521b\u5efa\u590d\u6742\u7684\u8ba1\u7b97\u8868\uff0c\u5e76\u5e94\u7528\u4e8e\u91cf\u5316\u91d1\u878d\u9886\u57df\u7684\u6570\u636e\u5904\u7406\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2025%20-%20Unsafe/","title":"Chapter 25 - Unsafe","text":"<p><code>unsafe</code> \u5173\u952e\u5b57\u662f Rust \u4e2d\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u5141\u8bb8\u4f60\u7f16\u5199\u4e0d\u53d7 Rust \u5b89\u5168\u6027\u68c0\u67e5\u4fdd\u62a4\u7684\u4ee3\u7801\u5757\u3002\u4f7f\u7528 <code>unsafe</code> \u53ef\u4ee5\u6267\u884c\u4e00\u4e9b\u4e0d\u5b89\u5168\u7684\u64cd\u4f5c\uff0c\u5982\u624b\u52a8\u7ba1\u7406\u5185\u5b58\u3001\u7ed5\u8fc7\u501f\u7528\u68c0\u67e5\u3001\u6267\u884c\u539f\u751f\u6307\u9488\u64cd\u4f5c\u7b49\u3002\u5b83\u4e3a\u4f60\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u4f46\u4e5f\u589e\u52a0\u4e86\u51fa\u73b0\u5185\u5b58\u4e0d\u5b89\u5168\u548c\u5176\u4ed6\u9519\u8bef\u7684\u98ce\u9669\u3002</p> <p>\u4ee5\u4e0b\u662f <code>unsafe</code> \u5728 Rust \u4e2d\u7684\u4e00\u4e9b\u5178\u578b\u5e94\u7528\uff1a</p> <ol> <li> <p>\u624b\u52a8\u7ba1\u7406\u5185\u5b58\uff1a\u4f7f\u7528 <code>unsafe</code> \u53ef\u4ee5\u624b\u52a8\u5206\u914d\u548c\u91ca\u653e\u5185\u5b58\uff0c\u4f8b\u5982\u4f7f\u7528 <code>malloc</code> \u548c <code>free</code> \u7c7b\u4f3c\u7684\u64cd\u4f5c\u3002\u8fd9\u5728\u7f16\u5199\u64cd\u4f5c\u7cfb\u7edf\u3001\u5d4c\u5165\u5f0f\u7cfb\u7edf\u6216\u9700\u8981\u7cbe\u7ec6\u63a7\u5236\u5185\u5b58\u7684\u9ad8\u6027\u80fd\u5e94\u7528\u4e2d\u5f88\u6709\u7528\u3002</p> </li> <li> <p>\u539f\u751f\u6307\u9488\uff1a<code>unsafe</code> \u5141\u8bb8\u4f60\u4f7f\u7528\u539f\u751f\u6307\u9488\uff08raw pointers\uff09\uff0c\u5982\u88f8\u6307\u9488\uff08<code>*const T</code> \u548c <code>*mut T</code>\uff09\u6765\u8fdb\u884c\u5e95\u5c42\u5185\u5b58\u64cd\u4f5c\u3002\u8fd9\u5305\u62ec\u89e3\u5f15\u7528\u3001\u6307\u9488\u7b97\u672f\u548c\u7c7b\u578b\u8f6c\u6362\u7b49\u3002</p> </li> <li> <p>\u7ed5\u8fc7\u501f\u7528\u68c0\u67e5\uff1a\u6709\u65f6\u5019\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7ed5\u8fc7 Rust \u7684\u501f\u7528\u68c0\u67e5\u89c4\u5219\uff0c\u4ee5\u5b9e\u73b0\u4e00\u4e9b\u7279\u6b8a\u7684\u64cd\u4f5c\uff0c\u5982\u8de8\u51fd\u6570\u4f20\u9012\u53ef\u53d8\u5f15\u7528\u3002</p> </li> <li> <p>\u8c03\u7528\u5916\u90e8\u4ee3\u7801\uff1a\u5f53\u4e0e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\uff08\u5982 C \u6216 C++\uff09\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>unsafe</code> \u6765\u8c03\u7528\u5916\u90e8\u7684\u4e0d\u53d7 Rust \u63a7\u5236\u7684\u4ee3\u7801\u3002\u8fd9\u5305\u62ec\u7f16\u5199 Rust \u7ed1\u5b9a\u4ee5\u4e0e C \u5e93\u8fdb\u884c\u4ea4\u4e92\u3002</p> </li> <li> <p>\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff1a<code>unsafe</code> \u6709\u65f6\u5019\u7528\u4e8e\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff0c\u4ee5\u7ba1\u7406\u5171\u4eab\u72b6\u6001\u3001\u539f\u5b50\u64cd\u4f5c\u548c\u540c\u6b65\u539f\u8bed\u3002\u8fd9\u5305\u62ec <code>std::sync</code> \u548c <code>std::thread</code> \u4e2d\u7684\u4e00\u4e9b\u529f\u80fd\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528 <code>unsafe</code> \u9700\u8981\u975e\u5e38\u5c0f\u5fc3\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5bfc\u81f4\u5185\u5b58\u4e0d\u5b89\u5168\u3001\u6570\u636e\u7ade\u4e89\u548c\u5176\u4ed6\u4e25\u91cd\u7684\u9519\u8bef\u3002Rust \u7684\u5b89\u5168\u6027\u7279\u6027\u662f\u5b83\u7684\u4e00\u5927\u5356\u70b9\uff0c<code>unsafe</code> \u7684\u4f7f\u7528\u5e94\u8be5\u88ab\u9650\u5236\u5728\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\uff0c\u5e76\u4e14\u5fc5\u987b\u7ecf\u8fc7\u4ed4\u7ec6\u7684\u5ba1\u67e5\u548c\u6d4b\u8bd5\u3002\u5728\u5b9e\u9645\u7f16\u7a0b\u4e2d\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u907f\u514d\u4f7f\u7528 <code>unsafe</code>\uff0c\u56e0\u4e3a Rust \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5de5\u5177\u6765\u786e\u4fdd\u4ee3\u7801\u7684\u5b89\u5168\u6027\u548c\u6b63\u786e\u6027\u3002\u53ea\u6709\u5728\u9700\u8981\u8bbf\u95ee\u5e95\u5c42\u7cfb\u7edf\u8d44\u6e90\u3001\u8fdb\u884c\u9ad8\u6027\u80fd\u4f18\u5316\u6216\u4e0e\u5916\u90e8\u4ee3\u7801\u4ea4\u4e92\u7b49\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u624d\u5e94\u8be5\u8003\u8651\u4f7f\u7528 <code>unsafe</code>\u3002</p> <p>\u5728\u91d1\u878d\u9886\u57df\uff0cRust \u7684 <code>unsafe</code> \u5173\u952e\u5b57\u901a\u5e38\u9700\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u56e0\u4e3a\u91d1\u878d\u7cfb\u7edf\u6d89\u53ca\u5230\u91cd\u8981\u7684\u5b89\u5168\u6027\u548c\u53ef\u9760\u6027\u8981\u6c42\u3002<code>unsafe</code> \u5141\u8bb8\u7ed5\u8fc7 Rust \u7684\u5b89\u5168\u68c0\u67e5\u548c\u89c4\u5219\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u66f4\u52a0\u5c0f\u5fc3\u5730\u7ba1\u7406\u4ee3\u7801\uff0c\u4ee5\u786e\u4fdd\u5b83\u4e0d\u4f1a\u5bfc\u81f4\u5185\u5b58\u4e0d\u5b89\u5168\u6216\u5176\u4ed6\u5b89\u5168\u6027\u95ee\u9898\u3002</p> <p>\u4ee5\u4e0b\u662f\u5728\u91d1\u878d\u9886\u57df\u4e2d\u53ef\u80fd\u4f7f\u7528 <code>unsafe</code> \u7684\u4e00\u4e9b\u573a\u666f\u548c\u7528\u4f8b\uff1a</p> <ol> <li> <p>\u4e0e\u5916\u90e8\u7cfb\u7edf\u96c6\u6210\uff1a\u91d1\u878d\u7cfb\u7edf\u901a\u5e38\u9700\u8981\u4e0e\u5e95\u5c42\u786c\u4ef6\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u7f51\u7edc\u5e93\u7b49\u8fdb\u884c\u4ea4\u4e92\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c<code>unsafe</code> \u53ef\u80fd\u7528\u4e8e\u7f16\u5199\u4e0e\u5916\u90e8 C \u4ee3\u7801\u8fdb\u884c\u4ea4\u4e92\u7684 Rust \u7ed1\u5b9a\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u7684\u5185\u5b58\u5e03\u5c40\u548c\u6570\u636e\u4f20\u9012\u3002</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316\uff1a\u91d1\u878d\u8ba1\u7b97\u901a\u5e38\u6d89\u53ca\u5927\u91cf\u6570\u636e\u5904\u7406\uff0c\u5bf9\u6027\u80fd\u8981\u6c42\u8f83\u9ad8\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 <code>unsafe</code> \u53ef\u80fd\u5141\u8bb8\u4f60\u8fdb\u884c\u5e95\u5c42\u5185\u5b58\u64cd\u4f5c\u6216\u4f7f\u7528\u4e0d\u5b89\u5168\u7684\u4f18\u5316\u6280\u5de7\uff0c\u4ee5\u63d0\u9ad8\u8ba1\u7b97\u6027\u80fd\u3002</p> </li> <li> <p>\u6570\u636e\u7ed3\u6784\u7684\u81ea\u5b9a\u4e49\u5b9e\u73b0\uff1a\u91d1\u878d\u9886\u57df\u53ef\u80fd\u9700\u8981\u5b9a\u5236\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u6ee1\u8db3\u7279\u5b9a\u7684\u9700\u6c42\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>unsafe</code> \u53ef\u80fd\u7528\u4e8e\u5b9e\u73b0\u81ea\u5b9a\u4e49\u6570\u636e\u7ed3\u6784\uff0c\u4f46\u5fc5\u987b\u786e\u4fdd\u8fd9\u4e9b\u7ed3\u6784\u662f\u6b63\u786e\u548c\u5b89\u5168\u7684\u3002</p> </li> <li> <p>\u4f4e\u7ea7\u522b\u7684\u591a\u7ebf\u7a0b\u7f16\u7a0b\uff1a\u91d1\u878d\u7cfb\u7edf\u901a\u5e38\u9700\u8981\u9ad8\u5ea6\u5e76\u53d1\u7684\u5904\u7406\u80fd\u529b\u3002\u5728\u5904\u7406\u591a\u7ebf\u7a0b\u548c\u5e76\u53d1\u6027\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>unsafe</code> \u6765\u7ba1\u7406\u7ebf\u7a0b\u95f4\u7684\u5171\u4eab\u72b6\u6001\u548c\u540c\u6b65\u539f\u8bed\uff0c\u4f46\u5fc5\u987b\u5c0f\u5fc3\u907f\u514d\u6570\u636e\u7ade\u4e89\u548c\u5176\u4ed6\u591a\u7ebf\u7a0b\u95ee\u9898\u3002</p> </li> </ol> <p>\u65e0\u8bba\u5728\u91d1\u878d\u9886\u57df\u8fd8\u662f\u5176\u4ed6\u9886\u57df\uff0c\u4f7f\u7528 <code>unsafe</code> \u90fd\u9700\u8981\u4e25\u683c\u7684\u4ee3\u7801\u5ba1\u67e5\u548c\u6d4b\u8bd5\uff0c\u4ee5\u786e\u4fdd\u4ee3\u7801\u7684\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027\u3002\u5728\u91d1\u878d\u9886\u57df\u7279\u522b\u9700\u8981\u4fdd\u6301\u9ad8\u5ea6\u7684\u53ef\u4fe1\u5ea6\uff0c\u56e0\u6b64\u5fc5\u987b\u683c\u5916\u5c0f\u5fc3\uff0c\u9075\u5faa\u6700\u4f73\u5b9e\u8df5\uff0c\u4f7f\u7528 <code>unsafe</code> \u7684\u65f6\u673a\u5e94\u8be5\u975e\u5e38\u660e\u786e\uff0c\u5e76\u4e14\u5fc5\u987b\u6709\u5145\u5206\u7684\u7406\u7531\u3002\u53e6\u5916\uff0c\u91d1\u878d\u9886\u57df\u901a\u5e38\u53d7\u5230\u76d1\u7ba1\u548c\u5408\u89c4\u6027\u8981\u6c42\uff0c\u8fd9\u4e5f\u9700\u8981\u786e\u4fdd\u4ee3\u7801\u7684\u5b89\u5168\u6027\u548c\u7a33\u5b9a\u6027\u3002\u56e0\u6b64\uff0c<code>unsafe</code> \u5e94\u8be5\u8c28\u614e\u4f7f\u7528\uff0c\u53ea\u5728\u771f\u6b63\u9700\u8981\u65f6\u624d\u4f7f\u7528\uff0c\u5e76\u4e14\u5e94\u8be5\u7531\u7ecf\u9a8c\u4e30\u5bcc\u7684\u5de5\u7a0b\u5e08\u6765\u7ba1\u7406\u548c\u5ba1\u67e5\u3002</p> <p>\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u6709\u4e9b\u60c5\u51b5\u4e0b\u786e\u5b9e\u9700\u8981\u4f7f\u7528 <code>unsafe</code> \u6765\u6267\u884c\u4e00\u4e9b\u5e95\u5c42\u64cd\u4f5c\uff0c\u5c24\u5176\u662f\u5728\u4e0e\u5916\u90e8 C/C++ \u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u6848\u4f8b\u662f\u4e0e\u67d0\u4e9b\u91cf\u5316\u91d1\u878d\u5e93\u6216\u5e02\u573a\u6570\u636e\u63d0\u4f9b\u5546\u7684 C/C++ API \u8fdb\u884c\u96c6\u6210\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5728 Rust \u4e2d\u4e0e\u5916\u90e8 C/C++ \u91d1\u878d\u5e93\u8fdb\u884c\u4ea4\u4e92\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>unsafe</code>\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2025%20-%20Unsafe/#_1","title":"\u6848\u4f8b\uff1a\u4e0e\u5916\u90e8\u91d1\u878d\u5e93\u7684\u4ea4\u4e92","text":"<p>\u5047\u8bbe\u4f60\u7684\u91cf\u5316\u91d1\u878d\u7b56\u7565\u9700\u8981\u83b7\u53d6\u5e02\u573a\u6570\u636e\uff0c\u4f46\u5e02\u573a\u6570\u636e\u63d0\u4f9b\u5546\u53ea\u63d0\u4f9b\u4e86 C/C++ API\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a Rust \u7ed1\u5b9a\uff0c\u4ee5\u4fbf\u5728 Rust \u4e2d\u8c03\u7528\u5916\u90e8 C/C++ \u51fd\u6570\u3002</p> <p>\u9996\u5148\uff0c\u4f60\u9700\u8981\u521b\u5efa\u4e00\u4e2a Rust \u9879\u76ee\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u7528\u4e8e\u4e0e\u5916\u90e8\u5e93\u4ea4\u4e92\u7684 Rust \u6a21\u5757\u3002\u7136\u540e\uff0c\u521b\u5efa\u4e00\u4e2a Rust \u7ed1\u5b9a\uff0c\u5c06\u5916\u90e8\u5e93\u7684\u51fd\u6570\u58f0\u660e\u548c\u6570\u636e\u7ed3\u6784\u5bfc\u5165\u5230 Rust \u4e2d\u3002\u8fd9\u53ef\u80fd\u6d89\u53ca\u5230\u4f7f\u7528 <code>extern</code> \u5173\u952e\u5b57\u548c <code>unsafe</code> \u4ee3\u7801\u5757\u6765\u8c03\u7528\u5916\u90e8\u51fd\u6570\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5316\u7684\u793a\u4f8b\uff1a</p> <pre><code>// extern\u58f0\u660e\uff0c\u5c06\u5916\u90e8\u5e93\u4e2d\u7684\u51fd\u6570\u5bfc\u5165\u5230Rust\u4e2d\nextern \"C\" {\n    fn get_stock_price(symbol: *const u8) -&gt; f64;\n    // \u8fd8\u53ef\u4ee5\u5bfc\u5165\u5176\u4ed6\u51fd\u6570\u548c\u6570\u636e\u7ed3\u6784\n}\n\n// \u8c03\u7528\u5916\u90e8\u51fd\u6570\u7684Rust\u5c01\u88c5\npub fn get_stock_price_rust(symbol: &amp;str) -&gt; Option&lt;f64&gt; {\n    let c_symbol = CString::new(symbol).expect(\"CString conversion failed\");\n    let price = unsafe { get_stock_price(c_symbol.as_ptr()) };\n    if price &lt; 0.0 {\n        None\n    } else {\n        Some(price)\n    }\n}\n\nfn main() {\n    let symbol = \"AAPL\";\n    if let Some(price) = get_stock_price_rust(symbol) {\n        println!(\"The stock price of {} is ${:.2}\", symbol, price);\n    } else {\n        println!(\"Failed to retrieve the stock price for {}\", symbol);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe\u6709\u4e00\u4e2a\u5916\u90e8 C/C++ \u51fd\u6570 <code>get_stock_price</code>\uff0c\u5b83\u83b7\u53d6\u80a1\u7968\u4ee3\u7801\u5e76\u8fd4\u56de\u80a1\u4ef7\u3002\u6211\u4eec\u4f7f\u7528 <code>extern \"C\"</code> \u58f0\u660e\u5c06\u5176\u5bfc\u5165\u5230 Rust \u4e2d\uff0c\u5e76\u5728 <code>get_stock_price_rust</code> \u51fd\u6570\u4e2d\u4f7f\u7528 <code>unsafe</code> \u8c03\u7528\u5b83\u3002</p> <p>\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>unsafe</code> \u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u4f60\u5fc5\u987b\u7ba1\u7406\u5916\u90e8 C/C++ \u51fd\u6570\u7684\u8c03\u7528\u4ee5\u53ca\u4e0e\u5b83\u4eec\u7684\u4ea4\u4e92\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u786e\u4fdd <code>unsafe</code> \u4ee3\u7801\u5757\u4e2d\u7684\u64cd\u4f5c\u662f\u6b63\u786e\u4e14\u5b89\u5168\u7684\uff0c\u5e76\u4e14\u8fdb\u884c\u4e86\u9002\u5f53\u7684\u9519\u8bef\u5904\u7406\u3002\u5728\u4e0e\u5916\u90e8\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u4e00\u5b9a\u8981\u5c0f\u5fc3\u786e\u4fdd\u4ee3\u7801\u7684\u6b63\u786e\u6027\u548c\u7a33\u5b9a\u6027\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2025%20-%20Unsafe/#_2","title":"\u6848\u4f8b\uff1a\u9ad8\u6027\u80fd\u6570\u503c\u8ba1\u7b97","text":"<p>\u53e6\u4e00\u4e2a\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>unsafe</code> \u7684\u91cf\u5316\u91d1\u878d\u6848\u4f8b\u662f\u6267\u884c\u9ad8\u6027\u80fd\u8ba1\u7b97\u548c\u4f18\u5316\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u8fdb\u884c\u5927\u89c4\u6a21\u6570\u636e\u5904\u7406\u548c\u6570\u503c\u8ba1\u7b97\u65f6\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>unsafe</code> \u6765\u6267\u884c\u9ad8\u6027\u80fd\u6570\u503c\u8ba1\u7b97\u7684\u60c5\u51b5\u3002</p> <p>\u5047\u8bbe\u4f60\u6b63\u5728\u5f00\u53d1\u4e00\u4e2a\u91cf\u5316\u91d1\u878d\u7b56\u7565\uff0c\u9700\u8981\u8fdb\u884c\u5927\u89c4\u6a21\u7684\u6570\u503c\u8ba1\u7b97\uff0c\u4f8b\u5982\u8499\u7279\u5361\u6d1b\u6a21\u62df\u6216\u4f18\u5316\u7b97\u6cd5\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528 Rust \u4e2d\u7684 <code>ndarray</code> \u6216\u5176\u4ed6\u6570\u503c\u8ba1\u7b97\u5e93\u6765\u6267\u884c\u64cd\u4f5c\uff0c\u4f46\u67d0\u4e9b\u64cd\u4f5c\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>unsafe</code> \u6765\u63d0\u9ad8\u6027\u80fd\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 <code>unsafe</code> \u6765\u6267\u884c\u77e9\u9635\u64cd\u4f5c\uff1a</p> <pre><code>use ndarray::{Array2, Axis, s};\n\nfn main() {\n    // \u521b\u5efa\u4e00\u4e2a\u5927\u77e9\u9635\n    let size = 1000;\n    let mut matrix = Array2::zeros((size, size));\n\n    // \u4f7f\u7528 unsafe \u6765\u6267\u884c\u9ad8\u6027\u80fd\u64cd\u4f5c\n    unsafe {\n        // \u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u64cd\u4f5c\n        for i in 0..size {\n            for j in 0..size {\n                *matrix.uget_mut((i, j)) = i as f64 * j as f64;\n            }\n        }\n    }\n\n    // \u6267\u884c\u5176\u4ed6\u64cd\u4f5c\n    let row_sum = matrix.sum_axis(Axis(0));\n    let max_value = matrix.fold(0.0, |max, &amp;x| if x &gt; max { x } else { max });\n\n    println!(\"Row sum: {:?}\", row_sum);\n    println!(\"Max value: {:?}\", max_value);\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>ndarray</code> \u5e93\u521b\u5efa\u4e86\u4e00\u4e2a\u5927\u77e9\u9635\uff0c\u5e76\u4f7f\u7528 <code>unsafe</code> \u5757\u6765\u6267\u884c\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u64cd\u4f5c\u4ee5\u586b\u5145\u77e9\u9635\u3002\u8fd9\u4e2a\u64cd\u4f5c\u5047\u8bbe\u4f60\u5df2\u7ecf\u786e\u4fdd\u4e86\u6b63\u786e\u6027\u548c\u5b89\u5168\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528 <code>unsafe</code> \u6765\u63d0\u9ad8\u6027\u80fd\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528 <code>unsafe</code> \u5e94\u8be5\u975e\u5e38\u5c0f\u5fc3\uff0c\u5fc5\u987b\u786e\u4fdd\u64cd\u4f5c\u662f\u6b63\u786e\u7684\u4e14\u4e0d\u4f1a\u5bfc\u81f4\u5185\u5b58\u4e0d\u5b89\u5168\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u66f4\u591a\u7684\u6570\u503c\u8ba1\u7b97\u5e93\u548c\u4f18\u5316\u5de5\u5177\uff0c\u4f46 <code>unsafe</code> \u53ef\u4ee5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u63d0\u4f9b\u989d\u5916\u7684\u6027\u80fd\u4f18\u52bf\u3002\u65e0\u8bba\u5982\u4f55\uff0c\u5bf9\u4e8e\u91cf\u5316\u91d1\u878d\u7b56\u7565\uff0c\u6b63\u786e\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u59cb\u7ec8\u6bd4\u6027\u80fd\u66f4\u91cd\u8981\uff0c\u56e0\u6b64\u4f7f\u7528 <code>unsafe</code> \u5e94\u8be5\u8c28\u614e\uff0c\u5e76\u4e14\u5fc5\u987b\u5c0f\u5fc3\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u4ee3\u7801\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2026%20-%20%E6%96%87%E6%A1%A3%E5%92%8C%E6%B5%8B%E8%AF%95/","title":"Chapter 26 - \u6587\u6863\u548c\u6d4b\u8bd5","text":""},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2026%20-%20%E6%96%87%E6%A1%A3%E5%92%8C%E6%B5%8B%E8%AF%95/#261","title":"26.1 \u6587\u6863\u6ce8\u91ca","text":"<p>\u5728 Rust \u4e2d\uff0c\u6587\u6863\u7684\u7f16\u5199\u4e3b\u8981\u4f7f\u7528\u6587\u6863\u6ce8\u91ca\uff08Doc Comments\uff09\u548c Rustdoc \u5de5\u5177\u6765\u751f\u6210\u6587\u6863\u3002\u6587\u6863\u6ce8\u91ca\u4ee5 <code>///</code> \u6216 <code>//!</code> \u5f00\u59cb\uff0c\u901a\u5e38\u4f4d\u4e8e\u51fd\u6570\u3001\u6a21\u5757\u3001\u7ed3\u6784\u4f53\u3001\u679a\u4e3e\u7b49\u58f0\u660e\u7684\u524d\u9762\u3002\u4ee5\u4e0b\u662f Rust \u4e2d\u6587\u6863\u7f16\u5199\u7684\u57fa\u672c\u5199\u6cd5\u548c\u793a\u4f8b\uff1a</p> <ol> <li>\u6587\u6863\u6ce8\u91ca\u683c\u5f0f\uff1a</li> </ol> <p>\u6587\u6863\u6ce8\u91ca\u901a\u5e38\u9075\u5faa\u4e00\u5b9a\u7684\u683c\u5f0f\uff0c\u5305\u62ec\u63cf\u8ff0\u3001\u7528\u6cd5\u793a\u4f8b\u3001\u53c2\u6570\u8bf4\u660e\u3001\u8fd4\u56de\u503c\u8bf4\u660e\u7b49\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u901a\u7528\u7684\u6587\u6863\u6ce8\u91ca\u683c\u5f0f\u793a\u4f8b\uff1a</p> <pre><code>/// This is a description of what the item does.\n///\n/// # Examples\n///\n/// ```\n/// let result = my_function(arg1, arg2);\n/// assert_eq!(result, expected_value);\n/// ```\n///\n/// ## Parameters\n///\n/// - `arg1`: Description of the first argument.\n/// - `arg2`: Description of the second argument.\n///\n/// ## Returns\n///\n/// Description of the return value.\n///\n/// # Panics\n///\n/// Description of panic conditions, if any.\n///\n/// # Errors\n///\n/// Description of possible error conditions, if any.\n///\n/// # Safety\n///\n/// Explanation of any unsafe code or invariants.\npub fn my_function(arg1: Type1, arg2: Type2) -&gt; ReturnType {\n    // Function implementation\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6587\u6863\u6ce8\u91ca\u5305\u62ec\u63cf\u8ff0\u3001\u7528\u6cd5\u793a\u4f8b\u3001\u53c2\u6570\u8bf4\u660e\u3001\u8fd4\u56de\u503c\u8bf4\u660e\u4ee5\u53ca\u53ef\u80fd\u7684 panic \u548c\u9519\u8bef\u60c5\u51b5\u7684\u63cf\u8ff0\u3002</p> <ol> <li>\u751f\u6210\u6587\u6863\uff1a</li> </ol> <p>\u4e3a\u4e86\u751f\u6210\u6587\u6863\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Rust \u5185\u7f6e\u7684\u6587\u6863\u751f\u6210\u5de5\u5177 Rustdoc\u3002\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u751f\u6210\u6587\u6863\uff1a</p> <pre><code>cargo doc\n</code></pre> <p>\u8fd9\u5c06\u751f\u6210\u6587\u6863\u5e76\u5c06\u5176\u4fdd\u5b58\u5728\u9879\u76ee\u76ee\u5f55\u7684 <code>target/doc</code> \u6587\u4ef6\u5939\u4e0b\u3002\u4f60\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u751f\u6210\u7684\u6587\u6863\uff08\u4f4d\u4e8e <code>target/doc</code> \u4e2d\u7684 <code>index.html</code> \u6587\u4ef6\uff09\u6765\u67e5\u770b\u4f60\u7684\u4ee3\u7801\u6587\u6863\u3002</p> <ol> <li>\u94fe\u63a5\u5230\u5176\u4ed6\u9879\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u5728\u6587\u6863\u4e2d\u94fe\u63a5\u5230\u5176\u4ed6\u9879\uff0c\u5982\u51fd\u6570\u3001\u6a21\u5757\u3001\u7ed3\u6784\u4f53\u7b49\uff0c\u4ee5\u4fbf\u521b\u5efa\u4ea4\u53c9\u5f15\u7528\u3002\u4f7f\u7528 <code>[</code> \u548c <code>]</code> \u7b26\u53f7\u6765\u521b\u5efa\u94fe\u63a5\uff0c\u4f8b\u5982 <code>[</code>my_function<code>]</code> \u5c06\u94fe\u63a5\u5230\u540d\u4e3a <code>my_function</code> \u7684\u9879\u3002</p> <ol> <li>\u6d4b\u8bd5\u6587\u6863\u793a\u4f8b\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u6587\u6863\u6d4b\u8bd5\u6765\u786e\u4fdd\u6587\u6863\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u662f\u6709\u6548\u7684\u3002\u8fd0\u884c\u6587\u6863\u6d4b\u8bd5\u7684\u547d\u4ee4\u662f\uff1a</p> <pre><code>cargo test --doc\n</code></pre> <p>\u8fd9\u5c06\u8fd0\u884c\u6587\u6863\u4e2d\u7684\u6240\u6709\u793a\u4f8b\u4ee3\u7801\uff0c\u786e\u4fdd\u5b83\u4eec\u4ecd\u7136\u6709\u6548\u3002</p> <ol> <li>\u6587\u6863\u4e3b\u9898\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 Markdown \u8bed\u6cd5\u6765\u7f8e\u5316\u6587\u6863\u3002Rustdoc\u652f\u6301Markdown\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u4f7f\u7528\u6807\u9898\u3001\u5217\u8868\u3001\u4ee3\u7801\u5757\u3001\u94fe\u63a5\u7b49Markdown\u5143\u7d20\u6765\u7ec4\u7ec7\u6587\u6863\u5e76\u589e\u5f3a\u5176\u53ef\u8bfb\u6027\u3002</p> <p>\u6587\u6863\u7f16\u5199\u662f\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u91cd\u8981\u90e8\u5206\uff0c\u5b83\u5e2e\u52a9\u4f60\u7684\u4ee3\u7801\u66f4\u6613\u4e8e\u7406\u89e3\u3001\u4f7f\u7528\u548c\u7ef4\u62a4\u3002\u597d\u7684\u6587\u6863\u4e0d\u4ec5\u5bf9\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u6709\u5e2e\u52a9\uff0c\u8fd8\u6709\u52a9\u4e8e\u4f60\u81ea\u5df1\u66f4\u5bb9\u6613\u56de\u987e\u548c\u7406\u89e3\u4ee3\u7801\u3002\u56e0\u6b64\uff0c\u786e\u4fdd\u5728 Rust \u9879\u76ee\u4e2d\u7f16\u5199\u6e05\u6670\u548c\u6709\u7528\u7684\u6587\u6863\u662f\u4e00\u4e2a\u826f\u597d\u7684\u5b9e\u8df5\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2026%20-%20%E6%96%87%E6%A1%A3%E5%92%8C%E6%B5%8B%E8%AF%95/#261_1","title":"26.1 \u5355\u5143\u6d4b\u8bd5","text":"<p>Rust \u662f\u4e00\u79cd\u7cfb\u7edf\u7ea7\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u9f13\u52b1\u7f16\u5199\u9ad8\u6027\u80fd\u548c\u5b89\u5168\u7684\u4ee3\u7801\u3002\u4e3a\u4e86\u786e\u4fdd\u4ee3\u7801\u7684\u6b63\u786e\u6027\uff0cRust \u63d0\u4f9b\u4e86\u4e00\u5957\u5f3a\u5927\u7684\u6d4b\u8bd5\u5de5\u5177\uff0c\u5305\u62ec\u5355\u5143\u6d4b\u8bd5\u3001\u96c6\u6210\u6d4b\u8bd5\u548c\u5c5e\u6027\u6d4b\u8bd5\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u4ecb\u7ecd Rust \u7684\u5355\u5143\u6d4b\u8bd5\u3002</p> <p>\u5355\u5143\u6d4b\u8bd5\u662f\u4e00\u79cd\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u7528\u4e8e\u9a8c\u8bc1\u4ee3\u7801\u7684\u5404\u4e2a\u5355\u5143\uff08\u901a\u5e38\u662f\u51fd\u6570\u6216\u65b9\u6cd5\uff09\u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c\u3002\u5728 Rust \u4e2d\uff0c\u5355\u5143\u6d4b\u8bd5\u901a\u5e38\u5305\u62ec\u7f16\u5199\u6d4b\u8bd5\u51fd\u6570\uff0c\u7136\u540e\u4f7f\u7528 <code>#[cfg(test)]</code> \u5c5e\u6027\u6807\u8bb0\u5b83\u4eec\uff0c\u4ee5\u4fbf\u53ea\u5728\u6d4b\u8bd5\u6a21\u5f0f\u4e0b\u7f16\u8bd1\u548c\u8fd0\u884c\u3002</p> <p>\u4ee5\u4e0b\u662f Rust \u5355\u5143\u6d4b\u8bd5\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li>\u521b\u5efa\u6d4b\u8bd5\u51fd\u6570\uff1a</li> </ol> <p>\u5728 Rust \u4e2d\uff0c\u6d4b\u8bd5\u51fd\u6570\u7684\u547d\u540d\u901a\u5e38\u4ee5 <code>test</code> \u5f00\u5934\uff0c\u540e\u9762\u8ddf\u7740\u63cf\u8ff0\u6027\u7684\u51fd\u6570\u540d\u3002\u6d4b\u8bd5\u51fd\u6570\u5e94\u8be5\u8fd4\u56de <code>()</code>\uff08unit \u7c7b\u578b\uff09\uff0c\u56e0\u4e3a\u5b83\u4eec\u901a\u5e38\u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\u3002\u6d4b\u8bd5\u51fd\u6570\u53ef\u4ee5\u4f7f\u7528 <code>assert!</code> \u5b8f\u6216\u5176\u4ed6\u65ad\u8a00\u5b8f\u6765\u68c0\u67e5\u4ee3\u7801\u7684\u884c\u4e3a\u662f\u5426\u4e0e\u9884\u671f\u4e00\u81f4\u3002\u4f8b\u5982\uff1a</p> <pre><code>#[cfg(test)]\nmod tests {\n    #[test]\n    fn test_addition() {\n        assert_eq!(2 + 2, 4);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u540d\u4e3a <code>test_addition</code> \u7684\u6d4b\u8bd5\u51fd\u6570\uff0c\u5b83\u4f7f\u7528 <code>assert_eq!</code> \u5b8f\u6765\u65ad\u8a00 2 + 2 \u7684\u7ed3\u679c\u662f\u5426\u7b49\u4e8e 4\u3002\u5982\u679c\u4e0d\u7b49\u4e8e 4\uff0c\u6d4b\u8bd5\u5c06\u5931\u8d25\u3002</p> <ol> <li>\u4f7f\u7528 <code>#[cfg(test)]</code> \u6807\u5fd7\uff1a</li> </ol> <p>\u5728 Rust \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>#[cfg(test)]</code> \u5c5e\u6027\u5c06\u6d4b\u8bd5\u4ee3\u7801\u6807\u8bb0\u4e3a\u4ec5\u5728\u6d4b\u8bd5\u6a21\u5f0f\u4e0b\u7f16\u8bd1\u548c\u8fd0\u884c\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u6d4b\u8bd5\u4ee3\u7801\u5f71\u54cd\u751f\u4ea7\u4ee3\u7801\u7684\u6027\u80fd\u548c\u5927\u5c0f\u3002\u5728\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5728\u6d4b\u8bd5\u6a21\u5757\u4e2d\u4f7f\u7528\u4e86 <code>#[cfg(test)]</code>\u3002</p> <ol> <li>\u8fd0\u884c\u6d4b\u8bd5\uff1a</li> </ol> <p>\u8981\u8fd0\u884c\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528 Rust \u7684\u6d4b\u8bd5\u8fd0\u884c\u5668\uff0c\u901a\u5e38\u662f <code>cargo test</code> \u547d\u4ee4\u3002\u5728\u4f60\u7684\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u8fd0\u884c <code>cargo test</code> \u5c06\u8fd0\u884c\u6240\u6709\u6807\u8bb0\u4e3a\u6d4b\u8bd5\u7684\u51fd\u6570\u3002\u6d4b\u8bd5\u8fd0\u884c\u5668\u5c06\u8f93\u51fa\u6d4b\u8bd5\u7ed3\u679c\uff0c\u5305\u62ec\u901a\u8fc7\u7684\u6d4b\u8bd5\u548c\u5931\u8d25\u7684\u6d4b\u8bd5\u3002</p> <ol> <li>\u6dfb\u52a0\u66f4\u591a\u6d4b\u8bd5\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u5728\u6d4b\u8bd5\u6a21\u5757\u4e2d\u6dfb\u52a0\u4efb\u610f\u6570\u91cf\u7684\u6d4b\u8bd5\u51fd\u6570\uff0c\u4ee5\u9a8c\u8bc1\u4f60\u7684\u4ee3\u7801\u7684\u4e0d\u540c\u90e8\u5206\u3002\u6d4b\u8bd5\u51fd\u6570\u5e94\u8be5\u8986\u76d6\u4f60\u7684\u4ee3\u7801\u4e2d\u7684\u5404\u79cd\u60c5\u51b5\u548c\u8fb9\u754c\u6761\u4ef6\uff0c\u4ee5\u786e\u4fdd\u4ee3\u7801\u7684\u6b63\u786e\u6027\u3002</p> <ol> <li>\u6d4b\u8bd5\u65ad\u8a00\u5b8f\uff1a</li> </ol> <p>Rust \u63d0\u4f9b\u4e86\u8bb8\u591a\u6d4b\u8bd5\u65ad\u8a00\u5b8f\uff0c\u5982 <code>assert_eq!</code>\u3001<code>assert_ne!</code>\u3001<code>assert!</code>\u3001<code>assert_approx_eq!</code> \u7b49\uff0c\u4ee5\u9002\u5e94\u4e0d\u540c\u7684\u6d4b\u8bd5\u9700\u6c42\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u9002\u5f53\u7684\u5b8f\u6765\u7f16\u5199\u6d4b\u8bd5\u3002</p> <ol> <li>\u6d4b\u8bd5\u7ec4\u7ec7\uff1a</li> </ol> <p>\u4f60\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u6a21\u5757\u4e2d\u7ec4\u7ec7\u4f60\u7684\u6d4b\u8bd5\uff0c\u4ee5\u4f7f\u6d4b\u8bd5\u4ee3\u7801\u66f4\u6e05\u6670\u548c\u6613\u4e8e\u7ba1\u7406\u3002\u6d4b\u8bd5\u6a21\u5757\u53ef\u4ee5\u5d4c\u5957\uff0c\u4ee5\u53cd\u6620\u4f60\u7684\u4ee3\u7801\u7ec4\u7ec7\u7ed3\u6784\u3002</p> <p>\u5355\u5143\u6d4b\u8bd5\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u5177\u6709\u91cd\u8981\u7684\u610f\u4e49\uff0c\u5b83\u6709\u52a9\u4e8e\u786e\u4fdd\u91cf\u5316\u91d1\u878d\u4ee3\u7801\u7684\u6b63\u786e\u6027\u3001\u7a33\u5b9a\u6027\u548c\u53ef\u7ef4\u62a4\u6027\uff1a</p> <ol> <li>\u9a8c\u8bc1\u91d1\u878d\u6a21\u578b\u548c\u7b97\u6cd5\u7684\u6b63\u786e\u6027\uff1a\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u4ee3\u7801\u901a\u5e38\u6d89\u53ca\u590d\u6742\u7684\u91d1\u878d\u6a21\u578b\u548c\u7b97\u6cd5\u3002\u901a\u8fc7\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u9a8c\u8bc1\u8fd9\u4e9b\u6a21\u578b\u548c\u7b97\u6cd5\u662f\u5426\u6309\u7167\u9884\u671f\u5de5\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u91d1\u878d\u7b56\u7565\u7684\u53ef\u9760\u6027\u3002</li> <li>\u6355\u83b7\u6f5c\u5728\u7684\u95ee\u9898\uff1a\u5355\u5143\u6d4b\u8bd5\u53ef\u4ee5\u5e2e\u52a9\u6355\u83b7\u6f5c\u5728\u7684\u95ee\u9898\u548c\u9519\u8bef\uff0c\u5305\u62ec\u6570\u503c\u8ba1\u7b97\u9519\u8bef\u3001\u8fb9\u754c\u60c5\u51b5\u5904\u7406\u4e0d\u5f53\u3001\u7b97\u6cd5\u903b\u8f91\u9519\u8bef\u7b49\u3002\u8fd9\u6709\u52a9\u4e8e\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u907f\u514d\u610f\u5916\u7684\u98ce\u9669\u548c\u635f\u5931\u3002</li> <li>\u5feb\u901f\u53cd\u9988\uff1a\u5355\u5143\u6d4b\u8bd5\u63d0\u4f9b\u4e86\u5feb\u901f\u53cd\u9988\u7684\u673a\u5236\u3002\u5f53\u5f00\u53d1\u4eba\u5458\u8fdb\u884c\u4ee3\u7801\u66f4\u6539\u65f6\uff0c\u5355\u5143\u6d4b\u8bd5\u53ef\u4ee5\u81ea\u52a8\u8fd0\u884c\uff0c\u5e76\u8fc5\u901f\u544a\u8bc9\u5f00\u53d1\u4eba\u5458\u662f\u5426\u7834\u574f\u4e86\u73b0\u6709\u7684\u529f\u80fd\u3002\u8fd9\u6709\u52a9\u4e8e\u8fc5\u901f\u4fee\u590d\u95ee\u9898\uff0c\u51cf\u5c11\u4e86\u9519\u8bef\u7684\u4f20\u64ad\u3002</li> <li>\u786e\u4fdd\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\uff1a\u5355\u5143\u6d4b\u8bd5\u901a\u5e38\u8981\u6c42\u7f16\u5199\u6a21\u5757\u5316\u548c\u53ef\u6d4b\u8bd5\u7684\u4ee3\u7801\u3002\u8fd9\u9f13\u52b1\u5f00\u53d1\u4eba\u5458\u7f16\u5199\u6e05\u6670\u3001\u7b80\u6d01\u548c\u6613\u4e8e\u7406\u89e3\u7684\u4ee3\u7801\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u3002</li> <li>\u652f\u6301\u91cd\u6784\u548c\u4f18\u5316\uff1a\u901a\u8fc7\u5177\u6709\u5b8c\u5584\u7684\u5355\u5143\u6d4b\u8bd5\u5957\u4ef6\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u66f4\u52a0\u653e\u5fc3\u5730\u8fdb\u884c\u4ee3\u7801\u91cd\u6784\u548c\u6027\u80fd\u4f18\u5316\u3002\u5355\u5143\u6d4b\u8bd5\u53ef\u4ee5\u786e\u4fdd\u5728\u8fd9\u4e9b\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u7834\u574f\u73b0\u6709\u7684\u529f\u80fd\u3002</li> </ol> <p>\u6240\u4ee5\u5355\u5143\u6d4b\u8bd5\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u662f\u4e00\u79cd\u5173\u952e\u7684\u8d28\u91cf\u4fdd\u8bc1\u5de5\u5177\u3002\u901a\u8fc7\u5408\u7406\u7f16\u5199\u548c\u7ef4\u62a4\u5355\u5143\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u964d\u4f4e\u91d1\u878d\u7b56\u7565\u7684\u98ce\u9669\uff0c\u63d0\u9ad8\u4ea4\u6613\u7cfb\u7edf\u7684\u53ef\u9760\u6027\uff0c\u5e76\u4fc3\u8fdb\u56e2\u961f\u7684\u534f\u4f5c\u548c\u77e5\u8bc6\u5171\u4eab\u3002\u56e0\u6b64\uff0c\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\uff0c\u5355\u5143\u6d4b\u8bd5\u88ab\u8ba4\u4e3a\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\u5f00\u53d1\u5b9e\u8df5\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2026%20-%20%E6%96%87%E6%A1%A3%E5%92%8C%E6%B5%8B%E8%AF%95/#262","title":"26.2 \u6587\u6863\u6d4b\u8bd5","text":"<p>\u6587\u6863\u6d4b\u8bd5\u662f Rust \u4e2d\u4e00\u79cd\u7279\u6b8a\u7c7b\u578b\u7684\u6d4b\u8bd5\uff0c\u5b83\u4e0e\u5355\u5143\u6d4b\u8bd5\u6709\u6240\u4e0d\u540c\u3002\u6587\u6863\u6d4b\u8bd5\u4e3b\u8981\u7528\u4e8e\u9a8c\u8bc1\u6587\u6863\u4e2d\u7684\u4ee3\u7801\u793a\u4f8b\u662f\u5426\u6709\u6548\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u6587\u6863\u7684\u4e00\u90e8\u5206\u8fd0\u884c\u3002\u8fd9\u4e9b\u6d4b\u8bd5\u4ee5 <code>cargo test</code> \u547d\u4ee4\u8fd0\u884c\uff0c\u4f46\u5b83\u4eec\u4f1a\u5728\u6587\u6863\u6784\u5efa\u671f\u95f4\u6267\u884c\uff0c\u4ee5\u786e\u4fdd\u793a\u4f8b\u4ee3\u7801\u4ecd\u7136\u6709\u6548\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u7f16\u5199\u548c\u8fd0\u884c\u6587\u6863\u6d4b\u8bd5\u7684\u8be6\u7ec6\u6b65\u9aa4\uff1a</p> <ol> <li>\u7f16\u5199\u6587\u6863\u6ce8\u91ca\uff1a</li> </ol> <p>\u5728\u4f60\u7684 Rust \u4ee3\u7801\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7279\u6b8a\u7684\u6ce8\u91ca\u5757 <code>///</code> \u6216 <code>//!</code> \u6765\u7f16\u5199\u6587\u6863\u6ce8\u91ca\u3002\u5728\u6587\u6863\u6ce8\u91ca\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5305\u62ec\u4ee3\u7801\u793a\u4f8b\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>/// This function adds two numbers.\n///\n/// # Examples\n///\n/// ```\n/// let result = add(2, 3);\n/// assert_eq!(result, 5);\n/// ```\npub fn add(a: i32, b: i32) -&gt; i32 {\n    a + b\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7f16\u5199\u4e86\u4e00\u4e2a\u540d\u4e3a <code>add</code> \u7684\u51fd\u6570\uff0c\u5e76\u4f7f\u7528\u6587\u6863\u6ce8\u91ca\u5305\u542b\u4e86\u4e00\u4e2a\u793a\u4f8b\u3002</p> <ol> <li>\u8fd0\u884c\u6587\u6863\u6d4b\u8bd5\uff1a</li> </ol> <p>\u8981\u8fd0\u884c\u6587\u6863\u6d4b\u8bd5\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>cargo test</code> \u547d\u4ee4\uff0c\u5e76\u5305\u62ec <code>--doc</code> \u6807\u5fd7\uff1a</p> <pre><code>cargo test --doc\n</code></pre> <p>\u8fd0\u884c\u540e\uff0cCargo \u5c06\u6267\u884c\u6587\u6863\u6d4b\u8bd5\u5e76\u8f93\u51fa\u7ed3\u679c\u3002\u5b83\u5c06\u67e5\u627e\u6587\u6863\u6ce8\u91ca\u4e2d\u7684\u793a\u4f8b\uff0c\u5e76\u5c1d\u8bd5\u8fd0\u884c\u8fd9\u4e9b\u793a\u4f8b\u3002\u5982\u679c\u793a\u4f8b\u4e2d\u7684\u4ee3\u7801\u6210\u529f\u8fd0\u884c\u4e14\u4ea7\u751f\u7684\u8f93\u51fa\u4e0e\u6ce8\u91ca\u4e2d\u7684\u793a\u4f8b\u5339\u914d\uff0c\u6d4b\u8bd5\u5c06\u901a\u8fc7\u3002</p> <ol> <li>\u68c0\u67e5\u6587\u6863\u6d4b\u8bd5\u7ed3\u679c\uff1a</li> </ol> <p>\u6587\u6863\u6d4b\u8bd5\u7684\u7ed3\u679c\u5c06\u5305\u62ec\u901a\u8fc7\u7684\u6d4b\u8bd5\u793a\u4f8b\u548c\u5931\u8d25\u7684\u6d4b\u8bd5\u793a\u4f8b\u3002\u4f60\u5e94\u8be5\u68c0\u67e5\u8f93\u51fa\u4ee5\u786e\u4fdd\u793a\u4f8b\u4ee3\u7801\u4ecd\u7136\u6709\u6548\u3002\u5982\u679c\u6709\u5931\u8d25\u7684\u793a\u4f8b\uff0c\u4f60\u9700\u8981\u68c0\u67e5\u5e76\u4fee\u590d\u6587\u6863\u6216\u4ee3\u7801\u4e2d\u7684\u95ee\u9898\u3002</p> <p>\u6587\u6863\u6d4b\u8bd5\uff08Document Testing\uff09\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u5177\u6709\u91cd\u8981\u7684\u610f\u4e49\uff0c\u5b83\u4e0d\u4ec5\u6709\u52a9\u4e8e\u786e\u4fdd\u4ee3\u7801\u7684\u6b63\u786e\u6027\uff0c\u8fd8\u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u7406\u89e3\u6027\u3002\u4ee5\u4e0b\u662f\u6587\u6863\u6d4b\u8bd5\u5728\u91cf\u5316\u91d1\u878d\u4e2d\u7684\u4e00\u4e9b\u91cd\u8981\u610f\u4e49\uff1a</p> <ol> <li> <p>\u9a8c\u8bc1\u91d1\u878d\u6a21\u578b\u7684\u6b63\u786e\u6027\uff1a\u91cf\u5316\u91d1\u878d\u9886\u57df\u6d89\u53ca\u590d\u6742\u7684\u91d1\u878d\u6a21\u578b\u548c\u7b97\u6cd5\u3002\u6587\u6863\u6d4b\u8bd5\u53ef\u4ee5\u7528\u4e8e\u9a8c\u8bc1\u8fd9\u4e9b\u6a21\u578b\u7684\u6b63\u786e\u6027\uff0c\u786e\u4fdd\u5b83\u4eec\u6309\u7167\u9884\u671f\u5de5\u4f5c\u3002\u901a\u8fc7\u5728\u6587\u6863\u4e2d\u63d0\u4f9b\u793a\u4f8b\u548c\u9884\u671f\u7ed3\u679c\uff0c\u53ef\u4ee5\u786e\u4fdd\u6a21\u578b\u5728\u4ee3\u7801\u5b9e\u73b0\u4e2d\u4e0e\u7406\u8bba\u6a21\u578b\u4e00\u81f4\u3002</p> </li> <li> <p>\u793a\u4f8b\u548c\u6587\u6863\uff1a\u6587\u6863\u6d4b\u8bd5\u7684\u7ed3\u679c\u53ef\u4ee5\u6210\u4e3a\u4ee3\u7801\u6587\u6863\u7684\u4e00\u90e8\u5206\uff0c\u63d0\u4f9b\u793a\u4f8b\u548c\u7528\u6cd5\u8bf4\u660e\u3002\u8fd9\u5bf9\u4e8e\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u3001\u7814\u7a76\u4eba\u5458\u548c\u7528\u6237\u6765\u8bf4\u662f\u975e\u5e38\u6709\u4ef7\u503c\u7684\uff0c\u56e0\u4e3a\u4ed6\u4eec\u53ef\u4ee5\u8f7b\u677e\u5730\u67e5\u770b\u4ee3\u7801\u793a\u4f8b\uff0c\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u91cf\u5316\u91d1\u878d\u5de5\u5177\u548c\u5e93\u3002</p> </li> <li> <p>\u6539\u8fdb\u4ee3\u7801\u53ef\u8bfb\u6027\uff1a\u7f16\u5199\u6587\u6863\u6d4b\u8bd5\u901a\u5e38\u9700\u8981\u6e05\u6670\u7684\u6587\u6863\u6ce8\u91ca\u548c\u793a\u4f8b\u4ee3\u7801\uff0c\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7406\u89e3\u6027\u3002\u901a\u8fc7\u6e05\u6670\u7684\u6ce8\u91ca\u548c\u793a\u4f8b\uff0c\u5176\u4ed6\u4eba\u53ef\u4ee5\u66f4\u5bb9\u6613\u5730\u7406\u89e3\u4ee3\u7801\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u964d\u4f4e\u4e86\u5b66\u4e60\u548c\u4f7f\u7528\u7684\u96be\u5ea6\u3002</p> </li> <li> <p>\u5feb\u901f\u53cd\u9988\uff1a\u6587\u6863\u6d4b\u8bd5\u662f\u4e00\u79cd\u5feb\u901f\u83b7\u5f97\u53cd\u9988\u7684\u65b9\u5f0f\u3002\u5f53\u4f60\u4fee\u6539\u4ee3\u7801\u65f6\uff0c\u6587\u6863\u6d4b\u8bd5\u53ef\u4ee5\u81ea\u52a8\u8fd0\u884c\uff0c\u5e76\u544a\u8bc9\u4f60\u662f\u5426\u7834\u574f\u4e86\u73b0\u6709\u7684\u529f\u80fd\u6216\u9884\u671f\u7ed3\u679c\u3002\u8fd9\u6709\u52a9\u4e8e\u5feb\u901f\u6355\u83b7\u6f5c\u5728\u7684\u95ee\u9898\u5e76\u8fdb\u884c\u4fee\u590d\u3002</p> </li> <li> <p>\u5408\u89c4\u6027\u548c\u5ba1\u8ba1\uff1a\u5728\u91d1\u878d\u9886\u57df\uff0c\u5408\u89c4\u6027\u548c\u5ba1\u8ba1\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002\u6587\u6863\u6d4b\u8bd5\u53ef\u4ee5\u4f5c\u4e3a\u5408\u89c4\u6027\u548c\u5ba1\u8ba1\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u63d0\u4f9b\u53ef\u8ffd\u6eaf\u7684\u8bc1\u636e\uff0c\u8bc1\u660e\u4ee3\u7801\u7684\u6b63\u786e\u6027\u548c\u7a33\u5b9a\u6027\u3002</p> </li> <li> <p>\u6559\u80b2\u548c\u57f9\u8bad\uff1a\u6587\u6863\u6d4b\u8bd5\u8fd8\u53ef\u4ee5\u7528\u4e8e\u57f9\u8bad\u548c\u6559\u80b2\u76ee\u7684\u3002\u65b0\u5165\u804c\u7684\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u6587\u6863\u6d4b\u8bd5\u4e2d\u7684\u793a\u4f8b\u548c\u6ce8\u91ca\u6765\u5feb\u901f\u4e86\u89e3\u4ee3\u7801\u7684\u5de5\u4f5c\u65b9\u5f0f\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p> </li> </ol> <p>\u603b\u4e4b\uff0c\u6587\u6863\u6d4b\u8bd5\u5728\u91cf\u5316\u91d1\u878d\u9886\u57df\u5177\u6709\u91cd\u8981\u610f\u4e49\uff0c\u5b83\u4e0d\u4ec5\u6709\u52a9\u4e8e\u9a8c\u8bc1\u4ee3\u7801\u7684\u6b63\u786e\u6027\uff0c\u8fd8\u63d0\u4f9b\u4e86\u793a\u4f8b\u3001\u6587\u6863\u3001\u53ef\u8bfb\u6027\u548c\u5408\u89c4\u6027\u7684\u597d\u5904\u3002\u901a\u8fc7\u5408\u7406\u4f7f\u7528\u6587\u6863\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u63d0\u9ad8\u91cf\u5316\u91d1\u878d\u4ee3\u7801\u7684\u8d28\u91cf\uff0c\u51cf\u5c11\u9519\u8bef\u548c\u95ee\u9898\uff0c\u5e76\u589e\u5f3a\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u7406\u89e3\u6027\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2026%20-%20%E6%96%87%E6%A1%A3%E5%92%8C%E6%B5%8B%E8%AF%95/#263","title":"26.3 \u9879\u76ee\u96c6\u6210\u6d4b\u8bd5","text":"<p>Rust \u9879\u76ee\u7684\u96c6\u6210\u6d4b\u8bd5\u901a\u5e38\u7528\u4e8e\u6d4b\u8bd5\u4e0d\u540c\u6a21\u5757\u4e4b\u95f4\u7684\u4ea4\u4e92\uff0c\u4ee5\u786e\u4fdd\u6574\u4e2a\u9879\u76ee\u7684\u5404\u4e2a\u90e8\u5206\u6b63\u5e38\u534f\u4f5c\u3002\u4e0e\u5355\u5143\u6d4b\u8bd5\u4e0d\u540c\uff0c\u96c6\u6210\u6d4b\u8bd5\u6db5\u76d6\u4e86\u66f4\u5e7f\u6cdb\u7684\u8303\u56f4\uff0c\u901a\u5e38\u6d4b\u8bd5\u6574\u4e2a\u7a0b\u5e8f\u7684\u529f\u80fd\u800c\u4e0d\u662f\u5355\u4e2a\u51fd\u6570\u6216\u6a21\u5757\u3002\u4ee5\u4e0b\u662f\u5728 Rust \u9879\u76ee\u4e2d\u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5\u7684\u4e00\u822c\u6b65\u9aa4\uff1a</p> <ol> <li>\u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6\uff1a</li> </ol> <p>\u96c6\u6210\u6d4b\u8bd5\u901a\u5e38\u4e0e\u9879\u76ee\u7684\u6e90\u4ee3\u7801\u5206\u5f00\uff0c\u56e0\u6b64\u4f60\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u4e13\u95e8\u7684\u6d4b\u8bd5\u6587\u4ef6\u5939\u548c\u6d4b\u8bd5\u6587\u4ef6\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6d4b\u8bd5\u6587\u4ef6\u7684\u547d\u540d\u7ea6\u5b9a\u662f <code>tests</code> \u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\u4ee5 <code>.rs</code> \u6269\u5c55\u540d\u7ed3\u5c3e\uff0c\u5e76\u4e14\u6d4b\u8bd5\u6a21\u5757\u5e94\u8be5\u4f7f\u7528 <code>mod</code> \u5173\u952e\u5b57\u5b9a\u4e49\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6\uff0c\u4f8b\u5982 <code>tests/integration_test.rs</code>\u3002</p> <ol> <li>\u7f16\u5199\u96c6\u6210\u6d4b\u8bd5\uff1a</li> </ol> <p>\u5728\u6d4b\u8bd5\u6587\u4ef6\u4e2d\uff0c\u4f60\u53ef\u4ee5\u7f16\u5199\u6d4b\u8bd5\u51fd\u6570\u6765\u6d4b\u8bd5\u6574\u4e2a\u9879\u76ee\u7684\u529f\u80fd\u3002\u8fd9\u4e9b\u6d4b\u8bd5\u51fd\u6570\u5e94\u8be5\u6a21\u62df\u5b9e\u9645\u7684\u5e94\u7528\u573a\u666f\uff0c\u5305\u62ec\u6a21\u5757\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 Rust \u7684\u6807\u51c6\u5e93\u4e2d\u7684 <code>assert!</code> \u5b8f\u6216\u5176\u4ed6\u65ad\u8a00\u5b8f\u6765\u9a8c\u8bc1\u4ee3\u7801\u7684\u884c\u4e3a\u662f\u5426\u4e0e\u9884\u671f\u4e00\u81f4\u3002</p> <pre><code>// tests/integration_test.rs\n\n#[cfg(test)]\nmod tests {\n    #[test]\n    fn test_whole_system() {\n        // \u6a21\u62df\u6574\u4e2a\u7cfb\u7edf\u7684\u4ea4\u4e92\n        let result = your_project::function1() + your_project::function2();\n        assert_eq!(result, 42);\n    }\n}\n</code></pre> <p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u540d\u4e3a <code>test_whole_system</code> \u7684\u96c6\u6210\u6d4b\u8bd5\u51fd\u6570\uff0c\u5b83\u6d4b\u8bd5\u6574\u4e2a\u7cfb\u7edf\u7684\u884c\u4e3a\u3002</p> <ol> <li>\u914d\u7f6e\u6d4b\u8bd5\u73af\u5883\uff1a</li> </ol> <p>\u5728\u96c6\u6210\u6d4b\u8bd5\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u914d\u7f6e\u4e00\u4e9b\u6d4b\u8bd5\u73af\u5883\uff0c\u4ee5\u6a21\u62df\u5b9e\u9645\u5e94\u7528\u4e2d\u7684\u60c5\u51b5\u3002\u8fd9\u53ef\u4ee5\u5305\u62ec\u521d\u59cb\u5316\u6570\u636e\u5e93\u3001\u8bbe\u7f6e\u914d\u7f6e\u9009\u9879\u7b49\u3002</p> <ol> <li>\u8fd0\u884c\u96c6\u6210\u6d4b\u8bd5\uff1a</li> </ol> <p>\u4f7f\u7528 <code>cargo test</code> \u547d\u4ee4\u6765\u8fd0\u884c\u9879\u76ee\u7684\u96c6\u6210\u6d4b\u8bd5\uff1a</p> <pre><code>cargo test --test integration_test\n</code></pre> <p>\u8fd9\u5c06\u8fd0\u884c\u540d\u4e3a <code>integration_test</code> \u7684\u6d4b\u8bd5\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u96c6\u6210\u6d4b\u8bd5\u51fd\u6570\u3002</p> <ol> <li>\u68c0\u67e5\u6d4b\u8bd5\u7ed3\u679c\uff1a</li> </ol> <p>\u68c0\u67e5\u6d4b\u8bd5\u8fd0\u884c\u7684\u7ed3\u679c\uff0c\u5305\u62ec\u901a\u8fc7\u7684\u6d4b\u8bd5\u548c\u5931\u8d25\u7684\u6d4b\u8bd5\u3002\u5982\u679c\u6709\u5931\u8d25\u7684\u6d4b\u8bd5\uff0c\u4f60\u9700\u8981\u68c0\u67e5\u5e76\u4fee\u590d\u4e0e\u9879\u76ee\u7684\u6574\u5408\u76f8\u5173\u7684\u95ee\u9898\u3002</p> <p>\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u5728 Rust \u91cf\u5316\u91d1\u878d\u4e2d\u5177\u6709\u5173\u952e\u7684\u610f\u4e49\uff0c\u5b83\u6709\u52a9\u4e8e\u786e\u4fdd\u6574\u4e2a\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u5728\u5404\u4e2a\u7ec4\u4ef6\u4e4b\u95f4\u534f\u540c\u5de5\u4f5c\uff0c\u5e76\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\u3002\u4ee5\u4e0b\u662f\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u4e0d\u53ef\u6216\u7f3a\u7684\u7684\u539f\u56e0\uff1a</p> <ol> <li> <p>\u9a8c\u8bc1\u6574\u4e2a\u7cfb\u7edf\u7684\u4e00\u81f4\u6027\uff1a\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u901a\u5e38\u7531\u591a\u4e2a\u7ec4\u4ef6\u7ec4\u6210\uff0c\u5305\u62ec\u6570\u636e\u91c7\u96c6\u3001\u6a21\u578b\u8ba1\u7b97\u3001\u4ea4\u6613\u6267\u884c\u7b49\u3002\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u786e\u4fdd\u8fd9\u4e9b\u7ec4\u4ef6\u5728\u6574\u4e2a\u7cfb\u7edf\u4e2d\u534f\u540c\u5de5\u4f5c\uff0c\u5e76\u4fdd\u6301\u4e00\u81f4\u6027\u3002\u5b83\u6709\u52a9\u4e8e\u68c0\u6d4b\u6f5c\u5728\u7684\u96c6\u6210\u95ee\u9898\uff0c\u4f8b\u5982\u6570\u636e\u6d41\u4f20\u8f93\u3001\u7b97\u6cd5\u63a5\u53e3\u7b49\u3002</p> </li> <li> <p>\u6a21\u62df\u771f\u5b9e\u5e02\u573a\u73af\u5883\uff1a\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u6a21\u62df\u771f\u5b9e\u5e02\u573a\u73af\u5883\uff0c\u5305\u62ec\u4e0d\u540c\u5e02\u573a\u6761\u4ef6\u3001\u6ce2\u52a8\u6027\u548c\u4ea4\u6613\u6d3b\u52a8\u6c34\u5e73\u3002\u8fd9\u6709\u52a9\u4e8e\u8bc4\u4f30\u7cfb\u7edf\u5728\u5404\u79cd\u5e02\u573a\u60c5\u51b5\u4e0b\u7684\u6027\u80fd\u548c\u53ef\u9760\u6027\u3002</p> </li> <li> <p>\u68c0\u6d4b\u6f5c\u5728\u98ce\u9669\uff1a\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u5fc5\u987b\u5177\u5907\u9ad8\u5ea6\u7684\u53ef\u9760\u6027\uff0c\u4ee5\u907f\u514d\u6f5c\u5728\u7684\u98ce\u9669\u548c\u635f\u5931\u3002\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u5e2e\u52a9\u68c0\u6d4b\u6f5c\u5728\u7684\u98ce\u9669\uff0c\u4f8b\u5982\u7cfb\u7edf\u5d29\u6e83\u3001\u9519\u8bef\u7684\u4ea4\u6613\u6267\u884c\u7b49\u3002</p> </li> <li> <p>\u8bc4\u4f30\u7cfb\u7edf\u6027\u80fd\uff1a\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u7528\u4e8e\u8bc4\u4f30\u7cfb\u7edf\u7684\u6027\u80fd\uff0c\u5305\u62ec\u54cd\u5e94\u65f6\u95f4\u3001\u541e\u5410\u91cf\u548c\u7a33\u5b9a\u6027\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u5b9a\u7cfb\u7edf\u662f\u5426\u80fd\u591f\u5728\u9ad8\u8d1f\u8f7d\u4e0b\u6b63\u5e38\u8fd0\u884c\u3002</p> </li> <li> <p>\u6d4b\u8bd5\u7b56\u7565\u7684\u6267\u884c\uff1a\u91cf\u5316\u91d1\u878d\u7b56\u7565\u53ef\u80fd\u5305\u62ec\u591a\u4e2a\u7ec4\u4ef6\uff0c\u5305\u62ec\u6570\u636e\u5904\u7406\u3001\u4fe1\u53f7\u751f\u6210\u3001\u4ed3\u4f4d\u7ba1\u7406\u548c\u98ce\u9669\u63a7\u5236\u7b49\u3002\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u786e\u4fdd\u6574\u4e2a\u7b56\u7565\u7684\u6267\u884c\u7b26\u5408\u9884\u671f\u3002</p> </li> <li> <p>\u5408\u89c4\u6027\u548c\u5ba1\u8ba1\uff1a\u5728\u91d1\u878d\u9886\u57df\uff0c\u5408\u89c4\u6027\u548c\u5ba1\u8ba1\u975e\u5e38\u91cd\u8981\u3002\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u53ef\u4ee5\u63d0\u4f9b\u53ef\u8ffd\u6eaf\u6027\u548c\u5ba1\u8ba1\u7684\u8bc1\u636e\uff0c\u4ee5\u786e\u4fdd\u7cfb\u7edf\u5728\u5408\u89c4\u6027\u65b9\u9762\u8fbe\u5230\u8981\u6c42\u3002</p> </li> <li> <p>\u81ea\u52a8\u5316\u6d4b\u8bd5\u6d41\u7a0b\uff1a\u901a\u8fc7\u81ea\u52a8\u5316\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u6d41\u7a0b\uff0c\u53ef\u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u964d\u4f4e\u6d4b\u8bd5\u6210\u672c\u3002\u81ea\u52a8\u5316\u6d4b\u8bd5\u8fd8\u53ef\u4ee5\u5728\u6bcf\u6b21\u4ee3\u7801\u53d8\u66f4\u540e\u6301\u7eed\u8fd0\u884c\uff0c\u4ee5\u6355\u83b7\u6f5c\u5728\u95ee\u9898\u3002</p> </li> <li> <p>\u6539\u8fdb\u7cfb\u7edf\u53ef\u7ef4\u62a4\u6027\uff1a\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u901a\u5e38\u9700\u8981\u5c06\u7cfb\u7edf\u7684\u4e0d\u540c\u90e8\u5206\u89e3\u8026\u5408\u4f5c\uff0c\u8fd9\u6709\u52a9\u4e8e\u6539\u8fdb\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u3002\u901a\u8fc7\u5f3a\u8c03\u63a5\u53e3\u548c\u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u53ef\u4ee5\u4f7f\u7cfb\u7edf\u66f4\u5bb9\u6613\u7ef4\u62a4\u548c\u6269\u5c55\u3002</p> </li> </ol> <p>\u9879\u76ee\u96c6\u6210\u6d4b\u8bd5\u5728 Rust \u91cf\u5316\u91d1\u878d\u4e2d\u7684\u610f\u4e49\u5728\u4e8e\u786e\u4fdd\u7cfb\u7edf\u7684\u6b63\u786e\u6027\u3001\u7a33\u5b9a\u6027\u548c\u6027\u80fd\uff0c\u540c\u65f6\u964d\u4f4e\u98ce\u9669\u5e76\u63d0\u9ad8\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u3002\u8fd9\u662f\u6784\u5efa\u9ad8\u5ea6\u53ef\u4fe1\u8d56\u7684\u91d1\u878d\u7cfb\u7edf\u6240\u5fc5\u9700\u7684\u5b9e\u8df5\uff0c\u6709\u52a9\u4e8e\u786e\u4fdd\u4ea4\u6613\u7b56\u7565\u5728\u5b9e\u9645\u5e02\u573a\u4e2d\u80fd\u591f\u53ef\u9760\u6267\u884c\u3002</p> <p>\u6700\u540e\uff0c\u8ba9\u6211\u4eec\u6765\u5bf9\u6bd4\u4ee5\u4e0b\u4e09\u79cd\u6d4b\u8bd5\u7684\u5f02\u540c\uff0c\u4ee5\u4e0b\u662f Rust \u4e2d\u5355\u5143\u6d4b\u8bd5\u3001\u6587\u6863\u6d4b\u8bd5\u548c\u96c6\u6210\u6d4b\u8bd5\u7684\u5bf9\u6bd4\u8868\u683c\uff1a</p> \u7279\u5f81 \u5355\u5143\u6d4b\u8bd5 \u6587\u6863\u6d4b\u8bd5 \u96c6\u6210\u6d4b\u8bd5 \u76ee\u7684 \u9a8c\u8bc1\u4ee3\u7801\u7684\u5355\u4e2a\u5355\u5143\uff08\u901a\u5e38\u662f\u51fd\u6570\u6216\u65b9\u6cd5\uff09\u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c \u9a8c\u8bc1\u6587\u6863\u4e2d\u7684\u4ee3\u7801\u793a\u4f8b\u662f\u5426\u6709\u6548 \u9a8c\u8bc1\u6574\u4e2a\u9879\u76ee\u7684\u5404\u4e2a\u90e8\u5206\u662f\u5426\u6b63\u5e38\u534f\u4f5c \u4ee3\u7801\u4f4d\u7f6e \u901a\u5e38\u4e0e\u751f\u4ea7\u4ee3\u7801\u4f4d\u4e8e\u540c\u4e00\u6587\u4ef6\u4e2d\uff08\u6d4b\u8bd5\u6a21\u5757\uff09 \u5d4c\u5165\u5728\u6587\u6863\u6ce8\u91ca\u4e2d \u901a\u5e38\u4f4d\u4e8e\u9879\u76ee\u7684\u6d4b\u8bd5\u6587\u4ef6\u5939\u4e2d\uff0c\u4e0e\u751f\u4ea7\u4ee3\u7801\u5206\u5f00 \u8fd0\u884c\u65b9\u5f0f \u4f7f\u7528 <code>cargo test</code> \u547d\u4ee4\u8fd0\u884c \u4f7f\u7528 <code>cargo test --doc</code> \u547d\u4ee4\u8fd0\u884c \u4f7f\u7528 <code>cargo test</code> \u547d\u4ee4\u8fd0\u884c\uff0c\u6307\u5b9a\u6d4b\u8bd5\u6587\u4ef6 \u6d4b\u8bd5\u8303\u56f4 \u901a\u5e38\u6d4b\u8bd5\u5355\u4e2a\u51fd\u6570\u6216\u6a21\u5757\u7684\u529f\u80fd \u9a8c\u8bc1\u6587\u6863\u4e2d\u7684\u4ee3\u7801\u793a\u4f8b \u6d4b\u8bd5\u6574\u4e2a\u9879\u76ee\u7684\u4e0d\u540c\u90e8\u5206\u4e4b\u95f4\u7684\u4ea4\u4e92 \u65ad\u8a00\u5b8f \u4f7f\u7528\u65ad\u8a00\u5b8f\u5982 <code>assert_eq!</code>\u3001<code>assert_ne!</code>\u3001<code>assert!</code> \u7b49 \u4f7f\u7528\u65ad\u8a00\u5b8f\u5982 <code>assert_eq!</code>\u3001<code>assert_ne!</code>\u3001<code>assert!</code> \u7b49 \u4f7f\u7528\u65ad\u8a00\u5b8f\u5982 <code>assert_eq!</code>\u3001<code>assert_ne!</code>\u3001<code>assert!</code> \u7b49 \u6d4b\u8bd5\u76ee\u6807 \u786e\u4fdd\u5355\u5143\u7684\u6b63\u786e\u6027 \u786e\u4fdd\u6587\u6863\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u6b63\u786e\u6027 \u786e\u4fdd\u6574\u4e2a\u9879\u76ee\u7684\u529f\u80fd\u548c\u534f\u4f5c\u6b63\u786e\u6027 \u6d4b\u8bd5\u73af\u5883 \u901a\u5e38\u4e0d\u9700\u8981\u989d\u5916\u7684\u6d4b\u8bd5\u73af\u5883 \u53ef\u80fd\u9700\u8981\u6a21\u62df\u4e00\u4e9b\u73af\u5883\u6216\u914d\u7f6e \u53ef\u80fd\u9700\u8981\u914d\u7f6e\u4e00\u4e9b\u6d4b\u8bd5\u73af\u5883\uff0c\u5982\u6570\u636e\u5e93\u3001\u914d\u7f6e\u9009\u9879\u7b49 \u5206\u79bb\u6027 \u901a\u5e38\u4e0e\u751f\u4ea7\u4ee3\u7801\u5206\u5f00\uff0c\u4f46\u4f4d\u4e8e\u540c\u4e00\u6587\u4ef6\u4e2d \u4e0e\u6587\u6863\u548c\u4ee3\u7801\u7d27\u5bc6\u96c6\u6210\uff0c\u4f4d\u4e8e\u6587\u6863\u6ce8\u91ca\u4e2d \u901a\u5e38\u4e0e\u751f\u4ea7\u4ee3\u7801\u5206\u5f00\uff0c\u4f4d\u4e8e\u6d4b\u8bd5\u6587\u4ef6\u4e2d \u81ea\u52a8\u5316 \u901a\u5e38\u5728\u5f00\u53d1\u6d41\u7a0b\u4e2d\u9891\u7e41\u8fd0\u884c\uff0c\u53ef\u81ea\u52a8\u5316 \u901a\u5e38\u5728\u6587\u6863\u6784\u5efa\u65f6\u8fd0\u884c\uff0c\u53ef\u81ea\u52a8\u5316 \u901a\u5e38\u5728\u5f00\u53d1\u6d41\u7a0b\u4e2d\u8fd0\u884c\uff0c\u53ef\u81ea\u52a8\u5316 \u7528\u9014 \u9a8c\u8bc1\u4ee3\u7801\u529f\u80fd\u662f\u5426\u6b63\u786e \u9a8c\u8bc1\u793a\u4f8b\u4ee3\u7801\u662f\u5426\u6709\u6548 \u9a8c\u8bc1\u6574\u4e2a\u9879\u76ee\u7684\u5404\u4e2a\u90e8\u5206\u662f\u5426\u6b63\u5e38\u534f\u4f5c <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u6d4b\u8bd5\u7c7b\u578b\u901a\u5e38\u7528\u4e8e\u4e0d\u540c\u7684\u76ee\u7684\u548c\u6d4b\u8bd5\u573a\u666f\u3002\u5355\u5143\u6d4b\u8bd5\u4e3b\u8981\u7528\u4e8e\u9a8c\u8bc1\u5355\u4e2a\u51fd\u6570\u6216\u6a21\u5757\u7684\u529f\u80fd\uff0c\u6587\u6863\u6d4b\u8bd5\u7528\u4e8e\u9a8c\u8bc1\u6587\u6863\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u800c\u96c6\u6210\u6d4b\u8bd5\u7528\u4e8e\u9a8c\u8bc1\u6574\u4e2a\u9879\u76ee\u7684\u529f\u80fd\u548c\u534f\u4f5c\u3002\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u4f60\u53ef\u80fd\u4f1a\u540c\u65f6\u4f7f\u7528\u8fd9\u4e09\u79cd\u6d4b\u8bd5\u7c7b\u578b\u6765\u786e\u4fdd\u4ee3\u7801\u7684\u8d28\u91cf\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/","title":"Chapter 27 \u5e38\u89c1\u6280\u672f\u6307\u6807\u53ca\u5176\u5b9e\u73b0","text":"<p>\u91cf\u5316\u91d1\u878d\u6280\u672f\u6307\u6807\u901a\u5e38\u7528\u4e8e\u5206\u6790\u548c\u9884\u6d4b\u91d1\u878d\u5e02\u573a\u7684\u8d70\u52bf\u548c\u4ef7\u683c\u53d8\u52a8\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u91cf\u5316\u91d1\u878d\u6280\u672f\u6307\u6807\uff1a</p> <p>\u4ee5\u4e0b\u662f\u5173\u4e8e\u5404\u79cd\u5e38\u89c1\u6280\u672f\u6307\u6807\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u5b83\u4eec\u7684\u540d\u79f0\u3001\u63cf\u8ff0\u4ee5\u53ca\u4e3b\u8981\u7528\u9014\uff1a</p> \u6280\u672f\u6307\u6807 \u63cf\u8ff0 \u4e3b\u8981\u7528\u9014 \u79fb\u52a8\u5e73\u5747\u7ebf\uff08Moving Averages\uff09 \u5305\u62ec\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\uff08SMA\uff09\u548c\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf\uff08EMA\uff09\uff0c\u7528\u4e8e\u5e73\u6ed1\u4ef7\u683c\u6570\u636e\u4ee5\u8bc6\u522b\u8d8b\u52bf\u3002 \u8bc6\u522b\u4ef7\u683c\u8d8b\u52bf\u548c\u786e\u5b9a\u8d8b\u52bf\u7684\u65b9\u5411\u3002 \u76f8\u5bf9\u5f3a\u5ea6\u6307\u6807\uff08RSI\uff09 \u8861\u91cf\u5e02\u573a\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff0c\u7528\u4e8e\u5224\u65ad\u4ef7\u683c\u662f\u5426\u8fc7\u5ea6\u6ce2\u52a8\u3002 \u8bc6\u522b\u5e02\u573a\u7684\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff0c\u5224\u65ad\u4ef7\u683c\u662f\u5426\u5177\u5907\u53cd\u8f6c\u6f5c\u529b\u3002 \u968f\u673a\u6307\u6807\uff08Stochastic Oscillator\uff09 \u7528\u4e8e\u6d4b\u91cf\u4ef7\u683c\u76f8\u5bf9\u4e8e\u5176\u4ef7\u683c\u8303\u56f4\u7684\u4f4d\u7f6e\uff0c\u4ee5\u786e\u5b9a\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u3002 \u8bc6\u522b\u8d44\u4ea7\u7684\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff0c\u4ea7\u751f\u4e70\u5356\u4fe1\u53f7\u3002 \u5e03\u6797\u5e26\uff08Bollinger Bands\uff09 \u901a\u8fc7\u5728\u4ef7\u683c\u5468\u56f4\u7ed8\u5236\u6ce2\u52a8\u6027\u901a\u9053\u6765\u8bc6\u522b\u4ef7\u683c\u6ce2\u52a8\u6027\u548c\u8d8b\u52bf\u3002 \u8bc6\u522b\u4ef7\u683c\u6ce2\u52a8\u6027\uff0c\u786e\u5b9a\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u3002 MACD\u6307\u6807\uff08Moving Average Convergence Divergence\uff09 \u7ed3\u5408\u4e0d\u540c\u671f\u9650\u7684\u79fb\u52a8\u5e73\u5747\u7ebf\u4ee5\u8bc6\u522b\u4ef7\u683c\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002 \u8bc6\u522b\u4ef7\u683c\u7684\u8d8b\u52bf\u3001\u65b9\u5411\u548c\u6f5c\u5728\u7684\u4ea4\u53c9\u70b9\u3002 \u968f\u673a\u5f3a\u5ea6\u6307\u6807\uff08RSI\uff09 \u8861\u91cf\u4e00\u79cd\u8d44\u4ea7\u76f8\u5bf9\u4e8e\u5e02\u573a\u6307\u6570\u7684\u8868\u73b0\u3002 \u8bc4\u4f30\u8d44\u4ea7\u7684\u76f8\u5bf9\u5f3a\u5ea6\u548c\u76f8\u5bf9\u5f31\u70b9\u3002 ATR\u6307\u6807\uff08Average True Range\uff09 \u6d4b\u91cf\u8d44\u4ea7\u7684\u6ce2\u52a8\u6027\uff0c\u5e2e\u52a9\u786e\u5b9a\u6b62\u635f\u548c\u6b62\u76c8\u6c34\u5e73\u3002 \u8bc4\u4f30\u8d44\u4ea7\u7684\u6ce2\u52a8\u6027\uff0c\u786e\u5b9a\u9002\u5f53\u7684\u98ce\u9669\u7ba1\u7406\u7b56\u7565\u3002 ADX\u6307\u6807\uff08Average Directional Index\uff09 \u8861\u91cf\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002 \u8bc6\u522b\u5e02\u573a\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\uff0c\u5e2e\u52a9\u51b3\u7b56\u8fdb\u51fa\u573a\u65f6\u673a\u3002 ROC\u6307\u6807\uff08Rate of Change\uff09 \u8861\u91cf\u4ef7\u683c\u767e\u5206\u6bd4\u53d8\u5316\u4ee5\u8bc6\u522b\u8d8b\u52bf\u7684\u52a0\u901f\u6216\u51cf\u901f\u3002 \u8bc6\u522b\u4ef7\u683c\u8d8b\u52bf\u7684\u901f\u5ea6\u53d8\u5316\uff0c\u6f5c\u5728\u7684\u53cd\u8f6c\u6216\u52a0\u901f\u3002 CCI\u6307\u6807\uff08Commodity Channel Index\uff09 \u7528\u4e8e\u8bc6\u522b\u4ef7\u683c\u76f8\u5bf9\u4e8e\u5176\u7edf\u8ba1\u5e73\u5747\u503c\u7684\u504f\u79bb\u3002 \u8bc4\u4f30\u8d44\u4ea7\u662f\u5426\u5904\u4e8e\u8d85\u4e70\u6216\u8d85\u5356\u72b6\u6001\u3002 Fibonacci\u56de\u8c03\u548c\u6269\u5c55\u6c34\u5e73 \u57fa\u4e8e\u9ec4\u91d1\u6bd4\u4f8b\u7684\u6570\u5b66\u5de5\u5177\uff0c\u7528\u4e8e\u9884\u6d4b\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u3002 \u8bc6\u522b\u6f5c\u5728\u7684\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\uff0c\u5e2e\u52a9\u51b3\u7b56\u8fdb\u51fa\u573a\u65f6\u673a\u3002 \u6210\u4ea4\u91cf\u5206\u6790\u6307\u6807 \u5305\u62ec\u6210\u4ea4\u91cf\u67f1\u72b6\u56fe\u548c\u6210\u4ea4\u91cf\u79fb\u52a8\u5e73\u5747\u7ebf\uff0c\u7528\u4e8e\u5206\u6790\u5e02\u573a\u7684\u6d3b\u8dc3\u5ea6\u548c\u529b\u91cf\u3002 \u8bc4\u4f30\u5e02\u573a\u6d3b\u8dc3\u5ea6\uff0c\u8f85\u52a9\u4ef7\u683c\u8d8b\u52bf\u5206\u6790\u3002 \u5747\u7ebf\u4ea4\u53c9 \u901a\u8fc7\u4e0d\u540c\u5468\u671f\u7684\u79fb\u52a8\u5e73\u5747\u7ebf\u7684\u4ea4\u53c9\u6765\u8bc6\u522b\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u3002 \u8bc6\u522b\u8d8b\u52bf\u7684\u6539\u53d8\uff0c\u4ea7\u751f\u4e70\u5356\u4fe1\u53f7\u3002 Ichimoku\u4e91 \u63d0\u4f9b\u4e86\u6709\u5173\u8d8b\u52bf\u3001\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u7684\u7efc\u5408\u4fe1\u606f\u3002 \u63d0\u4f9b\u591a\u4e2a\u6307\u6807\u7684\u7efc\u5408\u4fe1\u606f\uff0c\u5e2e\u52a9\u8bc6\u522b\u8d8b\u52bf\u548c\u652f\u6491/\u963b\u529b\u6c34\u5e73\u3002 \u5a01\u5ec9\u6307\u6807\uff08Williams %R\uff09 \u7c7b\u4f3c\u4e8e\u968f\u673a\u6307\u6807\uff0c\u7528\u4e8e\u6d4b\u91cf\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u3002 \u8bc4\u4f30\u8d44\u4ea7\u662f\u5426\u5904\u4e8e\u8d85\u4e70\u6216\u8d85\u5356\u72b6\u6001\uff0c\u4ea7\u751f\u4e70\u5356\u4fe1\u53f7\u3002 \u5747\u5e45\u6307\u6807\uff08Average Directional Movement Index\uff0cADX\uff09 \u7528\u4e8e\u786e\u5b9a\u8d8b\u52bf\u7684\u65b9\u5411\u548c\u5f3a\u5ea6\u3002 \u8bc6\u522b\u5e02\u573a\u7684\u8d8b\u52bf\u65b9\u5411\u548c\u8d8b\u52bf\u7684\u5f3a\u5ea6\uff0c\u5e2e\u52a9\u51b3\u7b56\u8fdb\u51fa\u573a\u65f6\u673a\u3002 \u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\uff08Multiple Time Frame Analysis\uff09 \u540c\u65f6\u4f7f\u7528\u4e0d\u540c\u65f6\u95f4\u5468\u671f\u7684\u56fe\u8868\u6765\u786e\u8ba4\u8d8b\u52bf\u3002 \u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u5206\u6790\uff0c\u51cf\u5c11\u9519\u8bef\u4fe1\u53f7\u7684\u53ef\u80fd\u6027\u3002 <p>\u8fd9\u4e9b\u6280\u672f\u6307\u6807\u662f\u91cf\u5316\u91d1\u878d\u548c\u80a1\u7968\u5e02\u573a\u5206\u6790\u4e2d\u5e38\u7528\u7684\u5de5\u5177\uff0c\u4ea4\u6613\u8005\u4f7f\u7528\u5b83\u4eec\u6765\u5e2e\u52a9\u505a\u51fa\u4e70\u5165\u548c\u5356\u51fa\u51b3\u7b56\uff0c\u8bc4\u4f30\u5e02\u573a\u8d8b\u52bf\u548c\u98ce\u9669\uff0c\u5e76\u5236\u5b9a\u6709\u6548\u7684\u4ea4\u6613\u7b56\u7565\u3002\u6839\u636e\u5e02\u573a\u60c5\u51b5\u548c\u4ea4\u6613\u8005\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u5176\u4e2d\u4e00\u4e2a\u6216\u591a\u4e2a\u6307\u6807\u6765\u8fdb\u884c\u5206\u6790\u3002</p> <p>\u901a\u5e38\u5404\u4e2a\u4e3b\u8981\u7f16\u7a0b\u8bed\u8a00\u90fd\u6709\u7528\u4e8e\u6280\u672f\u5206\u6790\uff08Technical Analysis\uff0cTA\uff09\u7684\u5e93\u548c\u5de5\u5177\uff0c\u7528\u4e8e\u5728\u91d1\u878d\u5e02\u573a\u6570\u636e\u4e0a\u6267\u884c\u5404\u79cd\u6280\u672f\u6307\u6807\u548c\u5206\u6790\u3002\u5728C\u3001Go\u548cPython\u4e2d\u5e38\u89c1\u7684TA\u5e93\u4e00\u822c\u6709\u8fd9\u4e9b\uff1a</p> <p>C\u8bed\u8a00\uff1a</p> <ol> <li>TA-Lib\uff08Technical Analysis Library\uff09\uff1a TA-Lib\u662f\u4e00\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684C\u5e93\uff0c\u63d0\u4f9b\u4e86\u8d85\u8fc7150\u79cd\u6280\u672f\u6307\u6807\u548c\u56fe\u8868\u6a21\u5f0f\u7684\u8ba1\u7b97\u529f\u80fd\u3002\u5b83\u652f\u6301\u5404\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u91d1\u878d\u5e02\u573a\u6570\u636e\uff0c\u5e76\u4e14\u53ef\u4ee5\u8f7b\u677e\u4e0eC/C++\u9879\u76ee\u96c6\u6210\u3002</li> </ol> <p>Go\u8bed\u8a00\uff1a</p> <ol> <li>tulipindicators\uff1a tulipindicators\u662f\u4e00\u4e2a\u7528Go\u7f16\u5199\u7684\u5f00\u6e90\u6280\u672f\u6307\u6807\u5e93\uff0c\u5b83\u63d0\u4f9b\u4e86\u591a\u79cd\u5e38\u7528\u6280\u672f\u6307\u6807\u7684\u5b9e\u73b0\u3002\u8fd9\u4e2a\u5e93\u6613\u4e8e\u4f7f\u7528\uff0c\u53ef\u4ee5\u5728Go\u9879\u76ee\u4e2d\u65b9\u4fbf\u5730\u96c6\u6210\u3002</li> <li>**go-talib\uff1a**ta\u7684go\u8bed\u8a00wrapper</li> </ol> <p>Python\u8bed\u8a00\uff1a</p> <ol> <li>Pandas TA\uff1a Pandas TA\u662f\u4e00\u4e2a\u57fa\u4e8ePython\u7684\u5e93\uff0c\u6784\u5efa\u5728Pandas DataFrame\u4e4b\u4e0a\uff0c\u5b83\u63d0\u4f9b\u4e86\u8d85\u8fc7150\u4e2a\u6280\u672f\u6307\u6807\u7684\u8ba1\u7b97\u529f\u80fd\u3002Pandas TA\u4e0ePandas\u65e0\u7f1d\u96c6\u6210\uff0c\u4f7f\u5f97\u5728Python\u4e2d\u8fdb\u884c\u91d1\u878d\u6570\u636e\u5206\u6790\u53d8\u5f97\u975e\u5e38\u65b9\u4fbf\u3002</li> <li>TA-Lib for Python\uff1a \u4e0eC\u7248\u672c\u7c7b\u4f3c\uff0cTA-Lib\u4e5f\u6709\u9002\u7528\u4e8ePython\u7684\u63a5\u53e3\uff0c\u5141\u8bb8Python\u5f00\u53d1\u8005\u4f7f\u7528TA-Lib\u4e2d\u7684\u6280\u672f\u6307\u6807\u3002\u8fd9\u4e2a\u5e93\u901a\u8fc7\u7ed1\u5b9aC\u5e93\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e86\u9ad8\u6027\u80fd\u3002</li> </ol> <p>\u4f5c\u4e3a\u91cf\u5316\u91d1\u878d\u7cfb\u7edf\u90e8\u7f72\u7684\u524d\u63d0\u4e4b\u4e00\uff0c\u5728Rust\u793e\u533a\u7684\u751f\u6001\u4e2d\uff0c\u5f53\u7136\u4e5f\u5177\u6709\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u5e93\uff0c\u867d\u7136\u5b83\u7684\u751f\u6001\u7cfb\u7edf\u53ef\u80fd\u6ca1\u6709\u50cfPython\u6216C\u90a3\u6837\u4e30\u5bcc\uff0c\u4f46\u4ecd\u7136\u5b58\u5728\u4e00\u4e9b\u53ef\u4ee5\u7528\u4e8e\u91cf\u5316\u91d1\u878d\u5206\u6790\u7684\u5de5\u5177\u548c\u5e93\uff0c\u914d\u5408\u81ea\u7814\u7684\u6280\u672f\u6307\u6807\u5e93\u548c\u6570\u5b66\u5e93\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4e0b\u4e5f\u8db3\u591f\u4f7f\u7528\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u7528\u4e8e\u6280\u672f\u5206\u6790\u548c\u91cf\u5316\u91d1\u878d\u7684Rust\u5e93\uff0c\uff1a</p> <ol> <li> <p>TAlib-rs\uff1a TAlib-rs\u662f\u4e00\u4e2aRust\u7684TA-Lib\u7ed1\u5b9a\uff0c\u5b83\u5141\u8bb8Rust\u5f00\u53d1\u8005\u4f7f\u7528TA-Lib\u4e2d\u7684\u6280\u672f\u6307\u6807\u529f\u80fd\u3002TA-Lib\u5305\u542b\u4e86150\u591a\u79cd\u6280\u672f\u6307\u6807\u7684\u5b9e\u73b0\uff0c\u56e0\u6b64\u901a\u8fc7TAlib-rs\uff0c\u4f60\u53ef\u4ee5\u5728Rust\u4e2d\u6267\u884c\u5e7f\u6cdb\u7684\u6280\u672f\u5206</p> </li> <li> <p>RustQuant\uff1a Rust\u4e2d\u7684\u91cf\u5316\u91d1\u878d\u5de5\u5177\u5e93\u3002\u540c\u65f6\u4e5f\u662fRust\u4e2d\u6700\u5927\u3001\u6700\u6210\u719f\u7684\u671f\u6743\u5b9a\u4ef7\u5e93\u3002</p> </li> <li> <p>investments: \u4e00\u4e2a\u7528Rust\u7f16\u5199\u7684\u5f00\u6e90\u5e93\uff0c\u65e8\u5728\u63d0\u4f9b\u4e00\u4e9b\u7528\u4e8e\u91d1\u878d\u548c\u6295\u8d44\u7684\u5de5\u5177\u548c\u51fd\u6570\u3002\u8fd9\u4e2a\u5e93\u53ef\u80fd\u5305\u62ec\u7528\u4e8e\u8ba1\u7b97\u6295\u8d44\u56de\u62a5\u7387\u3001\u5206\u6790\u91d1\u878d\u6570\u636e\u4ee5\u53ca\u6267\u884c\u57fa\u672c\u7684\u6295\u8d44\u5206\u6790\u7684\u529f\u80fd\u3002</p> </li> </ol> <p>Rust\u5728\u91d1\u878d\u9886\u57df\u7684\u5e94\u7528\u786e\u5b9e\u76f8\u5bf9\u8f83\u65b0\uff0c\u56e0\u6b64\u53ef\u7528\u7684\u5e93\u548c\u5de5\u5177\u6709\u4e00\u5b9a\u7684\u53ef\u80fd\u9619\u5982\u3002\u4e0d\u8fc7\uff0c\u968f\u7740Rust\u7684\u4e0d\u65ad\u53d1\u5c55\u548c\u751f\u6001\u7cfb\u7edf\u7684\u58ee\u5927\uff0c\u6211\u9884\u671f\u5c06\u4f1a\u6709\u66f4\u591a\u7684\u91d1\u878d\u5206\u6790\u548c\u91cf\u5316\u4ea4\u6613\u5de5\u5177\u51fa\u73b0\u3002\u5f53\u4f60\u5df2\u7ecf\u719f\u6089Rust\u7f16\u7a0b\uff0c\u5e76\u4e14\u5e0c\u671b\u5728\u6b64\u9886\u57df\u8fdb\u884c\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u4e00\u4e0b\u4e3aRust\u793e\u533a\u8d21\u732e\u66f4\u591a\u7684\u91d1\u878d\u76f8\u5173\u9879\u76ee\u548c\u5e93\u3002</p> <p>\u597d\uff0c\u4e4b\u524d\u5728\u7b2c3\u7ae0\u6211\u4eec\u5df2\u7ecf\u5b9e\u73b0\u4e86SMA\u3001EMA\u548cRSI\uff0c\u73b0\u5728\u6211\u4eec\u6765\u5c1d\u8bd5\u8fdb\u884c\u4e00\u4e9b\u5176\u4ed6\u5b9e\u7528\u6280\u672f\u5206\u6790\u6307\u6807\u7684rust\u5b9e\u73b0\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#271-stochastic-oscillator","title":"27.1\uff1a \u968f\u673a\u6307\u6807\uff08Stochastic Oscillator\uff09","text":"<p>\u5728\u91d1\u878d\u5e02\u573a\u4e2d\uff0c\u5f88\u591a\u6295\u8d44\u8005\u4f1a\u901a\u8fc7\u5c1d\u8bd5\u8bc6\u522b**\"\u8d85\u4e70\"\uff08Overbought\uff09\u548c\"\u8d85\u5356\"\uff08Oversold\uff09**\u72b6\u6001\u5e76\u901a\u8fc7\u81ea\u5df1\u5bf9\u8fd9\u4e9b\u72b6\u6001\u7684\u5e94\u5bf9\u7b56\u7565\u6765\u5957\u5229\u3002 \u8d85\u4e70\u662f\u6307\u5e02\u573a\u6216\u7279\u5b9a\u8d44\u4ea7\u7684\u4ef7\u683c\u88ab\u8ba4\u4e3a\u9ad8\u4e8e\u5176\u6b63\u5e38\u6216\u5408\u7406\u7684\u4ef7\u503c\u6c34\u5e73\u7684\u60c5\u51b5\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u4ef7\u683c\u8fc5\u901f\u4e0a\u5347\u540e\uff0c\u6295\u8d44\u8005\u60c5\u7eea\u53d8\u5f97\u8fc7\u4e8e\u4e50\u89c2\uff0c\u5bfc\u81f4\u8d2d\u4e70\u538b\u529b\u589e\u52a0\u3002\u8d85\u4e70\u65f6\uff0c\u5e02\u573a\u53ef\u80fd\u51fa\u73b0\u8fc7\u5ea6\u8d2d\u4e70\u7684\u73b0\u8c61\uff0c\u4ef7\u683c\u53ef\u80fd\u4f1a\u8fdb\u4e00\u6b65\u4e0b\u8dcc\u6216\u8d8b\u4e8e\u5e73\u7a33\u3002\u800c\u8d85\u5356\u662f\u6307\u5e02\u573a\u6216\u7279\u5b9a\u8d44\u4ea7\u7684\u4ef7\u683c\u88ab\u8ba4\u4e3a\u4f4e\u4e8e\u5176\u6b63\u5e38\u6216\u5408\u7406\u7684\u4ef7\u503c\u6c34\u5e73\u7684\u60c5\u51b5\u3002\u8fd9\u901a\u5e38\u53d1\u751f\u5728\u4ef7\u683c\u8fc5\u901f\u4e0b\u8dcc\u540e\uff0c\u6295\u8d44\u8005\u60c5\u7eea\u53d8\u5f97\u8fc7\u4e8e\u60b2\u89c2\uff0c\u5bfc\u81f4\u5356\u51fa\u538b\u529b\u589e\u52a0\u3002\u8d85\u5356\u65f6\uff0c\u5e02\u573a\u53ef\u80fd\u51fa\u73b0\u8fc7\u5ea6\u5356\u51fa\u7684\u73b0\u8c61\uff0c\u4ef7\u683c\u53ef\u80fd\u4f1a\u8fdb\u4e00\u6b65\u4e0a\u6da8\u6216\u8d8b\u4e8e\u5e73\u7a33\u3002</p> <p>\u4e00\u4e9b\u6280\u672f\u6307\u6807\u5982\u76f8\u5bf9\u5f3a\u5ea6\u6307\u6807\uff08RSI\uff09\u6216\u968f\u673a\u6307\u6807\uff08Stochastic Oscillator\uff09\u5e38\u7528\u6765\u8bc6\u522b\u8d85\u4e70\u60c5\u51b5\u3002\u5f53\u8fd9\u4e9b\u6307\u6807\u7684\u6570\u503c\u8d85\u8fc7\u7279\u5b9a\u9608\u503c\uff08\u901a\u5e38\u4e3a70\uff5e80\uff09\uff0c\u5c31\u88ab\u89c6\u4e3a\u5e02\u573a\u5904\u4e8e\u8d85\u4e70\u72b6\u6001\uff0c\u53ef\u80fd\u9884\u793a\u7740\u4ef7\u683c\u7684\u4e0b\u8dcc\u3002\u800c\u5f53\u8fd9\u4e9b\u6307\u6807\u7684\u6570\u503c\u4f4e\u4e8e\u7279\u5b9a\u9608\u503c\uff08\u901a\u5e38\u4e3a20\uff5e30\uff09\uff0c\u5c31\u88ab\u89c6\u4e3a\u5e02\u573a\u5904\u4e8e\u8d85\u5356\u72b6\u6001\uff0c\u53ef\u80fd\u9884\u793a\u7740\u4ef7\u683c\u7684\u4e0a\u6da8\u3002</p> <p>\u4e4b\u524d\u6211\u4eec\u5728\u7b2c3\u7ae0\u5bf9RSI\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\u3002\u73b0\u5728\u6211\u4eec\u518d\u6765\u5b66\u4e60\u4e00\u4e0b\u968f\u673a\u6307\u6807\uff0c\u5b83\u7531George C. Lane \u572820\u4e16\u7eaa50\u5e74\u4ee3\u5f00\u53d1\uff0c\u662f\u4e00\u79cd\u76f8\u5bf9\u7b80\u5355\u4f46\u6709\u6548\u7684\u3001\u5e38\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u52a8\u91cf\u6307\u6807\u3002</p> <p>\u968f\u673a\u6307\u6807\u901a\u5e38\u7531\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u6784\u6210\uff1a</p> <ol> <li>%K\u7ebf\uff08%K Line\uff09\uff1a %K\u7ebf\u662f\u5f53\u524d\u4ef7\u683c\u4e0e\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u4ef7\u683c\u8303\u56f4\u7684\u6bd4\u7387\uff0c\u901a\u5e38\u4ee5\u767e\u5206\u6bd4\u8868\u793a\u3002\u5b83\u53ef\u4ee5\u7528\u4ee5\u4e0b\u516c\u5f0f\u8ba1\u7b97\uff1a</li> </ol> <p>%K = [(\u5f53\u524d\u6536\u76d8\u4ef7 - \u6700\u4f4e\u4ef7) / (\u6700\u9ad8\u4ef7 - \u6700\u4f4e\u4ef7)] * 100</p> <p>%K\u7ebf\u7684\u8ba1\u7b97\u7ed3\u679c\u57280\u5230100\u4e4b\u95f4\u6ce2\u52a8\uff0c\u53ef\u4ee5\u5e2e\u52a9\u8bc6\u522b\u4ef7\u683c\u76f8\u5bf9\u4e8e\u7ed9\u5b9a\u5468\u671f\u5185\u7684\u4ef7\u683c\u8303\u56f4\u7684\u4f4d\u7f6e\u3002</p> <ol> <li> <p>%D\u7ebf\uff08%D Line\uff09\uff1a %D\u7ebf\u662f%K\u7ebf\u7684\u5e73\u6ed1\u7ebf\uff0c\u901a\u5e38\u4f7f\u7528\u79fb\u52a8\u5e73\u5747\u7ebf\u8fdb\u884c\u5e73\u6ed1\u5904\u7406\u3002\u8fd9\u6709\u52a9\u4e8e\u51cf\u5c11%K\u7ebf\u7684\u566a\u97f3\uff0c\u63d0\u4f9b\u66f4\u53ef\u9760\u7684\u4fe1\u53f7\u3002%D\u7ebf\u901a\u5e38\u4f7f\u7528\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\uff08SMA\uff09\u6216\u6307\u6570\u79fb\u52a8\u5e73\u5747\u7ebf\uff08EMA\uff09\u8fdb\u884c\u8ba1\u7b97\u3002</p> </li> <li> <p>\u8d85\u4e70\u548c\u8d85\u5356\u6c34\u5e73\uff1a \u5728\u968f\u673a\u6307\u6807\u4e2d\uff0c\u901a\u5e38\u4f1a\u7ed8\u5236\u4e24\u4e2a\u6c34\u5e73\u7ebf\uff0c\u4e00\u4e2a\u8868\u793a\u8d85\u4e70\u6c34\u5e73\uff08\u901a\u5e38\u4e3a80\uff09\uff0c\u53e6\u4e00\u4e2a\u8868\u793a\u8d85\u5356\u6c34\u5e73\uff08\u901a\u5e38\u4e3a20\uff09\u3002\u5f53%K\u7ebf\u4e0a\u7a7f80\u65f6\uff0c\u8868\u660e\u5e02\u573a\u53ef\u80fd\u5904\u4e8e\u8d85\u4e70\u72b6\u6001\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4ef7\u683c\u4e0b\u8dcc\u3002\u5f53%K\u7ebf\u4e0b\u7a7f20\u65f6\uff0c\u8868\u660e\u5e02\u573a\u53ef\u80fd\u5904\u4e8e\u8d85\u5356\u72b6\u6001\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4ef7\u683c\u4e0a\u6da8\u3002</p> </li> </ol> <p>\u968f\u673a\u6307\u6807\u7684\u5178\u578b\u7528\u6cd5\u5305\u62ec\uff1a</p> <ul> <li>\u5f53%K\u7ebf\u4e0a\u7a7f%D\u7ebf\u65f6\uff0c\u4ea7\u751f\u4e70\u5165\u4fe1\u53f7\uff0c\u8868\u793a\u4ef7\u683c\u53ef\u80fd\u4e0a\u6da8\u3002</li> <li>\u5f53%K\u7ebf\u4e0b\u7a7f%D\u7ebf\u65f6\uff0c\u4ea7\u751f\u5356\u51fa\u4fe1\u53f7\uff0c\u8868\u793a\u4ef7\u683c\u53ef\u80fd\u4e0b\u8dcc\u3002</li> <li>\u5f53%K\u7ebf\u4f4d\u4e8e\u8d85\u4e70\u6c34\u5e73\u4ee5\u4e0a\u65f6\uff0c\u53ef\u80fd\u53d1\u751f\u5356\u51fa\u4fe1\u53f7\u3002</li> <li>\u5f53%K\u7ebf\u4f4d\u4e8e\u8d85\u5356\u6c34\u5e73\u4ee5\u4e0b\u65f6\uff0c\u53ef\u80fd\u53d1\u751f\u4e70\u5165\u4fe1\u53f7\u3002</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u968f\u673a\u6307\u6807\u5e76\u4e0d\u662f\u4e00\u79cd\u7edd\u5bf9\u7684\u4e70\u5356\u4fe1\u53f7\u5de5\u5177\uff0c\u800c\u662f\u7528\u4e8e\u8f85\u52a9\u51b3\u7b56\u7684\u6307\u6807\u3002\u5b83\u5e38\u5e38\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5206\u6790\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u5206\u6790\u3002\u4ea4\u6613\u8005\u8fd8\u5e94\u8c28\u614e\u4f7f\u7528\u968f\u673a\u6307\u6807\uff0c\u7279\u522b\u662f\u5728\u975e\u8d8b\u52bf\u5e02\u573a\u4e2d\uff0c\u56e0\u4e3a\u5728\u4ef7\u683c\u8303\u56f4\u5185\u6ce2\u52a8\u8f83\u5927\u65f6\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u8bef\u5bfc\u6027\u7684\u4fe1\u53f7\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5e02\u573a\u73af\u5883\uff0c\u9700\u8981\u6839\u636e\u5176\u4ed6\u6307\u6807\u548c\u5206\u6790\u6765\u8fdb\u884c\u7efc\u5408\u5224\u65ad\u3002</p> <p>\u4ee5\u4e0b\u662fStochastic Oscillator\uff08\u968f\u673a\u6307\u6807\uff09\u548cRSI\uff08\u76f8\u5bf9\u5f3a\u5ea6\u6307\u6807\uff09\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\uff1a</p> \u7279\u5f81 Stochastic Oscillator \u76f8\u5bf9\u5f3a\u5ea6\u6307\u6807 (RSI) \u7c7b\u578b \u52a8\u91cf\u6307\u6807 \u52a8\u91cf\u6307\u6807 \u521b\u5efa\u8005 George C. Lane J. Welles Wilder \u8ba1\u7b97\u65b9\u5f0f \u57fa\u4e8e\u5f53\u524d\u4ef7\u683c\u4e0e\u4ef7\u683c\u8303\u56f4\u7684\u6bd4\u7387 \u57fa\u4e8e\u5e73\u5747\u589e\u76ca\u548c\u5e73\u5747\u635f\u5931 \u8ba1\u7b97\u7ed3\u679c\u7684\u8303\u56f4 0 \u5230 100 0 \u5230 100 \u4e3b\u8981\u76ee\u7684 \u8bc6\u522b\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff0c\u4ee5\u53ca\u4ef7\u683c\u8d8b\u52bf\u53d8\u5316 \u8861\u91cf\u8d44\u4ea7\u4ef7\u683c\u7684\u5f3a\u5f31 %K\u7ebf\u548c%D\u7ebf \u5305\u62ec%K\u7ebf\u548c%D\u7ebf\uff0c%D\u7ebf\u662f%K\u7ebf\u7684\u5e73\u6ed1\u7ebf \u901a\u5e38\u53ea\u6709\u4e00\u4e2aRSI\u7ebf \u8d85\u4e70\u548c\u8d85\u5356\u6c34\u5e73 \u901a\u5e38\u572880\u548c20\u4e4b\u95f4\uff0c\u7528\u4e8e\u4ea7\u751f\u4e70\u5356\u4fe1\u53f7 \u901a\u5e38\u572870\u548c30\u4e4b\u95f4\uff0c\u7528\u4e8e\u4ea7\u751f\u4e70\u5356\u4fe1\u53f7 \u4fe1\u53f7\u4ea7\u751f \u5f53%K\u7ebf\u4e0a\u7a7f%D\u7ebf\u65f6\u4ea7\u751f\u4e70\u5165\u4fe1\u53f7\uff0c\u4e0b\u7a7f\u65f6\u4ea7\u751f\u5356\u51fa\u4fe1\u53f7 \u5f53RSI\u7ebf\u4e0a\u7a7f70\u65f6\u4ea7\u751f\u5356\u51fa\u4fe1\u53f7\uff0c\u4e0b\u7a7f30\u65f6\u4ea7\u751f\u4e70\u5165\u4fe1\u53f7 \u5e94\u7528\u9886\u57df \u7528\u4e8e\u8bc6\u522b\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u4ee5\u53ca\u4ef7\u683c\u7684\u53cd\u8f6c\u70b9 \u7528\u4e8e\u8861\u91cf\u8d44\u4ea7\u7684\u5f3a\u5f31\u5e76\u786e\u5b9a\u4e70\u5356\u65f6\u673a \u65f6\u95f4\u5468\u671f \u901a\u5e38\u4f7f\u7528\u77ed\u671f\u548c\u957f\u671f\u5468\u671f\u8fdb\u884c\u8ba1\u7b97 \u901a\u5e38\u4f7f\u752814\u4e2a\u4ea4\u6613\u65e5\u5468\u671f\u8fdb\u884c\u8ba1\u7b97 \u5e38\u89c1\u7528\u9014 \u9002\u7528\u4e8e\u4e0d\u540c\u5e02\u573a\u548c\u8d44\u4ea7\u7c7b\u522b\uff0c\u7279\u522b\u662f\u9002\u7528\u4e8e\u632f\u8361\u5e02\u573a \u9002\u7528\u4e8e\u8bc4\u4f30\u80a1\u7968\u3001\u671f\u8d27\u548c\u5916\u6c47\u7b49\u8d44\u4ea7\u7684\u5f3a\u5f31 <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136Stochastic Oscillator\u548cRSI\u90fd\u662f\u7528\u4e8e\u52a8\u91cf\u5206\u6790\u7684\u6307\u6807\uff0c\u4f46\u5b83\u4eec\u7684\u8ba1\u7b97\u65b9\u5f0f\u3001\u4fe1\u53f7\u4ea7\u751f\u65b9\u5f0f\u548c\u4e3b\u8981\u5e94\u7528\u65b9\u5411\u90fd\u7565\u6709\u4e0d\u540c\u3002\u4ea4\u6613\u8005\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u4ea4\u6613\u7b56\u7565\u548c\u5e02\u573a\u6761\u4ef6\u9009\u62e9\u4f7f\u7528\u5176\u4e2d\u4e00\u4e2a\u6216\u4e24\u8005\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u8f85\u52a9\u51b3\u7b56\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#272bollinger-bands","title":"27.2\uff1a\u5e03\u6797\u5e26\uff08Bollinger Bands\uff09","text":"<p>\u5e03\u6797\u5e26\uff08Bollinger Bands\uff09\u662f\u4e00\u79cd\u5e38\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u6307\u6807\uff0c\u65e8\u5728\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u8d44\u4ea7\u4ef7\u683c\u7684\u6ce2\u52a8\u6027\u548c\u8d8b\u52bf\u65b9\u5411\u3002\u5b83\u7531\u7ea6\u7ff0\u00b7\u5e03\u6797\u683c\uff08John Bollinger\uff09\u4e8e1980\u5e74\u4ee3\u5f00\u53d1\uff0c\u662f\u4e00\u79cd\u57fa\u4e8e\u7edf\u8ba1\u5b66\u539f\u7406\u7684\u5de5\u5177\u3002\u4ee5\u4e0b\u662f\u5bf9\u5e03\u6797\u5e26\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>\u5e03\u6797\u5e26\u7684\u6784\u6210\uff1a \u5e03\u6797\u5e26\u7531\u4ee5\u4e0b\u4e09\u4e2a\u4e3b\u8981\u90e8\u5206\u7ec4\u6210\uff1a</p> <ol> <li> <p>\u4e2d\u8f68\uff08\u4e2d\u95f4\u7ebf\uff09\uff1a \u4e2d\u8f68\u662f\u5e03\u6797\u5e26\u7684\u4e2d\u5fc3\u7ebf\uff0c\u901a\u5e38\u662f\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\uff08SMA\uff09\u3002\u4e2d\u8f68\u7684\u8ba1\u7b97\u901a\u5e38\u57fa\u4e8e\u4e00\u6bb5\u56fa\u5b9a\u7684\u65f6\u95f4\u5468\u671f\uff0c\u4f8b\u598220\u4e2a\u4ea4\u6613\u65e5\u7684\u6536\u76d8\u4ef7\u7684SMA\u3002\u8fd9\u4e2a\u4e2d\u8f68\u4ee3\u8868\u4e86\u8d44\u4ea7\u4ef7\u683c\u7684\u8d8b\u52bf\u65b9\u5411\u3002</p> </li> <li> <p>\u4e0a\u8f68\uff08\u4e0a\u9650\u7ebf\uff09\uff1a \u4e0a\u8f68\u662f\u4f4d\u4e8e\u4e2d\u8f68\u4e0a\u65b9\u7684\u7ebf\uff0c\u5176\u4f4d\u7f6e\u901a\u5e38\u662f\u4e2d\u8f68\u52a0\u4e0a\u4e24\u500d\u6807\u51c6\u5dee\uff08Standard Deviation\uff09\u7684\u503c\u3002\u6807\u51c6\u5dee\u662f\u4e00\u79cd\u6d4b\u91cf\u6570\u636e\u5206\u6563\u7a0b\u5ea6\u7684\u7edf\u8ba1\u6307\u6807\uff0c\u7528\u4e8e\u8861\u91cf\u4ef7\u683c\u6ce2\u52a8\u6027\u3002\u4e0a\u8f68\u4ee3\u8868\u4e86\u8d44\u4ea7\u4ef7\u683c\u7684\u6ce2\u52a8\u6027\uff0c\u901a\u5e38\u7528\u6765\u8bc6\u522b\u4ef7\u683c\u4e0a\u6da8\u7684\u6f5c\u529b\u3002</p> </li> <li> <p>\u4e0b\u8f68\uff08\u4e0b\u9650\u7ebf\uff09\uff1a \u4e0b\u8f68\u662f\u4f4d\u4e8e\u4e2d\u8f68\u4e0b\u65b9\u7684\u7ebf\uff0c\u5176\u4f4d\u7f6e\u901a\u5e38\u662f\u4e2d\u8f68\u51cf\u53bb\u4e24\u500d\u6807\u51c6\u5dee\u7684\u503c\u3002\u4e0b\u8f68\u540c\u6837\u4ee3\u8868\u4e86\u8d44\u4ea7\u4ef7\u683c\u7684\u6ce2\u52a8\u6027\uff0c\u901a\u5e38\u7528\u6765\u8bc6\u522b\u4ef7\u683c\u4e0b\u8dcc\u7684\u6f5c\u529b\u3002</p> </li> </ol> <p>\u5e03\u6797\u5e26\u7684\u5e94\u7528\uff1a \u5e03\u6797\u5e26\u6709\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u7684\u5e94\u7528\u548c\u7528\u9014\uff1a</p> <ol> <li> <p>\u6ce2\u52a8\u6027\u8bc6\u522b\uff1a \u5e03\u6797\u5e26\u7684\u5bbd\u7a84\u53ef\u4ee5\u7528\u6765\u8861\u91cf\u4ef7\u683c\u6ce2\u52a8\u6027\u3002\u5e26\u5bbd\u6536\u7a84\u901a\u5e38\u8868\u793a\u4ef7\u683c\u6ce2\u52a8\u6027\u8f83\u4f4e\uff0c\u800c\u5e26\u5bbd\u6269\u5927\u5219\u8868\u793a\u4ef7\u683c\u6ce2\u52a8\u6027\u8f83\u9ad8\u3002\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u4ea4\u6613\u8005\u5224\u65ad\u5e02\u573a\u7684\u6d3b\u8dc3\u5ea6\u548c\u4ef7\u683c\u8d8b\u52bf\u7684\u7a33\u5b9a\u6027\u3002</p> </li> <li> <p>\u8d8b\u52bf\u8bc6\u522b\uff1a \u5f53\u4ef7\u683c\u8d8b\u52bf\u660e\u663e\u65f6\uff0c\u5e03\u6797\u5e26\u7684\u4e0a\u8f68\u548c\u4e0b\u8f68\u53ef\u4ee5\u5e2e\u52a9\u786e\u5b9a\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u3002\u5f53\u4ef7\u683c\u89e6\u53ca\u6216\u7a7f\u8d8a\u4e0a\u8f68\u65f6\uff0c\u53ef\u80fd\u8868\u660e\u4ef7\u683c\u4e0a\u6da8\u8d8b\u52bf\u5f3a\u52b2\uff0c\u800c\u5f53\u4ef7\u683c\u89e6\u53ca\u6216\u7a7f\u8d8a\u4e0b\u8f68\u65f6\uff0c\u53ef\u80fd\u8868\u660e\u4ef7\u683c\u4e0b\u8dcc\u8d8b\u52bf\u8f83\u5f3a\u3002</p> </li> <li> <p>\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff1a \u5f53\u4ef7\u683c\u63a5\u8fd1\u6216\u7a7f\u8d8a\u5e03\u6797\u5e26\u7684\u4e0a\u8f68\u65f6\uff0c\u53ef\u80fd\u8868\u660e\u5e02\u573a\u5904\u4e8e\u8d85\u4e70\u72b6\u6001\uff0c\u56e0\u4e3a\u4ef7\u683c\u504f\u79bb\u4e86\u5176\u6b63\u5e38\u6ce2\u52a8\u8303\u56f4\u3002\u76f8\u53cd\uff0c\u5f53\u4ef7\u683c\u63a5\u8fd1\u6216\u7a7f\u8d8a\u5e03\u6797\u5e26\u7684\u4e0b\u8f68\u65f6\uff0c\u53ef\u80fd\u8868\u660e\u5e02\u573a\u5904\u4e8e\u8d85\u5356\u72b6\u6001\u3002</p> </li> <li> <p>\u4ea4\u6613\u4fe1\u53f7\uff1a \u4ea4\u6613\u8005\u7ecf\u5e38\u4f7f\u7528\u5e03\u6797\u5e26\u4ea7\u751f\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u7b56\u7565\u662f\u5728\u4ef7\u683c\u89e6\u53ca\u4e0a\u8f68\u65f6\u5356\u51fa\uff0c\u5728\u4ef7\u683c\u89e6\u53ca\u4e0b\u8f68\u65f6\u4e70\u5165\u3002\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u6355\u6349\u4ef7\u683c\u7684\u77ed\u671f\u6ce2\u52a8\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5e03\u6797\u5e26\u662f\u4e00\u79cd\u8f85\u52a9\u5de5\u5177\uff0c\u901a\u5e38\u9700\u8981\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5e02\u573a\u5206\u6790\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\u3002\u4ea4\u6613\u8005\u5e94\u8c28\u614e\u4f7f\u7528\u5e03\u6797\u5e26\u4fe1\u53f7\uff0c\u5e76\u8003\u8651\u5e02\u573a\u7684\u6574\u4f53\u80cc\u666f\u548c\u8d8b\u52bf\u3002\u6b64\u5916\uff0c\u5e03\u6797\u5e26\u7684\u53c2\u6570\uff08\u5982\u65f6\u95f4\u5468\u671f\u548c\u6807\u51c6\u5dee\u500d\u6570\uff09\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u5e02\u573a\u548c\u4ea4\u6613\u7b56\u7565\u8fdb\u884c\u8c03\u6574\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#273macdmoving-average-convergence-divergence","title":"27.3\uff1aMACD\u6307\u6807\uff08Moving Average Convergence Divergence\uff09","text":"<p>MACD\uff08Moving Average Convergence Divergence\uff09\u662f\u4e00\u79cd\u5e38\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u52a8\u91cf\u6307\u6807\uff0c\u7528\u4e8e\u8861\u91cf\u8d44\u4ea7\u4ef7\u683c\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002\u5b83\u7531\u6770\u62c9\u5c14\u5fb7\u00b7\u963f\u4f69\u5c14\uff08Gerald Appel\uff09\u4e8e1979\u5e74\u9996\u6b21\u5f15\u5165\uff0c\u5e76\u4e14\u5728\u6280\u672f\u5206\u6790\u4e2d\u5e7f\u6cdb\u5e94\u7528\u3002\u4ee5\u4e0b\u662f\u5bf9MACD\u6307\u6807\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>MACD\u6307\u6807\u7684\u6784\u6210\uff1a MACD\u6307\u6807\u7531\u4ee5\u4e0b\u4e09\u4e2a\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u6784\u6210\uff1a</p> <ol> <li>\u5feb\u901f\u7ebf\uff08Fast Line\uff09\uff1a \u4e5f\u79f0\u4e3aMACD\u7ebf\uff08MACD Line\uff09\uff0c\u662f\u8d44\u4ea7\u4ef7\u683c\u7684\u77ed\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u4e0e\u957f\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u4e4b\u95f4\u7684\u5dee\u503c\u3002\u901a\u5e38\uff0c\u5feb\u901f\u7ebf\u7684\u8ba1\u7b97\u57fa\u4e8e12\u4e2a\u4ea4\u6613\u65e5\u7684\u77ed\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u51cf\u53bb26\u4e2a\u4ea4\u6613\u65e5\u7684\u957f\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u3002</li> </ol> <p>\u5feb\u901f\u7ebf\uff08MACD Line\uff09 = 12\u65e5EMA - 26\u65e5EMA</p> <p>\u5176\u4e2d\uff0cEMA\u4ee3\u8868\u6307\u6570\u52a0\u6743\u79fb\u52a8\u5e73\u5747\u7ebf\uff08Exponential Moving Average\uff09\uff0c\u5b83\u4f7f\u5f97\u8fd1\u671f\u4ef7\u683c\u5bf9\u5feb\u901f\u7ebf\u7684\u5f71\u54cd\u8f83\u5927\u3002</p> <ol> <li>\u6162\u901f\u7ebf\uff08Slow Line\uff09\uff1a \u4e5f\u79f0\u4e3a\u4fe1\u53f7\u7ebf\uff08Signal Line\uff09\uff0c\u662f\u5feb\u901f\u7ebf\u7684\u79fb\u52a8\u5e73\u5747\u7ebf\u3002\u901a\u5e38\uff0c\u6162\u901f\u7ebf\u7684\u8ba1\u7b97\u4f7f\u7528\u5feb\u901f\u7ebf\u76849\u65e5EMA\u3002</li> </ol> <p>\u6162\u901f\u7ebf\uff08Signal Line\uff09 = 9\u65e5EMA(MACD Line)</p> <ol> <li>MACD\u67f1\u72b6\u56fe\uff08MACD Histogram\uff09\uff1a MACD\u67f1\u72b6\u56fe\u8868\u793a\u5feb\u901f\u7ebf\u548c\u6162\u901f\u7ebf\u4e4b\u95f4\u7684\u5dee\u503c\uff0c\u7528\u4e8e\u5c55\u793a\u4ef7\u683c\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002MACD\u67f1\u72b6\u56fe\u7684\u8ba1\u7b97\u65b9\u6cd5\u662f\uff1a</li> </ol> <p>MACD\u67f1\u72b6\u56fe = \u5feb\u901f\u7ebf\uff08MACD Line\uff09 - \u6162\u901f\u7ebf\uff08Signal Line\uff09</p> <p>MACD\u7684\u5e94\u7528\uff1a MACD\u6307\u6807\u53ef\u4ee5\u7528\u4e8e\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u7684\u6280\u672f\u5206\u6790\uff1a</p> <ol> <li> <p>\u8d8b\u52bf\u8bc6\u522b\uff1a \u5f53MACD\u7ebf\u4f4d\u4e8e\u6162\u901f\u7ebf\u4e0a\u65b9\u5e76\u5411\u4e0a\u79fb\u52a8\u65f6\uff0c\u901a\u5e38\u8868\u793a\u4ef7\u683c\u5904\u4e8e\u4e0a\u5347\u8d8b\u52bf\uff0c\u8fd9\u53ef\u80fd\u662f\u4e70\u5165\u4fe1\u53f7\u3002\u76f8\u53cd\uff0c\u5f53MACD\u7ebf\u4f4d\u4e8e\u6162\u901f\u7ebf\u4e0b\u65b9\u5e76\u5411\u4e0b\u79fb\u52a8\u65f6\uff0c\u901a\u5e38\u8868\u793a\u4ef7\u683c\u5904\u4e8e\u4e0b\u964d\u8d8b\u52bf\uff0c\u8fd9\u53ef\u80fd\u662f\u5356\u51fa\u4fe1\u53f7\u3002</p> </li> <li> <p>\u4ea4\u53c9\u4fe1\u53f7\uff1a \u5f53MACD\u7ebf\u4e0a\u7a7f\u6162\u901f\u7ebf\u65f6\uff0c\u4ea7\u751f\u4e70\u5165\u4fe1\u53f7\uff0c\u8868\u793a\u4ef7\u683c\u53ef\u80fd\u4e0a\u6da8\u3002\u5f53MACD\u7ebf\u4e0b\u7a7f\u6162\u901f\u7ebf\u65f6\uff0c\u4ea7\u751f\u5356\u51fa\u4fe1\u53f7\uff0c\u8868\u793a\u4ef7\u683c\u53ef\u80fd\u4e0b\u8dcc\u3002</p> </li> <li> <p>\u80cc\u79bb\uff08Divergence\uff09\uff1a \u5f53MACD\u6307\u6807\u4e0e\u4ef7\u683c\u56fe\u5f62\u51fa\u73b0\u80cc\u79bb\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u8d8b\u52bf\u7684\u5f31\u5316\u6216\u53cd\u8f6c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4ef7\u683c\u521b\u4e0b\u65b0\u4f4e\u800cMACD\u67f1\u72b6\u56fe\u521b\u4e0b\u9ad8\u70b9\uff0c\u8fd9\u53ef\u80fd\u662f\u4ef7\u683c\u53cd\u8f6c\u7684\u4fe1\u53f7\u3002</p> </li> <li> <p>\u67f1\u72b6\u56fe\u7684\u89c2\u5bdf\uff1a MACD\u67f1\u72b6\u56fe\u7684\u9ad8\u5ea6\u53ef\u4ee5\u53cd\u6620\u4ef7\u683c\u8d8b\u52bf\u7684\u5f3a\u5ea6\u3002\u8f83\u9ad8\u7684\u67f1\u72b6\u56fe\u8868\u793a\u4ef7\u683c\u52a8\u80fd\u8f83\u5f3a\uff0c\u8f83\u4f4e\u7684\u67f1\u72b6\u56fe\u8868\u793a\u4ef7\u683c\u52a8\u80fd\u8f83\u5f31\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cMACD\u662f\u4e00\u79cd\u591a\u529f\u80fd\u7684\u6307\u6807\uff0c\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u5e02\u573a\u548c\u4e0d\u540c\u65f6\u95f4\u5468\u671f\u7684\u5206\u6790\u3002\u5b83\u901a\u5e38\u9700\u8981\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5e02\u573a\u5206\u6790\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u4fe1\u606f\u3002MACD\u7684\u53c2\u6570\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u4ea4\u6613\u7b56\u7565\u548c\u5e02\u573a\u6761\u4ef6\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#274adxaverage-directional-index","title":"27.4\uff1aADX\u6307\u6807\uff08Average Directional Index\uff09","text":"<p>ADX\uff08Average Directional Index\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u6307\u6807\uff0c\u65e8\u5728\u8861\u91cf\u8d44\u4ea7\u4ef7\u683c\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002ADX\u662f\u7531\u5a01\u5c14\u65af\u00b7\u5a01\u5c14\u5fb7\uff08Welles Wilder\uff09\u4e8e1978\u5e74\u9996\u6b21\u5f15\u5165\uff0c\u5b83\u901a\u5e38\u4e0e\u53e6\u5916\u4e24\u4e2a\u76f8\u5173\u7684\u6307\u6807\uff0c\u5373DI+\uff08Positive Directional Indicator\uff09\u548cDI-\uff08Negative Directional Indicator\uff09\u4e00\u8d77\u4f7f\u7528\u3002\u4ee5\u4e0b\u662f\u5bf9ADX\u6307\u6807\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>ADX\u6307\u6807\u7684\u6784\u6210\uff1a ADX\u6307\u6807\u4e3b\u8981\u7531\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\u7ec4\u6210\uff1a</p> <ol> <li>DI+\uff08Positive Directional Indicator\uff09\uff1a DI+\u7528\u4e8e\u6d4b\u91cf\u6b63\u4ef7\u683c\u79fb\u52a8\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002\u5b83\u57fa\u4e8e\u4ef7\u683c\u7684\u6b63\u5411\u53d8\u5316\u91cf\u548c\u603b\u53d8\u5316\u91cf\u6765\u8ba1\u7b97\uff0c\u7136\u540e\u7528\u767e\u5206\u6bd4\u6765\u8868\u793a\u6b63\u5411\u53d8\u5316\u7684\u6bd4\u7387\u3002DI+\u7684\u8ba1\u7b97\u65b9\u5f0f\u5982\u4e0b\uff1a</li> </ol> <p>DI+ = \uff08\u4eca\u65e5\u6700\u9ad8\u4ef7 - \u6628\u65e5\u6700\u9ad8\u4ef7\uff09 / \u4eca\u65e5\u6700\u9ad8\u4ef7\u4e0e\u6628\u65e5\u6700\u9ad8\u4ef7\u4e4b\u5dee * 100</p> <ol> <li>DI-\uff08Negative Directional Indicator\uff09\uff1a DI-\u7528\u4e8e\u6d4b\u91cf\u8d1f\u4ef7\u683c\u79fb\u52a8\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\u3002\u5b83\u7c7b\u4f3c\u4e8eDI+\uff0c\u4f46\u662f\u9488\u5bf9\u4ef7\u683c\u7684\u8d1f\u5411\u53d8\u5316\u91cf\u8fdb\u884c\u8ba1\u7b97\u3002DI-\u7684\u8ba1\u7b97\u65b9\u5f0f\u5982\u4e0b\uff1a</li> </ol> <p>DI- = \uff08\u6628\u65e5\u6700\u4f4e\u4ef7 - \u4eca\u65e5\u6700\u4f4e\u4ef7\uff09 / \u6628\u65e5\u6700\u4f4e\u4ef7\u4e0e\u4eca\u65e5\u6700\u4f4e\u4ef7\u4e4b\u5dee * 100</p> <ol> <li>DX\uff08Directional Movement Index\uff09\uff1a DX\u662f\u8ba1\u7b97DI+\u548cDI-\u4e4b\u95f4\u7684\u76f8\u5bf9\u5173\u7cfb\u7684\u6307\u6807\uff0c\u7528\u4e8e\u786e\u5b9a\u4ef7\u683c\u8d8b\u52bf\u7684\u65b9\u5411\u3002DX\u7684\u8ba1\u7b97\u65b9\u5f0f\u5982\u4e0b\uff1a</li> </ol> <p>DX = |\uff08DI+ - DI-\uff09| / \uff08DI+ + DI-\uff09 * 100</p> <ol> <li>ADX\uff08Average Directional Index\uff09\uff1a ADX\u662fDX\u7684\u5e73\u6ed1\u79fb\u52a8\u5e73\u5747\u7ebf\uff0c\u901a\u5e38\u4f7f\u752814\u4e2a\u4ea4\u6613\u65e5\u7684EMA\u6765\u8ba1\u7b97\u3002ADX\u7684\u8ba1\u7b97\u65b9\u5f0f\u5982\u4e0b\uff1a</li> </ol> <p>ADX = 14\u65e5EMA(DX)</p> <p>ADX\u7684\u5e94\u7528\uff1a ADX\u6307\u6807\u53ef\u4ee5\u7528\u4e8e\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u7684\u6280\u672f\u5206\u6790\uff1a</p> <ol> <li> <p>\u8d8b\u52bf\u5f3a\u5ea6\uff1a ADX\u53ef\u4ee5\u5e2e\u52a9\u4ea4\u6613\u8005\u786e\u5b9a\u4ef7\u683c\u8d8b\u52bf\u7684\u5f3a\u5ea6\u3002\u5f53ADX\u503c\u9ad8\u4e8e\u67d0\u4e00\u9608\u503c\uff08\u901a\u5e38\u4e3a25\u621630\uff09\u65f6\uff0c\u8868\u793a\u4ef7\u683c\u8d8b\u52bf\u5f3a\u52b2\u3002\u8f83\u9ad8\u7684ADX\u503c\u53ef\u80fd\u610f\u5473\u7740\u8d8b\u52bf\u53ef\u80fd\u4f1a\u6301\u7eed\u3002\u53cd\u4e4b\uff0cADX\u503c\u4f4e\u4e8e\u9608\u503c\u65f6\uff0c\u8868\u793a\u4ef7\u683c\u53ef\u80fd\u5904\u4e8e\u6a2a\u76d8\u6216\u5f31\u52bf\u5e02\u573a\u4e2d\u3002</p> </li> <li> <p>\u8d8b\u52bf\u65b9\u5411\uff1a \u5f53DI+\u9ad8\u4e8eDI-\u65f6\uff0c\u8868\u793a\u5e02\u573a\u53ef\u80fd\u5904\u4e8e\u4e0a\u5347\u8d8b\u52bf\u3002\u5f53DI-\u9ad8\u4e8eDI+\u65f6\uff0c\u8868\u793a\u5e02\u573a\u53ef\u80fd\u5904\u4e8e\u4e0b\u964d\u8d8b\u52bf\u3002ADX\u7684\u65b9\u5411\u53ef\u4ee5\u5e2e\u52a9\u786e\u5b9a\u8d8b\u52bf\u7684\u65b9\u5411\u3002</p> </li> <li> <p>\u80cc\u79bb\uff08Divergence\uff09\uff1a \u5f53\u4ef7\u683c\u8d8b\u52bf\u4e0eADX\u6307\u6807\u51fa\u73b0\u80cc\u79bb\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u8d8b\u52bf\u7684\u5f3a\u5ea6\u6b63\u5728\u51cf\u5f31\uff0c\u8fd9\u53ef\u80fd\u662f\u8d8b\u52bf\u53cd\u8f6c\u7684\u4fe1\u53f7\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cADX\u6307\u6807\u4e3b\u8981\u7528\u4e8e\u8861\u91cf\u8d8b\u52bf\u7684\u5f3a\u5ea6\u548c\u65b9\u5411\uff0c\u800c\u4e0d\u662f\u4ef7\u683c\u7684\u7edd\u5bf9\u6c34\u5e73\u3002\u5b83\u901a\u5e38\u9700\u8981\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5206\u6790\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u4fe1\u606f\u3002ADX\u7684\u53c2\u6570\uff08\u5982\u65f6\u95f4\u5468\u671f\u548c\u9608\u503c\uff09\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u4ea4\u6613\u7b56\u7565\u548c\u5e02\u573a\u6761\u4ef6\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#275-rocrate-of-change","title":"27.5 \uff1aROC\u6307\u6807\uff08Rate of Change\uff09","text":"<p>ROC\uff08Rate of Change\uff09\u6307\u6807\u662f\u4e00\u79cd\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u52a8\u91cf\u6307\u6807\uff0c\u7528\u4e8e\u8861\u91cf\u8d44\u4ea7\u4ef7\u683c\u7684\u767e\u5206\u6bd4\u53d8\u5316\u7387\u3002ROC\u6307\u6807\u7684\u4e3b\u8981\u76ee\u7684\u662f\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u4ef7\u683c\u8d8b\u52bf\u7684\u52a0\u901f\u6216\u51cf\u901f\uff0c\u4ee5\u53ca\u6f5c\u5728\u7684\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u3002\u4ee5\u4e0b\u662f\u5bf9ROC\u6307\u6807\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>ROC\u6307\u6807\u7684\u8ba1\u7b97\uff1a ROC\u6307\u6807\u7684\u8ba1\u7b97\u975e\u5e38\u7b80\u5355\uff0c\u5b83\u901a\u5e38\u57fa\u4e8e\u67d0\u4e00\u65f6\u95f4\u5468\u671f\u5185\u7684\u4ef7\u683c\u53d8\u5316\u3002\u8ba1\u7b97ROC\u7684\u4e00\u822c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u9009\u62e9\u4e00\u4e2a\u7279\u5b9a\u7684\u65f6\u95f4\u5468\u671f\uff08\u4f8b\u5982\uff0c14\u4e2a\u4ea4\u6613\u65e5\uff09\u3002</p> </li> <li> <p>\u8ba1\u7b97\u5f53\u524d\u65f6\u523b\u7684\u4ef7\u683c\u4e0e\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u4ef7\u683c\u4e4b\u95f4\u7684\u767e\u5206\u6bd4\u53d8\u5316\u7387\u3002\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a</p> </li> </ol> <p>ROC = \uff08\u5f53\u524d\u4ef7\u683c - \u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u4ef7\u683c\uff09 / \u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u4ef7\u683c * 100</p> <p>\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u4ef7\u683c\u53ef\u4ee5\u662f\u5f00\u76d8\u4ef7\u3001\u6536\u76d8\u4ef7\u6216\u4efb\u4f55\u5176\u4ed6\u4ef7\u683c\u3002</p> <ol> <li>\u6700\u7ec8\u5f97\u5230\u7684ROC\u503c\u8868\u793a\u4e86\u5728\u7ed9\u5b9a\u65f6\u95f4\u5468\u671f\u5185\u4ef7\u683c\u7684\u53d8\u5316\u7387\uff0c\u901a\u5e38\u4ee5\u767e\u5206\u6bd4\u5f62\u5f0f\u8868\u793a\u3002</li> </ol> <p>ROC\u7684\u5e94\u7528\uff1a ROC\u6307\u6807\u53ef\u4ee5\u7528\u4e8e\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u7684\u6280\u672f\u5206\u6790\uff1a</p> <ol> <li> <p>\u8d8b\u52bf\u8bc6\u522b\uff1a ROC\u53ef\u4ee5\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u4ef7\u683c\u8d8b\u52bf\u7684\u52a0\u901f\u6216\u51cf\u901f\u3002\u5f53ROC\u503c\u5904\u4e8e\u6b63\u6570\u533a\u57df\u65f6\uff0c\u8868\u793a\u4ef7\u683c\u4e0a\u6da8\u7684\u901f\u5ea6\u8f83\u5feb\uff1b\u5f53ROC\u503c\u5904\u4e8e\u8d1f\u6570\u533a\u57df\u65f6\uff0c\u8868\u793a\u4ef7\u683c\u4e0b\u8dcc\u7684\u901f\u5ea6\u8f83\u5feb\u3002\u8d8b\u52bf\u7684\u52a0\u901f\u901a\u5e38\u88ab\u89c6\u4e3a\u4e70\u5165\u4fe1\u53f7\u6216\u5356\u51fa\u4fe1\u53f7\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5e02\u573a\u60c5\u51b5\u3002</p> </li> <li> <p>\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff1a ROC\u6307\u6807\u4e5f\u53ef\u4ee5\u7528\u6765\u8bc6\u522b\u8d44\u4ea7\u7684\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u3002\u5f53ROC\u503c\u8fc5\u901f\u4e0a\u5347\u5e76\u8fbe\u5230\u8f83\u9ad8\u6c34\u5e73\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u5e02\u573a\u5904\u4e8e\u8d85\u4e70\u72b6\u6001\uff0c\u4ef7\u683c\u53ef\u80fd\u4f1a\u4e0b\u8dcc\u3002\u76f8\u53cd\uff0c\u5f53ROC\u503c\u8fc5\u901f\u4e0b\u964d\u5e76\u8fbe\u5230\u8f83\u4f4e\u6c34\u5e73\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u5e02\u573a\u5904\u4e8e\u8d85\u5356\u72b6\u6001\uff0c\u4ef7\u683c\u53ef\u80fd\u4f1a\u4e0a\u6da8\u3002</p> </li> <li> <p>\u80cc\u79bb\uff08Divergence\uff09\uff1a \u5f53\u4ef7\u683c\u8d70\u52bf\u4e0eROC\u6307\u6807\u51fa\u73b0\u80cc\u79bb\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u8d8b\u52bf\u7684\u5f31\u5316\u6216\u53cd\u8f6c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4ef7\u683c\u521b\u4e0b\u65b0\u9ad8\u800cROC\u503c\u6ca1\u6709\u521b\u65b0\u9ad8\uff0c\u8fd9\u53ef\u80fd\u662f\u4ef7\u683c\u53cd\u8f6c\u7684\u4fe1\u53f7\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cROC\u6307\u6807\u901a\u5e38\u9700\u8981\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5e02\u573a\u5206\u6790\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u4fe1\u606f\u3002ROC\u7684\u53c2\u6570\uff08\u5982\u65f6\u95f4\u5468\u671f\uff09\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u4ea4\u6613\u7b56\u7565\u548c\u5e02\u573a\u6761\u4ef6\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#276ccicommodity-channel-index","title":"27.6\uff1aCCI\u6307\u6807\uff08Commodity Channel Index\uff09","text":"<p>CCI\uff08Commodity Channel Index\uff09\u662f\u4e00\u79cd\u5e38\u7528\u4e8e\u6280\u672f\u5206\u6790\u7684\u6307\u6807\uff0c\u65e8\u5728\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u8d44\u4ea7\u4ef7\u683c\u662f\u5426\u8d85\u4e70\u6216\u8d85\u5356\uff0c\u4ee5\u53ca\u8d8b\u52bf\u7684\u53d8\u5316\u3002CCI\u6307\u6807\u6700\u521d\u662f\u7531\u5510\u7eb3\u5fb7\u00b7\u5170\u4f2f\u7279\uff08Donald Lambert\uff09\u572820\u4e16\u7eaa80\u5e74\u4ee3\u4e3a\u5546\u54c1\u5e02\u573a\u8bbe\u8ba1\u7684\uff0c\u4f46\u540e\u6765\u4e5f\u5e7f\u6cdb\u7528\u4e8e\u5176\u4ed6\u91d1\u878d\u5e02\u573a\u7684\u6280\u672f\u5206\u6790\u3002\u4ee5\u4e0b\u662f\u5bf9CCI\u6307\u6807\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>CCI\u6307\u6807\u7684\u8ba1\u7b97\uff1a CCI\u6307\u6807\u7684\u8ba1\u7b97\u6d89\u53ca\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u8ba1\u7b97Typical Price\uff08\u5178\u578b\u4ef7\u683c\uff09\uff1a \u5178\u578b\u4ef7\u683c\u662f\u6bcf\u4e2a\u4ea4\u6613\u65e5\u7684\u6700\u9ad8\u4ef7\u3001\u6700\u4f4e\u4ef7\u548c\u6536\u76d8\u4ef7\u7684\u5747\u503c\u3002\u8ba1\u7b97\u5178\u578b\u4ef7\u683c\u7684\u516c\u5f0f\u5982\u4e0b\uff1a</li> </ol> <p>\u5178\u578b\u4ef7\u683c = \uff08\u6700\u9ad8\u4ef7 + \u6700\u4f4e\u4ef7 + \u6536\u76d8\u4ef7\uff09 / 3</p> <ol> <li> <p>\u8ba1\u7b97\u5e73\u5747\u5178\u578b\u4ef7\u683c\uff08\u5e73\u5747\u4ef7\uff09\uff1a \u5e73\u5747\u5178\u578b\u4ef7\u683c\u662f\u8fc7\u53bb\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u5178\u578b\u4ef7\u683c\u7684\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u503c\u3002\u901a\u5e38\uff0c\u4f7f\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u65f6\u95f4\u5468\u671f\uff08\u4f8b\u598220\u4e2a\u4ea4\u6613\u65e5\uff09\u6765\u8ba1\u7b97\u5e73\u5747\u5178\u578b\u4ef7\u683c\u3002</p> </li> <li> <p>\u8ba1\u7b97\u5e73\u5747\u7edd\u5bf9\u504f\u5dee\uff08Mean Absolute Deviation\uff09\uff1a \u5e73\u5747\u7edd\u5bf9\u504f\u5dee\u662f\u6bcf\u4e2a\u4ea4\u6613\u65e5\u7684\u5178\u578b\u4ef7\u683c\u4e0e\u5e73\u5747\u5178\u578b\u4ef7\u683c\u4e4b\u95f4\u7684\u5dee\u7684\u7edd\u5bf9\u503c\u7684\u5e73\u5747\u503c\u3002\u8ba1\u7b97\u5e73\u5747\u7edd\u5bf9\u504f\u5dee\u7684\u516c\u5f0f\u5982\u4e0b\uff1a</p> </li> </ol> <p>\u5e73\u5747\u7edd\u5bf9\u504f\u5dee = \u5e73\u5747\u503c\uff08|\u5178\u578b\u4ef7\u683c - \u5e73\u5747\u5178\u578b\u4ef7\u683c|\uff09</p> <ol> <li>\u8ba1\u7b97CCI\u6307\u6807\uff1a CCI\u6307\u6807\u7684\u8ba1\u7b97\u4f7f\u7528\u5e73\u5747\u7edd\u5bf9\u504f\u5dee\u548c\u4e00\u4e2a\u5e38\u6570\u500d\u6570\uff08\u901a\u5e38\u4e3a0.015\uff09\u6765\u8ba1\u7b97\u3002\u8ba1\u7b97CCI\u7684\u516c\u5f0f\u5982\u4e0b\uff1a</li> </ol> <p>CCI = \uff08\u5178\u578b\u4ef7\u683c - \u5e73\u5747\u5178\u578b\u4ef7\u683c\uff09 / \uff080.015 * \u5e73\u5747\u7edd\u5bf9\u504f\u5dee\uff09</p> <p>CCI\u7684\u5e94\u7528\uff1a CCI\u6307\u6807\u53ef\u4ee5\u7528\u4e8e\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u7684\u6280\u672f\u5206\u6790\uff1a</p> <ol> <li> <p>\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff1a CCI\u6307\u6807\u901a\u5e38\u5728\u4e00\u4e2a\u8303\u56f4\u5185\u6ce2\u52a8\uff0c\u6b63\u503c\u8868\u793a\u8d44\u4ea7\u4ef7\u683c\u76f8\u5bf9\u8f83\u9ad8\uff0c\u8d1f\u503c\u8868\u793a\u4ef7\u683c\u76f8\u5bf9\u8f83\u4f4e\u3002\u5f53CCI\u503c\u5927\u4e8e100\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u5e02\u573a\u8d85\u4e70\uff0c\u4ef7\u683c\u53ef\u80fd\u4f1a\u4e0b\u8dcc\u3002\u5f53CCI\u503c\u5c0f\u4e8e-100\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u5e02\u573a\u8d85\u5356\uff0c\u4ef7\u683c\u53ef\u80fd\u4f1a\u4e0a\u6da8\u3002</p> </li> <li> <p>\u8d8b\u52bf\u786e\u8ba4\uff1a CCI\u6307\u6807\u4e5f\u53ef\u4ee5\u7528\u4e8e\u786e\u8ba4\u4ef7\u683c\u8d8b\u52bf\u3002\u5f53CCI\u6301\u7eed\u4fdd\u6301\u6b63\u503c\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u4e0a\u5347\u8d8b\u52bf\uff1b\u5f53CCI\u6301\u7eed\u4fdd\u6301\u8d1f\u503c\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u4e0b\u964d\u8d8b\u52bf\u3002</p> </li> <li> <p>\u80cc\u79bb\uff08Divergence\uff09\uff1a \u5f53CCI\u6307\u6807\u4e0e\u4ef7\u683c\u56fe\u5f62\u51fa\u73b0\u80cc\u79bb\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u8d8b\u52bf\u7684\u5f31\u5316\u6216\u53cd\u8f6c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4ef7\u683c\u521b\u4e0b\u65b0\u9ad8\u800cCCI\u6ca1\u6709\u521b\u65b0\u9ad8\uff0c\u8fd9\u53ef\u80fd\u662f\u4ef7\u683c\u53cd\u8f6c\u7684\u4fe1\u53f7\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cCCI\u6307\u6807\u901a\u5e38\u9700\u8981\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5e02\u573a\u5206\u6790\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u4fe1\u606f\u3002CCI\u7684\u53c2\u6570\uff08\u5982\u65f6\u95f4\u5468\u671f\u548c\u5e38\u6570\u500d\u6570\uff09\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u7684\u4ea4\u6613\u7b56\u7565\u548c\u5e02\u573a\u6761\u4ef6\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#277fibonacci","title":"27.7\uff1aFibonacci\u56de\u8c03\u548c\u6269\u5c55\u6c34\u5e73","text":"<p>Fibonacci\u56de\u8c03\u548c\u6269\u5c55\u6c34\u5e73\u662f\u4e00\u79cd\u57fa\u4e8e\u9ec4\u91d1\u6bd4\u4f8b\u548c\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u6280\u672f\u5206\u6790\u5de5\u5177\uff0c\u7528\u4e8e\u9884\u6d4b\u8d44\u4ea7\u4ef7\u683c\u7684\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\uff0c\u4ee5\u53ca\u53ef\u80fd\u7684\u4ef7\u683c\u53cd\u8f6c\u70b9\u3002\u8fd9\u4e9b\u6c34\u5e73\u662f\u6839\u636e\u6590\u6ce2\u90a3\u5951\u6570\u5217\u4e2d\u7684\u7279\u5b9a\u6bd4\u7387\u6765\u8ba1\u7b97\u7684\u3002\u4ee5\u4e0b\u662f\u5bf9Fibonacci\u56de\u8c03\u548c\u6269\u5c55\u6c34\u5e73\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>1. Fibonacci\u56de\u8c03\u6c34\u5e73\uff1a</p> <ul> <li> <p>0%\u6c34\u5e73\uff1a \u8fd9\u662f\u4ef7\u683c\u4e0a\u6da8\u6216\u4e0b\u8dcc\u524d\u7684\u8d77\u59cb\u70b9\u3002\u5b83\u4ee3\u8868\u4e86\u6ca1\u6709\u4efb\u4f55\u4ef7\u683c\u53d8\u5316\u7684\u6c34\u5e73\u3002</p> </li> <li> <p>23.6%\u6c34\u5e73\uff1a \u8fd9\u662f\u6700\u5c0f\u7684Fibonacci\u56de\u8c03\u6c34\u5e73\uff0c\u901a\u5e38\u7528\u4e8e\u6807\u8bc6\u4ef7\u683c\u56de\u8c03\u7684\u8d77\u59cb\u70b9\u3002\u5728\u4e0a\u5347\u8d8b\u52bf\u4e2d\uff0c\u4ef7\u683c\u53ef\u80fd\u5728\u8fbe\u5230\u4e00\u5b9a\u9ad8\u5ea6\u540e\u56de\u8c03\u81f3\u6b64\u6c34\u5e73\u3002\u5728\u4e0b\u964d\u8d8b\u52bf\u4e2d\uff0c\u4ef7\u683c\u53ef\u80fd\u5728\u8fbe\u5230\u4e00\u5b9a\u4f4e\u70b9\u540e\u56de\u8c03\u81f3\u6b64\u6c34\u5e73\u3002</p> </li> <li> <p>38.2%\u6c34\u5e73\uff1a \u8fd9\u662f\u53e6\u4e00\u4e2a\u91cd\u8981\u7684Fibonacci\u56de\u8c03\u6c34\u5e73\uff0c\u901a\u5e38\u7528\u4e8e\u8bc6\u522b\u66f4\u6df1\u7684\u56de\u8c03\u3002\u5728\u8d8b\u52bf\u4e2d\uff0c\u4ef7\u683c\u53ef\u80fd\u5728\u8fbe\u5230\u9ad8\u70b9\u6216\u4f4e\u70b9\u540e\u56de\u8c03\u81f3\u6b64\u6c34\u5e73\u3002</p> </li> <li> <p>50%\u6c34\u5e73\uff1a \u8fd9\u4e0d\u662f\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u5b83\u5728\u6280\u672f\u5206\u6790\u4e2d\u4ecd\u7136\u5e38\u5e38\u88ab\u89c6\u4e3a\u91cd\u8981\u6c34\u5e73\u3002\u4ef7\u683c\u56de\u8c03\u81f350%\u6c34\u5e73\u901a\u5e38\u8868\u793a\u4e00\u79cd\u4e2d\u6027\u6216\u5e73\u8861\u72b6\u6001\u3002</p> </li> <li> <p>61.8%\u6c34\u5e73\uff1a \u8fd9\u662f\u6700\u5e38\u7528\u7684Fibonacci\u56de\u8c03\u6c34\u5e73\u4e4b\u4e00\uff0c\u901a\u5e38\u7528\u4e8e\u6807\u8bc6\u8f83\u6df1\u7684\u56de\u8c03\u3002\u5728\u8d8b\u52bf\u4e2d\uff0c\u4ef7\u683c\u53ef\u80fd\u5728\u8fbe\u5230\u9ad8\u70b9\u6216\u4f4e\u70b9\u540e\u56de\u8c03\u81f3\u6b64\u6c34\u5e73\u3002</p> </li> <li> <p>76.4%\u6c34\u5e73\uff1a \u8fd9\u662f\u53e6\u4e00\u4e2a\u8f83\u6df1\u7684\u56de\u8c03\u6c34\u5e73\uff0c\u6709\u65f6\u88ab\u7528\u4f5c\u652f\u6491\u6216\u963b\u529b\u6c34\u5e73\u3002</p> </li> </ul> <p>2. Fibonacci\u6269\u5c55\u6c34\u5e73\uff1a</p> <ul> <li> <p>100%\u6c34\u5e73\uff1a \u8fd9\u662f\u4ef7\u683c\u7684\u8d77\u59cb\u70b9\uff0c\u4e0e0%\u6c34\u5e73\u76f8\u5bf9\u5e94\u3002\u5728\u6280\u672f\u5206\u6790\u4e2d\uff0c\u4ef7\u683c\u8fbe\u5230100%\u6c34\u5e73\u901a\u5e38\u8868\u793a\u53ef\u80fd\u51fa\u73b0\u5b8c\u5168\u7684\u4ef7\u683c\u53cd\u8f6c\u3002</p> </li> <li> <p>123.6%\u6c34\u5e73\uff1a \u8fd9\u662f\u7528\u4e8e\u6807\u8bc6\u8f83\u6df1\u7684\u4ef7\u683c\u53cd\u8f6c\u70b9\u7684\u6269\u5c55\u6c34\u5e73\u3002\u5728\u8d8b\u52bf\u4e2d\uff0c\u4ef7\u683c\u53ef\u80fd\u5728\u8fbe\u5230\u4e00\u5b9a\u9ad8\u5ea6\u540e\u53cd\u8f6c\u81f3\u6b64\u6c34\u5e73\u3002</p> </li> <li> <p>138.2%\u6c34\u5e73\uff1a \u8fd9\u662f\u53e6\u4e00\u4e2a\u6269\u5c55\u6c34\u5e73\uff0c\u901a\u5e38\u7528\u4e8e\u8bc6\u522b\u66f4\u6df1\u7684\u4ef7\u683c\u53cd\u8f6c\u3002</p> </li> <li> <p>161.8%\u6c34\u5e73\uff1a \u8fd9\u662f\u6700\u5e38\u7528\u7684Fibonacci\u6269\u5c55\u6c34\u5e73\u4e4b\u4e00\uff0c\u901a\u5e38\u7528\u4e8e\u6807\u8bc6\u8f83\u6df1\u7684\u4ef7\u683c\u53cd\u8f6c\u70b9\u3002</p> </li> <li> <p>200%\u6c34\u5e73\uff1a \u8fd9\u662f\u4ef7\u683c\u7684\u7ec8\u70b9\uff0c\u4e0e0%\u6c34\u5e73\u76f8\u5bf9\u5e94\u3002\u5728\u6280\u672f\u5206\u6790\u4e2d\uff0c\u4ef7\u683c\u8fbe\u5230200%\u6c34\u5e73\u901a\u5e38\u8868\u793a\u53ef\u80fd\u51fa\u73b0\u5b8c\u5168\u7684\u4ef7\u683c\u53cd\u8f6c\u3002</p> </li> </ul> <p>Fibonacci\u56de\u8c03\u548c\u6269\u5c55\u6c34\u5e73\u53ef\u4ee5\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u53ef\u80fd\u7684\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\uff0c\u4ee5\u53ca\u4ef7\u683c\u53cd\u8f6c\u7684\u6f5c\u5728\u70b9\u3002\u7136\u800c\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e9b\u6c34\u5e73\u5e76\u4e0d\u662f\u7edd\u5bf9\u7684\uff0c\u4e0d\u80fd\u5355\u72ec\u7528\u4e8e\u51b3\u7b56\u3002\u5b83\u4eec\u901a\u5e38\u9700\u8981\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5206\u6790\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u4f9b\u66f4\u5168\u9762\u7684\u5e02\u573a\u4fe1\u606f\u3002\u6b64\u5916\uff0c\u5e02\u573a\u4e2d\u7684\u4ef7\u683c\u884c\u4e3a\u53ef\u80fd\u4f1a\u53d7\u5230\u591a\u79cd\u56e0\u7d20\u7684\u5f71\u54cd\uff0c\u56e0\u6b64\u4ecd\u9700\u8981\u8c28\u614e\u5206\u6790\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#278","title":"27.8\uff1a\u5747\u7ebf\u4ea4\u53c9\u7b56\u7565","text":"<p>\u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u662f\u4e00\u79cd\u5e38\u7528\u4e8e\u6280\u672f\u5206\u6790\u548c\u80a1\u7968\u4ea4\u6613\u7684\u7b80\u5355\u4f46\u6709\u6548\u7684\u7b56\u7565\u3002\u8be5\u7b56\u7565\u5229\u7528\u4e0d\u540c\u65f6\u95f4\u5468\u671f\u7684\u79fb\u52a8\u5e73\u5747\u7ebf\u7684\u4ea4\u53c9\u6765\u8bc6\u522b\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u3002\u4ee5\u4e0b\u662f\u5bf9\u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>1. \u79fb\u52a8\u5e73\u5747\u7ebf\uff08Moving Averages\uff09\uff1a \u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u7684\u6838\u5fc3\u662f\u4f7f\u7528\u79fb\u52a8\u5e73\u5747\u7ebf\uff0c\u901a\u5e38\u5305\u62ec\u4ee5\u4e0b\u4e24\u79cd\u7c7b\u578b\uff1a</p> <ul> <li> <p>\u77ed\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\uff08Short-term Moving Average\uff09\uff1a \u901a\u5e38\u4f7f\u7528\u8f83\u77ed\u7684\u65f6\u95f4\u5468\u671f\uff0c\u598210\u5929\u621620\u5929\uff0c\u7528\u6765\u53cd\u6620\u8f83\u77ed\u671f\u7684\u4ef7\u683c\u8d8b\u52bf\u3002</p> </li> <li> <p>\u957f\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\uff08Long-term Moving Average\uff09\uff1a \u901a\u5e38\u4f7f\u7528\u8f83\u957f\u7684\u65f6\u95f4\u5468\u671f\uff0c\u598250\u5929\u6216200\u5929\uff0c\u7528\u6765\u53cd\u6620\u8f83\u957f\u671f\u7684\u4ef7\u683c\u8d8b\u52bf\u3002</p> </li> </ul> <p>2. \u4e70\u5165\u4fe1\u53f7\uff1a \u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u7684\u4e70\u5165\u4fe1\u53f7\u901a\u5e38\u53d1\u751f\u5728\u77ed\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u5411\u4e0a\u7a7f\u8d8a\u957f\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u65f6\uff0c\u8fd9\u88ab\u79f0\u4e3a\u201c\u9ec4\u91d1\u4ea4\u53c9\u201d\u3002\u8fd9\u610f\u5473\u7740\u77ed\u671f\u8d8b\u52bf\u6b63\u5728\u4e0a\u5347\uff0c\u53ef\u80fd\u662f\u4e70\u5165\u7684\u597d\u65f6\u673a\u3002</p> <p>3. \u5356\u51fa\u4fe1\u53f7\uff1a \u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u7684\u5356\u51fa\u4fe1\u53f7\u901a\u5e38\u53d1\u751f\u5728\u77ed\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u5411\u4e0b\u7a7f\u8d8a\u957f\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u65f6\uff0c\u8fd9\u88ab\u79f0\u4e3a\u201c\u6b7b\u4ea1\u4ea4\u53c9\u201d\u3002\u8fd9\u610f\u5473\u7740\u77ed\u671f\u8d8b\u52bf\u6b63\u5728\u4e0b\u964d\uff0c\u53ef\u80fd\u662f\u5356\u51fa\u7684\u597d\u65f6\u673a\u3002</p> <p>4. \u786e\u8ba4\u4fe1\u53f7\uff1a \u4e00\u4e9b\u4ea4\u6613\u8005\u4f7f\u7528\u5176\u4ed6\u6280\u672f\u6307\u6807\u6216\u4ef7\u683c\u6a21\u5f0f\u6765\u786e\u8ba4\u5747\u7ebf\u4ea4\u53c9\u4fe1\u53f7\u7684\u6709\u6548\u6027\u3002\u4f8b\u5982\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u67e5\u770b\u76f8\u5bf9\u5f3a\u5ea6\u6307\u6807\uff08RSI\uff09\u6216MACD\u6307\u6807\uff0c\u4ee5\u786e\u4fdd\u5e02\u573a\u5904\u4e8e\u8d8b\u52bf\u72b6\u6001\u3002</p> <p>5. \u98ce\u9669\u7ba1\u7406\uff1a \u5728\u6267\u884c\u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u65f6\uff0c\u98ce\u9669\u7ba1\u7406\u975e\u5e38\u91cd\u8981\u3002\u4ea4\u6613\u8005\u901a\u5e38\u4f1a\u8bbe\u5b9a\u6b62\u635f\u548c\u6b62\u76c8\u6c34\u5e73\uff0c\u4ee5\u63a7\u5236\u98ce\u9669\u5e76\u4fdd\u62a4\u5229\u6da6\u3002\u6b62\u635f\u6c34\u5e73\u901a\u5e38\u8bbe\u7f6e\u5728\u4e70\u5165\u4ef7\u683c\u4e0b\u65b9\uff0c\u800c\u6b62\u76c8\u6c34\u5e73\u5219\u6839\u636e\u5e02\u573a\u6761\u4ef6\u548c\u4ea4\u6613\u8005\u7684\u76ee\u6807\u800c\u5b9a\u3002</p> <p>6. \u9002\u7528\u6027\uff1a \u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u9002\u7528\u4e8e\u4e0d\u540c\u5e02\u573a\u548c\u8d44\u4ea7\uff0c\u5305\u62ec\u80a1\u7968\u3001\u5916\u6c47\u3001\u671f\u8d27\u548c\u52a0\u5bc6\u8d27\u5e01\u3002\u7136\u800c\uff0c\u5b83\u53ef\u80fd\u5728\u4e0d\u540c\u5e02\u573a\u73af\u5883\u4e0b\u8868\u73b0\u4e0d\u540c\uff0c\u56e0\u6b64\u9700\u8981\u6839\u636e\u5e02\u573a\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\u3002</p> <p>7. \u7f3a\u70b9\uff1a \u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u6709\u65f6\u4f1a\u4ea7\u751f\u865a\u5047\u4fe1\u53f7\uff0c\u7279\u522b\u662f\u5728\u5e02\u573a\u5904\u4e8e\u6a2a\u76d8\u6216\u9707\u8361\u72b6\u6001\u65f6\u3002\u56e0\u6b64\uff0c\u4ea4\u6613\u8005\u9700\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u5e76\u7ed3\u5408\u5176\u4ed6\u6307\u6807\u548c\u5206\u6790\u65b9\u6cd5\u6765\u63d0\u9ad8\u51c6\u786e\u6027\u3002</p> <p>\u603b\u4e4b\uff0c\u5747\u7ebf\u4ea4\u53c9\u7b56\u7565\u662f\u4e00\u79cd\u7b80\u5355\u4f46\u5e38\u7528\u7684\u6280\u672f\u5206\u6790\u7b56\u7565\uff0c\u7528\u4e8e\u8bc6\u522b\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u3002\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u4ea4\u6613\u51b3\u7b56\u7684\u8d77\u70b9\uff0c\u4f46\u4ea4\u6613\u8005\u9700\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u5e76\u7ed3\u5408\u5176\u4ed6\u56e0\u7d20\u6765\u8fdb\u884c\u7efc\u5408\u5206\u6790\u548c\u98ce\u9669\u7ba1\u7406\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#279-ichimoku","title":"27.9\uff1a Ichimoku\u4e91","text":"<p> Ichimoku\u4e91\uff0c\u4e5f\u79f0\u4e3a**\u4e00\u76ee\u5747\u8861\u56fe**\uff0c\u662f\u4e00\u79cd\u7efc\u5408\u6027\u7684\u6280\u672f\u5206\u6790\u5de5\u5177\uff0c\u6700\u521d\u7531\u65e5\u672c\u5206\u6790\u5e08\u517c\u8bb0\u8005\u4e00\u76ee\u5c71\u4eba\uff08Goichi Hosoda\uff09\u572820\u4e16\u7eaa20\u5e74\u4ee3\u5f00\u53d1\u3002\u8be5\u5de5\u5177\u65e8\u5728\u63d0\u4f9b\u6709\u5173\u8d44\u4ea7\u4ef7\u683c\u8d8b\u52bf\u3001\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u4ee5\u53ca\u672a\u6765\u4ef7\u683c\u8d70\u52bf\u7684\u7efc\u5408\u4fe1\u606f\u3002Ichimoku\u4e91\u7531\u591a\u4e2a\u7ec4\u6210\u90e8\u5206\u7ec4\u6210\uff0c\u4ee5\u4e0b\u662f\u5bf9\u6bcf\u4e2a\u7ec4\u6210\u90e8\u5206\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <p>1. \u8f6c\u6362\u7ebf\uff08\u8ee2\u63db\u7dda Tenkan-sen\uff09\uff1a \u8f6c\u6362\u7ebf\u662f\u8ba1\u7b97Ichimoku\u4e91\u7684\u7b2c\u4e00\u4e2a\u7ec4\u6210\u90e8\u5206\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u7ea2\u8272\u7ebf\u3002\u5b83\u662f\u6700\u8fd19\u4e2a\u4ea4\u6613\u65e5\u7684\u6700\u9ad8\u4ef7\u548c\u6700\u4f4e\u4ef7\u7684\u5e73\u5747\u503c\u3002\u8f6c\u6362\u7ebf\u7528\u4e8e\u63d0\u4f9b\u8fd1\u671f\u4ef7\u683c\u8d70\u52bf\u7684\u53c2\u8003\u3002</p> <p>2. \u57fa\u51c6\u7ebf\uff08\u57fa\u6e96\u7dda Kijun-sen\uff09\uff1a \u57fa\u51c6\u7ebf\u662f\u8ba1\u7b97Ichimoku\u4e91\u7684\u7b2c\u4e8c\u4e2a\u7ec4\u6210\u90e8\u5206\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u84dd\u8272\u7ebf\u3002\u5b83\u662f\u6700\u8fd126\u4e2a\u4ea4\u6613\u65e5\u7684\u6700\u9ad8\u4ef7\u548c\u6700\u4f4e\u4ef7\u7684\u5e73\u5747\u503c\u3002\u57fa\u51c6\u7ebf\u7528\u4e8e\u63d0\u4f9b\u4e2d\u671f\u4ef7\u683c\u8d70\u52bf\u7684\u53c2\u8003\u3002</p> <p>3. \u4e91\u5c42\uff08\u5148\u884c\u30b9\u30d1\u30f3 Senkou Span/Kumo\uff09\uff1a \u4e91\u5c42\u662fIchimoku\u4e91\u7684\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u4e4b\u4e00\uff0c\u5305\u62ec\u4e24\u6761\u7ebf\uff0c\u5206\u522b\u79f0\u4e3aSenkou Span A\u548cSenkou Span B\u3002Senkou Span A\u901a\u5e38\u8868\u793a\u4e3a\u6d45\u7eff\u8272\u7ebf\uff0c\u662f\u8f6c\u6362\u7ebf\u548c\u57fa\u51c6\u7ebf\u7684\u5e73\u5747\u503c\uff0c\u5411\u524d\u79fb\u52a826\u4e2a\u4ea4\u6613\u65e5\u3002Senkou Span B\u901a\u5e38\u8868\u793a\u4e3a\u6df1\u7eff\u8272\u7ebf\uff0c\u662f\u6700\u8fd152\u4e2a\u4ea4\u6613\u65e5\u7684\u6700\u9ad8\u4ef7\u548c\u6700\u4f4e\u4ef7\u7684\u5e73\u5747\u503c\uff0c\u5411\u524d\u79fb\u52a826\u4e2a\u4ea4\u6613\u65e5\u3002\u4e91\u5c42\u7684\u989c\u8272\u8868\u793a\u4ef7\u683c\u8d70\u52bf\u7684\u65b9\u5411\uff0c\u4f8b\u5982\uff0c\u4e91\u5c42\u7531\u6d45\u7eff\u8272\u53d8\u4e3a\u6df1\u7eff\u8272\u53ef\u80fd\u8868\u793a\u4e0a\u5347\u8d8b\u52bf\u3002</p> <p>4. \u672a\u6765\u4e91\uff08Future Cloud\uff09\uff1a \u672a\u6765\u4e91\u662fIchimoku\u4e91\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u901a\u5e38\u7531\u4e24\u4e2aSenkou Span\u7ebf\u7ec4\u6210\uff0c\u5373Senkou Span A\u548cSenkou Span B\u3002\u672a\u6765\u4e91\u7684\u989c\u8272\u4e5f\u8868\u793a\u4ef7\u683c\u8d70\u52bf\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u7528\u6765\u9884\u6d4b\u672a\u6765\u4ef7\u683c\u8d8b\u52bf\u3002\u4e91\u5c42\u548c\u672a\u6765\u4e91\u4e4b\u95f4\u7684\u533a\u57df\u79f0\u4e3a\u201c\u4e91\u4e2d\u201d\u4e5f\u53eb\u96f2 kumo (\u62b5\u6297\u5e2f teikoutai )\uff0c\u53ef\u4ee5\u7528\u6765\u8bc6\u522b\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u3002</p> <p>5. \u5ef6\u8fdf\u7ebf\uff08\u9045\u884c\u30b9\u30d1\u30f3 Chikou Span\uff09\uff1a \u5ef6\u8fdf\u7ebf\u662fIchimoku\u4e91\u7684\u6700\u540e\u4e00\u4e2a\u7ec4\u6210\u90e8\u5206\uff0c\u901a\u5e38\u8868\u793a\u4e3a\u6a59\u8272\u7ebf\u3002\u5b83\u662f\u5f53\u524d\u6536\u76d8\u4ef7\u79fb\u52a8\u5230\u8fc7\u53bb26\u4e2a\u4ea4\u6613\u65e5\u7684\u7ebf\u3002\u5ef6\u8fdf\u7ebf\u7528\u4e8e\u63d0\u4f9b\u4ef7\u683c\u8d70\u52bf\u7684\u786e\u8ba4\uff0c\u5f53\u5ef6\u8fdf\u7ebf\u5728\u4e91\u5c42\u6216\u672a\u6765\u4e91\u4e4b\u4e0a\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u4e0a\u5347\u8d8b\u52bf\uff0c\u5f53\u5b83\u5728\u4e91\u5c42\u6216\u672a\u6765\u4e91\u4e4b\u4e0b\u65f6\uff0c\u53ef\u80fd\u8868\u793a\u4e0b\u964d\u8d8b\u52bf\u3002</p> <p>Ichimoku\u4e91\u7684\u4e3b\u8981\u5e94\u7528\u5305\u62ec\uff1a</p> <ul> <li> <p>\u8bc6\u522b\u8d8b\u52bf\uff1aIchimoku\u4e91\u53ef\u4ee5\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u4ef7\u683c\u7684\u957f\u671f\u548c\u4e2d\u671f\u8d8b\u52bf\u3002\u4e0a\u5347\u8d8b\u52bf\u901a\u5e38\u8868\u73b0\u4e3a\u4e91\u5c42\u7531\u6d45\u7eff\u8272\u53d8\u4e3a\u6df1\u7eff\u8272\uff0c\u800c\u4e0b\u964d\u8d8b\u52bf\u5219\u76f8\u53cd\u3002</p> </li> <li> <p>\u652f\u6491\u548c\u963b\u529b\uff1a\u4e91\u5c42\u548c\u672a\u6765\u4e91\u4e2d\u7684\u533a\u57df\u53ef\u4ee5\u7528\u4f5c\u652f\u6491\u548c\u963b\u529b\u6c34\u5e73\u7684\u53c2\u8003\u3002</p> </li> <li> <p>\u4e70\u5356\u4fe1\u53f7\uff1a\u5747\u7ebf\u7684\u4ea4\u53c9\u4ee5\u53ca\u4ef7\u683c\u4e0e\u4e91\u5c42\u7684\u76f8\u5bf9\u4f4d\u7f6e\u53ef\u4ee5\u63d0\u4f9b\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u3002</p> </li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cIchimoku\u4e91\u662f\u4e00\u79cd\u590d\u6742\u7684\u5de5\u5177\uff0c\u901a\u5e38\u9700\u8981\u6df1\u5165\u5b66\u4e60\u548c\u7406\u89e3\u3002\u4ea4\u6613\u8005\u5e94\u8be5\u8c28\u614e\u4f7f\u7528\uff0c\u5e76\u7ed3\u5408\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5e02\u573a\u5206\u6790\u65b9\u6cd5\u6765\u8fdb\u884c\u7efc\u5408\u5206\u6790\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#2710williams-r","title":"27.10\uff1a\u5a01\u5ec9\u6307\u6807\uff08Williams %R\uff09","text":"<p>\u5a01\u5ec9\u6307\u6807\uff08Williams %R\uff09\uff0c\u4e5f\u79f0\u4e3a\u5a01\u5ec9\u8d85\u4e70\u8d85\u5356\u6307\u6807\uff0c\u662f\u4e00\u79cd\u7528\u4e8e\u8861\u91cf\u5e02\u573a\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u7684\u52a8\u91cf\u632f\u8361\u6307\u6807\u3002\u5b83\u662f\u7531\u62c9\u91cc\u00b7\u5a01\u5ec9\u65af\uff08Larry Williams\uff09\u572820\u4e16\u7eaa70\u5e74\u4ee3\u5f00\u53d1\u7684\u3002\u5a01\u5ec9\u6307\u6807\u7684\u4e3b\u8981\u76ee\u6807\u662f\u5e2e\u52a9\u4ea4\u6613\u8005\u8bc6\u522b\u4ef7\u683c\u53cd\u8f6c\u70b9\uff0c\u5e76\u63d0\u4f9b\u4e70\u5165\u548c\u5356\u51fa\u7684\u65f6\u673a\u3002</p> <p>\u4ee5\u4e0b\u662f\u5a01\u5ec9\u6307\u6807\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li>\u8ba1\u7b97\u65b9\u5f0f\uff1a \u5a01\u5ec9\u6307\u6807\u7684\u8ba1\u7b97\u57fa\u4e8e\u4ee5\u4e0b\u516c\u5f0f\uff1a</li> </ol> <p>\u5a01\u5ec9%R = [\uff08\u6700\u9ad8\u4ef7 - \u5f53\u524d\u6536\u76d8\u4ef7\uff09 / \uff08\u6700\u9ad8\u4ef7 - \u6700\u4f4e\u4ef7\uff09] * (-100)</p> <ul> <li>\u6700\u9ad8\u4ef7\u662f\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u7684\u6700\u9ad8\u4ef7\u683c\u3002</li> <li>\u6700\u4f4e\u4ef7\u662f\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u7684\u6700\u4f4e\u4ef7\u683c\u3002</li> <li>\u5f53\u524d\u6536\u76d8\u4ef7\u662f\u5f53\u524d\u5468\u671f\u7684\u6536\u76d8\u4ef7\u683c\u3002</li> </ul> <p>\u5a01\u5ec9%R\u7684\u503c\u901a\u5e38\u5728-100\u52300\u4e4b\u95f4\u6ce2\u52a8\uff0c\u5176\u4e2d-100\u8868\u793a\u5e02\u573a\u5904\u4e8e\u6700\u8d85\u5356\u72b6\u6001\uff0c0\u8868\u793a\u5e02\u573a\u5904\u4e8e\u6700\u8d85\u4e70\u72b6\u6001\u3002</p> <ol> <li> <p>\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff1a \u5a01\u5ec9\u6307\u6807\u7684\u4e3b\u8981\u5e94\u7528\u662f\u8bc6\u522b\u5e02\u573a\u7684\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\u3002\u5f53\u5a01\u5ec9%R\u7684\u503c\u4f4d\u4e8e-80\u6216\u66f4\u9ad8\u65f6\uff0c\u901a\u5e38\u88ab\u8ba4\u4e3a\u5e02\u573a\u5904\u4e8e\u8d85\u5356\u72b6\u6001\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4ef7\u683c\u4e0a\u6da8\u7684\u673a\u4f1a\u3002\u76f8\u53cd\uff0c\u5f53\u5a01\u5ec9%R\u7684\u503c\u4f4d\u4e8e-20\u6216\u66f4\u4f4e\u65f6\uff0c\u901a\u5e38\u88ab\u8ba4\u4e3a\u5e02\u573a\u5904\u4e8e\u8d85\u4e70\u72b6\u6001\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u4ef7\u683c\u4e0b\u8dcc\u7684\u673a\u4f1a\u3002</p> </li> <li> <p>\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\uff1a \u5a01\u5ec9\u6307\u6807\u7684\u4e70\u5165\u548c\u5356\u51fa\u4fe1\u53f7\u901a\u5e38\u57fa\u4e8e\u4ee5\u4e0b\u6761\u4ef6\uff1a</p> </li> <li> <p>\u4e70\u5165\u4fe1\u53f7\uff1a\u5f53\u5a01\u5ec9%R\u7684\u503c\u4ece\u8d85\u5356\u533a\u57df\u5411\u4e0a\u7a7f\u8d8a-20\u65f6\uff0c\u4ea7\u751f\u4e70\u5165\u4fe1\u53f7\u3002\u8fd9\u8868\u793a\u5e02\u573a\u53ef\u80fd\u6b63\u5728\u4ece\u8d85\u5356\u72b6\u6001\u4e2d\u53cd\u5f39\uff0c\u5e76\u53ef\u80fd\u8fce\u6765\u4ef7\u683c\u4e0a\u6da8\u3002</p> </li> <li> <p>\u5356\u51fa\u4fe1\u53f7\uff1a\u5f53\u5a01\u5ec9%R\u7684\u503c\u4ece\u8d85\u4e70\u533a\u57df\u5411\u4e0b\u7a7f\u8d8a-80\u65f6\uff0c\u4ea7\u751f\u5356\u51fa\u4fe1\u53f7\u3002\u8fd9\u8868\u793a\u5e02\u573a\u53ef\u80fd\u6b63\u5728\u4ece\u8d85\u4e70\u72b6\u6001\u4e2d\u56de\u8c03\uff0c\u5e76\u53ef\u80fd\u8fce\u6765\u4ef7\u683c\u4e0b\u8dcc\u3002</p> </li> <li> <p>\u80cc\u79bb\uff08Divergence\uff09\uff1a \u4ea4\u6613\u8005\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5a01\u5ec9\u6307\u6807\u4e0e\u4ef7\u683c\u56fe\u5f62\u4e4b\u95f4\u7684\u80cc\u79bb\u6765\u786e\u8ba4\u4fe1\u53f7\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4ef7\u683c\u521b\u4e0b\u65b0\u9ad8\u800c\u5a01\u5ec9%R\u6ca1\u6709\u521b\u65b0\u9ad8\uff0c\u8fd9\u53ef\u80fd\u8868\u793a\u4ef7\u683c\u53cd\u8f6c\u7684\u4fe1\u53f7\u3002</p> </li> <li> <p>\u9002\u7528\u6027\uff1a \u5a01\u5ec9\u6307\u6807\u9002\u7528\u4e8e\u5404\u79cd\u5e02\u573a\uff0c\u5305\u62ec\u80a1\u7968\u3001\u5916\u6c47\u3001\u671f\u8d27\u548c\u52a0\u5bc6\u8d27\u5e01\u3002\u7136\u800c\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5b83\u5728\u4e0d\u540c\u5e02\u573a\u73af\u5883\u4e0b\u8868\u73b0\u53ef\u80fd\u4e0d\u540c\uff0c\u56e0\u6b64\u4ea4\u6613\u8005\u5e94\u8be5\u8c28\u614e\u4f7f\u7528\uff0c\u5e76\u7ed3\u5408\u5176\u4ed6\u6280\u672f\u6307\u6807\u548c\u5206\u6790\u65b9\u6cd5\u6765\u63d0\u9ad8\u51c6\u786e\u6027\u3002</p> </li> </ol> <p>\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u5a01\u5ec9\u6307\u6807\u662f\u4e00\u79cd\u52a8\u91cf\u632f\u8361\u6307\u6807\uff0c\u901a\u5e38\u7528\u4e8e\u77ed\u671f\u4ea4\u6613\u3002\u4ea4\u6613\u8005\u5e94\u8be5\u5c06\u5176\u4e0e\u5176\u4ed6\u5206\u6790\u5de5\u5177\u548c\u98ce\u9669\u7ba1\u7406\u7b56\u7565\u7ed3\u5408\u4f7f\u7528\uff0c\u4ee5\u4f5c\u51fa\u66f4\u660e\u667a\u7684\u4ea4\u6613\u51b3\u7b56\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#2711average-directional-movement-indexadx","title":"27.11\uff1a\u5747\u5e45\u6307\u6807\uff08Average Directional Movement Index\uff0cADX\uff09","text":"<p>\u5747\u5e45\u6307\u6807\uff08Average Directional Movement Index\uff0cADX\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u8861\u91cf\u5e02\u573a\u8d8b\u52bf\u5f3a\u5ea6\u548c\u65b9\u5411\u7684\u6280\u672f\u6307\u6807\u3002\u5b83\u662f\u7531\u5a01\u5c14\u65af\u00b7\u5a01\u5c14\u5fb7\uff08Welles Wilder\uff09\u57281978\u5e74\u9996\u6b21\u5f15\u5165\uff0c\u5e76\u5728\u4ed6\u7684\u8457\u4f5c\u300a\u65b0\u6982\u5ff5\u6280\u672f\u5206\u6790\u300b\u4e2d\u8be6\u7ec6\u63cf\u8ff0\u3002ADX\u7684\u4e3b\u8981\u7528\u9014\u662f\u5e2e\u52a9\u4ea4\u6613\u8005\u786e\u8ba4\u662f\u5426\u5b58\u5728\u8d8b\u52bf\u5e76\u8bc4\u4f30\u8d8b\u52bf\u7684\u5f3a\u5ea6\u3002\u4ee5\u4e0b\u662f\u5bf9ADX\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li>\u8ba1\u7b97\u65b9\u5f0f\uff1a ADX\u7684\u8ba1\u7b97\u57fa\u4e8e\u4e00\u7cfb\u5217\u7684\u6b65\u9aa4\uff1a</li> </ol> <p>a. \u771f\u5b9e\u8303\u56f4\uff08True Range\uff09\uff1a \u9996\u5148\uff0c\u9700\u8981\u8ba1\u7b97\u6bcf\u4e2a\u5468\u671f\u7684\u771f\u5b9e\u8303\u56f4\u3002\u771f\u5b9e\u8303\u56f4\u662f\u4ee5\u4e0b\u4e09\u4e2a\u503c\u4e2d\u7684\u6700\u5927\u503c\uff1a</p> <pre><code>  - \u5f53\u524d\u5468\u671f\u7684\u6700\u9ad8\u4ef7\u4e0e\u6700\u4f4e\u4ef7\u4e4b\u5dee\u3002\n  - \u5f53\u524d\u5468\u671f\u7684\u6700\u9ad8\u4ef7\u4e0e\u524d\u4e00\u4e2a\u5468\u671f\u7684\u6536\u76d8\u4ef7\u4e4b\u5dee\u7684\u7edd\u5bf9\u503c\u3002\n  - \u5f53\u524d\u5468\u671f\u7684\u6700\u4f4e\u4ef7\u4e0e\u524d\u4e00\u4e2a\u5468\u671f\u7684\u6536\u76d8\u4ef7\u4e4b\u5dee\u7684\u7edd\u5bf9\u503c\u3002\n</code></pre> <p>b. \u65b9\u5411\u5b9a\u5411\u8fd0\u52a8\uff08Directional Movement\uff09\uff1a \u63a5\u4e0b\u6765\uff0c\u9700\u8981\u8ba1\u7b97\u6b63\u65b9\u5411\u5b9a\u5411\u8fd0\u52a8\uff08+DI\uff09\u548c\u8d1f\u65b9\u5411\u5b9a\u5411\u8fd0\u52a8\uff08-DI\uff09\u3002\u8fd9\u4e9b\u503c\u7528\u4e8e\u6d4b\u91cf\u4e0a\u5347\u548c\u4e0b\u964d\u7684\u8d8b\u52bf\u65b9\u5411\u3002+DI\u8868\u793a\u4e0a\u5347\u8d8b\u52bf\u65b9\u5411\uff0c\u800c-DI\u8868\u793a\u4e0b\u964d\u8d8b\u52bf\u65b9\u5411\u3002</p> <p>c. \u65b9\u5411\u5b9a\u5411\u8fd0\u52a8\u6307\u6570\uff08Directional Movement Index\uff0cDX\uff09\uff1a DX\u662f+DI\u548c-DI\u4e4b\u95f4\u7684\u5dee\u503c\u7684\u7edd\u5bf9\u503c\u9664\u4ee5\u5b83\u4eec\u7684\u548c\u7684\u767e\u5206\u6bd4\u3002</p> <p>d. \u5e73\u5747\u65b9\u5411\u5b9a\u5411\u8fd0\u52a8\u6307\u6570\uff08Average Directional Movement Index\uff0cADX\uff09\uff1a \u6700\u540e\uff0cADX\u662fDX\u7684\u79fb\u52a8\u5e73\u5747\u7ebf\uff0c\u901a\u5e38\u4f7f\u752814\u4e2a\u5468\u671f\u7684\u7b80\u5355\u79fb\u52a8\u5e73\u5747\u7ebf\u3002</p> <ol> <li> <p>ADX\u7684\u53d6\u503c\u8303\u56f4\uff1a ADX\u7684\u503c\u901a\u5e38\u57280\u5230100\u4e4b\u95f4\uff0c\u8868\u793a\u5e02\u573a\u8d8b\u52bf\u7684\u5f3a\u5ea6\u3002\u4e00\u822c\u6765\u8bf4\uff0cADX\u7684\u503c\u8d8a\u9ad8\uff0c\u8d8b\u52bf\u8d8a\u5f3a\u3002\u5f53ADX\u7684\u503c\u9ad8\u4e8e25\u523030\u65f6\uff0c\u901a\u5e38\u88ab\u89c6\u4e3a\u8d8b\u52bf\u5f3a\u5ea6\u8db3\u591f\uff0c\u53ef\u4ee5\u8003\u8651\u8fdb\u884c\u8d8b\u52bf\u8ddf\u968f\u4ea4\u6613\u3002\u5f53ADX\u7684\u503c\u4f4e\u4e8e25\u523020\u65f6\uff0c\u901a\u5e38\u88ab\u89c6\u4e3a\u5e02\u573a\u5904\u4e8e\u975e\u8d8b\u52bf\u72b6\u6001\uff0c\u53ef\u80fd\u66f4\u9002\u5408\u8fdb\u884c\u533a\u95f4\u4ea4\u6613\u6216\u907f\u514d\u4ea4\u6613\u3002</p> </li> <li> <p>ADX\u7684\u5e94\u7528\uff1a ADX\u53ef\u4ee5\u7528\u4e8e\u4ee5\u4e0b\u65b9\u5f0f\uff1a</p> </li> <li> <p>\u786e\u8ba4\u8d8b\u52bf\uff1a ADX\u53ef\u4ee5\u5e2e\u52a9\u4ea4\u6613\u8005\u786e\u8ba4\u5e02\u573a\u662f\u5426\u5904\u4e8e\u8d8b\u52bf\u72b6\u6001\u3002\u5f53ADX\u7684\u503c\u5347\u9ad8\u65f6\uff0c\u8868\u793a\u5e02\u573a\u53ef\u80fd\u5904\u4e8e\u5f3a\u70c8\u7684\u8d8b\u52bf\u4e2d\uff0c\u53ef\u4ee5\u8003\u8651\u8ddf\u968f\u8d8b\u52bf\u4ea4\u6613\u3002\u53cd\u4e4b\uff0c\u5f53ADX\u7684\u503c\u4f4e\u65f6\uff0c\u5e02\u573a\u53ef\u80fd\u5904\u4e8e\u9707\u8361\u6216\u6a2a\u76d8\u72b6\u6001\u3002</p> </li> <li> <p>\u8bc4\u4f30\u8d8b\u52bf\u5f3a\u5ea6\uff1a ADX\u7684\u503c\u53ef\u4ee5\u7528\u6765\u8bc4\u4f30\u8d8b\u52bf\u7684\u5f3a\u5ea6\u3002\u8f83\u9ad8\u7684ADX\u503c\u8868\u793a\u8d8b\u52bf\u66f4\u5f3a\u70c8\uff0c\u800c\u8f83\u4f4e\u7684ADX\u503c\u8868\u793a\u8d8b\u52bf\u8f83\u5f31\u3002</p> </li> <li> <p>\u786e\u5b9a\u4ea4\u6613\u7b56\u7565\uff1a \u4ea4\u6613\u8005\u53ef\u4ee5\u5c06ADX\u4e0e\u5176\u4ed6\u6280\u672f\u6307\u6807\u7ed3\u5408\u4f7f\u7528\uff0c\u4f8b\u5982\u79fb\u52a8\u5e73\u5747\u7ebf\u6216\u76f8\u5bf9\u5f3a\u5ea6\u6307\u6807\uff08RSI\uff09\uff0c\u6765\u5236\u5b9a\u4ea4\u6613\u7b56\u7565\u3002</p> </li> </ol> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cADX\u662f\u4e00\u4e2a\u5ef6\u8fdf\u6307\u6807\uff0c\u56e0\u4e3a\u5b83\u662f\u57fa\u4e8e\u4e00\u5b9a\u5468\u671f\u7684\u6570\u636e\u8ba1\u7b97\u7684\u3002\u4ea4\u6613\u8005\u5e94\u8be5\u5c06ADX\u4e0e\u5176\u4ed6\u5206\u6790\u5de5\u5177\u548c\u98ce\u9669\u7ba1\u7406\u7b56\u7565\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u4f5c\u51fa\u660e\u667a\u7684\u4ea4\u6613\u51b3\u7b56\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#2712multiple-time-frame-analysis","title":"27.12\uff1a\u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\uff08Multiple Time Frame Analysis\uff09","text":"<p>\u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\uff08Multiple Time Frame Analysis\uff09\u662f\u4e00\u79cd\u5e7f\u6cdb\u7528\u4e8e\u6280\u672f\u5206\u6790\u548c\u4ea4\u6613\u51b3\u7b56\u7684\u65b9\u6cd5\u3002\u5b83\u7684\u57fa\u672c\u7406\u5ff5\u662f\uff0c\u5728\u8fdb\u884c\u6280\u672f\u5206\u6790\u65f6\uff0c\u4e0d\u4ec5\u8981\u8003\u8651\u5355\u4e00\u7684\u65f6\u95f4\u6846\u67b6\uff08\u4f8b\u5982\u65e5\u7ebf\u56fe\u6216\u5c0f\u65f6\u56fe\uff09\uff0c\u800c\u662f\u8981\u540c\u65f6\u8003\u8651\u591a\u4e2a\u4e0d\u540c\u65f6\u95f4\u5468\u671f\u7684\u56fe\u8868\uff0c\u4ee5\u83b7\u5f97\u66f4\u5168\u9762\u7684\u5e02\u573a\u4fe1\u606f\u548c\u66f4\u53ef\u9760\u7684\u4ea4\u6613\u4fe1\u53f7\u3002\u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\u6709\u52a9\u4e8e\u4ea4\u6613\u8005\u66f4\u597d\u5730\u4e86\u89e3\u5e02\u573a\u7684\u5927\u8d8b\u52bf\u3001\u4e2d\u671f\u8d8b\u52bf\u548c\u77ed\u671f\u8d8b\u52bf\uff0c\u4ee5\u4fbf\u66f4\u660e\u667a\u5730\u505a\u51fa\u4ea4\u6613\u51b3\u7b56\u3002</p> <p>\u4ee5\u4e0b\u662f\u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\u7684\u8be6\u7ec6\u89e3\u91ca\uff1a</p> <ol> <li> <p>\u9009\u62e9\u591a\u4e2a\u65f6\u95f4\u6846\u67b6\uff1a \u9996\u5148\uff0c\u4ea4\u6613\u8005\u9700\u8981\u9009\u62e9\u591a\u4e2a\u4e0d\u540c\u7684\u65f6\u95f4\u6846\u67b6\u6765\u5206\u6790\u5e02\u573a\u3002\u901a\u5e38\uff0c\u4f1a\u9009\u62e9\u957f\u671f\u3001\u4e2d\u671f\u548c\u77ed\u671f\u65f6\u95f4\u6846\u67b6\uff0c\u5982\u65e5\u7ebf\u56fe\uff08\u957f\u671f\uff09\u30014\u5c0f\u65f6\u56fe\uff08\u4e2d\u671f\uff09\u548c1\u5c0f\u65f6\u56fe\uff08\u77ed\u671f\uff09\u3002</p> </li> <li> <p>\u5206\u6790\u957f\u671f\u8d8b\u52bf\uff1a \u5728\u6700\u957f\u65f6\u95f4\u6846\u67b6\u4e0a\uff0c\u4ea4\u6613\u8005\u5c06\u67e5\u770b\u5e02\u573a\u7684\u957f\u671f\u8d8b\u52bf\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u5b9a\u5e02\u573a\u7684\u4e3b\u8981\u8d8b\u52bf\u65b9\u5411\uff0c\u4f8b\u5982\u662f\u5426\u662f\u4e0a\u5347\u3001\u4e0b\u964d\u6216\u6a2a\u76d8\u3002\u957f\u671f\u8d8b\u52bf\u5206\u6790\u901a\u5e38\u6d89\u53ca\u5230\u8d8b\u52bf\u7ebf\u3001\u79fb\u52a8\u5e73\u5747\u7ebf\u548c\u5176\u4ed6\u957f\u671f\u6307\u6807\u7684\u4f7f\u7528\u3002</p> </li> <li> <p>\u5206\u6790\u4e2d\u671f\u8d8b\u52bf\uff1a \u5728\u4e2d\u671f\u65f6\u95f4\u6846\u67b6\u4e0a\uff0c\u4ea4\u6613\u8005\u5c06\u66f4\u8be6\u7ec6\u5730\u7814\u7a76\u5e02\u573a\u7684\u4e2d\u671f\u8d8b\u52bf\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u5b9a\u957f\u671f\u8d8b\u52bf\u4e2d\u7684\u6b21\u8981\u6ce2\u52a8\u3002\u4e2d\u671f\u8d8b\u52bf\u901a\u5e38\u4ee5\u51e0\u5929\u5230\u51e0\u5468\u4e3a\u5355\u4f4d\u3002\u4ea4\u6613\u8005\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u6280\u672f\u5de5\u5177\uff0c\u5982MACD\uff08\u79fb\u52a8\u5e73\u5747\u6536\u655b\u6563\u5ea6\uff09\u6216RSI\uff08\u76f8\u5bf9\u5f3a\u5f31\u6307\u6807\uff09\u6765\u5206\u6790\u4e2d\u671f\u8d8b\u52bf\u3002</p> </li> <li> <p>\u5206\u6790\u77ed\u671f\u8d8b\u52bf\uff1a \u5728\u77ed\u671f\u65f6\u95f4\u6846\u67b6\u4e0a\uff0c\u4ea4\u6613\u8005\u5c06\u66f4\u4ed4\u7ec6\u5730\u89c2\u5bdf\u5e02\u573a\u7684\u77ed\u671f\u6ce2\u52a8\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u5b9a\u5728\u4e2d\u671f\u548c\u957f\u671f\u8d8b\u52bf\u4e2d\u7684\u9002\u5f53\u5165\u573a\u548c\u51fa\u573a\u70b9\u3002\u77ed\u671f\u8d8b\u52bf\u901a\u5e38\u4ee5\u51e0\u5c0f\u65f6\u5230\u51e0\u5929\u4e3a\u5355\u4f4d\u3002\u5728\u8fd9\u4e2a\u65f6\u95f4\u6846\u67b6\u4e0a\uff0c\u4ea4\u6613\u8005\u53ef\u80fd\u4f7f\u7528\u6280\u672f\u5206\u6790\u4e2d\u7684\u5404\u79cd\u56fe\u5f62\u548c\u4fe1\u53f7\uff0c\u5982\u5934\u80a9\u9876\u548c\u53cc\u5e95\uff0c\u4ee5\u53ca\u77ed\u671f\u79fb\u52a8\u5e73\u5747\u7ebf\u3002</p> </li> <li> <p>\u534f\u8c03\u5206\u6790\u7ed3\u679c\uff1a \u6700\u540e\uff0c\u4ea4\u6613\u8005\u9700\u8981\u534f\u8c03\u4e0d\u540c\u65f6\u95f4\u6846\u67b6\u7684\u5206\u6790\u7ed3\u679c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u957f\u671f\u8d8b\u52bf\u662f\u4e0a\u5347\u7684\uff0c\u4e2d\u671f\u8d8b\u52bf\u4e5f\u662f\u4e0a\u5347\u7684\uff0c\u90a3\u4e48\u77ed\u671f\u5185\u51fa\u73b0\u7684\u4e0b\u8dcc\u53ef\u80fd\u53ea\u662f\u77ed\u671f\u6ce2\u52a8\uff0c\u800c\u4e0d\u662f\u53cd\u8f6c\u8d8b\u52bf\u7684\u4fe1\u53f7\u3002\u8fd9\u79cd\u534f\u8c03\u6709\u52a9\u4e8e\u907f\u514d\u9519\u8bef\u7684\u4ea4\u6613\u51b3\u7b56\u3002</p> </li> </ol> <p>\u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\u7684\u4f18\u52bf\u5728\u4e8e\u5b83\u63d0\u4f9b\u4e86\u66f4\u5168\u9762\u7684\u5e02\u573a\u89c6\u89d2\uff0c\u6709\u52a9\u4e8e\u964d\u4f4e\u4ea4\u6613\u8005\u56e0\u77ed\u671f\u6ce2\u52a8\u800c\u505a\u51fa\u7684\u9519\u8bef\u51b3\u7b56\u7684\u98ce\u9669\u3002\u7136\u800c\uff0c\u8fd9\u4e5f\u9700\u8981\u66f4\u591a\u7684\u65f6\u95f4\u548c\u5206\u6790\u5de5\u4f5c\uff0c\u56e0\u6b64\u9700\u8981\u4ea4\u6613\u8005\u6709\u8010\u5fc3\u548c\u6280\u672f\u5206\u6790\u7684\u77e5\u8bc6\u3002</p> <p>\u6700\u540e\uff0c\u591a\u91cd\u65f6\u95f4\u6846\u67b6\u5206\u6790\u4e0d\u662f\u4e00\u79cd\u7edd\u5bf9\u7684\u6210\u529f\u65b9\u6cd5\uff0c\u800c\u662f\u4e00\u79cd\u5e2e\u52a9\u4ea4\u6613\u8005\u66f4\u597d\u5730\u7406\u89e3\u5e02\u573a\u7684\u5de5\u5177\u3002\u6210\u529f\u7684\u4ea4\u6613\u8fd8\u4f9d\u8d56\u4e8e\u98ce\u9669\u7ba1\u7406\u3001\u8d44\u91d1\u7ba1\u7406\u548c\u5fc3\u7406\u63a7\u5236\u7b49\u5176\u4ed6\u56e0\u7d20\u3002</p>"},{"location":"PART%20II%20%E8%BF%9B%E9%98%B6%E9%83%A8%E5%88%86/Chapter%2027%20%E5%B8%B8%E8%A7%81%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/#2713","title":"27.13 \u6307\u6807\u7684\u9074\u9009\u548c\u5e94\u7528","text":"<p>\u6709\u8fd9\u4e48\u591a\u5224\u65ad\u8d85\u5356\u8d85\u4e70\u7684\u6307\u6807\uff0c\u5230\u5e95\u8be5\u600e\u4e48\u9009\u62e9\u5462\uff1f\u9009\u62e9\u54ea\u79cd\u6307\u6807\u6765\u5224\u65ad\u8d85\u4e70\u548c\u8d85\u5356\u60c5\u51b5\uff0c\u4ee5\u53ca\u5176\u4ed6\u6280\u672f\u5206\u6790\u5de5\u5177\uff0c\u53d6\u51b3\u4e8e\u4f60\u7684\u4e2a\u4eba\u504f\u597d\u3001\u4ea4\u6613\u7b56\u7565\u548c\u5e02\u573a\u72b6\u51b5\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5efa\u8bae\uff0c\u5e2e\u52a9\u4f60\u5728\u4f7f\u7528\u8fd9\u4e9b\u6307\u6807\u65f6\u4f5c\u51fa\u660e\u667a\u7684\u9009\u62e9\uff1a</p> <ol> <li> <p>\u4e86\u89e3\u4e0d\u540c\u6307\u6807\u7684\u539f\u7406\u548c\u8ba1\u7b97\u65b9\u6cd5\uff1a \u9996\u5148\uff0c\u4f60\u5e94\u8be5\u6df1\u5165\u4e86\u89e3\u6bcf\u4e2a\u6307\u6807\u7684\u5de5\u4f5c\u539f\u7406\u3001\u8ba1\u7b97\u65b9\u5f0f\u4ee5\u53ca\u5b83\u4eec\u6240\u8861\u91cf\u7684\u5e02\u573a\u7279\u5f81\u3002\u8fd9\u5c06\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u5b83\u4eec\u5728\u4e0d\u540c\u5e02\u573a\u60c5\u51b5\u4e0b\u7684\u9002\u7528\u6027\u3002</p> </li> <li> <p>\u6839\u636e\u4ea4\u6613\u7b56\u7565\u9009\u62e9\u6307\u6807\uff1a \u4f60\u7684\u4ea4\u6613\u7b56\u7565\u5e94\u8be5\u662f\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e9b\u6307\u6807\u7684\u5173\u952e\u56e0\u7d20\u3002\u4e0d\u540c\u7684\u7b56\u7565\u53ef\u80fd\u9700\u8981\u4e0d\u540c\u7c7b\u578b\u7684\u6307\u6807\u3002\u4f8b\u5982\uff0c\u65e5\u5185\u4ea4\u6613\u8005\u53ef\u80fd\u66f4\u5173\u5fc3\u77ed\u671f\u6ce2\u52a8\uff0c\u800c\u957f\u671f\u6295\u8d44\u8005\u53ef\u80fd\u66f4\u5173\u5fc3\u8d8b\u52bf\u7684\u957f\u671f\u65b9\u5411\u3002</p> </li> <li> <p>\u591a\u6307\u6807\u786e\u8ba4\uff1a \u901a\u5e38\uff0c\u4e0d\u5e94\u8be5\u4f9d\u8d56\u5355\u4e00\u6307\u6807\u6765\u505a\u51fa\u51b3\u7b56\u3002\u76f8\u53cd\uff0c\u4f7f\u7528\u591a\u4e2a\u6307\u6807\u6765\u786e\u8ba4\u4fe1\u53f7\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4f60\u7684\u51b3\u7b56\u7684\u53ef\u9760\u6027\u3002\u4f8b\u5982\uff0c\u5f53\u591a\u4e2a\u6307\u6807\u540c\u65f6\u663e\u793a\u8d85\u4e70\u4fe1\u53f7\u65f6\uff0c\u8fd9\u53ef\u80fd\u66f4\u5177\u8bf4\u670d\u529b\u3002</p> </li> <li> <p>\u4e86\u89e3\u5e02\u573a\u6761\u4ef6\uff1a \u4e0d\u540c\u7684\u5e02\u573a\u6761\u4ef6\u4e0b\uff0c\u4e0d\u540c\u7684\u6307\u6807\u53ef\u80fd\u66f4\u6709\u6548\u3002\u5728\u5e73\u9759\u7684\u5e02\u573a\u4e2d\uff0c\u53ef\u80fd\u66f4\u5bb9\u6613\u51fa\u73b0\u8d85\u4e70\u6216\u8d85\u5356\u60c5\u51b5\uff0c\u800c\u5728\u8d8b\u52bf\u660e\u663e\u7684\u5e02\u573a\u4e2d\uff0c\u5176\u4ed6\u8d8b\u52bf\u8ddf\u8e2a\u6307\u6807\u53ef\u80fd\u66f4\u6709\u7528\u3002</p> </li> <li> <p>\u9002\u5e94\u65f6\u95f4\u5468\u671f\uff1a \u9009\u62e9\u6307\u6807\u65f6\uff0c\u8981\u8003\u8651\u4f60\u6240\u4ea4\u6613\u7684\u65f6\u95f4\u5468\u671f\u3002\u67d0\u4e9b\u6307\u6807\u53ef\u80fd\u5728\u8f83\u77ed\u65f6\u95f4\u6846\u67b6\u4e0a\u66f4\u4e3a\u6709\u6548\uff0c\u800c\u5176\u4ed6\u6307\u6807\u53ef\u80fd\u5728\u8f83\u957f\u65f6\u95f4\u6846\u67b6\u4e0a\u66f4\u4e3a\u6709\u6548\u3002</p> </li> <li> <p>\u5b9e\u8df5\u548c\u56de\u6d4b\uff1a \u5728\u771f\u5b9e\u5e02\u573a\u4e4b\u524d\uff0c\u5148\u5728\u6a21\u62df\u73af\u5883\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u6307\u6807\u8fdb\u884c\u56de\u6d4b\u548c\u5b9e\u8df5\u3002\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u4f60\u4e86\u89e3\u4e0d\u540c\u6307\u6807\u7684\u8868\u73b0\uff0c\u5e76\u627e\u5230\u6700\u9002\u5408\u4f60\u7684\u7b56\u7565\u7684\u6307\u6807\u7ec4\u5408\u3002</p> </li> <li> <p>\u98ce\u9669\u7ba1\u7406\uff1a \u65e0\u8bba\u4f60\u9009\u62e9\u54ea\u4e9b\u6307\u6807\uff0c\u90fd\u8981\u8bb0\u4f4f\u98ce\u9669\u7ba1\u7406\u7684\u91cd\u8981\u6027\u3002\u4e0d\u8981\u4ec5\u4ec5\u4f9d\u8d56\u6307\u6807\u6765\u505a\u51fa\u51b3\u7b56\uff0c\u800c\u662f\u5c06\u5176\u4f5c\u4e3a\u6574\u4e2a\u4ea4\u6613\u8ba1\u5212\u7684\u4e00\u90e8\u5206\u3002</p> </li> </ol> <p>\u6700\u7ec8\uff0c\u9009\u62e9\u54ea\u4e9b\u6307\u6807\u662f\u4e00\u9879\u4e2a\u4eba\u5316\u7684\u51b3\u7b56\uff0c\u9700\u8981\u57fa\u4e8e\u4f60\u7684\u4ea4\u6613\u76ee\u6807\u3001\u98ce\u9669\u627f\u53d7\u80fd\u529b\u548c\u5e02\u573a\u6761\u4ef6\u505a\u51fa\u3002\u5efa\u8bae\u4e0e\u5176\u4ed6\u7ecf\u9a8c\u4e30\u5bcc\u7684\u4ea4\u6613\u8005\u4ea4\u6d41\uff0c\u5b66\u4e60\u4ed6\u4eec\u7684\u65b9\u6cd5\uff0c\u5e76\u6839\u636e\u81ea\u5df1\u7684\u7ecf\u9a8c\u4e0d\u65ad\u4f18\u5316\u4f60\u7684\u4ea4\u6613\u7b56\u7565\u3002</p> <p>\u5224\u65ad\u8fd9\u4e9b\u6307\u6807\u5728\u56de\u6d4b\u4e2d\u7684\u8868\u73b0\u9700\u8981\u8fdb\u884c\u7cfb\u7edf\u6027\u7684\u5206\u6790\u548c\u8bc4\u4f30\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6b65\u9aa4\uff0c\u672a\u6765\u4f1a\u5e2e\u52a9\u6211\u4eec\u6765\u8bc4\u4f30\u6307\u6807\u5728\u56de\u6d4b\u4e2d\u7684\u8868\u73b0\uff1a</p> <ol> <li>\u9009\u62e9\u56de\u6d4b\u5e73\u53f0\u548c\u6570\u636e\u6e90\uff1a \u9996\u5148\uff0c\u9009\u62e9\u4e00\u4e2a\u53ef\u4fe1\u8d56\u7684\u56de\u6d4b\u5e73\u53f0\u6216\u8f6f\u4ef6\uff0c\u5e76\u83b7\u53d6\u9ad8\u8d28\u91cf\u7684\u5386\u53f2\u5e02\u573a\u6570\u636e\u3002\u786e\u4fdd\u6211\u4eec\u7684\u56de\u6d4b\u73af\u5883\u4e0e\u5b9e\u9645\u4ea4\u6613\u6761\u4ef6\u5c3d\u53ef\u80fd\u4e00\u81f4\u3002</li> <li>\u5236\u5b9a\u660e\u786e\u7684\u4ea4\u6613\u7b56\u7565\uff1a \u5728\u56de\u6d4b\u4e4b\u524d\uff0c\u660e\u786e\u5b9a\u4e49\u6211\u4eec\u7684\u4ea4\u6613\u7b56\u7565\uff0c\u5305\u62ec\u5165\u573a\u89c4\u5219\u3001\u51fa\u573a\u89c4\u5219\u3001\u6b62\u635f\u548c\u6b62\u76c8\u7b56\u7565\uff0c\u4ee5\u53ca\u8d44\u672c\u7ba1\u7406\u89c4\u5219\u3002\u786e\u4fdd\u7b56\u7565\u6e05\u6670\u4e14\u53ef\u64cd\u4f5c\u3002</li> <li>\u56de\u6d4b\u53c2\u6570\u8bbe\u7f6e\uff1a \u9488\u5bf9\u6bcf\u4e2a\u6307\u6807\uff0c\u8bbe\u7f6e\u9002\u5f53\u7684\u53c2\u6570\u503c\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8eRSI\uff0c\u6211\u4eec\u53ef\u4ee5\u6d4b\u8bd5\u4e0d\u540c\u7684\u5468\u671f\uff08\u901a\u5e38\u662f14\u5929\uff09\uff0c\u5e76\u786e\u5b9a\u54ea\u4e2a\u5468\u671f\u5728\u5386\u53f2\u6570\u636e\u4e0a\u8868\u73b0\u6700\u597d\u3002</li> <li>\u56de\u6d4b\u65f6\u95f4\u6bb5\uff1a \u9009\u62e9\u4e00\u4e2a\u9002\u5f53\u7684\u56de\u6d4b\u65f6\u95f4\u6bb5\uff0c\u53ef\u4ee5\u662f\u51e0\u5e74\u6216\u66f4\u957f\u65f6\u95f4\u7684\u5386\u53f2\u6570\u636e\u3002\u786e\u4fdd\u6db5\u76d6\u4e0d\u540c\u5e02\u573a\u60c5\u51b5\uff0c\u5305\u62ec\u8d8b\u52bf\u5e02\u548c\u6a2a\u76d8\u5e02\u3002</li> <li>\u6267\u884c\u56de\u6d4b\uff1a \u4f7f\u7528\u6240\u9009\u7684\u56de\u6d4b\u5e73\u53f0\u6267\u884c\u56de\u6d4b\uff0c\u6839\u636e\u6211\u4eec\u7684\u7b56\u7565\u548c\u53c2\u6570\u503c\u751f\u6210\u4ea4\u6613\u4fe1\u53f7\uff0c\u5e76\u6a21\u62df\u5b9e\u9645\u4ea4\u6613\u3002\u8bb0\u5f55\u6bcf\u7b14\u4ea4\u6613\u7684\u5165\u573a\u548c\u51fa\u573a\u4ef7\u683c\u3001\u6b62\u635f\u548c\u6b62\u76c8\u6c34\u5e73\uff0c\u4ee5\u53ca\u4ea4\u6613\u6210\u672c\uff08\u5982\u624b\u7eed\u8d39\u548c\u6ed1\u70b9\uff09\u3002</li> <li>\u7ee9\u6548\u5ea6\u91cf\uff1a \u8bc4\u4f30\u56de\u6d4b\u7684\u7ee9\u6548\u3002\u5e38\u89c1\u7684\u7ee9\u6548\u5ea6\u91cf\u5305\u62ec\uff1a</li> <li>\u7d2f\u79ef\u56de\u62a5\u7387\uff08Cumulative Returns\uff09\uff1a \u67e5\u770b\u7b56\u7565\u7684\u603b\u56de\u62a5\u3002</li> <li>\u80dc\u7387\uff08Win Rate\uff09\uff1a \u8ba1\u7b97\u83b7\u5229\u4ea4\u6613\u7684\u6bd4\u4f8b\u3002</li> <li>\u6700\u5927\u56de\u64a4\uff08Maximum Drawdown\uff09\uff1a \u8bc6\u522b\u7b56\u7565\u5728\u6700\u5dee\u60c5\u51b5\u4e0b\u53ef\u80fd\u906d\u53d7\u7684\u635f\u5931\u3002</li> <li>\u590f\u666e\u6bd4\u7387\uff08Sharpe Ratio\uff09\uff1a \u8861\u91cf\u6bcf\u5355\u4f4d\u98ce\u9669\u6240\u4ea7\u751f\u7684\u56de\u62a5\u3002</li> <li>\u5e74\u5316\u56de\u62a5\u7387\uff08Annualized Returns\uff09\uff1a \u5c06\u56de\u62a5\u7387 annualize \u4e3a\u5e74\u5ea6\u6c34\u5e73\u3002</li> <li>\u4f18\u5316\u53c2\u6570\uff1a \u5982\u679c\u56de\u6d4b\u7ed3\u679c\u4e0d\u7406\u60f3\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4e0d\u540c\u7684\u53c2\u6570\u7ec4\u5408\u6216\u4fee\u6539\u7b56\u7565\u89c4\u5219\uff0c\u7136\u540e\u91cd\u65b0\u8fdb\u884c\u56de\u6d4b\uff0c\u4ee5\u5bfb\u627e\u66f4\u597d\u7684\u8868\u73b0\u3002</li> <li>\u98ce\u9669\u7ba1\u7406\uff1a \u5728\u56de\u6d4b\u4e2d\u4e5f\u8981\u8003\u8651\u98ce\u9669\u7ba1\u7406\u7b56\u7565\uff0c\u5982\u6b62\u635f\u548c\u6b62\u76c8\u6c34\u5e73\u7684\u8bbe\u7f6e\uff0c\u4ee5\u53ca\u5934\u5bf8\u89c4\u6a21\u7684\u7ba1\u7406\u3002</li> <li>\u5b9e\u65f6\u6a21\u62df\u6d4b\u8bd5\uff1a \u6700\u540e\uff0c\u5728\u56de\u6d4b\u8868\u73b0\u826f\u597d\u540e\uff0c\u8fdb\u884c\u5b9e\u65f6\u6a21\u62df\u6d4b\u8bd5\u4ee5\u9a8c\u8bc1\u7b56\u7565\u5728\u5b9e\u9645\u5e02\u573a\u6761\u4ef6\u4e0b\u7684\u8868\u73b0\u3002</li> </ol> <p>\u4e0d\u8fc7\u6700\u597d\u8fd8\u662f\u8981\u6709\u8fd9\u4e2a\u610f\u8bc6\u2014\u2014\u56de\u6d4b\u662f\u4e00\u79cd\u6709\u9650\u5236\u7684\u6a21\u62df\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u672a\u6765\u8868\u73b0\u4e0e\u5386\u53f2\u8868\u73b0\u76f8\u540c\u3002\u5e02\u573a\u6761\u4ef6\u4f1a\u4e0d\u65ad\u53d8\u5316\uff0c\u56e0\u6b64\uff0c\u6211\u5efa\u8bae\u6211\u4eec\u5e94\u8be5\u5c06\u56de\u6d4b\u4f5c\u4e3a\u7b56\u7565\u5f00\u53d1\u7684\u4e00\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6700\u7ec8\u7684\u552f\u4e00\u51b3\u7b56\u4f9d\u636e\u3002\u6b64\u5916\uff0c\u5728\u672a\u6765\u6211\u4eec\u8981\u6301\u7eed\u6ce8\u610f\u907f\u514d\u4ed6\u548c7th\u8fc7\u5ea6\u62df\u5408\uff08\u8fc7\u5ea6\u4f18\u5316\uff09\u7684\u95ee\u9898\uff0c\u4e0d\u8981\u8fc7\u4e8e\u4f9d\u8d56\u7279\u5b9a\u7684\u53c2\u6570\u7ec4\u5408\uff0c\u800c\u662f\u5bfb\u627e\u7a33\u5065\u7684\u7b56\u7565\u3002\u6700\u597d\u7684\u65b9\u6cd5\u662f\u6301\u7eed\u76d1\u6d4b\u548c\u4f18\u5316\u6211\u4eec\u7684\u4ea4\u6613\u7b56\u7565\uff0c\u4ee5\u9002\u5e94\u4e0d\u65ad\u53d8\u5316\u7684\u5e02\u573a\u3002</p>"}]}